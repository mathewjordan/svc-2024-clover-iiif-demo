(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[165],{4470:function(e){"use strict";var t=Object.prototype.hasOwnProperty,n=Object.prototype.toString,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,a=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===n.call(e)},s=function(e){if(!e||"[object Object]"!==n.call(e))return!1;var r,i=t.call(e,"constructor"),a=e.constructor&&e.constructor.prototype&&t.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!i&&!a)return!1;for(r in e);return void 0===r||t.call(e,r)},o=function(e,t){r&&"__proto__"===t.name?r(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},l=function(e,n){if("__proto__"===n){if(!t.call(e,n))return;if(i)return i(e,n).value}return e[n]};e.exports=function e(){var t,n,r,i,c,u,d=arguments[0],h=1,p=arguments.length,f=!1;for("boolean"==typeof d&&(f=d,d=arguments[1]||{},h=2),(null==d||"object"!=typeof d&&"function"!=typeof d)&&(d={});h<p;++h)if(t=arguments[h],null!=t)for(n in t)r=l(d,n),d!==(i=l(t,n))&&(f&&i&&(s(i)||(c=a(i)))?(c?(c=!1,u=r&&a(r)?r:[]):u=r&&s(r)?r:{},o(d,{name:n,newValue:e(f,u,i)})):void 0!==i&&o(d,{name:n,newValue:i}));return d}},9821:function(e,t,n){"use strict";let r=n(4579).parse,i=n(7799).compile,a=n(7094).segment,s=n(1105);e.exports={parse:r,compile:i,segment:a,hls:s}},7799:function(e){"use strict";function t(e,t){this.message=e,this.error=t}function n(e){let t=r(Math.floor(e/60/60),2),n=r(Math.floor(e/60)%60,2),i=r(Math.floor(e%60),2),a=r(Math.floor(1e3*(e%1).toFixed(4)),3);return`${t}:${n}:${i}.${a}`}function r(e,t){let n=`${e}`;for(;n.length<t;)n=`0${n}`;return n}t.prototype=Object.create(Error.prototype),e.exports={CompilerError:t,compile:function(e){if(!e)throw new t("Input must be non-null");if("object"!=typeof e)throw new t("Input must be an object");if(Array.isArray(e))throw new t("Input cannot be array");if(!e.valid)throw new t("Input must be valid");let r="WEBVTT\n";if(e.meta){if("object"!=typeof e.meta||Array.isArray(e.meta))throw new t("Metadata must be an object");Object.entries(e.meta).forEach(e=>{if("string"!=typeof e[1])throw new t(`Metadata value for "${e[0]}" must be string`);r+=`${e[0]}: ${e[1]}
`})}let i=null;return e.cues.forEach((e,a)=>{if(i&&i>e.start)throw new t(`Cue number ${a} is not in chronological order`);i=e.start,r+="\n"+function(e){if("object"!=typeof e)throw new t("Cue malformed: not of type object");if("string"!=typeof e.identifier&&"number"!=typeof e.identifier&&null!==e.identifier)throw new t(`Cue malformed: identifier value is not a string.
    ${JSON.stringify(e)}`);if(isNaN(e.start))throw new t(`Cue malformed: null start value.
    ${JSON.stringify(e)}`);if(isNaN(e.end))throw new t(`Cue malformed: null end value.
    ${JSON.stringify(e)}`);if(e.start>=e.end)throw new t(`Cue malformed: start timestamp greater than end
    ${JSON.stringify(e)}`);if("string"!=typeof e.text)throw new t(`Cue malformed: null text value.
    ${JSON.stringify(e)}`);if("string"!=typeof e.styles)throw new t(`Cue malformed: null styles value.
    ${JSON.stringify(e)}`);let r="";e.identifier.length>0&&(r+=`${e.identifier}
`);let i=n(e.start),a=n(e.end);return r+(`${i} --> ${a}`+(e.styles?` ${e.styles}`:""))+`
${e.text}`}(e)+"\n"}),r}}},1105:function(e,t,n){"use strict";let r=n(7094).segment;function i(e,t){let n="0".repeat(Math.max(0,t-e.toString().length));return`${n}${e}`}function a(e){let t=(e%1).toFixed(3),n=Math.floor((e=Math.round(e-t))/3600),r=Math.floor((e-3600*n)/60),a=e-3600*n-60*r,s=`${i(n,2)}:`;return`${s}${i(r,2)}:${i(a,2)}.${i(1e3*t,3)}`}e.exports={hlsSegment:function(e,t,n){void 0===n&&(n="900000");let i=r(e,t),s=[];return i.forEach((e,t)=>{let r=`WEBVTT
X-TIMESTAMP-MAP=MPEGTS:${n},LOCAL:00:00:00.000

${function(e){let t=[];return e.forEach(e=>{t.push(function(e){let t=[];e.identifier&&t.push(e.identifier);let n=a(e.start),r=a(e.end),i=e.styles?`${e.styles}`:"";return t.push(`${n} --> ${r} ${i}`),t.push(e.text),t.join("\n")}(e))}),t.join("\n\n")}(e.cues)}
`,i=`${t}.vtt`;s.push({filename:i,content:r})}),s},hlsSegmentPlaylist:function(e,t){let n;let i=r(e,t),a=function(e){let t=[];return e.forEach((e,n)=>{t.push(`#EXTINF:${e.duration.toFixed(5)},
${n}.vtt`)}),t.join("\n")}(i),s=Math.round((n=0,i.forEach(e=>{e.duration>n&&(n=e.duration)}),n));return`#EXTM3U
#EXT-X-TARGETDURATION:${s}
#EXT-X-VERSION:3
#EXT-X-MEDIA-SEQUENCE:0
#EXT-X-PLAYLIST-TYPE:VOD
${a}
#EXT-X-ENDLIST
`}}},4579:function(e){"use strict";function t(e,t){this.message=e,this.error=t}t.prototype=Object.create(Error.prototype);let n=/([0-9]+)?:?([0-9]{2}):([0-9]{2}\.[0-9]{2,3})/;function r(e){let t=e.match(n);return 3600*parseFloat(t[1]||0)+(60*parseFloat(t[2])+parseFloat(t[3]))}e.exports={ParserError:t,parse:function(e,i){i||(i={});let{meta:a=!1,strict:s=!0}=i;if("string"!=typeof e)throw new t("Input must be a string");let o=(e=(e=(e=e.trim()).replace(/\r\n/g,"\n")).replace(/\r/g,"\n")).split("\n\n"),l=o.shift();if(!l.startsWith("WEBVTT"))throw new t('Must start with "WEBVTT"');let c=l.split("\n"),u=c[0].replace("WEBVTT","");if(u.length>0&&" "!==u[0]&&"	"!==u[0])throw new t("Header comment must start with space or tab");if(0===o.length&&1===c.length)return{valid:!0,strict:s,cues:[],errors:[]};if(!a&&c.length>1&&""!==c[1])throw new t("Missing blank line after signature");let{cues:d,errors:h}=function(e,i){let a=[];return{cues:e.map((e,s)=>{try{return function(e,i,a){var s,o;let l="",c=0,u=.01,d="",h="",p=e.split("\n").filter(Boolean);if(p.length>0&&p[0].trim().startsWith("NOTE"))return null;if(1===p.length&&!p[0].includes("-->"))throw new t(`Cue identifier cannot be standalone (cue #${i})`);if(p.length>1&&!(p[0].includes("-->")||p[1].includes("-->")))throw new t(`Cue identifier needs to be followed by timestamp (cue #${i})`);p.length>1&&p[1].includes("-->")&&(l=p.shift());let f="string"==typeof p[0]&&p[0].split(" --> ");if(2!==f.length||(s=f[0],!n.test(s))||(o=f[1],!n.test(o)))throw new t(`Invalid cue timestamp (cue #${i})`);if(c=r(f[0]),u=r(f[1]),a){if(c>u)throw new t(`Start timestamp greater than end (cue #${i})`);if(u<=c)throw new t(`End must be greater than start (cue #${i})`)}if(!a&&u<c)throw new t(`End must be greater or equal to start when not strict (cue #${i})`);return h=f[1].replace(n,"").trim(),p.shift(),!!(d=p.join("\n"))&&{identifier:l,start:c,end:u,text:d,styles:h}}(e,s,i)}catch(e){return a.push(e),null}}).filter(Boolean),errors:a}}(o,s);if(s&&h.length>0)throw h[0];let p=a?function(e){let t={};return e.slice(1).forEach(e=>{let n=e.indexOf(":"),r=e.slice(0,n).trim(),i=e.slice(n+1).trim();t[r]=i}),Object.keys(t).length>0?t:null}(c):null,f={valid:0===h.length,strict:s,cues:d,errors:h};return a&&(f.meta=p),f}}},7094:function(e,t,n){"use strict";let r=n(4579).parse;e.exports={segment:function(e,t){t=t||10;let n=r(e),i=[],a=[],s=null,o=0,l=0;return n.cues.forEach((e,r)=>{let c=0===r,u=r===n.cues.length-1,d=e.start,h=e.end,p=u?1/0:n.cues[r+1].start,f=c?h:h-d,m=c?0:d-n.cues[r-1].end;o=o+f+m,i.length,s&&(a.push(s),o+=s.end-l,s=null),a.push(e);let g=p-h<t&&m<t&&o>t;if(function(e,t,n,r){return(r<=t||r+(t-r%t)+e<n)&&n-e>=t}(l,t,p,m)){var E,T,v,y;let e;let n=(E=t,T=o,v=l,e=E,T>E&&(e=(y=T-E)+(E-y%E)),e=u?parseFloat((h-v).toFixed(2)):Math.round(e));i.push({duration:n,cues:a}),l+=n,o=0,a=[]}else g=!1;g&&(s=e)}),i}}},4887:function(e,t){!function(e){"use strict";function t(e){return null==e}function n(e){throw Error("Argument "+e+" is empty.")}function r(e){return"function"==typeof e&&"getType"in e}function i(e){throw Error("Argument "+e+' is invalid, it should be an action-creator instance from "typesafe-actions"')}function a(e,t){if(null==e)throw Error("Argument contains array with empty element at index "+t);if(null==e.getType)throw Error("Argument contains array with invalid element at index "+t+', it should be an action-creator instance from "typesafe-actions"')}function s(e){return"string"==typeof e||"symbol"==typeof e}function o(e){throw Error("Argument "+e+" is invalid, it should be an action type of type: string | symbol")}function l(e,t){if(null==e)throw Error("Argument contains array with empty element at index "+t);if("string"!=typeof e&&"symbol"!=typeof e)throw Error("Argument contains array with invalid element at index "+t+", it should be of type: string | symbol")}function c(e,r,a,o){return t(e)&&n(1),s(e)||i(1),{type:e,payload:r,meta:a,error:o}}function u(e,r){return t(e)&&n(1),s(e)||o(1),Object.assign(function(){var t=null!=r?r.apply(void 0,arguments):void 0;return Object.assign({type:e},t)},{getType:function(){return e},toString:function(){return e}})}function d(e,r,i){return t(e)&&n(1),s(e)||o(1),function(){return u(e,function(){var e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1];return null==r&&null==i||(e=null!=r?r.apply(void 0,arguments):void 0,t=null!=i?i.apply(void 0,arguments):void 0),Object.assign({},void 0!==e&&{payload:e},{},void 0!==t&&{meta:t})})}}function h(e){return t(e)&&n(1),r(e)||i(1),e.getType()}function p(e,r){return t(e)&&n(1),s(e)||o(1),Object.assign(null!=r?r(e):function(){return{type:e}},{getType:function(){return e},toString:function(){return e}})}e.action=c,e.createAction=d,e.createAsyncAction=function(e,t,n,r){return function(){var i=[e,t,n,r].map(function(e,t){return Array.isArray(e)?d(e[0],e[1],e[2])():"string"==typeof e||"symbol"==typeof e?d(e)():void(t<3&&function(e){throw Error("Argument "+e+' is invalid, it should be an action type of "string | symbol" or a tuple of "[string | symbol, Function, Function?]"')}(t))});return{request:i[0],success:i[1],failure:i[2],cancel:i[3]}}},e.createCustomAction=u,e.createReducer=function e(t,n){void 0===n&&(n={});var i=Object.assign({},n),a=function(n,a){var o=Array.isArray(n)?n:[n],l={};return o.map(function(e,t){return r(e)?h(e):s(e)?e:function(e){throw Error("Argument "+e+' is invalid, it should be an action-creator instance from "typesafe-actions" or action type of type: string | symbol')}(t+1)}).forEach(function(e){return l[e]=a}),e(t,Object.assign({},i,{},l))};return Object.assign(function(e,n){if(void 0===e&&(e=t),i.hasOwnProperty(n.type)){var r=i[n.type];if("function"!=typeof r)throw Error('Reducer under "'+n.type+'" key is not a valid reducer');return r(e,n)}return e},{handlers:Object.assign({},i),handleAction:a,handleType:a})},e.deprecated={createAction:function(e,t){return Object.assign(null==t?function(){return c(e)}:t(c.bind(null,e)),{getType:function(){return e},toString:function(){return e}})},createCustomAction:p,createStandardAction:function(e){return t(e)&&n(1),s(e)||o(1),Object.assign(function(){return p(e,function(e){return function(t,n){return{type:e,payload:t,meta:n}}})},{map:function(t){return p(e,function(e){return function(n,r){return Object.assign(t(n,r),{type:e})}})}})}},e.getType=h,e.isActionOf=function(e,r){t(e)&&n(1);var i=Array.isArray(e)?e:[e];i.forEach(a);var s=function(e){return i.some(function(t){return e.type===t.getType()})};return void 0===r?s:s(r)},e.isOfType=function(e,r){t(e)&&n(1);var i=Array.isArray(e)?e:[e];i.forEach(l);var a=function(e){return i.includes(e.type)};return void 0===r?a:a(r)}}(t)},8165:function(e,t,n){"use strict";let r,i,a,s,o,l,c,u;n.r(t),n.d(t,{Image:function(){return eH},Primitives:function(){return eU.default},Scroll:function(){return d7},Slider:function(){return p1},Viewer:function(){return TR},default:function(){return TD}});var d,h,p,f,m,g,E,T,v,y,A,b,_,C,S,I,x,k,w,N,O,R,L,D,M,P,F,B,H,U,G,z,j,$,W,V,Y,q,Q,X={};n.r(X),n.d(X,{boolean:function(){return n2},booleanish:function(){return n3},commaOrSpaceSeparated:function(){return n9},commaSeparated:function(){return n8},number:function(){return n5},overloadedBoolean:function(){return n4},spaceSeparated:function(){return n6}});var K={};n.r(K),n.d(K,{attentionMarkers:function(){return l3},contentInitial:function(){return lK},disable:function(){return l4},document:function(){return lX},flow:function(){return lJ},flowInitial:function(){return lZ},insideSpan:function(){return l2},string:function(){return l0},text:function(){return l1}});var Z=n(9203),J=n(7294);let ee=(0,J.createContext)(null),et={didCatch:!1,error:null};class en extends J.Component{constructor(e){super(e),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=et}static getDerivedStateFromError(e){return{didCatch:!0,error:e}}resetErrorBoundary(){let{error:e}=this.state;if(null!==e){for(var t,n,r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];null===(t=(n=this.props).onReset)||void 0===t||t.call(n,{args:i,reason:"imperative-api"}),this.setState(et)}}componentDidCatch(e,t){var n,r;null===(n=(r=this.props).onError)||void 0===n||n.call(r,e,t)}componentDidUpdate(e,t){let{didCatch:n}=this.state,{resetKeys:r}=this.props;if(n&&null!==t.error&&function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.length!==t.length||e.some((e,n)=>!Object.is(e,t[n]))}(e.resetKeys,r)){var i,a;null===(i=(a=this.props).onReset)||void 0===i||i.call(a,{next:r,prev:e.resetKeys,reason:"keys"}),this.setState(et)}}render(){let{children:e,fallbackRender:t,FallbackComponent:n,fallback:r}=this.props,{didCatch:i,error:a}=this.state,s=e;if(i){let e={error:a,resetErrorBoundary:this.resetErrorBoundary};if("function"==typeof t)s=t(e);else if(n)s=(0,J.createElement)(n,e);else if(null===r||(0,J.isValidElement)(r))s=r;else throw a}return(0,J.createElement)(ee.Provider,{value:{didCatch:i,error:a,resetErrorBoundary:this.resetErrorBoundary}},s)}}var er=n(6744),ei={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let ea=new Uint8Array(16),es=[];for(let e=0;e<256;++e)es.push((e+256).toString(16).slice(1));var eo=function(e,t,n){if(ei.randomUUID&&!t&&!e)return ei.randomUUID();let i=(e=e||{}).random||(e.rng||function(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(ea)})();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=i[e];return t}return function(e,t=0){return es[e[t+0]]+es[e[t+1]]+es[e[t+2]]+es[e[t+3]]+"-"+es[e[t+4]]+es[e[t+5]]+"-"+es[e[t+6]]+es[e[t+7]]+"-"+es[e[t+8]]+es[e[t+9]]+"-"+es[e[t+10]]+es[e[t+11]]+es[e[t+12]]+es[e[t+13]]+es[e[t+14]]+es[e[t+15]]}(i)};let el=window.OpenSeadragon;if(!el&&!(el=Z))throw Error("OpenSeadragon is missing.");let ec="http://www.w3.org/2000/svg";el.Viewer&&(el.Viewer.prototype.svgOverlay=function(){return this._svgOverlayInfo||(this._svgOverlayInfo=new eu(this)),this._svgOverlayInfo});let eu=function(e){let t=this;this._viewer=e,this._containerWidth=0,this._containerHeight=0,this._svg=document.createElementNS(ec,"svg"),this._svg.style.position="absolute",this._svg.style.left=0,this._svg.style.top=0,this._svg.style.width="100%",this._svg.style.height="100%",this._viewer.canvas.appendChild(this._svg),this._node=document.createElementNS(ec,"g"),this._svg.appendChild(this._node),this._viewer.addHandler("animation",function(){t.resize()}),this._viewer.addHandler("open",function(){t.resize()}),this._viewer.addHandler("rotate",function(){t.resize()}),this._viewer.addHandler("flip",function(){t.resize()}),this._viewer.addHandler("resize",function(){t.resize()}),this.resize()};eu.prototype={node:function(){return this._node},resize:function(){this._containerWidth!==this._viewer.container.clientWidth&&(this._containerWidth=this._viewer.container.clientWidth,this._svg.setAttribute("width",this._containerWidth)),this._containerHeight!==this._viewer.container.clientHeight&&(this._containerHeight=this._viewer.container.clientHeight,this._svg.setAttribute("height",this._containerHeight));let e=this._viewer.viewport.pixelFromPoint(new el.Point(0,0),!0),t=this._viewer.viewport.getZoom(!0),n=this._viewer.viewport.getRotation(),r=this._viewer.viewport.getFlip(),i=this._viewer.viewport._containerInnerSize.x,a=i*t,s=a;r&&(a=-a,e.x=-e.x+i),this._node.setAttribute("transform","translate("+e.x+","+e.y+") scale("+a+","+s+") rotate("+n+")")},onClick:function(e,t){new el.MouseTracker({element:e,clickHandler:t}).setTracking(!0)}};let ed=e=>fetch(`${e.replace(/\/$/,"")}/info.json`).then(e=>e.json()).then(e=>e).catch(t=>{console.error(`The IIIF tilesource ${e.replace(/\/$/,"")}/info.json failed to load: ${t}`)}),eh=e=>{let t,n;return Array.isArray(e)&&(t=e[0])&&(n="@id"in t?t["@id"]:t.id),n};var ep=((l=ep||{}).TiledImage="tiledImage",l.SimpleImage="simpleImage",l);let ef=e=>{let t=Array.isArray(null==e?void 0:e.service)&&(null==e?void 0:e.service.length)>0;return{uri:t?eh(null==e?void 0:e.service):null==e?void 0:e.id,imageType:t?ep.TiledImage:ep.SimpleImage}},em=(e,t)=>({uri:e,imageType:t?ep.TiledImage:ep.SimpleImage}),{styled:eg,css:eE,keyframes:eT,createTheme:ev}=(0,er.Th)({theme:{colors:{primary:"#1a1d1e",primaryMuted:"#26292b",primaryAlt:"#151718",accent:"hsl(209 100% 38.2%)",accentMuted:"hsl(209 80% 61.8%)",accentAlt:"hsl(209 80% 30%)",secondary:"#FFFFFF",secondaryMuted:"#e6e8eb",secondaryAlt:"#c1c8cd"},fontSizes:{1:"12px",2:"13px",3:"15px",4:"17px",5:"19px",6:"21px",7:"27px",8:"35px",9:"59px"},lineHeights:{1:"12px",2:"13px",3:"15px",4:"17px",5:"19px",6:"21px",7:"27px",8:"35px",9:"59px"},sizes:{1:"5px",2:"10px",3:"15px",4:"20px",5:"25px",6:"35px",7:"45px",8:"65px",9:"80px"},space:{1:"5px",2:"10px",3:"15px",4:"20px",5:"25px",6:"35px",7:"45px",8:"65px",9:"80px"},radii:{1:"4px",2:"6px",3:"8px",4:"12px",round:"50%",pill:"9999px"},transitions:{all:"all 300ms cubic-bezier(0.16, 1, 0.3, 1)"},zIndices:{1:"100",2:"200",3:"300",4:"400",max:"999"}},media:{xxs:"(max-width: 349px)",xs:"(max-width: 575px)",sm:"(max-width: 767px)",md:"(max-width: 991px)",lg:"(max-width: 90rem)",xl:"(min-width: calc(90rem + 1px))"}}),ey=eg("div",{display:"flex",flexDirection:"column",alignItems:"center"}),eA=eg("p",{fontWeight:"bold",fontSize:"x-large"}),eb=eg("span",{fontSize:"medium"}),e_=({error:e})=>{let{message:t}=e;return J.createElement(ey,{role:"alert"},J.createElement(eA,{"data-testid":"headline"},"Something went wrong"),t&&J.createElement(eb,null,`Error message: ${t}`," "))},eC=eg("div",{position:"absolute !important",zIndex:"1",top:"1rem",left:"1rem",width:"161.8px",height:"100px",backgroundColor:"#000D",boxShadow:"5px 5px 5px #0002",borderRadius:"3px",".displayregion":{border:" 3px solid $accent !important",boxShadow:"0 0 3px #0006"},"@sm":{width:"123px",height:"76px"},"@xs":{width:"100px",height:"61.8px"}}),eS=eg("div",{position:"relative",width:"100%",height:"100%",zIndex:"0"}),eI=eg("div",{width:"100%",height:"100%",maxHeight:"100vh",background:"transparent",backgroundSize:"contain",color:"white",position:"relative",zIndex:"0",overflow:"hidden",variants:{hasNavigator:{true:{[`${eC}`]:{display:"block"}},false:{[`${eC}`]:{display:"none"}}}}}),ex=eg("button",{display:"flex",height:"2rem",width:"2rem",borderRadius:"2rem",padding:"0",margin:"0",fontFamily:"inherit",background:"none",backgroundColor:"$primary",border:"none",color:"white",cursor:"pointer",marginLeft:"0.618rem",filter:"drop-shadow(2px 2px 5px #0003)",transition:"$all",boxSizing:"content-box !important","&:first-child":{marginLeft:"0"},"@xs":{marginBottom:"0.618rem",marginLeft:"0","&:last-child":{marginBottom:"0"}},svg:{height:"60%",width:"60%",padding:"20%",fill:"$secondary",stroke:"$secondary",filter:"drop-shadow(2px 2px 5px #0003)",transition:"$all",boxSizing:"inherit"},"&:hover, &:focus":{backgroundColor:"$accent"},"&[data-button=rotate-right]":{"&:hover, &:focus":{svg:{rotate:"45deg"}}},"&[data-button=rotate-left]":{transform:"scaleX(-1)","&:hover, &:focus":{svg:{rotate:"45deg"}}},"&[data-button=reset]":{"&:hover, &:focus":{svg:{rotate:"-15deg"}}}}),ek=({className:e,id:t,label:n,children:r})=>{let i=n.toLowerCase().replace(/\s/g,"-");return J.createElement(ex,{id:t,className:e,"data-testid":"openseadragon-button","data-button":i},J.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-labelledby":`${t}-svg-title`,"data-testid":"openseadragon-button-svg",focusable:"false",viewBox:"0 0 512 512",role:"img"},J.createElement("title",{id:`${t}-svg-title`},n),r))},ew=eg("div",{position:"absolute",zIndex:"1",top:"1rem",right:"1rem",display:"flex","@xs":{flexDirection:"column",zIndex:"2"},variants:{hasPlaceholder:{true:{right:"3.618rem","@xs":{top:"3.618rem",right:"1rem"}},false:{right:"1rem","@xs":{top:"1rem",right:"1rem"}}}}}),eN=()=>J.createElement("path",{strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M256 112v288M400 256H112"}),eO=()=>J.createElement("path",{strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M400 256H112"}),eR=()=>J.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M432 320v112H320M421.8 421.77L304 304M80 192V80h112M90.2 90.23L208 208M320 80h112v112M421.77 90.2L304 208M192 432H80V320M90.23 421.8L208 304"}),eL=()=>J.createElement("path",{d:"M448 440a16 16 0 01-12.61-6.15c-22.86-29.27-44.07-51.86-73.32-67C335 352.88 301 345.59 256 344.23V424a16 16 0 01-27 11.57l-176-168a16 16 0 010-23.14l176-168A16 16 0 01256 88v80.36c74.14 3.41 129.38 30.91 164.35 81.87C449.32 292.44 464 350.9 464 424a16 16 0 01-16 16z"}),eD=()=>J.createElement(J.Fragment,null,J.createElement("path",{fill:"none",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M400 148l-21.12-24.57A191.43 191.43 0 00240 64C134 64 48 150 48 256s86 192 192 192a192.09 192.09 0 00181.07-128"}),J.createElement("path",{d:"M464 97.42V208a16 16 0 01-16 16H337.42c-14.26 0-21.4-17.23-11.32-27.31L436.69 86.1C446.77 76 464 83.16 464 97.42z"})),eM=({_cloverViewerHasPlaceholder:e,config:t})=>J.createElement(ew,{"data-testid":"clover-iiif-image-openseadragon-controls",hasPlaceholder:e},t.showZoomControl&&J.createElement(J.Fragment,null,J.createElement(ek,{id:t.zoomInButton,label:"zoom in"},J.createElement(eN,null)),J.createElement(ek,{id:t.zoomOutButton,label:"zoom out"},J.createElement(eO,null))),t.showFullPageControl&&J.createElement(ek,{id:t.fullPageButton,label:"full page"},J.createElement(eR,null)),t.showRotationControl&&J.createElement(J.Fragment,null,J.createElement(ek,{id:t.rotateRightButton,label:"rotate right"},J.createElement(eD,null)),J.createElement(ek,{id:t.rotateLeftButton,label:"rotate left"},J.createElement(eD,null))),t.showHomeControl&&J.createElement(ek,{id:t.homeButton,label:"reset"},J.createElement(eL,null))),eP=({ariaLabel:e,config:t,uri:n,_cloverViewerHasPlaceholder:r,imageType:i,openSeadragonCallback:a})=>{let[s,o]=(0,J.useState)(),[l,c]=(0,J.useState)(),u=(0,J.useRef)(!1);return(0,J.useEffect)(()=>(u.current||(u.current=!0,l||c(Z(t))),()=>null==l?void 0:l.destroy()),[]),(0,J.useEffect)(()=>{l&&a&&a(l)},[l,a]),(0,J.useEffect)(()=>{l&&n!==s&&(null==l||l.forceRedraw(),o(n))},[l,s,n]),(0,J.useEffect)(()=>{if(s&&l)switch(i){case"simpleImage":null==l||l.addSimpleImage({url:s});break;case"tiledImage":ed(s).then(e=>{try{if(!e)throw Error(`No tile source found for ${s}`);null==l||l.addTiledImage({tileSource:e})}catch(e){console.error(e)}});break;default:null==l||l.close(),console.warn(`Unable to render ${s} in OpenSeadragon as type: "${i}"`)}},[i,s]),J.createElement(eI,{className:"clover-iiif-image-openseadragon","data-testid":"clover-iiif-image-openseadragon","data-openseadragon-instance":t.id,hasNavigator:t.showNavigator},J.createElement(eM,{_cloverViewerHasPlaceholder:r,config:t}),t.showNavigator&&J.createElement(eC,{id:t.navigatorId,"data-testid":"clover-iiif-image-openseadragon-navigator"}),J.createElement(eS,{id:t.id,"data-testid":"clover-iiif-image-openseadragon-viewport",role:"img",...e&&{"aria-label":e}}))},eF=(e,t="none")=>{if(!e)return null;if("string"==typeof e)return[e];if(!e[t]){let t=Object.getOwnPropertyNames(e);if(t.length>0)return e[t[0]]}return e[t]&&Array.isArray(e[t])?e[t]:null},eB=(e,t="none",n=", ")=>{let r=eF(e,t);return Array.isArray(r)?r.join(`${n}`):r},eH=({_cloverViewerHasPlaceholder:e=!1,body:t,instanceId:n,isTiledImage:r=!1,label:i,src:a="",openSeadragonCallback:s,openSeadragonConfig:o={}})=>{let l=n||eo(),c="string"==typeof i?i:eB(i),u={id:`openseadragon-${l}`,navigatorId:`openseadragon-navigator-${l}`,loadTilesWithAjax:!0,fullPageButton:`fullPage-${l}`,homeButton:`reset-${l}`,rotateLeftButton:`rotateLeft-${l}`,rotateRightButton:`rotateRight-${l}`,zoomInButton:`zoomIn-${l}`,zoomOutButton:`zoomOut-${l}`,showNavigator:!0,showFullPageControl:!0,showHomeControl:!0,showRotationControl:!0,showZoomControl:!0,navigatorBorderColor:"transparent",gestureSettingsMouse:{clickToZoom:!0,dblClickToZoom:!0,pinchToZoom:!0,scrollToZoom:!1},...o},{imageType:d,uri:h}=t?ef(t):em(a,r);return h?J.createElement(en,{FallbackComponent:e_},J.createElement(eP,{_cloverViewerHasPlaceholder:e,ariaLabel:c,config:u,imageType:d,key:l,uri:h,openSeadragonCallback:s})):null};var eU=n(1830),eG=Object.defineProperty,ez=(e,t,n)=>t in e?eG(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ej=(e,t,n)=>(ez(e,"symbol"!=typeof t?t+"":t,n),n);let e$=[];Object.freeze(e$);let eW={id:"https://iiif-parser/annotation-page",type:"AnnotationPage",behavior:e$,motivation:null,label:null,thumbnail:e$,summary:null,requiredStatement:null,metadata:e$,rights:null,provider:e$,items:e$,seeAlso:e$,homepage:e$,logo:e$,rendering:e$,service:e$},eV={id:"https://iiif-parser/empty-canvas",type:"Canvas",label:null,behavior:e$,motivation:null,thumbnail:e$,posterCanvas:null,accompanyingCanvas:null,placeholderCanvas:null,summary:null,requiredStatement:null,metadata:e$,rights:null,navDate:null,provider:e$,items:e$,annotations:e$,seeAlso:e$,homepage:e$,logo:e$,partOf:e$,rendering:e$,service:e$,duration:0,height:0,width:0},eY={id:"https://iiif-parser/empty-collection",type:"Collection",label:null,viewingDirection:"left-to-right",behavior:e$,motivation:null,thumbnail:e$,posterCanvas:null,accompanyingCanvas:null,placeholderCanvas:null,summary:null,requiredStatement:null,metadata:e$,rights:null,navDate:null,provider:e$,items:e$,annotations:e$,seeAlso:e$,homepage:e$,logo:e$,partOf:e$,rendering:e$,service:e$,services:e$},eq={id:"https://iiif-parser/empty-manifest",type:"Manifest",annotations:e$,behavior:e$,homepage:e$,items:e$,label:null,logo:e$,metadata:e$,motivation:null,navDate:null,provider:e$,partOf:e$,posterCanvas:null,accompanyingCanvas:null,placeholderCanvas:null,rendering:e$,requiredStatement:null,rights:null,seeAlso:e$,service:e$,services:e$,start:null,structures:e$,summary:null,thumbnail:e$,viewingDirection:"left-to-right"},eQ={id:"https://iiif-parser/empty-canvas",type:"Range",label:null,behavior:e$,motivation:null,thumbnail:e$,posterCanvas:null,accompanyingCanvas:null,placeholderCanvas:null,summary:null,requiredStatement:null,metadata:e$,rights:null,navDate:null,provider:e$,items:e$,annotations:e$,seeAlso:e$,homepage:e$,logo:e$,partOf:e$,rendering:e$,service:e$,start:null,supplementary:null,viewingDirection:"left-to-right"},eX={id:"https://iiif-parser/empty-agent",type:"Agent",label:{},logo:e$,seeAlso:e$,homepage:e$};function eK(e){return Array.isArray(e)?e:[e]}let eZ=["Collection","Manifest","Canvas","AnnotationPage","AnnotationCollection","Annotation","ContentResource","Range","Service","Selector","Agent"];class eJ{constructor(e,t={}){ej(this,"traversals"),ej(this,"options"),this.traversals={collection:[],manifest:[],canvas:[],annotationCollection:[],annotationPage:[],annotation:[],contentResource:[],choice:[],range:[],service:[],agent:[],...e},this.options={allowUndefinedReturn:!1,...t}}static all(e){return new eJ({collection:[e],manifest:[e],canvas:[e],annotationCollection:[e],annotationPage:[e],annotation:[e],contentResource:[e],choice:[e],range:[e],service:[e]})}traverseDescriptive(e){return e.thumbnail&&(e.thumbnail=e.thumbnail.map(e=>this.traverseType(e,this.traversals.contentResource))),e.provider&&(e.provider=e.provider.map(e=>this.traverseAgent(e))),e}traverseLinking(e){return e.seeAlso&&(e.seeAlso=e.seeAlso.map(e=>this.traverseType(e,this.traversals.contentResource))),e.service&&(e.service=eK(e.service).map(e=>this.traverseType(e,this.traversals.service))),e.services&&(e.services=e.services.map(e=>this.traverseType(e,this.traversals.service))),e.logo&&(e.logo=e.logo.map(e=>this.traverseType(e,this.traversals.contentResource))),e.homepage&&(e.homepage=e.homepage.map(e=>this.traverseType(e,this.traversals.contentResource))),e.partOf&&(e.partOf=e.partOf.map(e=>"string"!=typeof e&&e.type?"Canvas"===e.type?this.traverseType(e,this.traversals.canvas):"AnnotationCollection"===e.type?this.traverseType(e,this.traversals.annotationCollection):"Collection"===e.type?this.traverseType(e,this.traversals.collection):this.traverseType(e,this.traversals.contentResource):this.traverseType(e,this.traversals.contentResource))),e.start&&(e.start=e.start?this.traverseType(e.start,this.traversals.canvas):null),e.rendering&&(e.rendering=e.rendering.map(e=>this.traverseType(e,this.traversals.contentResource))),e.supplementary&&(e.supplementary=e.supplementary.map(e=>this.traverseType(e,this.traversals.contentResource))),e}traverseCollectionItems(e){return e.items&&e.items.map(e=>"Collection"===e.type?this.traverseCollection(e):this.traverseManifest(e)),e}traverseCollection(e){return this.traverseType(this.traverseDescriptive(this.traverseInlineAnnotationPages(this.traverseLinking(this.traversePosterCanvas(this.traverseCollectionItems(e))))),this.traversals.collection)}traverseManifestItems(e){return e.items&&(e.items=e.items.map(e=>this.traverseCanvas(e))),e}traverseManifestStructures(e){return e.structures&&(e.structures=e.structures.map(e=>this.traverseRange(e))),e}traverseManifest(e){return this.traverseType(this.traverseInlineAnnotationPages(this.traverseManifestStructures(this.traversePosterCanvas(this.traverseDescriptive(this.traverseLinking(this.traverseManifestItems(e)))))),this.traversals.manifest)}traverseCanvasItems(e){return e.items=(e.items||[]).map(e=>this.traverseAnnotationPage(e)),e}traverseInlineAnnotationPages(e){return"string"!=typeof e&&e&&e.annotations&&(e.annotations=e.annotations.map(e=>this.traverseAnnotationPage(e))),e}traverseCanvas(e){return this.traverseType(this.traverseInlineAnnotationPages(this.traversePosterCanvas(this.traverseDescriptive(this.traverseLinking(this.traverseCanvasItems(e))))),this.traversals.canvas)}traverseAnnotationPageItems(e){return e.items&&(e.items=e.items.map(e=>this.traverseAnnotation(e))),e}traverseAnnotationPage(e){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseAnnotationPageItems(e))),this.traversals.annotationPage)}traverseAnnotationBody(e){return Array.isArray(e.body)?e.body=e.body.map(e=>this.traverseContentResource(e)):e.body&&(e.body=this.traverseContentResource(e.body)),e}traversePosterCanvas(e){return e.posterCanvas&&(e.posterCanvas=this.traverseCanvas(e.posterCanvas)),e.placeholderCanvas&&(e.placeholderCanvas=this.traverseCanvas(e.placeholderCanvas)),e.accompanyingCanvas&&(e.accompanyingCanvas=this.traverseCanvas(e.accompanyingCanvas)),e}traverseAnnotation(e){return this.traverseType(this.traverseLinking(this.traverseAnnotationBody(e)),this.traversals.annotation)}traverseContentResourceLinking(e){return"string"!=typeof e&&e&&e&&e.service&&(e.service=eK(e.service||[]).map(e=>this.traverseType(e,this.traversals.service))),e}traverseContentResource(e){return"Choice"===e.type&&(e.items=e.items.map(e=>this.traverseContentResource(e))),this.traverseType(this.traverseInlineAnnotationPages(this.traverseContentResourceLinking(e)),this.traversals.contentResource)}traverseRangeRanges(e){return e.items&&(e.items=e.items.map(e=>"string"==typeof e?this.traverseCanvas({id:e,type:"Canvas"}):"Manifest"===e.type?this.traverseManifest(e):this.traverseRange(e))),e}traverseRange(e){return this.traverseType(this.traversePosterCanvas(this.traverseDescriptive(this.traverseLinking(this.traverseRangeRanges(e)))),this.traversals.range)}traverseAgent(e){return this.traverseType(this.traverseDescriptive(this.traverseLinking(e)),this.traversals.agent)}traverseType(e,t){return t.reduce((e,t)=>{let n=t(e);return void 0!==n||this.options.allowUndefinedReturn?n:e},e)}traverseService(e){return this.traverseType(e,this.traversals.service)}traverseUnknown(e){let t=function(e){if(null==e)throw Error("Null or undefined is not a valid entity.");if(Array.isArray(e))throw Error("Array is not a valid entity");if("object"!=typeof e)throw Error(`${typeof e} is not a valid entity`);if("string"==typeof e.type){let t=eZ.indexOf(e.type);if(-1!==t)return eZ[t]}if(e.profile)return"Service";throw Error("Resource type is not known")}(e);switch(t){case"Collection":return this.traverseCollection(e);case"Manifest":return this.traverseManifest(e);case"Canvas":return this.traverseCanvas(e);case"AnnotationPage":return this.traverseAnnotationPage(e);case"Annotation":return this.traverseAnnotation(e);case"ContentResource":return this.traverseContentResource(e);case"Range":return this.traverseRange(e);case"Service":return this.traverseService(e);case"Agent":return this.traverseAgent(e);default:throw Error(`Unknown or unsupported resource type of ${t}`)}}}let e0=["sc:Collection","sc:Manifest","sc:Canvas","sc:AnnotationList","oa:Annotation","sc:Range","sc:Layer","sc:Sequence","oa:Choice","Service","ContentResource"];class e1{constructor(e,t={}){ej(this,"traversals"),ej(this,"options"),this.traversals={collection:[],manifest:[],canvas:[],annotationList:[],sequence:[],annotation:[],contentResource:[],choice:[],range:[],service:[],layer:[],...e},this.options={convertPropsToArray:!0,mergeMemberProperties:!0,allowUndefinedReturn:!1,...t}}static all(e){return new e1({collection:[e],manifest:[e],canvas:[e],annotationList:[e],sequence:[e],annotation:[e],contentResource:[e],choice:[e],range:[e],service:[e],layer:[e]})}traverseCollection(e){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseCollectionItems(e))),this.traversals.collection)}traverseCollectionItems(e){if(this.options.mergeMemberProperties){let t=[...(e.manifests||[]).map(e=>"string"==typeof e?{"@id":e,"@type":"sc:Manifest"}:e),...(e.collections||[]).map(e=>"string"==typeof e?{"@id":e,"@type":"sc:Collection"}:e),...e.members||[]];delete e.collections,delete e.manifests,e.members=t}return e.manifests&&(e.manifests=e.manifests.map(e=>this.traverseManifest("string"==typeof e?{"@id":e,"@type":"sc:Manifest"}:e))),e.collections&&(e.collections=e.collections.map(e=>this.traverseCollection("string"==typeof e?{"@id":e,"@type":"sc:Collection"}:e))),e.members&&(e.members=e.members.map(e=>"string"==typeof e?e:this.traverseUnknown(e))),e}traverseManifest(e){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseManifestItems(e))),this.traversals.manifest)}traverseManifestItems(e){return e.sequences&&(e.sequences=e.sequences.map(e=>this.traverseSequence(e))),e.structures&&(e.structures=e.structures.map(e=>this.traverseRange(e))),e}traverseSequence(e){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseSequenceItems(e))),this.traversals.sequence)}traverseSequenceItems(e){return e.canvases&&(e.canvases=e.canvases.map(e=>this.traverseCanvas(e))),e}traverseCanvas(e){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseCanvasItems(e))),this.traversals.canvas)}traverseCanvasItems(e){return e.images&&(e.images=e.images.map(e=>this.traverseAnnotation(e))),e.otherContent&&(e.otherContent=e.otherContent.map(e=>this.traverseAnnotationList(e))),e}traverseRange(e){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseRangeItems(e))),this.traversals.range)}traverseRangeItems(e){if(this.options.mergeMemberProperties){let t=[...(e.ranges||[]).map(e=>"string"==typeof e?{"@id":e,"@type":"sc:Range"}:e),...(e.canvases||[]).map(e=>"string"==typeof e?{"@id":e,"@type":"sc:Canvas"}:e),...e.members||[]];delete e.ranges,delete e.canvases,e.members=t.length?t.map(e=>this.traverseUnknown(e)):void 0}return e}traverseAnnotationList(e){return this.traverseType(this.traverseDescriptive(this.traverseAnnotationListItems("string"==typeof e?{"@id":e,"@type":"sc:AnnotationList"}:e)),this.traversals.annotationList)}traverseAnnotationListItems(e){return e.resources&&(e.resources=e.resources.map(e=>this.traverseAnnotation(e))),e}traverseAnnotation(e){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseAnnotationItems(e))),this.traversals.annotation)}traverseAnnotationItems(e){return e.resource&&(Array.isArray(e.resource)?e.resource=e.resource.map(e=>this.traverseContentResource(e)):e.resource=this.traverseContentResource(e.resource)),e.on,e}traverseLayer(e){return this.traverseType(this.traverseLinking(this.traverseLayerItems(e)),this.traversals.layer)}traverseLayerItems(e){return e.otherContent&&(e.otherContent=e.otherContent.map(e=>this.traverseAnnotationList(e))),e}traverseChoice(e){return this.traverseType(this.traverseChoiceItems(e),this.traversals.choice)}traverseChoiceItems(e){return e.default&&"rdf:nil"!==e.default&&(e.default=this.traverseContentResource(e.default)),e.item&&"rdf:nil"!==e.item&&(e.item=e.item.map(e=>this.traverseContentResource(e))),e}traverseService(e){return this.traverseType(this.traverseLinking(e),this.traversals.service)}traverseContentResource(e){return"oa:Choice"===e["@type"]?this.traverseChoice(e):this.traverseType(this.traverseDescriptive(this.traverseLinking(e)),this.traversals.contentResource)}traverseUnknown(e){if(!e["@type"]||"string"==typeof e)return e;switch(function(e){if(null==e)throw Error("Null or undefined is not a valid entity.");if(Array.isArray(e))throw Error("Array is not a valid entity");if("object"!=typeof e)throw Error(`${typeof e} is not a valid entity`);if("string"==typeof e["@type"]){let t=e0.indexOf(e["@type"]);if(-1!==t)return e0[t]}if(e.profile)return"Service";if(e.format||e["@type"])return"ContentResource";throw Error("Resource type is not known")}(e)){case"sc:Collection":return this.traverseCollection(e);case"sc:Manifest":return this.traverseManifest(e);case"sc:Canvas":return this.traverseCanvas(e);case"sc:Sequence":return this.traverseSequence(e);case"sc:Range":return this.traverseRange(e);case"oa:Annotation":return this.traverseAnnotation(e);case"sc:AnnotationList":return this.traverseAnnotationList(e);case"sc:Layer":return this.traverseLayer(e);case"Service":return this.traverseService(e);case"oa:Choice":return this.traverseChoice(e);case"ContentResource":return this.traverseContentResource(e)}return e.profile?this.traverseService(e):e}traverseImageResource(e){let t=Array.isArray(e),n=Array.isArray(e)?e:[e],r=[];for(let e of n)"string"==typeof e?r.push(this.traverseContentResource({"@id":e,"@type":"dctypes:Image"})):r.push(this.traverseContentResource(e));return t||this.options.convertPropsToArray?r:r[0]}traverseDescriptive(e){return e.thumbnail&&(e.thumbnail=this.traverseImageResource(e.thumbnail)),e.logo&&(e.logo=this.traverseImageResource(e.logo)),e}traverseOneOrMoreServices(e){let t=Array.isArray(e),n=Array.isArray(e)?e:[e],r=[];for(let e of n)r.push(this.traverseService(e));return t||this.options.convertPropsToArray?r:r[0]}traverseLinking(e){return e.related&&(e.related=this.traverseOneOrManyType(e.related,this.traversals.contentResource)),e.rendering&&(e.rendering=this.traverseOneOrManyType(e.rendering,this.traversals.contentResource)),e.service&&(e.service=this.traverseOneOrMoreServices(e.service)),e.seeAlso&&(e.seeAlso=this.traverseOneOrManyType(e.seeAlso,this.traversals.contentResource)),e.within&&("string"==typeof e.within||(e.within=this.traverseOneOrManyType(e.within,this.traversals.contentResource))),e.startCanvas&&("string"==typeof e.startCanvas?e.startCanvas=this.traverseType({"@id":e.startCanvas,"@type":"sc:Canvas"},this.traversals.canvas):e.startCanvas&&this.traverseType(e.startCanvas,this.traversals.canvas)),e.contentLayer&&("string"==typeof e.contentLayer?e.contentLayer=this.traverseLayer({"@id":e.contentLayer,"@type":"sc:Layer"}):e.contentLayer=this.traverseLayer(e.contentLayer)),e}traverseOneOrManyType(e,t){if(!Array.isArray(e)){if(!this.options.convertPropsToArray)return this.traverseType(e,t);e=[e]}return e.map(e=>this.traverseType(e,t))}traverseType(e,t){return t.reduce((e,t)=>{let n=t(e);return void 0!==n||this.options.allowUndefinedReturn?n:e},e)}}let e2="http://library.stanford.edu/iiif/image-api/compliance.html#level1",e3="http://library.stanford.edu/iiif/image-api/compliance.html#level2",e4="http://library.stanford.edu/iiif/image-api/conformance.html#level1",e5="http://library.stanford.edu/iiif/image-api/conformance.html#level2",e6="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level1",e8="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2",e9="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level1",e7="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level2",te="http://iiif.io/api/image/1/level1.json",tt="http://iiif.io/api/image/1/profiles/level1.json",tn="http://iiif.io/api/image/1/level2.json",tr="http://iiif.io/api/image/1/profiles/level2.json",ti="http://iiif.io/api/image/2/level1.json",ta="http://iiif.io/api/image/2/profiles/level1.json",ts="http://iiif.io/api/image/2/level2.json",to="http://iiif.io/api/image/2/profiles/level2.json",tl="level1",tc="level2",tu="http://iiif.io/api/image/2/level1",td="http://iiif.io/api/image/2/level2",th=[tu,td,e2,e3,e4,e5,e6,e8,e9,e7,te,tt,tn,tr,ti,ta,ts,to,tl,tc],tp=["http://iiif.io/api/image/2/level0",tu,td,"http://library.stanford.edu/iiif/image-api/compliance.html#level0",e2,e3,"http://library.stanford.edu/iiif/image-api/conformance.html#level0",e4,e5,"http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0",e6,e8,"http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level0",e9,e7,"http://iiif.io/api/image/1/level0.json","http://iiif.io/api/image/1/profiles/level0.json",te,tt,tn,tr,"http://iiif.io/api/image/2/level0.json","http://iiif.io/api/image/2/profiles/level0.json",ti,ta,ts,to,"level0",tl,tc],tf={attributionLabel:"Attribution",providerId:"http://example.org/provider",providerName:"Unknown"};function tm(e,t="none"){if(!e)return{};let n=Array.isArray(e)?e:[e],r={};for(let e of n){if("string"==typeof e){r[t]=r[t]?r[t]:[],r[t].push(e||"");continue}if(!e["@language"]){r[t]=r[t]?r[t]:[],r[t].push(e["@value"]||"");continue}let n=e["@language"];r[n]=r[n]?r[n]:[],r[n].push(e["@value"]||"")}return r}function tg(e){for(let t of["sc","oa","dcterms","dctypes","iiif"])if(e.startsWith(`${t}:`))return e.slice(t.length+1);return e}let tE=["Collection","Manifest","Annotation","AnnotationPage","Range","Service"];function tT(e){let t=e["@id"]||e.id,n=e["@type"]||e.type,r=e.profile||void 0,i=e["@context"]||void 0;if(r){let e=function(e){switch(e){case"http://iiif.io/api/image/2/level0.json":case"http://iiif.io/api/image/2/level1.json":case"http://iiif.io/api/image/2/level2.json":return"ImageService2";case"http://iiif.io/api/auth/1/kiosk":case"http://iiif.io/api/auth/1/login":case"http://iiif.io/api/auth/1/clickthrough":case"http://iiif.io/api/auth/1/external":case"http://iiif.io/api/auth/0/kiosk":case"http://iiif.io/api/auth/0/login":case"http://iiif.io/api/auth/0/clickthrough":case"http://iiif.io/api/auth/0/external":return"AuthCookieService1";case"http://iiif.io/api/auth/1/token":case"http://iiif.io/api/auth/0/token":return"AuthTokenService1";case"http://iiif.io/api/auth/1/logout":case"http://iiif.io/api/auth/0/logout":return"AuthLogoutService1";case"http://iiif.io/api/search/1/search":case"http://iiif.io/api/search/0/search":return"SearchService1";case"http://iiif.io/api/search/1/autocomplete":case"http://iiif.io/api/search/0/autocomplete":return"AutoCompleteService1"}}(r);if(e)return e}if(i){let e=function(e){for(let t of Array.isArray(e)?e:[e])switch(t){case"http://iiif.io/api/image/2/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2":return"ImageService2";case"http://iiif.io/api/image/1/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/context.json":return"ImageService1";case"http://iiif.io/api/annex/openannotation/context.json":return"ImageApiSelector"}}(i);if(e)return e}if(n){if(Array.isArray(n)){if(-1!==n.indexOf("oa:CssStylesheet"))return"CssStylesheet";if(-1!==n.indexOf("cnt:ContentAsText"))return"TextualBody";n=n[0]}for(let e of["sc","oa","dcterms","dctypes","iiif"])if(n.startsWith(`${e}:`)){n=n.slice(e.length+1);break}switch(n){case"Layer":return"AnnotationCollection";case"AnnotationList":return"AnnotationPage";case"cnt:ContentAsText":return"TextualBody"}}if(n&&-1!==tE.indexOf(n))return n;if(e.format){if(e.format.startsWith("image/"))return"Image";if(e.format.startsWith("text/")||"application/pdf"===e.format)return"Text";if(e.format.startsWith("application/"))return"Dataset"}return t&&(t.endsWith(".jpg")||t.endsWith(".png")||t.endsWith(".jpeg"))?"Image":n||"unknown"}let tv=/http(s)?:\/\/(creativecommons.org|rightsstatements.org)[^"'\\<\n]+/gm,ty=["http://iiif.io/api/presentation/2/context.json","http://iiif.io/api/image/2/context.json","http://iiif.io/api/image/1/context.json","http://library.stanford.edu/iiif/image-api/1.1/context.json","http://iiif.io/api/search/1/context.json","http://iiif.io/api/search/0/context.json","http://iiif.io/api/auth/1/context.json","http://iiif.io/api/auth/0/context.json","http://iiif.io/api/annex/openannotation/context.json"];function tA(e){for(let t in e)(void 0===e[t]||null===e[t])&&delete e[t];return e}let tb=0;function t_(e,t){let n=encodeURI(e.id||e["@id"]||"").trim();return n&&t?`${n}/${t}`:n||(tb++,`http://example.org/${e["@type"]}${t?`/${t}`:""}/${tb}`)}function tC(e){let t;let n=[...e.behavior||[]];return e.viewingHint&&n.push(e.viewingHint),Array.isArray(e.motivation)?t=e.motivation.map(tg):e.motivation&&(t=tg(e.motivation)),{"@context":e["@context"]?function(e){if(e){let t=Array.isArray(e)?e:[e],n=[];for(let e of t)"http://iiif.io/api/presentation/2/context.json"===e&&n.push("http://iiif.io/api/presentation/3/context.json"),-1===ty.indexOf(e)&&n.push(e);if(t.length)return 1===n.length?n[0]:n}}(e["@context"]):void 0,id:(e["@id"]||t_(e)).trim(),type:tT(e),behavior:n.length?n:void 0,height:e.height?e.height:void 0,width:e.width?e.width:void 0,motivation:t,viewingDirection:e.viewingDirection,profile:e.profile,format:e.format?e.format:void 0,duration:void 0,timeMode:void 0}}function tS(e){var t;let[n,r]=function(e,t="Rights/License",n="none"){let r=null,i=[];for(let a of Array.isArray(e)?e:[e]){let e=a?function(e){let t=e.match(tv);return t?t[0]:e}(a):void 0;if(e&&(-1!==e.indexOf("creativecommons.org")||-1!==e.indexOf("rightsstatements.org"))){r=e.startsWith("https://")?`http://${e.slice(8)}`:e;continue}e&&i.push({label:{[n]:[t]},value:{[n]:[e]}})}return[r,i]}(e.license),i=[...e.metadata&&(t=e.metadata)?t.map(e=>({label:tm(e.label),value:tm(e.value)})):[],...r];return{rights:n,metadata:i.length?i:void 0,label:e.label?tm(e.label):void 0,requiredStatement:e.attribution?{label:tm(tf.attributionLabel),value:tm(e.attribution)}:void 0,navDate:e.navDate,summary:e.description?tm(e.description):void 0,thumbnail:e.thumbnail}}function tI(e){let t=e.related?Array.isArray(e.related)?e.related:[e.related]:[],n=e.contentLayer;return{provider:e.logo||t.length?[{id:tf.providerId,type:"Agent",homepage:t.length?[t[0]]:void 0,logo:e.logo?Array.isArray(e.logo)?e.logo:[e.logo]:void 0,label:tm(tf.providerName)}]:void 0,partOf:function(e){if(!e.within)return;let t=Array.isArray(e.within)?e.within:[e.within],n=[];for(let r of t)"string"==typeof r?r&&"sc:Manifest"===e["@type"]&&n.push({id:r,type:"Collection"}):r["@id"]&&n.push({id:r["@id"],type:tT(r)});return n.length?n:void 0}(e),rendering:e.rendering,seeAlso:e.seeAlso,start:e.startCanvas,service:e.service?eK(e.service):void 0,supplementary:n?[n]:void 0}}function tx(e){return tA({...tC(e),...tS(e),...tI(e),chars:e.chars,format:e.format?e.format:void 0,language:e.language})}let tk=new e1({collection:[function(e){return tA({...tC(e),...tS(e),...tI(e),items:e.members})}],manifest:[function(e){let t=[],n=[];for(let r of e.sequences||[])r.canvases.length&&t.push(...r.canvases),r.behavior&&n.push(...r.behavior);let r=tC(e);return n.length&&(r.behavior?r.behavior.push(...n):r.behavior=n),tA({...r,...tS(e),...tI(e),items:t,structures:e.structures})}],canvas:[function(e){return tA({...tC(e),...tS(e),...tI(e),annotations:e.otherContent&&e.otherContent.length?e.otherContent:void 0,items:e.images&&e.images.length?[{id:t_(e,"annotation-page"),type:"AnnotationPage",items:e.images}]:void 0})}],annotationList:[function(e){return tA({...tC(e),...tS(e),...tI(e),items:e.resources&&e.resources.length?e.resources:void 0})}],sequence:[function(e){return e.canvases&&0!==e.canvases.length?{canvases:e.canvases,behavior:e.viewingHint?[e.viewingHint]:[]}:{canvases:[],behavior:[]}}],annotation:[function(e){return tA({...tC(e),...tS(e),...tI(e),target:function e(t){if(Array.isArray(t)){if(t.length>1)return{type:"List",items:t.map(e)};t=t[0]}if("string"==typeof t)return encodeURI(t).trim();if(!("@type"in t))return encodeURI(t["@id"]).trim();{let e;if("string"==typeof t.full)e=t.full;else if("dctypes:Image"===t.full["@type"])e={id:t.full["@id"],type:"Image"};else if("sc:Canvas"===t.full["@type"])e={id:t.full["@id"],type:"Canvas"};else throw Error(`Unsupported source type on annotation: ${t.full["@type"]}`);return{type:"SpecificResource",source:e,selector:function e(t){if((Array.isArray(t["@type"])&&t["@type"].includes("oa:SvgSelector")||"oa:SvgSelector"==t["@type"])&&("chars"in t||"value"in t))return{type:"SvgSelector",value:"chars"in t?t.chars:t.value};if("oa:FragmentSelector"===t["@type"])return{type:"FragmentSelector",value:t.value};if("oa:Choice"===t["@type"])return[e(t.default),...(Array.isArray(t.item)?t.item:[t.item]).map(e)];if("iiif:ImageApiSelector"==t["@type"])return{type:"ImageApiSelector",region:"region"in t?t.region:void 0,rotation:"rotation"in t?t.rotation:void 0};throw Error(`Unsupported selector type: ${t["@type"]}`)}(t.selector)}}}(e.on),body:Array.isArray(e.resource)?e.resource.map(tx):tx(e.resource)})}],contentResource:[tx],choice:[function(e){let t=[];return e.default&&"rdf:nil"!==e.default&&t.push(e.default),e.item&&"rdf:nil"!==e.item&&t.push(...e.item),{...tC(e),...tS(e),items:t}}],range:[function(e){return tA({...tC(e),...tS(e),...tI(e),items:e.members})}],service:[function(e){let{"@id":t,"@type":n,"@context":r,profile:i,...a}=e,s={};return t&&(s["@id"]=t),s["@type"]=tT(e),"unknown"===s["@type"]&&(r&&r.length&&(s["@context"]=r),s["@type"]="Service"),i&&(s.profile=function e(t){return Array.isArray(t)?e(t.find(e=>"string"==typeof e)):-1!==tp.indexOf(t)?"level2":-1!==th.indexOf(t)?"level1":"string"==typeof t?t:void 0}(i)),tA({...s,...a})}],layer:[function(e){return tA({...tC(e),...tS(e),...tI(e)})}]});function tw(e,t){if("string"==typeof e)return{id:e,type:t};if(!e.id)throw Error(`Invalid resource does not have an ID (${t})`);return e}function tN(e){return t=>"string"==typeof t?{id:t,type:e}:t.id?t.type?t:{type:e,...t}:{id:`vault://${function(e){let t=JSON.stringify(e),n=5381,r=t.length;for(;r;)n=33*n^t.charCodeAt(--r);let i=(n>>>0).toString(16);return i.length%2?"0"+i:i}(t)}`,type:e,...t}}function tO(e){return t=>({...e,...t})}function tR(e){return Array.isArray(e)?e:[e]}function tL(e){return e.body&&(e.body=tR(e.body)),e.seeAlso&&(e.seeAlso=tR(e.seeAlso)),e.body&&(e.body=tR(e.body)),e.audience&&(e.audience=tR(e.audience)),e.accessibility&&(e.accessibility=tR(e.accessibility)),e.motivation&&(e.motivation=tR(e.motivation)),e}let tD="__$UNSET$__",tM="__$UNWRAP$__";function tP(e){if(!e)return;let t=Object.keys(e);if(0!==t.length){if(1===t.length){let n=t[0];if(!n)return"";let r=(e[n]||[]).join("");return"@none"===n||"none"===n||"en"===n?r:{"@language":n,"@value":r}}return t.map(t=>({"@language":t,"@value":(e[t]||[]).join("")}))}}function tF(e,t=!1){return e?e.length>1&&!t?e:e[0]||void 0:void 0}function tB(e){if(e){if("string"==typeof e)return{"@id":e};if("@id"in e){let t={...e};return delete t["@type"],t}return{"@context":"http://iiif.io/api/image/2/context.json","@id":e.id,profile:`http://iiif.io/api/image/2/profiles/${e.profile}.json`}}}function tH(e,t){return[["@id",e.id],["@type",t],["format",e.format],["height",e.height],["width",e.width],["viewingDirection","left-to-right"!==e.viewingDirection?e.viewingDirection:void 0]]}function*tU(e){let t=e.provider?yield e.provider[0]:void 0;return[["label",tP(e.label)],["metadata",e.metadata&&e.metadata.length?e.metadata.map(e=>({label:tP(e.label)||"",value:tP(e.value)||""})):void 0],["description",tP(e.summary)],["thumbnail",tF((yield e.thumbnail))],["navDate",e.navDate],["logo",t?tF(t.logo):void 0],["homepage",t?t.homepage:void 0],["attribution",e.requiredStatement?tP(e.requiredStatement.value):void 0]]}function*tG(e){return[["seeAlso",tF((yield e.seeAlso))],["service",tF((e.service||[]).map(tB))],["rendering",tF((yield e.rendering))],["startCanvas",e.start?e.start.id:void 0]]}let tz={Manifest:function*(e){return[...tH(e,"sc:Manifest"),...yield*tU(e),...yield*tG(e),["sequences",[{"@id":`${e.id}/sequence0`,"@type":"sc:Sequence",canvases:yield e.items}]],["structures",(yield e.structures)]]},Canvas:function*(e){let t=(yield e.items)[0];return[...tH(e,"sc:Canvas"),...yield*tU(e),...yield*tG(e),["images",t?[t.resources]:void 0],["annotations",e.annotations&&e.annotations.length?tF((yield e.annotations)):void 0]]},AnnotationPage:function*(e){return[...tH(e,"sc:AnnotationList"),...yield*tU(e),["resources",e.items&&e.items.length?tF((yield e.items)):void 0]]},Annotation:function*(e){return[["@id",e.id],["@type","oa:Annotation"],["motivation","sc:painting"],["on",function e(t){return Array.isArray(t)?t.map(t=>e(t)):"string"==typeof t?t:t.type&&"Canvas"===t.type?t.id:t}(e.target)],["resource",tF((yield e.body),!0)]]},ContentResource:function*(e){return"Image"===e.type?[...tH(e,"dctypes:Image"),...yield*tU(e),...yield*tG(e)]:[...tH(e,void 0),...yield*tU(e)]},AnnotationCollection:function*(e){return[["@id",e.id],["@type","sc:Layer"],["label",tP(e.label)]]},Collection:function*(e){return[...tH(e,"sc:Collection"),...yield*tU(e),...yield*tG(e),["members",(yield*e.items)]]},Range:function*(e){let t=[],n=[];if(e.items)for(let r of e.items){let i=yield r;t.push({"@id":r.id,"@type":r.type,label:i?i.label:void 0,within:e.id}),"Canvas"===r.type&&n.push(r.id)}return[...tH(e,"sc:Range"),...yield*tU(e),...yield*tG(e),["canvases",n.length===t.length?n:void 0],["members",n.length!==t.length?t:void 0]]}};function tj(e){var t;return[["id",(null==(t=e.id)?void 0:t.startsWith("vault://"))?void 0:e.id],["type",e.type],["format",e.format],["profile",e.profile],["height",e.height],["width",e.width],["duration",e.duration||void 0],["viewingDirection","left-to-right"!==e.viewingDirection?e.viewingDirection:void 0],["behavior",e.behavior&&e.behavior.length?e.behavior:void 0],["timeMode",e.timeMode],["motivation",Array.isArray(e.motivation)?e.motivation[0]:e.motivation]]}function t$(e){if(e&&0!==e.length)return e}function tW(e){if(e&&e.type&&"ImageService2"===e.type){let{id:t,type:n,profile:r,...i}=e,a="string"==typeof r?r:Array.isArray(r)?r.find(e=>"string"==typeof e):"";return{"@id":t,"@type":n,profile:a?a.startsWith("http")?a:`http://iiif.io/api/image/2/${a}.json`:"http://iiif.io/api/image/2/level0.json",...i}}return e}function tV(e){if(e&&0!==e.length)return e.map(tW)}function*tY(e){return[["label",e.label],["metadata",t$(e.metadata)],["summary",e.summary],["requiredStatement",e.requiredStatement],["rights",e.rights],["navDate",e.navDate],["language",e.language],["thumbnail",t$((yield e.thumbnail))],["placeholderCanvas",(yield e.placeholderCanvas)],["accompanyingCanvas",(yield e.accompanyingCanvas)],["provider",t$((yield e.provider))]]}function*tq(e){return[["seeAlso",t$((yield e.seeAlso))],["service",tV(e.service)],["services",tV(e.services)],["rendering",t$((yield e.rendering))],["supplementary",t$((yield e.supplementary))],["homepage",t$((yield e.homepage))],["logo",t$((yield e.logo))],["partOf",t$((yield e.partOf))],["start",e.start]]}let tQ={Manifest:function*(e,t,{isTopLevel:n}){return n?[["@context","http://iiif.io/api/presentation/3/context.json"],...tj(e),...yield*tY(e),...yield*tq(e),["items",(yield e.items)],["structures",t$((yield e.structures))],["annotations",t$((yield e.annotations))]]:[...tj(e),...yield*tY(e)]},Canvas:function*(e){return[...tj(e),...yield*tY(e),...yield*tq(e),["items",(yield e.items)],["annotations",t$((yield e.annotations))]]},Agent:function*(e){return[["id",e.id],["type","Agent"],["label",e.label],...yield*tq(e)]},AnnotationPage:function*(e){return[...Object.entries(e).map(([e,t])=>[e,Array.isArray(t)?t$(t):t]).filter(([e,t])=>"items"!==e),...yield*tq(e),["items",(yield e.items)]]},Service:function*(e){return[[tM,tW(e)]]},Annotation:function*(e){let t=Object.entries(e).map(([e,t])=>"motivation"===e?[e,Array.isArray(t)?t[0]:t]:[e,Array.isArray(t)?t$(t):t]).filter(([e])=>"body"!==e),n=yield e.body;return[...t,["body",1===n.length?n[0]:n]]},ContentResource:function*(e){return[...tj(e),...yield*tY(e),...yield*tq(e),["annotations",t$((yield e.annotations))],["items",t$((yield e.items))]]},AnnotationCollection:function*(e){return[["id",e.id],["type","AnnotationCollection"],["label",e.label]]},Collection:function*(e,t,{isTopLevel:n}){return n?[["@context","http://iiif.io/api/presentation/3/context.json"],...tj(e),...yield*tY(e),...yield*tq(e),["items",t$((yield e.items))]]:[...tj(e),...yield*tY(e)]},Range:function*(e){let t=[];for(let n of e.items)"Range"===n.type?t.push((yield n)):t.push(n);return[...tj(e),...yield*tY(e),...yield*tq(e),["items",t],["annotations",t$((yield e.annotations))]]}};var tX=n(4887);function tK(e){return(tK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tZ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function tJ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tZ(Object(n),!0).forEach(function(t){!function(e,t,n){var r;r=function(e,t){if("object"!=tK(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=tK(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==tK(r)?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tZ(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function t0(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var t1="function"==typeof Symbol&&Symbol.observable||"@@observable",t2=function(){return Math.random().toString(36).substring(7).split("").join(".")},t3={INIT:"@@redux/INIT"+t2(),REPLACE:"@@redux/REPLACE"+t2(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+t2()}};function t4(e){for(var t,n=Object.keys(e),r={},i=0;i<n.length;i++){var a=n[i];"function"==typeof e[a]&&(r[a]=e[a])}var s=Object.keys(r);try{!function(e){Object.keys(e).forEach(function(t){var n=e[t];if(void 0===n(void 0,{type:t3.INIT}))throw Error(t0(12));if(void 0===n(void 0,{type:t3.PROBE_UNKNOWN_ACTION()}))throw Error(t0(13))})}(r)}catch(e){t=e}return function(e,n){if(void 0===e&&(e={}),t)throw t;for(var i=!1,a={},o=0;o<s.length;o++){var l=s[o],c=r[l],u=e[l],d=c(u,n);if(void 0===d)throw n&&n.type,Error(t0(14));a[l]=d,i=i||d!==u}return(i=i||s.length!==Object.keys(e).length)?a:e}}function t5(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}function t6(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw Error(t0(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},a=t.map(function(e){return e(i)});return r=t5.apply(void 0,a)(n.dispatch),tJ(tJ({},n),{},{dispatch:r})}}}let t8="@iiif/IMPORT_ENTITIES",t9="@iiif/MODIFY_ENTITY_FIELD",t7="@iiif/REORDER_ENTITY_FIELD",ne="@iiif/ADD_REFERENCE",nt="@iiif/REMOVE_REFERENCE",nn=(0,tX.createAction)(t8)(),nr=(0,tX.createAction)(t9)(),ni=((0,tX.createAction)(t7)(),(0,tX.createAction)(ne)(),(0,tX.createAction)(nt)(),"@iiif/ADD_MAPPING"),na="@iiif/ADD_MAPPINGS",ns=(0,tX.createAction)(ni)(),no=(0,tX.createAction)(na)(),nl="@iiif/SET_META_VALUE",nc="@iiif/SET_META_VALUE_DYNAMIC",nu="@iiif/UNSET_META_VALUE",nd=(0,tX.createAction)(nl)(),nh=(0,tX.createAction)(nc)(),np=((0,tX.createAction)(nu)(),{setMetaValue:nd,setMetaValueDynamic:nh}),nf="RESOURCE_ERROR",nm="RESOURCE_LOADING",ng="RESOURCE_READY",nE="@iiif/REQUEST_RESOURCE",nT="@iiif/REQUEST_ERROR",nv="@iiif/REQUEST_MISMATCH",ny="@iiif/REQUEST_COMPLETE",nA="@iiif/REQUEST_OFFLINE_RESOURCE",nb=(0,tX.createAction)(nE)(),n_=(0,tX.createAction)(nT)(),nC=(0,tX.createAction)(nv)(),nS=(0,tX.createAction)(ny)();(0,tX.createAction)(nA)();let nI="@iiif/BATCH",nx="@iiif/BATCH_IMPORT",nk=(0,tX.createAction)(nI)();(0,tX.createAction)(nx)();let nw=(e,t)=>{let{entities:n,resource:r,mapping:i}=function(e){let t=e&&e["@context"]&&("http://iiif.io/api/presentation/2/context.json"===e["@context"]||-1!==e["@context"].indexOf("http://iiif.io/api/presentation/2/context.json")||"http://www.shared-canvas.org/ns/context.json"===e["@context"])||"http://iiif.io/api/image/2/context.json"===e["@context"]?tk.traverseUnknown(e):e,n={Collection:{},Manifest:{},Canvas:{},AnnotationPage:{},AnnotationCollection:{},Annotation:{},ContentResource:{},Range:{},Service:{},Selector:{},Agent:{}},r={},i=(e,t)=>{let r=n[e]?n[e]:{};return n=>{let i=tw(n,t||e);return i&&i.id&&e?(r[i.id]=r[i.id]?function(e,t){if("string"==typeof e)return e;if(t.id!==e.id||t.type!==e.type)throw Error("Can only merge entities with identical identifiers and type!");return function e(t,n){if(!n)return t;if(Array.isArray(t)){if(!Array.isArray(n))throw Error("Cannot merge array with non-array");let r=[...t];for(let i of n)if(null!=i){if(Array.isArray(i))r.push(i);else if("object"==typeof i&&i.id&&i.type){let t=r.findIndex(e=>e.id===i.id&&e.type===i.type);t>=0&&(r[t]=e(r[t],i))}else -1===t.indexOf(i)&&r.push(i)}return r}if("object"==typeof t){if(Array.isArray(n)||"object"!=typeof n)throw Error("Cannot merge object with non-object");let r={...t};for(let[t,i]of Object.entries(n)){let n=r[t];n!==e$&&n?r[t]=e(n,i):r[t]=i}return r}return t||n}({...e},t)}(r[i.id],i):Object.assign({},i),{id:i.id,type:"ContentResource"===e?e:i.type}):i}},a=(e,t)=>n=>{let{id:i,type:a}=tw(n,t||e);if(void 0===i)throw Error("Found invalid entity without an ID.");return"ContentResource"===e?r[i]=e:r[i]=a,n};return{entities:n,resource:new eJ({collection:[tO(eY),a("Collection"),i("Collection")],manifest:[tO(eq),a("Manifest"),i("Manifest")],canvas:[tO(eV),a("Canvas"),i("Canvas")],annotationPage:[tN("AnnotationPage"),tO(eW),a("AnnotationPage"),i("AnnotationPage")],annotation:[tN("Annotation"),tL,a("Annotation"),i("Annotation")],contentResource:[tN("ContentResource"),a("ContentResource"),i("ContentResource")],range:[tO(eQ),a("Range","Canvas"),i("Range","Canvas")],agent:[tO(eX),a("Agent"),i("Agent")]}).traverseUnknown(t),mapping:r}}(t);if(void 0===r.id)return[n_({id:e,message:"ID is not defined in resource."})];let a=[nn({entities:n}),no({mapping:i})];return r.id!==e&&(a.push(ns({id:e,type:r.type})),a.push(nC({requestId:e,actualId:r.id}))),a.push(nS({id:e})),a},nN=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function nO(e,t){if(!Array.isArray(e)||!Array.isArray(t))return e===t;if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++){var n,r;if(!((n=e[i])===(r=t[i])||nN(n)&&nN(r)))return!1}return!0}function nR(e,t){let n=e.iiif.requests[t],r=e.iiif.mapping[t];if(r&&e.iiif.entities[r][n.resourceUri])return e.iiif.entities[r][n.resourceUri]}function nL(e,t,{waitTimeout:n=30}={}){return async(r,i)=>{let a=e.getState(),s=a.iiif.requests[r];if(s)switch(s.loadingState){case nf:break;case nm:{let t;let i=!1;try{let a=await Promise.race([new Promise((n,a)=>{i||(t=e.subscribe(()=>{let t=e.getState();if(t.iiif.requests[r].loadingState===nf){a();return}if(t.iiif.requests[r].loadingState===ng){let e=nR(t,r);e?n(e):a()}}))}),new Promise((e,t)=>setTimeout(()=>{i=!0,t()},60*n))]);if(t&&t(),a)return a}catch(e){t&&t()}break}case ng:{let e=nR(a,r);if(e)return e}}e.dispatch(nb({id:r}));try{let n=await t(r,i);n.id||n["@id"]||(n["@type"]&&(n["@id"]=r),n.id=r);let a=nw(r,n);return e.dispatch(nk({actions:a})),nR(e.getState(),r)}catch(t){throw e.dispatch(n_({id:r,message:t.toString()})),t}}}function nD(){return{Collection:{},Manifest:{},Canvas:{},AnnotationPage:{},AnnotationCollection:{},Annotation:{},ContentResource:{},Range:{},Service:{},Selector:{},Agent:{}}}function nM(e,t,n,r){return!(!e[n]||!e[n][t]||!e[n][t][r]||!Array.isArray(e[n][t][r]))}let nP=t4({mapping:(e={},t)=>{switch(t.type){case ni:return{...e,[t.payload.id]:t.payload.type};case na:return{...e,...t.payload.mapping};default:return e}},entities:(e=nD(),t)=>{switch(t.type){case t9:{if(!e[t.payload.type]||!e[t.payload.type][t.payload.id])return e;let n=e[t.payload.type][t.payload.id];if("string"==typeof n)return e;return{...e,[t.payload.type]:{...e[t.payload.type],[t.payload.id]:{...n,[t.payload.key]:t.payload.value}}}}case t7:{if(!nM(e,t.payload.id,t.payload.type,t.payload.key))return e;let n=e[t.payload.type][t.payload.id];if("string"==typeof n)return e;let r=Array.from(n[t.payload.key]),[i]=r.splice(t.payload.startIndex,1);return r.splice(t.payload.endIndex,0,i),{...e,[t.payload.type]:{...e[t.payload.type],[t.payload.id]:{...n,[t.payload.key]:r}}}}case t8:{let n=Object.keys(t.payload.entities),r={...e};for(let i of n){let n=t.payload.entities[i],a={...e[i]||{}},s=!1,o=Object.keys(n||{})||[];if(n&&o){for(let t of o)s=!0,a[t]=e[i][t]?function(e,t){let n={},r=[];for(let[i,a]of Object.entries(e||{})){r.push(i);let e=(t||{})[i];if(!e||0===e.length){n[i]=a;continue}n[i]=e}for(let[e,i]of Object.entries(t||{}))-1===r.indexOf(e)&&(n[e]=i);return n}(e[i][t],n[t]):n[t];s&&(r[i]=a)}}return r}case ne:{if(!nM(e,t.payload.id,t.payload.type,t.payload.key))return e;let n=e[t.payload.type][t.payload.id],r=Array.from(n[t.payload.key]);return r.splice(t.payload.index||r.length+1,0,t.payload.reference),{...e,[t.payload.type]:{...e[t.payload.type],[t.payload.id]:{...n,[t.payload.key]:r}}}}case nt:{if(!nM(e,t.payload.id,t.payload.type,t.payload.key))return e;let n=e[t.payload.type][t.payload.id],r=Array.from(n[t.payload.key]),i=t.payload.index||r.findIndex(e=>e&&e.id===t.payload.reference.id);if(-1===i||r[i]?.id!==t.payload.reference.id)return e;return r.splice(i,1),{...e,[t.payload.type]:{...e[t.payload.type],[t.payload.id]:{...n,[t.payload.key]:r}}}}default:return e}},requests:(e={},t)=>{switch(t.type){case nE:case nA:return{...e,[t.payload.id]:{requestUri:t.payload.id,loadingState:nm,uriMismatch:!1,resourceUri:t.payload.id}};case nv:return{...e,[t.payload.requestId]:{...e[t.payload.requestId]||{},uriMismatch:!0,resourceUri:t.payload.actualId},[t.payload.actualId]:{requestUri:t.payload.requestId,loadingState:e[t.payload.requestId].loadingState,uriMismatch:!0,resourceUri:t.payload.actualId}};case nT:return{...e,[t.payload.id]:{...e[t.payload.id]||{},loadingState:nf,error:t.payload.message}};case ny:return{...e,[t.payload.id]:{...e[t.payload.id]||{},loadingState:ng,error:void 0}}}return e},meta:(e={},t)=>{let{id:n,updateValue:r,value:i,meta:a,key:s}=t&&t.payload||{};switch(t.type){case nl:return{...e,[n]:{...e[n]||{},[a]:{...e[n]&&e[n][a]||{},[s]:i}}};case nc:return{...e,[n]:{...e[n]||{},[a]:{...e[n]&&e[n][a]||{},[s]:r(e[n]&&e[n][a]?e[n][a][s]:void 0)}}};case nu:if(e[n]&&e[n][a]&&e[n][a][s])return{...e,[n]:{...e[n]||{},[a]:{...e[n]&&e[n][a]||{},[s]:void 0}}};return e;default:return e}}}),nF="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||t5;class nB{options;store;emitter;isBatching=!1;batchQueue=[];remoteFetcher;staticFetcher;constructor(e,t){var n;this.options=Object.assign({reducers:{},middleware:[],defaultState:{},customFetcher:this.defaultFetcher,enableDevtools:!0},e||{}),this.store=t||function(e={}){var t;let{enableDevtools:n=!0,iiifStoreName:r="iiif",defaultState:i={},extraMiddleware:a=[],customReducers:s={}}=e;return function e(t,n,r){if("function"==typeof n&&"function"==typeof r||"function"==typeof r&&"function"==typeof arguments[3])throw Error(t0(0));if("function"==typeof n&&void 0===r&&(r=n,n=void 0),void 0!==r){if("function"!=typeof r)throw Error(t0(1));return r(e)(t,n)}if("function"!=typeof t)throw Error(t0(2));var i,a=t,s=n,o=[],l=o,c=!1;function u(){l===o&&(l=o.slice())}function d(){if(c)throw Error(t0(3));return s}function h(e){if("function"!=typeof e)throw Error(t0(4));if(c)throw Error(t0(5));var t=!0;return u(),l.push(e),function(){if(t){if(c)throw Error(t0(6));t=!1,u();var n=l.indexOf(e);l.splice(n,1),o=null}}}function p(e){if(!function(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(e))throw Error(t0(7));if(void 0===e.type)throw Error(t0(8));if(c)throw Error(t0(9));try{c=!0,s=a(s,e)}finally{c=!1}for(var t=o=l,n=0;n<t.length;n++)(0,t[n])();return e}return p({type:t3.INIT}),(i={dispatch:p,subscribe:h,getState:d,replaceReducer:function(e){if("function"!=typeof e)throw Error(t0(10));a=e,p({type:t3.REPLACE})}})[t1]=function(){var e;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw Error(t0(11));function t(){e.next&&e.next(d())}return t(),{unsubscribe:h(t)}}})[t1]=function(){return this},e},i}((t=t4({[r]:nP,...s}),(e,n)=>n&&n.type===nI?n.payload.actions.reduce(t,e):n&&n.type===nx?n.payload.state:t(e,n)),i,n?nF(t6(...a)):t5(t6(...a)))}({customReducers:this.options.reducers,extraMiddleware:[...this.options.middleware,this.middleware],defaultState:this.options.defaultState,enableDevtools:this.options.enableDevtools}),this.emitter={all:n=n||new Map,on:function(e,t){var r=n.get(e);r?r.push(t):n.set(e,[t])},off:function(e,t){var r=n.get(e);r&&(t?r.splice(r.indexOf(t)>>>0,1):n.set(e,[]))},emit:function(e,t){var r=n.get(e);r&&r.slice().map(function(e){e(t)}),(r=n.get("*"))&&r.slice().map(function(n){n(e,t)})}},this.remoteFetcher=nL(this.store,this.options.customFetcher),this.staticFetcher=nL(this.store,(e,t)=>t)}defaultFetcher=e=>fetch(e).then(e=>e.json());batch(e){this.isBatching=!0;try{e(this),this.store.dispatch(nk({actions:this.batchQueue}))}catch(e){throw this.batchQueue=[],this.isBatching=!1,e}this.batchQueue=[],this.isBatching=!1}async asyncBatch(e){this.isBatching=!0;try{await e(this),this.store.dispatch(nk({actions:this.batchQueue}))}catch(e){throw this.batchQueue=[],this.isBatching=!1,e}this.batchQueue=[],this.isBatching=!1}modifyEntityField(e,t,n){this.dispatch(nr({id:e.id,type:e.type,key:t,value:n}))}dispatch(e){this.isBatching?this.batchQueue.push(e):this.store.dispatch(e)}middleware=e=>t=>n=>{if(n.type===nI){for(let t of n.payload.actions)this.emitter.emit(t.type,{realAction:t,state:e.getState()});let r=t(n);for(let e of n.payload.actions)this.emitter.emit(`after:${n.type}`,{action:n,state:r});return r}this.emitter.emit(n.type,{action:n,state:e.getState()});let r=t(n);return this.emitter.emit(`after:${n.type}`,{action:n,state:r}),r};serialize(e,t){return function(e,t,n){if(!t.type||!t.id)throw Error("Unknown entity");if(!n[t.type])throw Error(`Serializer not found for ${t.type}`);return function r(i){let a=n[i.type];if(!a)return tD;let s=function(e,t){let n=e.requests[t],r=e.mapping[t];if(r&&(!n||!n.resourceUri||e.entities[r][n.resourceUri]))return e.entities[r][n?n.resourceUri:t]}(e,i.id)||(i.id&&i.type?i:null);if(!s)return tD;let o=a(s,e,{isTopLevel:t.id===i.id}),l=o.next();for(;!l.done;){let e=l.value,t=tD;if(e){if(Array.isArray(e)){let n=[];for(let t of e)n.push(r(t));t=n}else t=r(e)}l=o.next(t)}return l.value===tD?tD:function(e){let t={};for(let[n,r]of e){if(n===tM&&r!==tD)return r;r!==tD&&null!=r&&(t[n]=r)}return t}(l.value)}(t)}(this.getState().iiif,e,t)}toPresentation2(e){return this.serialize(e,tz)}toPresentation3(e){return this.serialize(e,tQ)}hydrate(e,t){return this.get(e,t,{skipSelfReturn:!1})}get(e,t,n={}){"string"!=typeof t&&(n=t||{},t=void 0);let{skipSelfReturn:r=!0}=n||{};if(Array.isArray(e))return e.map(e=>this.get(e,n));let i=this.getState();if("string"==typeof e){let n=t||i.iiif.mapping[e];if(!n)return r?null:{id:e,type:"unknown"};e={id:e,type:n}}let a=t||e.type,s=e.id,o=i.iiif.entities[a];if(!o){let t=i.iiif.requests[s];return t&&t.resourceUri!==s?this.get(t.resourceUri,n):r?null:e}return o[e.id]||(r?null:e)}select(e){return e(this.getState())}getStore(){return this.store}getState(){return this.store.getState()}loadManifest(e,t){let n="string"==typeof e?e:e.id;return this.load(n,t)}loadCollection(e,t){let n="string"==typeof e?e:e.id;return this.load(n,t)}load(e,t){let n="string"==typeof e?e:e.id;return t?this.staticFetcher(n,t):this.remoteFetcher(n)}areInputsEqual(e,t){return nO(e,t)}subscribe(e,t,n){void 0===n&&(void 0===t||!1===t||!0===t)&&(n=t,t=e,e=e=>e);let r=n?null:e(this.store.getState());return n||t(r,this),this.store.subscribe(()=>{let n=this.store.getState(),i=e(n);r===i||nO(r,i)||t(i,this),r=i})}async ensureLoaded(e){let t="string"==typeof e?e:e.id;this.requestStatus(t)||await this.load(t)}requestStatus(e){return this.select(t=>t.iiif.requests[e])}getResourceMeta(e,t){let n=this.getState().iiif.meta[e];return n?t?n[t]:n:void 0}setMetaValue([e,t,n],r){this.dispatch("function"==typeof r?np.setMetaValueDynamic({id:e,meta:t,key:n,updateValue:r}):np.setMetaValue({id:e,meta:t,key:n,value:r}))}}var nH=n(1036),nU=n(3041);let nG="object"==typeof self?self:globalThis,nz=(e,t)=>{let n=(t,n)=>(e.set(n,t),t),r=i=>{if(e.has(i))return e.get(i);let[a,s]=t[i];switch(a){case 0:case -1:return n(s,i);case 1:{let e=n([],i);for(let t of s)e.push(r(t));return e}case 2:{let e=n({},i);for(let[t,n]of s)e[r(t)]=r(n);return e}case 3:return n(new Date(s),i);case 4:{let{source:e,flags:t}=s;return n(new RegExp(e,t),i)}case 5:{let e=n(new Map,i);for(let[t,n]of s)e.set(r(t),r(n));return e}case 6:{let e=n(new Set,i);for(let t of s)e.add(r(t));return e}case 7:{let{name:e,message:t}=s;return n(new nG[e](t),i)}case 8:return n(BigInt(s),i);case"BigInt":return n(Object(BigInt(s)),i)}return n(new nG[a](s),i)};return r},nj=e=>nz(new Map,e)(0),{toString:n$}={},{keys:nW}=Object,nV=e=>{let t=typeof e;if("object"!==t||!e)return[0,t];let n=n$.call(e).slice(8,-1);switch(n){case"Array":return[1,""];case"Object":return[2,""];case"Date":return[3,""];case"RegExp":return[4,""];case"Map":return[5,""];case"Set":return[6,""]}return n.includes("Array")?[1,n]:n.includes("Error")?[7,n]:[2,n]},nY=([e,t])=>0===e&&("function"===t||"symbol"===t),nq=(e,t,n,r)=>{let i=(e,t)=>{let i=r.push(e)-1;return n.set(t,i),i},a=r=>{if(n.has(r))return n.get(r);let[s,o]=nV(r);switch(s){case 0:{let t=r;switch(o){case"bigint":s=8,t=r.toString();break;case"function":case"symbol":if(e)throw TypeError("unable to serialize "+o);t=null;break;case"undefined":return i([-1],r)}return i([s,t],r)}case 1:{if(o)return i([o,[...r]],r);let e=[],t=i([s,e],r);for(let t of r)e.push(a(t));return t}case 2:{if(o)switch(o){case"BigInt":return i([o,r.toString()],r);case"Boolean":case"Number":case"String":return i([o,r.valueOf()],r)}if(t&&"toJSON"in r)return a(r.toJSON());let n=[],l=i([s,n],r);for(let t of nW(r))(e||!nY(nV(r[t])))&&n.push([a(t),a(r[t])]);return l}case 3:return i([s,r.toISOString()],r);case 4:{let{source:e,flags:t}=r;return i([s,{source:e,flags:t}],r)}case 5:{let t=[],n=i([s,t],r);for(let[n,i]of r)(e||!(nY(nV(n))||nY(nV(i))))&&t.push([a(n),a(i)]);return n}case 6:{let t=[],n=i([s,t],r);for(let n of r)(e||!nY(nV(n)))&&t.push(a(n));return n}}let{message:l}=r;return i([s,{name:o,message:l}],r)};return a},nQ=(e,{json:t,lossy:n}={})=>{let r=[];return nq(!(t||n),!!t,new Map,r)(e),r};var nX="function"==typeof structuredClone?(e,t)=>t&&("json"in t||"lossy"in t)?nj(nQ(e,t)):structuredClone(e):(e,t)=>nj(nQ(e,t));class nK{constructor(e,t,n){this.property=e,this.normal=t,n&&(this.space=n)}}function nZ(e,t){let n={},r={},i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new nK(n,r,t)}function nJ(e){return e.toLowerCase()}nK.prototype.property={},nK.prototype.normal={},nK.prototype.space=null;class n0{constructor(e,t){this.property=e,this.attribute=t}}n0.prototype.space=null,n0.prototype.boolean=!1,n0.prototype.booleanish=!1,n0.prototype.overloadedBoolean=!1,n0.prototype.number=!1,n0.prototype.commaSeparated=!1,n0.prototype.spaceSeparated=!1,n0.prototype.commaOrSpaceSeparated=!1,n0.prototype.mustUseProperty=!1,n0.prototype.defined=!1;let n1=0,n2=n7(),n3=n7(),n4=n7(),n5=n7(),n6=n7(),n8=n7(),n9=n7();function n7(){return 2**++n1}let re=Object.keys(X);class rt extends n0{constructor(e,t,n,r){var i,a;let s=-1;if(super(e,t),r&&(this.space=r),"number"==typeof n)for(;++s<re.length;){let e=re[s];i=re[s],(a=(n&X[e])===X[e])&&(this[i]=a)}}}rt.prototype.defined=!0;let rn={}.hasOwnProperty;function rr(e){let t;let n={},r={};for(t in e.properties)if(rn.call(e.properties,t)){let i=e.properties[t],a=new rt(t,e.transform(e.attributes||{},t),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(t)&&(a.mustUseProperty=!0),n[t]=a,r[nJ(t)]=t,r[nJ(a.attribute)]=t}return new nK(n,r,e.space)}let ri=rr({space:"xlink",transform:(e,t)=>"xlink:"+t.slice(5).toLowerCase(),properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),ra=rr({space:"xml",transform:(e,t)=>"xml:"+t.slice(3).toLowerCase(),properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function rs(e,t){return t in e?e[t]:t}function ro(e,t){return rs(e,t.toLowerCase())}let rl=rr({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:ro,properties:{xmlns:null,xmlnsXLink:null}}),rc=rr({transform:(e,t)=>"role"===t?t:"aria-"+t.slice(4).toLowerCase(),properties:{ariaActiveDescendant:null,ariaAtomic:n3,ariaAutoComplete:null,ariaBusy:n3,ariaChecked:n3,ariaColCount:n5,ariaColIndex:n5,ariaColSpan:n5,ariaControls:n6,ariaCurrent:null,ariaDescribedBy:n6,ariaDetails:null,ariaDisabled:n3,ariaDropEffect:n6,ariaErrorMessage:null,ariaExpanded:n3,ariaFlowTo:n6,ariaGrabbed:n3,ariaHasPopup:null,ariaHidden:n3,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:n6,ariaLevel:n5,ariaLive:null,ariaModal:n3,ariaMultiLine:n3,ariaMultiSelectable:n3,ariaOrientation:null,ariaOwns:n6,ariaPlaceholder:null,ariaPosInSet:n5,ariaPressed:n3,ariaReadOnly:n3,ariaRelevant:null,ariaRequired:n3,ariaRoleDescription:n6,ariaRowCount:n5,ariaRowIndex:n5,ariaRowSpan:n5,ariaSelected:n3,ariaSetSize:n5,ariaSort:null,ariaValueMax:n5,ariaValueMin:n5,ariaValueNow:n5,ariaValueText:null,role:null}}),ru=rr({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:ro,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:n8,acceptCharset:n6,accessKey:n6,action:null,allow:null,allowFullScreen:n2,allowPaymentRequest:n2,allowUserMedia:n2,alt:null,as:null,async:n2,autoCapitalize:null,autoComplete:n6,autoFocus:n2,autoPlay:n2,blocking:n6,capture:null,charSet:null,checked:n2,cite:null,className:n6,cols:n5,colSpan:null,content:null,contentEditable:n3,controls:n2,controlsList:n6,coords:n5|n8,crossOrigin:null,data:null,dateTime:null,decoding:null,default:n2,defer:n2,dir:null,dirName:null,disabled:n2,download:n4,draggable:n3,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:n2,formTarget:null,headers:n6,height:n5,hidden:n2,high:n5,href:null,hrefLang:null,htmlFor:n6,httpEquiv:n6,id:null,imageSizes:null,imageSrcSet:null,inert:n2,inputMode:null,integrity:null,is:null,isMap:n2,itemId:null,itemProp:n6,itemRef:n6,itemScope:n2,itemType:n6,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:n2,low:n5,manifest:null,max:null,maxLength:n5,media:null,method:null,min:null,minLength:n5,multiple:n2,muted:n2,name:null,nonce:null,noModule:n2,noValidate:n2,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:n2,optimum:n5,pattern:null,ping:n6,placeholder:null,playsInline:n2,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:n2,referrerPolicy:null,rel:n6,required:n2,reversed:n2,rows:n5,rowSpan:n5,sandbox:n6,scope:null,scoped:n2,seamless:n2,selected:n2,shadowRootClonable:n2,shadowRootDelegatesFocus:n2,shadowRootMode:null,shape:null,size:n5,sizes:null,slot:null,span:n5,spellCheck:n3,src:null,srcDoc:null,srcLang:null,srcSet:null,start:n5,step:null,style:null,tabIndex:n5,target:null,title:null,translate:null,type:null,typeMustMatch:n2,useMap:null,value:n3,width:n5,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:n6,axis:null,background:null,bgColor:null,border:n5,borderColor:null,bottomMargin:n5,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:n2,declare:n2,event:null,face:null,frame:null,frameBorder:null,hSpace:n5,leftMargin:n5,link:null,longDesc:null,lowSrc:null,marginHeight:n5,marginWidth:n5,noResize:n2,noHref:n2,noShade:n2,noWrap:n2,object:null,profile:null,prompt:null,rev:null,rightMargin:n5,rules:null,scheme:null,scrolling:n3,standby:null,summary:null,text:null,topMargin:n5,valueType:null,version:null,vAlign:null,vLink:null,vSpace:n5,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:n2,disableRemotePlayback:n2,prefix:null,property:null,results:n5,security:null,unselectable:null}}),rd=rr({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:rs,properties:{about:n9,accentHeight:n5,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:n5,amplitude:n5,arabicForm:null,ascent:n5,attributeName:null,attributeType:null,azimuth:n5,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:n5,by:null,calcMode:null,capHeight:n5,className:n6,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:n5,diffuseConstant:n5,direction:null,display:null,dur:null,divisor:n5,dominantBaseline:null,download:n2,dx:null,dy:null,edgeMode:null,editable:null,elevation:n5,enableBackground:null,end:null,event:null,exponent:n5,externalResourcesRequired:null,fill:null,fillOpacity:n5,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:n8,g2:n8,glyphName:n8,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:n5,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:n5,horizOriginX:n5,horizOriginY:n5,id:null,ideographic:n5,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:n5,k:n5,k1:n5,k2:n5,k3:n5,k4:n5,kernelMatrix:n9,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:n5,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:n5,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:n5,overlineThickness:n5,paintOrder:null,panose1:null,path:null,pathLength:n5,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:n6,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:n5,pointsAtY:n5,pointsAtZ:n5,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:n9,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:n9,rev:n9,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:n9,requiredFeatures:n9,requiredFonts:n9,requiredFormats:n9,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:n5,specularExponent:n5,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:n5,strikethroughThickness:n5,string:null,stroke:null,strokeDashArray:n9,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:n5,strokeOpacity:n5,strokeWidth:null,style:null,surfaceScale:n5,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:n9,tabIndex:n5,tableValues:null,target:null,targetX:n5,targetY:n5,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:n9,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:n5,underlineThickness:n5,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:n5,values:null,vAlphabetic:n5,vMathematical:n5,vectorEffect:null,vHanging:n5,vIdeographic:n5,version:null,vertAdvY:n5,vertOriginX:n5,vertOriginY:n5,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:n5,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),rh=nZ([ra,ri,rl,rc,ru],"html"),rp=nZ([ra,ri,rl,rc,rd],"svg");function rf(e){let t=[],n=String(e||""),r=n.indexOf(","),i=0,a=!1;for(;!a;){-1===r&&(r=n.length,a=!0);let e=n.slice(i,r).trim();(e||!a)&&t.push(e),i=r+1,r=n.indexOf(",",i)}return t}function rm(e,t){let n=t||{};return(""===e[e.length-1]?[...e,""]:e).join((n.padRight?" ":"")+","+(!1===n.padLeft?"":" ")).trim()}let rg=/[#.]/g,rE=/^data[-\w.:]+$/i,rT=/-[a-z]/g,rv=/[A-Z]/g;function ry(e,t){let n=nJ(t),r=t,i=n0;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&"data"===n.slice(0,4)&&rE.test(t)){if("-"===t.charAt(4)){let e=t.slice(5).replace(rT,rb);r="data"+e.charAt(0).toUpperCase()+e.slice(1)}else{let e=t.slice(4);if(!rT.test(e)){let n=e.replace(rv,rA);"-"!==n.charAt(0)&&(n="-"+n),t="data"+n}}i=rt}return new i(r,t)}function rA(e){return"-"+e.toLowerCase()}function rb(e){return e.charAt(1).toUpperCase()}function r_(e){let t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function rC(e){return e.join(" ").trim()}let rS=new Set(["button","menu","reset","submit"]),rI={}.hasOwnProperty;function rx(e,t,n){let r=n&&function(e){let t={},n=-1;for(;++n<e.length;)t[e[n].toLowerCase()]=e[n];return t}(n);return function(n,i,...a){let s,o=-1;if(null==n)s={type:"root",children:[]},a.unshift(i);else{var l;if((s=function(e,t){let n,r;let i=e||"",a={},s=0;for(;s<i.length;){rg.lastIndex=s;let e=rg.exec(i),t=i.slice(s,e?e.index:i.length);t&&(n?"#"===n?a.id=t:Array.isArray(a.className)?a.className.push(t):a.className=[t]:r=t,s+=t.length),e&&(n=e[0],s++)}return{type:"element",tagName:r||t||"div",properties:a,children:[]}}(n,t)).tagName=s.tagName.toLowerCase(),r&&rI.call(r,s.tagName)&&(s.tagName=r[s.tagName]),l=s.tagName,!(null==i||"object"!=typeof i||Array.isArray(i))&&("input"===l||!i.type||"string"!=typeof i.type||!("children"in i&&Array.isArray(i.children))&&("button"===l?rS.has(i.type.toLowerCase()):!("value"in i)))){let t;for(t in i)rI.call(i,t)&&function(e,t,n,r){let i;let a=ry(e,n),s=-1;if(null!=r){if("number"==typeof r){if(Number.isNaN(r))return;i=r}else i="boolean"==typeof r?r:"string"==typeof r?a.spaceSeparated?r_(r):a.commaSeparated?rf(r):a.commaOrSpaceSeparated?r_(rf(r).join(" ")):rk(a,a.property,r):Array.isArray(r)?r.concat():"style"===a.property?function(e){let t;let n=[];for(t in e)rI.call(e,t)&&n.push([t,e[t]].join(": "));return n.join("; ")}(r):String(r);if(Array.isArray(i)){let e=[];for(;++s<i.length;){let t=rk(a,a.property,i[s]);e[s]=t}i=e}if("className"===a.property&&Array.isArray(t.className)){let e=i;i=t.className.concat(e)}t[a.property]=i}}(e,s.properties,t,i[t])}else a.unshift(i)}for(;++o<a.length;)!function e(t,n){let r=-1;if(null==n);else if("string"==typeof n||"number"==typeof n)t.push({type:"text",value:String(n)});else if(Array.isArray(n))for(;++r<n.length;)e(t,n[r]);else if("object"==typeof n&&"type"in n)"root"===n.type?e(t,n.children):t.push(n);else throw Error("Expected node, nodes, or string, got `"+n+"`")}(s.children,a[o]);return"element"===s.type&&"template"===s.tagName&&(s.content={type:"root",children:s.children},s.children=[]),s}}function rk(e,t,n){if("string"==typeof n){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(""===n||nJ(n)===nJ(t)))return!0}return n}let rw=rx(rh,"div"),rN=rx(rp,"g",["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"]),rO=/\r?\n|\r/g,rR={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},rL={}.hasOwnProperty,rD=Object.prototype;function rM(e,t){let n;switch(t.nodeName){case"#comment":return n={type:"comment",value:t.data},rF(e,t,n),n;case"#document":case"#document-fragment":{let r="mode"in t&&("quirks"===t.mode||"limited-quirks"===t.mode);if(n={type:"root",children:rP(e,t.childNodes),data:{quirksMode:r}},e.file&&e.location){let t=String(e.file),r=function(e){let t=String(e),n=[];for(rO.lastIndex=0;rO.test(t);)n.push(rO.lastIndex);return n.push(t.length+1),{toPoint:function(e){let t=-1;if("number"==typeof e&&e>-1&&e<n[n.length-1]){for(;++t<n.length;)if(n[t]>e)return{line:t+1,column:e-(t>0?n[t-1]:0)+1,offset:e}}},toOffset:function(e){let t=e&&e.line,r=e&&e.column;if("number"==typeof t&&"number"==typeof r&&!Number.isNaN(t)&&!Number.isNaN(r)&&t-1 in n){let e=(n[t-2]||0)+r-1||0;if(e>-1&&e<n[n.length-1])return e}}}}(t),i=r.toPoint(0),a=r.toPoint(t.length);n.position={start:i,end:a}}return n}case"#documentType":return rF(e,t,n={type:"doctype"}),n;case"#text":return n={type:"text",value:t.value},rF(e,t,n),n;default:return function(e,t){let n=e.schema;e.schema=t.namespaceURI===rR.svg?rp:rh;let r=-1,i={};for(;++r<t.attrs.length;){let e=t.attrs[r],n=(e.prefix?e.prefix+":":"")+e.name;rL.call(rD,n)||(i[n]=e.value)}let a=("svg"===e.schema.space?rN:rw)(t.tagName,i,rP(e,t.childNodes));if(rF(e,t,a),"template"===a.tagName){let n=t.sourceCodeLocation,r=n&&n.startTag&&rB(n.startTag),i=n&&n.endTag&&rB(n.endTag),s=rM(e,t.content);r&&i&&e.file&&(s.position={start:r.end,end:i.start}),a.content=s}return e.schema=n,a}(e,t)}}function rP(e,t){let n=-1,r=[];for(;++n<t.length;){let i=rM(e,t[n]);r.push(i)}return r}function rF(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){let r=function(e,t,n){let r=rB(n);if("element"===t.type){let i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){let r;let i={};if(n.attrs)for(r in n.attrs)rL.call(n.attrs,r)&&(i[ry(e.schema,r).property]=rB(n.attrs[r]));n.startTag;let a=rB(n.startTag),s=n.endTag?rB(n.endTag):void 0,o={opening:a};s&&(o.closing=s),o.properties=i,t.data={position:o}}}return r}(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function rB(e){let t=rH({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=rH({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function rH(e){return e.line&&e.column?e:void 0}let rU={}.hasOwnProperty;function rG(e,t){let n=t||{};function r(t,...n){let i=r.invalid,a=r.handlers;if(t&&rU.call(t,e)){let n=String(t[e]);i=rU.call(a,n)?a[n]:r.unknown}if(i)return i.call(this,t,...n)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}let rz={}.hasOwnProperty,rj=rG("type",{handlers:{root:function(e,t){let n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=r$(e.children,n,t),rW(e,n),n},element:function(e,t){let n;let r=t;"element"===e.type&&"svg"===e.tagName.toLowerCase()&&"html"===t.space&&(r=rp);let i=[];if(e.properties){for(n in e.properties)if("children"!==n&&rz.call(e.properties,n)){let t=function(e,t,n){let r=ry(e,t);if(!1===n||null==n||"number"==typeof n&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?rm(n):rC(n));let i={name:r.attribute,value:!0===n?"":String(n)};if(r.space&&"html"!==r.space&&"svg"!==r.space){let e=i.name.indexOf(":");e<0?i.prefix="":(i.name=i.name.slice(e+1),i.prefix=r.attribute.slice(0,e)),i.namespace=rR[r.space]}return i}(r,n,e.properties[n]);t&&i.push(t)}}let a=r.space,s={nodeName:e.tagName,tagName:e.tagName,attrs:i,namespaceURI:rR[a],childNodes:[],parentNode:null};return s.childNodes=r$(e.children,s,r),rW(e,s),"template"===e.tagName&&e.content&&(s.content=function(e,t){let n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=r$(e.children,n,t),rW(e,n),n}(e.content,r)),s},text:function(e){let t={nodeName:"#text",value:e.value,parentNode:null};return rW(e,t),t},comment:function(e){let t={nodeName:"#comment",data:e.value,parentNode:null};return rW(e,t),t},doctype:function(e){let t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return rW(e,t),t}}});function r$(e,t,n){let r=-1,i=[];if(e)for(;++r<e.length;){let a=rj(e[r],n);a.parentNode=t,i.push(a)}return i}function rW(e,t){let n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}let rV=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],rY=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]);(d=w=w||(w={}))[d.EOF=-1]="EOF",d[d.NULL=0]="NULL",d[d.TABULATION=9]="TABULATION",d[d.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",d[d.LINE_FEED=10]="LINE_FEED",d[d.FORM_FEED=12]="FORM_FEED",d[d.SPACE=32]="SPACE",d[d.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",d[d.QUOTATION_MARK=34]="QUOTATION_MARK",d[d.NUMBER_SIGN=35]="NUMBER_SIGN",d[d.AMPERSAND=38]="AMPERSAND",d[d.APOSTROPHE=39]="APOSTROPHE",d[d.HYPHEN_MINUS=45]="HYPHEN_MINUS",d[d.SOLIDUS=47]="SOLIDUS",d[d.DIGIT_0=48]="DIGIT_0",d[d.DIGIT_9=57]="DIGIT_9",d[d.SEMICOLON=59]="SEMICOLON",d[d.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",d[d.EQUALS_SIGN=61]="EQUALS_SIGN",d[d.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",d[d.QUESTION_MARK=63]="QUESTION_MARK",d[d.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",d[d.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",d[d.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",d[d.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",d[d.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",d[d.GRAVE_ACCENT=96]="GRAVE_ACCENT",d[d.LATIN_SMALL_A=97]="LATIN_SMALL_A",d[d.LATIN_SMALL_F=102]="LATIN_SMALL_F",d[d.LATIN_SMALL_X=120]="LATIN_SMALL_X",d[d.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",d[d.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER";let rq={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function rQ(e){return e>=55296&&e<=57343}function rX(e){return 32!==e&&10!==e&&13!==e&&9!==e&&12!==e&&e>=1&&e<=31||e>=127&&e<=159}function rK(e){return e>=64976&&e<=65007||rY.has(e)}(h=N=N||(N={})).controlCharacterInInputStream="control-character-in-input-stream",h.noncharacterInInputStream="noncharacter-in-input-stream",h.surrogateInInputStream="surrogate-in-input-stream",h.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",h.endTagWithAttributes="end-tag-with-attributes",h.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",h.unexpectedSolidusInTag="unexpected-solidus-in-tag",h.unexpectedNullCharacter="unexpected-null-character",h.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",h.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",h.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",h.missingEndTagName="missing-end-tag-name",h.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",h.unknownNamedCharacterReference="unknown-named-character-reference",h.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",h.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",h.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",h.eofBeforeTagName="eof-before-tag-name",h.eofInTag="eof-in-tag",h.missingAttributeValue="missing-attribute-value",h.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",h.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",h.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",h.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",h.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",h.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",h.missingDoctypePublicIdentifier="missing-doctype-public-identifier",h.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",h.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",h.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",h.cdataInHtmlContent="cdata-in-html-content",h.incorrectlyOpenedComment="incorrectly-opened-comment",h.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",h.eofInDoctype="eof-in-doctype",h.nestedComment="nested-comment",h.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",h.eofInComment="eof-in-comment",h.incorrectlyClosedComment="incorrectly-closed-comment",h.eofInCdata="eof-in-cdata",h.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",h.nullCharacterReference="null-character-reference",h.surrogateCharacterReference="surrogate-character-reference",h.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",h.controlCharacterReference="control-character-reference",h.noncharacterCharacterReference="noncharacter-character-reference",h.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",h.missingDoctypeName="missing-doctype-name",h.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",h.duplicateAttribute="duplicate-attribute",h.nonConformingDoctype="non-conforming-doctype",h.missingDoctype="missing-doctype",h.misplacedDoctype="misplaced-doctype",h.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",h.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",h.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",h.openElementsLeftAfterEof="open-elements-left-after-eof",h.abandonedHeadElementChild="abandoned-head-element-child",h.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",h.nestedNoscriptInHead="nested-noscript-in-head",h.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text";class rZ{constructor(e){this.handler=e,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=65536,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+Number(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(e){let{line:t,col:n,offset:r}=this;return{code:e,startLine:t,endLine:t,startCol:n,endCol:n,startOffset:r,endOffset:r}}_err(e){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(e)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(e){if(this.pos!==this.html.length-1){let t=this.html.charCodeAt(this.pos+1);if(t>=56320&&t<=57343)return this.pos++,this._addGap(),(e-55296)*1024+9216+t}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,w.EOF;return this._err(N.surrogateInInputStream),e}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(e,t){this.html.length>0?this.html+=e:this.html=e,this.endOfChunkHit=!1,this.lastChunkWritten=t}insertHtmlAtCurrentPos(e){this.html=this.html.substring(0,this.pos+1)+e+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(e,t){if(this.pos+e.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(t)return this.html.startsWith(e,this.pos);for(let t=0;t<e.length;t++)if((32|this.html.charCodeAt(this.pos+t))!==e.charCodeAt(t))return!1;return!0}peek(e){let t=this.pos+e;if(t>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,w.EOF;let n=this.html.charCodeAt(t);return n===w.CARRIAGE_RETURN?w.LINE_FEED:n}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,w.EOF;let e=this.html.charCodeAt(this.pos);return e===w.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,w.LINE_FEED):e===w.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,rQ(e)&&(e=this._processSurrogate(e)),null===this.handler.onParseError||e>31&&e<127||e===w.LINE_FEED||e===w.CARRIAGE_RETURN||e>159&&e<64976||this._checkForProblematicCharacters(e),e)}_checkForProblematicCharacters(e){rX(e)?this._err(N.controlCharacterInInputStream):rK(e)&&this._err(N.noncharacterInInputStream)}retreat(e){for(this.pos-=e;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}function rJ(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}(p=O=O||(O={}))[p.CHARACTER=0]="CHARACTER",p[p.NULL_CHARACTER=1]="NULL_CHARACTER",p[p.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",p[p.START_TAG=3]="START_TAG",p[p.END_TAG=4]="END_TAG",p[p.COMMENT=5]="COMMENT",p[p.DOCTYPE=6]="DOCTYPE",p[p.EOF=7]="EOF",p[p.HIBERNATION=8]="HIBERNATION";var r0=new Uint16Array('<\xd5\0\0\0\0\0\0EMabcfglmnoprstu\\bfms\x7f\x84\x8b\x90\x95\x98\xa6\xb3\xb9\xc8\xcflig\xc6P&cute\xc1reve;iyx}rc\xc2;r;\ud835\udd04rave\xc0pha;acr;d;gp\x9d\xa1on;f;\ud835\udd38plyFunction;ing\xc5cs\xbe\xc3r;\ud835\udc9cign;ilde\xc3ml\xc4aceforsu\xe5\xfb\xfecr\xea\xf2kslash;\xf6\xf8;ed;y;crtause;noullis;a;r;\ud835\udd05pf;\ud835\udd39eve;c\xf2mpeq;HOacdefhilorsucy;PY\xa9cpyute;;italDifferentialD;leys;aeioron;dil\xc7rc;nint;ot;dnilla;terDot;\xf2i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;\ud835\udc9ep;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;\ud835\udd07afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;\ud835\udd3b;DEot;qual;bleCDLRUVontourIntegra\xeco\0\0\xbbnArrow;eoftARTrrow;ightArrow;e\xe5ngLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;\ud835\udc9frok;NTacdfglmopqstuxG;H\xd0cute\xc9aiyron;rc\xca;ot;r;\ud835\udd08rave\xc8ement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;\ud835\udd3csilon;uail;Tilde;librium;cir;m;a;ml\xcbipsts;onentialE;cfiosy;r;\ud835\udd09lled\0\0mallSquare;erySmallSquare;\0\0\0f;\ud835\udd3dAll;riertrf;c\xf2JTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;\ud835\udd0a;pf;\ud835\udd3eeaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;\ud835\udca2;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ct\xf2rok;mpownHum\xf0qual;EJOacdfgmnostucy;lig;cy;cute\xcdiyrc\xce;ot;r;rave\xcc;apcgr;inaryI;lie\xf3\0;egrral;section;isibleCTomma;imes;gpton;f;\ud835\udd40a;cr;ilde;\0cy;l\xcfcfosuiyrc;;r;\ud835\udd0dpf;\ud835\udd41\0r;\ud835\udca5rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;\ud835\udd0epf;\ud835\udd42cr;\ud835\udca6JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ight\xe1sEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;\ud835\udd0f;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftaright\xe1ight\xe1f;\ud835\udd43erLReftArrow;ightArrow;cht\xf2;rok;;acefiosup;y;dliumSpace;lintrf;r;\ud835\udd10nusPlus;pf;\ud835\udd44c\xf2;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicn\xeberyThi\xeetedGLreaterGreate\xf2essLes\xf3Line;r;\ud835\udd11Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;\ud835\udca9ilde\xd1;Eacdfgmoprstuvlig;cute\xd3iyrc\xd4;blac;r;\ud835\udd12rave\xd2aeicr;ga;cron;pf;\ud835\udd46enCurlyDQoubleQuote;uote;;clr;\ud835\udcaaash\xd8ide\xd5es;ml\xd6erBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;\ud835\udd13i;;usMinus;ipncareplan\xe5f;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;\ud835\udcab;UfosOT"r;\ud835\udd14pf;cr;\ud835\udcacBEacefhiorsuarr;G\xaecnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;r\xbbo;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;\ud835\udd16ortDLRUownArrow\xbbeftArrow\xbbightArrow\xbbpArrow;gma;allCircle;pf;\ud835\udd4a\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;\ud835\udcaear;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th\xe1;;esrset;Equal;et\xbbHRSacfhiorsORN\xdeADE;Hccy;y;bu;;aeyron;dil;;r;\ud835\udd17ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;\ud835\udd4bipleDot;ctr;\ud835\udcafrok;\0\0\0\0\0\0\0crute\xdar;ocir;r\0y;ve;iyrc\xdb;blac;r;\ud835\udd18rave\xd9acr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;\ud835\udd4cADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;own\xe1erLReftArrow;ightArrow;i;lon;ing;cr;\ud835\udcb0ilde;ml\xdcDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;\ud835\udd19pf;\ud835\udd4dcr;\ud835\udcb1dash;cefosirc;dge;r;\ud835\udd1apf;\ud835\udd4ecr;\ud835\udcb2fiosr;\ud835\udd1b;pf;\ud835\udd4fcr;\ud835\udcb3AIUacfosucy;cy;cy;cute\xddiyrc;;r;\ud835\udd1cpf;\ud835\udd50cr;\ud835\udcb4ml;Hacdefoscy;cute;ayron;;ot;\0oWidt\xe8a;r;pf;cr;\ud835\udcb5\0\0\0\0\0\0\0cute\xe1reve;;Ediuy;;rc\xe2te\xb4;lig\xe6;r\xb2;\ud835\udd1erave\xe0epfpsym;\xe8ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;e\xbbsd;a;;;;;;;;t;vb;d;pth;\xbb\xb9arr;gpon;f;\ud835\udd52;Eaeiop;cir;;d;s;rox;e\xf1ing\xe5ctyr;\ud835\udcb6;mp;e\xf1ilde\xe3ml\xe4cionin\xf4nt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;ge\xbbrk;tbrk;oy;quo;cmprtaus;eptyv;s\xe9no\xf5ahw;;een;r;\ud835\udd1fgcostuvwaiu\xf0rc;p\xbbdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;e\xe5\xe5arow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;\ud835\udd53;tom\xbbtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbar\xa6ceior;\ud835\udcb7mi;m;el;bh;sub;l;et\xbbp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;\xeeaeiu\0s;on;dil\xe7rc;ps;sm;ot;dmnil\xb8ptyv;t\xa2;er\xe4r;\ud835\udd20ceiy;ck;mark\xbb;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd\xbb;st;irc;ash;nint;id;cir;ubs;uit\xbb\0on;e;q\xc7\xc6\0\0a;t;;fl\xeeemxent\xbbe\xf3\0;dot;n\xf4fry;\ud835\udd54o\xe4\xa9;sr;aorr;ss;cur;\ud835\udcb8bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0re\xe3u\xe3ee;edge;en\xa4earrowlreft\xbbight\xbbe\xe4cionin\xf4nt;lcty;AHabcdefhijlorstuwzr\xf2ar;glrsger;eth;\xf2h;v\xbbarow;a\xe3ayron;;;aogrr;tseq;glm\xb0ta;ptyv;irsht;;\ud835\udd21arlr\xbb\xbbaegsvm;osnd;suit;amma;in;;iode\xf7;ontimes;n\xf8cy;c\0\0rn;op;lptuwlar;f;\ud835\udd55;empsq;dot;inus;lus;quare;blebarwedg\xe5\xfanadhownarrow\xf3arpoonlref\xf4igh\xf4karo\xf7\0\0rn;op;cotry;\ud835\udcb9;l;rok;drot;i;fahr\xf2a\xf2angle;ciy;grarr;DacdefglmnopqrstuxDoo\xf4csute\xe9ter;aioyron;r;c\xealon;;ot;Drot;;\ud835\udd22;rsave\xe8;dot;;ilsnters;;;dot;apscr;ty;svet\xbbp1;;;gs;p;gpon;f;\ud835\udd56alsr;sl;us;i;lvon\xbb;csuviorc\xbb\0\0\xedantgltr\xbbess\xbbaeils;st;v;DD;parsl;Daot;rr;cdir;o\xf4ah;\xf0mrl\xebo;cipl;s\xf4eoctatio\xeenential\xe5\0\0\0\0\0\0\0llingdotse\xf1y;male;ilrlig;\0\0g;ig;;\ud835\udd23lig;lig;fjaltt;ig;ns;of;\0f;\ud835\udd57ak;v;artint;aocs\0\0\xbd;\xbc;;;\0;;\0\0\xbe;;5;\0;;8;l;wn;cr;\ud835\udcbbEabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan\xf4;cdlc;ot;o;l;;es;r;\ud835\udd24;gmel;cy;;Eaj;;;Eaes;p;prox\xbb;q;qim;pf;\ud835\udd58cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pro\xf8r;qlqles\xf3i\xedenrtneqq;\xc5Aabcefkosyr\xf2ilmrrs\xf0f\xbbil\xf4drcy;;cwir;;ar;irc;alrrts;uit\xbblip;con;r;\ud835\udd25sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;\ud835\udd59bar;cltr;\ud835\udcbdas\xe8rok;bpull;hen\xbb\0\0\0\0\0\0cute\xed;iyrc\xee;cxy;cl\xa1fr;\ud835\udd26rave\xec;inoinnt;t;fin;ta;lig;aopcgtr;elpin\xe5ar\xf4h;f;ed;;cfotare;in;tie;do\xf4;celpal;grer\xf3\xe3arhk;rod;cgpty;on;f;\ud835\udd5aa;uest\xbfcir;\ud835\udcben;Edsv;ot;;v;;ilde;\0cy;l\xefcfmosuiyrc;;r;\ud835\udd27ath;pf;\ud835\udd5b\0r;\ud835\udcbfrcy;kcy;acfghjosppa;v;eydil;;r;\ud835\udd28reen;cy;cy;pf;\ud835\udd5ccr;\ud835\udcc0ABEHabcdefghjlmnoprstuvartr\xf2\xf2ail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;ra\xeebda;g;dl;\xe5;uo\xabr;bfhlpst;fs;s;\xebp;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;\xec\xe2;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;ta\xe9arpoonduown\xbbp\xbbeftarrows;ightahsrrow;sarpoon\xf3quigarro\xf7hreetimes;;qslan\xf4;cdgsc;ot;o;r;;es;adegsppro\xf8ot;qgq\xf4gt\xf2\xf4i\xedilrsht;;\ud835\udd29;E;rdu;l;lk;cy;;achtr\xf2orne\xf2ard;ri;iodot;ust;ache\xbbEaes;p;prox\xbb;q;qim;abnoptwznrg;r;r\xebglmreftaright\xe1apsto;ight\xe1parrowlref\xf4ight;aflr;;\ud835\udd5dus;imes;st;\xe1;efnge\xbbar;lt;achmtr\xf2orne\xf2ar;d;;ri;achiqtquo;r;\ud835\udcc1m;eg;;buo;r;rok;<;cdhilqrci;r;re\xe5mes;arr;uest;Piar;;efrdushar;har;enrtneqq;\xc5DacdefhilnopsuDot;clprr\xafet;;ese\xbb;sto;dluow\xeeef\xf4\xf0ker;oymma;;ash;asuredangle\xbbr;\ud835\udd2ao;cdnro\xb5;acds\xf4ir;ot\xb7us;bd;u;p;\xf2\xf0dpels;f;\ud835\udd5ectr;\ud835\udcc2pos\xbb;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptla\xbbute;g;;Eiop;d;s;ro\xf8ur;al;s\0p\xa0mp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;ui\xf6eiar;\xedist;sr;\ud835\udd2bEest;qs;qslan\xf4i\xed;r\xbbAapr\xf2rr;ar;;sv;d;cy;AEadestr\xf2;rr;r;;fqstarrro\xf7ightarro\xf7;qslan\xf4;s\xbbi\xed;ri;ei\xe4ptf;\ud835\udd5f\xac;inn;Edv;ot;;;i;v;;aorr;astlle\xecl;;lint;;ceu\xe5;c;e\xf1Aaitr\xf2rr;cw;;ghtarrow\xbbri;echimpqu;ceru\xe5;\ud835\udcc3ort\0\0ar\xe1m;e;qsubp\xe5\xe5bcp;Ees;et;eq;qc;e\xf1;Ees;et;eq;qgilr\xeclde\xf1\xe7ianglelreft;e\xf1ight;e\xf1;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csute\xf3iyr;c\xf4;abioslac;v;old;lig;crir;;\ud835\udd2c\0\0\0n;ave\xf2;bmar;acitr\xf2irr;oss;n\xe5;aeicr;ga;cdnron;;pf;\ud835\udd60aelr;rp;;adiosvr\xf2;efmr;of\xbb\xaa\xbagof;r;lope;;clo\xf2ash\xf8l;ide\xf5es;as;ml\xf6bar;\0\0\0\0\0\0\0\0\0r;ast\xb6;lle\xec\0\0m;;y;rcimptnt;od;il;enk;r;\ud835\udd2dimo;v;ma\xf4ne;;tvchfork\xbb;aunckk;h;\xf6s;abcdemstcir;ir;ou;;n\xb1im;wo;ipuntint;f;\ud835\udd61nd\xa3;Eaceinosu;p;u\xe5;c;acensppro\xf8urlye\xf1\xf1aespprox;qq;im;i\xedme;sEas\xf0dfpalslar;ine;urf;;t\xefrel;cir;\ud835\udcc5;ncsp;fiopsur;\ud835\udd2epf;\ud835\udd62rime;cr;\ud835\udcc6aeoteirnion\xf3nt;st;e\xf1\xf4ABHabcdefhilmnoprstuxartr\xf2\xf2ail;ar\xf2ar;cdenqrteu;te;i\xe3mptyv;g;del;;\xe5uo\xbbr;abcfhlpstwp;;fs;;s;\xeb\xf0l;im;l;;aiil;o;nal\xf3abrr\xf2rk;akcek;;es;ldu;;aeuyron;diil;\xec\xe2;clqsa;dhar;uo;rh;acgl;ipsn\xe5ar\xf4t;ilrsht;;\ud835\udd2faordu\xbb;l;;v;gnshtahlrstrrow;ta\xe9arpoonduow\xeep\xbbeftahrrow\xf3arpoon\xf3ightarrows;quigarro\xf7hreetimes;g;ingdotse\xf1ahmr\xf2a\xf2;oust;ache\xbbmid;abptnrg;r;r\xebaflr;;\ud835\udd63us;imes;apr;gt;olint;ar\xf2achqquo;r;\ud835\udcc7buo;rhirre\xe5mes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu\xef;Eaceinpsy;\0;on;u\xe5;dil;rc;Eas;p;im;olint;i\xed;ot;be;Aacmstxrr;rhr\xeb;ot\xa7i;war;min\xf0nu\xf3\xf1t;r;o\ud835\udd30acoyrp;hycy;;rt\0\0i\xe4ara\xec\xadgmma;fv;;deglnprot;;q;E;;E;e;lus;arr;ar\xf2aeitlslsetm\xe9hp;parsl;dle;;e;s;flptcy;;b;ar;f;\ud835\udd64adres;uit\xbbcsuaup;s;p;s;ubp;eset;e\xf1;eset;e\xf1;afr\xbbar\xf2cemtr;\ud835\udcc8tm\xee\xf1i\xecar\xe6arr;fanighteppsilo\xeeh\xe9s\xbbbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acensppro\xf8urlye\xf1\xf1aesppro\xf8q\xf1g;123;Edehlmnps\xb9\xb2\xb3;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr\xeb;owar;lig\xdf\0\0\0\0\0\0\0\0\0\0\0\0get;;r\xebaeyron;dil;;lrec;r;\ud835\udd31eiko\0e4fa;svym;cnkasppro\xf8im\xbbs\xf0as\xf0rn\xfees\xd7;bd;ar;;eps\xe1;bcfot;ir;;o\ud835\udd65rk;\xe1rime;aipd\xe5adempstngle;dlqrown\xbbeft;e\xf1;ight;e\xf1ot;inus;lus;b;ime;ezium;chtry;\ud835\udcc9;cy;rok;iox\xf4headlreftarro\xf7ightarrow\xbbAHabcdfghlmoprstuwr\xf2ar;crute\xfa\xf2r\0y;ve;iyrc\xfb;abhr\xf2lac;a\xf2irsht;;\ud835\udd32rave\xf9rlr\xbb\xbblk;ct\0\0rn;er\xbbop;ri;alcr;\xa8gpon;f;\ud835\udd66adhlsuown\xe1arpoonlref\xf4igh\xf4i;hl\xbbon\xbbparrows;cit\0\0rn;er\xbbop;ng;ri;cr;\ud835\udccadirot;lde;i;f\xbbamr\xf2l\xfcangle;ABDacdeflnoprszr\xf2ar;v;as\xe8nrgrt;eknprstapp\xe1othin\xe7hirop\xf4;h\xefiugm\xe1bpsetneq;q;setneq;q;hret\xe1ianglelreft\xbbight\xbby;ash\xbbelr;bear;q;lip;bta\xf2r;\ud835\udd33tr\xe9subp\xbb\xbbpf;\ud835\udd67ro\xf0tr\xe9cur;\ud835\udccbbpnEe\xbbnEe\xbbigzag;cefoprsirc;dibgar;e;q;erp;r;\ud835\udd34pf;\ud835\udd68;eat\xe8cr;\ud835\udccc\0\0\0\0\0\0\0tr\xe9r;\ud835\udd35Aar\xf2r\xf2;Aar\xf2r\xf2a\xf0is;dptfl;\ud835\udd69im\xe5Aar\xf2r\xf2cqr;\ud835\udccdptr\xe9acefiosucuyte\xfd;iyrc;;n\xa5r;\ud835\udd36cy;pf;\ud835\udd6acr;\ud835\udccecmy;l\xffacdefhioswcute;ayron;;ot;ettr\xe6a;r;\ud835\udd37cy;grarr;pf;\ud835\udd6bcr;\ud835\udccfjn;j;'.split("").map(e=>e.charCodeAt(0))),r1=new Uint16Array("aglq	\x15\x18\x1b\x0f\0\0\x12p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));let r2=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),r3=null!==(R=String.fromCodePoint)&&void 0!==R?R:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|1023&e),t+=String.fromCharCode(e)};function r4(e){return e>=L.ZERO&&e<=L.NINE}(f=L||(L={}))[f.NUM=35]="NUM",f[f.SEMI=59]="SEMI",f[f.EQUALS=61]="EQUALS",f[f.ZERO=48]="ZERO",f[f.NINE=57]="NINE",f[f.LOWER_A=97]="LOWER_A",f[f.LOWER_F=102]="LOWER_F",f[f.LOWER_X=120]="LOWER_X",f[f.LOWER_Z=122]="LOWER_Z",f[f.UPPER_A=65]="UPPER_A",f[f.UPPER_F=70]="UPPER_F",f[f.UPPER_Z=90]="UPPER_Z",(m=D||(D={}))[m.VALUE_LENGTH=49152]="VALUE_LENGTH",m[m.BRANCH_LENGTH=16256]="BRANCH_LENGTH",m[m.JUMP_TABLE=127]="JUMP_TABLE",(g=M||(M={}))[g.EntityStart=0]="EntityStart",g[g.NumericStart=1]="NumericStart",g[g.NumericDecimal=2]="NumericDecimal",g[g.NumericHex=3]="NumericHex",g[g.NamedEntity=4]="NamedEntity",(E=P||(P={}))[E.Legacy=0]="Legacy",E[E.Strict=1]="Strict",E[E.Attribute=2]="Attribute";class r5{constructor(e,t,n){this.decodeTree=e,this.emitCodePoint=t,this.errors=n,this.state=M.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=P.Strict}startEntity(e){this.decodeMode=e,this.state=M.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,t){switch(this.state){case M.EntityStart:if(e.charCodeAt(t)===L.NUM)return this.state=M.NumericStart,this.consumed+=1,this.stateNumericStart(e,t+1);return this.state=M.NamedEntity,this.stateNamedEntity(e,t);case M.NumericStart:return this.stateNumericStart(e,t);case M.NumericDecimal:return this.stateNumericDecimal(e,t);case M.NumericHex:return this.stateNumericHex(e,t);case M.NamedEntity:return this.stateNamedEntity(e,t)}}stateNumericStart(e,t){return t>=e.length?-1:(32|e.charCodeAt(t))===L.LOWER_X?(this.state=M.NumericHex,this.consumed+=1,this.stateNumericHex(e,t+1)):(this.state=M.NumericDecimal,this.stateNumericDecimal(e,t))}addToNumericResult(e,t,n,r){if(t!==n){let i=n-t;this.result=this.result*Math.pow(r,i)+parseInt(e.substr(t,i),r),this.consumed+=i}}stateNumericHex(e,t){let n=t;for(;t<e.length;){var r;let i=e.charCodeAt(t);if(!r4(i)&&(!((r=i)>=L.UPPER_A)||!(r<=L.UPPER_F))&&(!(r>=L.LOWER_A)||!(r<=L.LOWER_F)))return this.addToNumericResult(e,n,t,16),this.emitNumericEntity(i,3);t+=1}return this.addToNumericResult(e,n,t,16),-1}stateNumericDecimal(e,t){let n=t;for(;t<e.length;){let r=e.charCodeAt(t);if(!r4(r))return this.addToNumericResult(e,n,t,10),this.emitNumericEntity(r,2);t+=1}return this.addToNumericResult(e,n,t,10),-1}emitNumericEntity(e,t){var n,r,i;if(this.consumed<=t)return null===(n=this.errors)||void 0===n||n.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===L.SEMI)this.consumed+=1;else if(this.decodeMode===P.Strict)return 0;return this.emitCodePoint((r=this.result)>=55296&&r<=57343||r>1114111?65533:null!==(i=r2.get(r))&&void 0!==i?i:r,this.consumed),this.errors&&(e!==L.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,t){let{decodeTree:n}=this,r=n[this.treeIndex],i=(r&D.VALUE_LENGTH)>>14;for(;t<e.length;t++,this.excess++){let a=e.charCodeAt(t);if(this.treeIndex=r8(n,r,this.treeIndex+Math.max(1,i),a),this.treeIndex<0)return 0===this.result||this.decodeMode===P.Attribute&&(0===i||function(e){var t;return e===L.EQUALS||(t=e)>=L.UPPER_A&&t<=L.UPPER_Z||t>=L.LOWER_A&&t<=L.LOWER_Z||r4(t)}(a))?0:this.emitNotTerminatedNamedEntity();if(0!=(i=((r=n[this.treeIndex])&D.VALUE_LENGTH)>>14)){if(a===L.SEMI)return this.emitNamedEntityData(this.treeIndex,i,this.consumed+this.excess);this.decodeMode!==P.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return -1}emitNotTerminatedNamedEntity(){var e;let{result:t,decodeTree:n}=this,r=(n[t]&D.VALUE_LENGTH)>>14;return this.emitNamedEntityData(t,r,this.consumed),null===(e=this.errors)||void 0===e||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,t,n){let{decodeTree:r}=this;return this.emitCodePoint(1===t?r[e]&~D.VALUE_LENGTH:r[e+1],n),3===t&&this.emitCodePoint(r[e+2],n),n}end(){var e;switch(this.state){case M.NamedEntity:return 0!==this.result&&(this.decodeMode!==P.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case M.NumericDecimal:return this.emitNumericEntity(0,2);case M.NumericHex:return this.emitNumericEntity(0,3);case M.NumericStart:return null===(e=this.errors)||void 0===e||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case M.EntityStart:return 0}}}function r6(e){let t="",n=new r5(e,e=>t+=r3(e));return function(e,r){let i=0,a=0;for(;(a=e.indexOf("&",a))>=0;){t+=e.slice(i,a),n.startEntity(r);let s=n.write(e,a+1);if(s<0){i=a+n.end();break}i=a+s,a=0===s?i+1:i}let s=t+e.slice(i);return t="",s}}function r8(e,t,n,r){let i=(t&D.BRANCH_LENGTH)>>7,a=t&D.JUMP_TABLE;if(0===i)return 0!==a&&r===a?n:-1;if(a){let t=r-a;return t<0||t>=i?-1:e[n+t]-1}let s=n,o=s+i-1;for(;s<=o;){let t=s+o>>>1,n=e[t];if(n<r)s=t+1;else{if(!(n>r))return e[t+i];o=t-1}}return -1}r6(r0),r6(r1),(T=F=F||(F={})).HTML="http://www.w3.org/1999/xhtml",T.MATHML="http://www.w3.org/1998/Math/MathML",T.SVG="http://www.w3.org/2000/svg",T.XLINK="http://www.w3.org/1999/xlink",T.XML="http://www.w3.org/XML/1998/namespace",T.XMLNS="http://www.w3.org/2000/xmlns/",(v=B=B||(B={})).TYPE="type",v.ACTION="action",v.ENCODING="encoding",v.PROMPT="prompt",v.NAME="name",v.COLOR="color",v.FACE="face",v.SIZE="size",(y=H=H||(H={})).NO_QUIRKS="no-quirks",y.QUIRKS="quirks",y.LIMITED_QUIRKS="limited-quirks",(A=U=U||(U={})).A="a",A.ADDRESS="address",A.ANNOTATION_XML="annotation-xml",A.APPLET="applet",A.AREA="area",A.ARTICLE="article",A.ASIDE="aside",A.B="b",A.BASE="base",A.BASEFONT="basefont",A.BGSOUND="bgsound",A.BIG="big",A.BLOCKQUOTE="blockquote",A.BODY="body",A.BR="br",A.BUTTON="button",A.CAPTION="caption",A.CENTER="center",A.CODE="code",A.COL="col",A.COLGROUP="colgroup",A.DD="dd",A.DESC="desc",A.DETAILS="details",A.DIALOG="dialog",A.DIR="dir",A.DIV="div",A.DL="dl",A.DT="dt",A.EM="em",A.EMBED="embed",A.FIELDSET="fieldset",A.FIGCAPTION="figcaption",A.FIGURE="figure",A.FONT="font",A.FOOTER="footer",A.FOREIGN_OBJECT="foreignObject",A.FORM="form",A.FRAME="frame",A.FRAMESET="frameset",A.H1="h1",A.H2="h2",A.H3="h3",A.H4="h4",A.H5="h5",A.H6="h6",A.HEAD="head",A.HEADER="header",A.HGROUP="hgroup",A.HR="hr",A.HTML="html",A.I="i",A.IMG="img",A.IMAGE="image",A.INPUT="input",A.IFRAME="iframe",A.KEYGEN="keygen",A.LABEL="label",A.LI="li",A.LINK="link",A.LISTING="listing",A.MAIN="main",A.MALIGNMARK="malignmark",A.MARQUEE="marquee",A.MATH="math",A.MENU="menu",A.META="meta",A.MGLYPH="mglyph",A.MI="mi",A.MO="mo",A.MN="mn",A.MS="ms",A.MTEXT="mtext",A.NAV="nav",A.NOBR="nobr",A.NOFRAMES="noframes",A.NOEMBED="noembed",A.NOSCRIPT="noscript",A.OBJECT="object",A.OL="ol",A.OPTGROUP="optgroup",A.OPTION="option",A.P="p",A.PARAM="param",A.PLAINTEXT="plaintext",A.PRE="pre",A.RB="rb",A.RP="rp",A.RT="rt",A.RTC="rtc",A.RUBY="ruby",A.S="s",A.SCRIPT="script",A.SECTION="section",A.SELECT="select",A.SOURCE="source",A.SMALL="small",A.SPAN="span",A.STRIKE="strike",A.STRONG="strong",A.STYLE="style",A.SUB="sub",A.SUMMARY="summary",A.SUP="sup",A.TABLE="table",A.TBODY="tbody",A.TEMPLATE="template",A.TEXTAREA="textarea",A.TFOOT="tfoot",A.TD="td",A.TH="th",A.THEAD="thead",A.TITLE="title",A.TR="tr",A.TRACK="track",A.TT="tt",A.U="u",A.UL="ul",A.SVG="svg",A.VAR="var",A.WBR="wbr",A.XMP="xmp",(b=G=G||(G={}))[b.UNKNOWN=0]="UNKNOWN",b[b.A=1]="A",b[b.ADDRESS=2]="ADDRESS",b[b.ANNOTATION_XML=3]="ANNOTATION_XML",b[b.APPLET=4]="APPLET",b[b.AREA=5]="AREA",b[b.ARTICLE=6]="ARTICLE",b[b.ASIDE=7]="ASIDE",b[b.B=8]="B",b[b.BASE=9]="BASE",b[b.BASEFONT=10]="BASEFONT",b[b.BGSOUND=11]="BGSOUND",b[b.BIG=12]="BIG",b[b.BLOCKQUOTE=13]="BLOCKQUOTE",b[b.BODY=14]="BODY",b[b.BR=15]="BR",b[b.BUTTON=16]="BUTTON",b[b.CAPTION=17]="CAPTION",b[b.CENTER=18]="CENTER",b[b.CODE=19]="CODE",b[b.COL=20]="COL",b[b.COLGROUP=21]="COLGROUP",b[b.DD=22]="DD",b[b.DESC=23]="DESC",b[b.DETAILS=24]="DETAILS",b[b.DIALOG=25]="DIALOG",b[b.DIR=26]="DIR",b[b.DIV=27]="DIV",b[b.DL=28]="DL",b[b.DT=29]="DT",b[b.EM=30]="EM",b[b.EMBED=31]="EMBED",b[b.FIELDSET=32]="FIELDSET",b[b.FIGCAPTION=33]="FIGCAPTION",b[b.FIGURE=34]="FIGURE",b[b.FONT=35]="FONT",b[b.FOOTER=36]="FOOTER",b[b.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",b[b.FORM=38]="FORM",b[b.FRAME=39]="FRAME",b[b.FRAMESET=40]="FRAMESET",b[b.H1=41]="H1",b[b.H2=42]="H2",b[b.H3=43]="H3",b[b.H4=44]="H4",b[b.H5=45]="H5",b[b.H6=46]="H6",b[b.HEAD=47]="HEAD",b[b.HEADER=48]="HEADER",b[b.HGROUP=49]="HGROUP",b[b.HR=50]="HR",b[b.HTML=51]="HTML",b[b.I=52]="I",b[b.IMG=53]="IMG",b[b.IMAGE=54]="IMAGE",b[b.INPUT=55]="INPUT",b[b.IFRAME=56]="IFRAME",b[b.KEYGEN=57]="KEYGEN",b[b.LABEL=58]="LABEL",b[b.LI=59]="LI",b[b.LINK=60]="LINK",b[b.LISTING=61]="LISTING",b[b.MAIN=62]="MAIN",b[b.MALIGNMARK=63]="MALIGNMARK",b[b.MARQUEE=64]="MARQUEE",b[b.MATH=65]="MATH",b[b.MENU=66]="MENU",b[b.META=67]="META",b[b.MGLYPH=68]="MGLYPH",b[b.MI=69]="MI",b[b.MO=70]="MO",b[b.MN=71]="MN",b[b.MS=72]="MS",b[b.MTEXT=73]="MTEXT",b[b.NAV=74]="NAV",b[b.NOBR=75]="NOBR",b[b.NOFRAMES=76]="NOFRAMES",b[b.NOEMBED=77]="NOEMBED",b[b.NOSCRIPT=78]="NOSCRIPT",b[b.OBJECT=79]="OBJECT",b[b.OL=80]="OL",b[b.OPTGROUP=81]="OPTGROUP",b[b.OPTION=82]="OPTION",b[b.P=83]="P",b[b.PARAM=84]="PARAM",b[b.PLAINTEXT=85]="PLAINTEXT",b[b.PRE=86]="PRE",b[b.RB=87]="RB",b[b.RP=88]="RP",b[b.RT=89]="RT",b[b.RTC=90]="RTC",b[b.RUBY=91]="RUBY",b[b.S=92]="S",b[b.SCRIPT=93]="SCRIPT",b[b.SECTION=94]="SECTION",b[b.SELECT=95]="SELECT",b[b.SOURCE=96]="SOURCE",b[b.SMALL=97]="SMALL",b[b.SPAN=98]="SPAN",b[b.STRIKE=99]="STRIKE",b[b.STRONG=100]="STRONG",b[b.STYLE=101]="STYLE",b[b.SUB=102]="SUB",b[b.SUMMARY=103]="SUMMARY",b[b.SUP=104]="SUP",b[b.TABLE=105]="TABLE",b[b.TBODY=106]="TBODY",b[b.TEMPLATE=107]="TEMPLATE",b[b.TEXTAREA=108]="TEXTAREA",b[b.TFOOT=109]="TFOOT",b[b.TD=110]="TD",b[b.TH=111]="TH",b[b.THEAD=112]="THEAD",b[b.TITLE=113]="TITLE",b[b.TR=114]="TR",b[b.TRACK=115]="TRACK",b[b.TT=116]="TT",b[b.U=117]="U",b[b.UL=118]="UL",b[b.SVG=119]="SVG",b[b.VAR=120]="VAR",b[b.WBR=121]="WBR",b[b.XMP=122]="XMP";let r9=new Map([[U.A,G.A],[U.ADDRESS,G.ADDRESS],[U.ANNOTATION_XML,G.ANNOTATION_XML],[U.APPLET,G.APPLET],[U.AREA,G.AREA],[U.ARTICLE,G.ARTICLE],[U.ASIDE,G.ASIDE],[U.B,G.B],[U.BASE,G.BASE],[U.BASEFONT,G.BASEFONT],[U.BGSOUND,G.BGSOUND],[U.BIG,G.BIG],[U.BLOCKQUOTE,G.BLOCKQUOTE],[U.BODY,G.BODY],[U.BR,G.BR],[U.BUTTON,G.BUTTON],[U.CAPTION,G.CAPTION],[U.CENTER,G.CENTER],[U.CODE,G.CODE],[U.COL,G.COL],[U.COLGROUP,G.COLGROUP],[U.DD,G.DD],[U.DESC,G.DESC],[U.DETAILS,G.DETAILS],[U.DIALOG,G.DIALOG],[U.DIR,G.DIR],[U.DIV,G.DIV],[U.DL,G.DL],[U.DT,G.DT],[U.EM,G.EM],[U.EMBED,G.EMBED],[U.FIELDSET,G.FIELDSET],[U.FIGCAPTION,G.FIGCAPTION],[U.FIGURE,G.FIGURE],[U.FONT,G.FONT],[U.FOOTER,G.FOOTER],[U.FOREIGN_OBJECT,G.FOREIGN_OBJECT],[U.FORM,G.FORM],[U.FRAME,G.FRAME],[U.FRAMESET,G.FRAMESET],[U.H1,G.H1],[U.H2,G.H2],[U.H3,G.H3],[U.H4,G.H4],[U.H5,G.H5],[U.H6,G.H6],[U.HEAD,G.HEAD],[U.HEADER,G.HEADER],[U.HGROUP,G.HGROUP],[U.HR,G.HR],[U.HTML,G.HTML],[U.I,G.I],[U.IMG,G.IMG],[U.IMAGE,G.IMAGE],[U.INPUT,G.INPUT],[U.IFRAME,G.IFRAME],[U.KEYGEN,G.KEYGEN],[U.LABEL,G.LABEL],[U.LI,G.LI],[U.LINK,G.LINK],[U.LISTING,G.LISTING],[U.MAIN,G.MAIN],[U.MALIGNMARK,G.MALIGNMARK],[U.MARQUEE,G.MARQUEE],[U.MATH,G.MATH],[U.MENU,G.MENU],[U.META,G.META],[U.MGLYPH,G.MGLYPH],[U.MI,G.MI],[U.MO,G.MO],[U.MN,G.MN],[U.MS,G.MS],[U.MTEXT,G.MTEXT],[U.NAV,G.NAV],[U.NOBR,G.NOBR],[U.NOFRAMES,G.NOFRAMES],[U.NOEMBED,G.NOEMBED],[U.NOSCRIPT,G.NOSCRIPT],[U.OBJECT,G.OBJECT],[U.OL,G.OL],[U.OPTGROUP,G.OPTGROUP],[U.OPTION,G.OPTION],[U.P,G.P],[U.PARAM,G.PARAM],[U.PLAINTEXT,G.PLAINTEXT],[U.PRE,G.PRE],[U.RB,G.RB],[U.RP,G.RP],[U.RT,G.RT],[U.RTC,G.RTC],[U.RUBY,G.RUBY],[U.S,G.S],[U.SCRIPT,G.SCRIPT],[U.SECTION,G.SECTION],[U.SELECT,G.SELECT],[U.SOURCE,G.SOURCE],[U.SMALL,G.SMALL],[U.SPAN,G.SPAN],[U.STRIKE,G.STRIKE],[U.STRONG,G.STRONG],[U.STYLE,G.STYLE],[U.SUB,G.SUB],[U.SUMMARY,G.SUMMARY],[U.SUP,G.SUP],[U.TABLE,G.TABLE],[U.TBODY,G.TBODY],[U.TEMPLATE,G.TEMPLATE],[U.TEXTAREA,G.TEXTAREA],[U.TFOOT,G.TFOOT],[U.TD,G.TD],[U.TH,G.TH],[U.THEAD,G.THEAD],[U.TITLE,G.TITLE],[U.TR,G.TR],[U.TRACK,G.TRACK],[U.TT,G.TT],[U.U,G.U],[U.UL,G.UL],[U.SVG,G.SVG],[U.VAR,G.VAR],[U.WBR,G.WBR],[U.XMP,G.XMP]]);function r7(e){var t;return null!==(t=r9.get(e))&&void 0!==t?t:G.UNKNOWN}let ie=G,it={[F.HTML]:new Set([ie.ADDRESS,ie.APPLET,ie.AREA,ie.ARTICLE,ie.ASIDE,ie.BASE,ie.BASEFONT,ie.BGSOUND,ie.BLOCKQUOTE,ie.BODY,ie.BR,ie.BUTTON,ie.CAPTION,ie.CENTER,ie.COL,ie.COLGROUP,ie.DD,ie.DETAILS,ie.DIR,ie.DIV,ie.DL,ie.DT,ie.EMBED,ie.FIELDSET,ie.FIGCAPTION,ie.FIGURE,ie.FOOTER,ie.FORM,ie.FRAME,ie.FRAMESET,ie.H1,ie.H2,ie.H3,ie.H4,ie.H5,ie.H6,ie.HEAD,ie.HEADER,ie.HGROUP,ie.HR,ie.HTML,ie.IFRAME,ie.IMG,ie.INPUT,ie.LI,ie.LINK,ie.LISTING,ie.MAIN,ie.MARQUEE,ie.MENU,ie.META,ie.NAV,ie.NOEMBED,ie.NOFRAMES,ie.NOSCRIPT,ie.OBJECT,ie.OL,ie.P,ie.PARAM,ie.PLAINTEXT,ie.PRE,ie.SCRIPT,ie.SECTION,ie.SELECT,ie.SOURCE,ie.STYLE,ie.SUMMARY,ie.TABLE,ie.TBODY,ie.TD,ie.TEMPLATE,ie.TEXTAREA,ie.TFOOT,ie.TH,ie.THEAD,ie.TITLE,ie.TR,ie.TRACK,ie.UL,ie.WBR,ie.XMP]),[F.MATHML]:new Set([ie.MI,ie.MO,ie.MN,ie.MS,ie.MTEXT,ie.ANNOTATION_XML]),[F.SVG]:new Set([ie.TITLE,ie.FOREIGN_OBJECT,ie.DESC]),[F.XLINK]:new Set,[F.XML]:new Set,[F.XMLNS]:new Set};function ir(e){return e===ie.H1||e===ie.H2||e===ie.H3||e===ie.H4||e===ie.H5||e===ie.H6}U.STYLE,U.SCRIPT,U.XMP,U.IFRAME,U.NOEMBED,U.NOFRAMES,U.PLAINTEXT;let ii=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);(_=z||(z={}))[_.DATA=0]="DATA",_[_.RCDATA=1]="RCDATA",_[_.RAWTEXT=2]="RAWTEXT",_[_.SCRIPT_DATA=3]="SCRIPT_DATA",_[_.PLAINTEXT=4]="PLAINTEXT",_[_.TAG_OPEN=5]="TAG_OPEN",_[_.END_TAG_OPEN=6]="END_TAG_OPEN",_[_.TAG_NAME=7]="TAG_NAME",_[_.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",_[_.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",_[_.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",_[_.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",_[_.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",_[_.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",_[_.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",_[_.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",_[_.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",_[_.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",_[_.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",_[_.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",_[_.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",_[_.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",_[_.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",_[_.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",_[_.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",_[_.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",_[_.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",_[_.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",_[_.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",_[_.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",_[_.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",_[_.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",_[_.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",_[_.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",_[_.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",_[_.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",_[_.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",_[_.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",_[_.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",_[_.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",_[_.BOGUS_COMMENT=40]="BOGUS_COMMENT",_[_.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",_[_.COMMENT_START=42]="COMMENT_START",_[_.COMMENT_START_DASH=43]="COMMENT_START_DASH",_[_.COMMENT=44]="COMMENT",_[_.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",_[_.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",_[_.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",_[_.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",_[_.COMMENT_END_DASH=49]="COMMENT_END_DASH",_[_.COMMENT_END=50]="COMMENT_END",_[_.COMMENT_END_BANG=51]="COMMENT_END_BANG",_[_.DOCTYPE=52]="DOCTYPE",_[_.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",_[_.DOCTYPE_NAME=54]="DOCTYPE_NAME",_[_.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",_[_.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",_[_.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",_[_.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",_[_.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",_[_.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",_[_.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",_[_.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",_[_.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",_[_.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",_[_.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",_[_.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",_[_.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",_[_.CDATA_SECTION=68]="CDATA_SECTION",_[_.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",_[_.CDATA_SECTION_END=70]="CDATA_SECTION_END",_[_.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",_[_.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",_[_.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",_[_.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",_[_.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",_[_.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",_[_.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",_[_.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END";let ia={DATA:z.DATA,RCDATA:z.RCDATA,RAWTEXT:z.RAWTEXT,SCRIPT_DATA:z.SCRIPT_DATA,PLAINTEXT:z.PLAINTEXT,CDATA_SECTION:z.CDATA_SECTION};function is(e){return e>=w.DIGIT_0&&e<=w.DIGIT_9}function io(e){return e>=w.LATIN_CAPITAL_A&&e<=w.LATIN_CAPITAL_Z}function il(e){return e>=w.LATIN_SMALL_A&&e<=w.LATIN_SMALL_Z||io(e)}function ic(e){return il(e)||is(e)}function iu(e){return e>=w.LATIN_CAPITAL_A&&e<=w.LATIN_CAPITAL_F}function id(e){return e>=w.LATIN_SMALL_A&&e<=w.LATIN_SMALL_F}function ih(e){return e===w.SPACE||e===w.LINE_FEED||e===w.TABULATION||e===w.FORM_FEED}function ip(e){return ih(e)||e===w.SOLIDUS||e===w.GREATER_THAN_SIGN}class im{constructor(e,t){this.options=e,this.handler=t,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=z.DATA,this.returnState=z.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new rZ(t),this.currentLocation=this.getCurrentLocation(-1)}_err(e){var t,n;null===(n=(t=this.handler).onParseError)||void 0===n||n.call(t,this.preprocessor.getError(e))}getCurrentLocation(e){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-e,startOffset:this.preprocessor.offset-e,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;let e=this._consume();this._ensureHibernation()||this._callState(e)}this.inLoop=!1}}pause(){this.paused=!0}resume(e){if(!this.paused)throw Error("Parser was already resumed");this.paused=!1,this.inLoop||(this._runParsingLoop(),this.paused||null==e||e())}write(e,t,n){this.active=!0,this.preprocessor.write(e,t),this._runParsingLoop(),this.paused||null==n||n()}insertHtmlAtCurrentPos(e){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(e),this._runParsingLoop()}_ensureHibernation(){return!!this.preprocessor.endOfChunkHit&&(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0)}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(e){this.consumedAfterSnapshot-=e,this.preprocessor.retreat(e)}_reconsumeInState(e,t){this.state=e,this._callState(t)}_advanceBy(e){this.consumedAfterSnapshot+=e;for(let t=0;t<e;t++)this.preprocessor.advance()}_consumeSequenceIfMatch(e,t){return!!this.preprocessor.startsWith(e,t)&&(this._advanceBy(e.length-1),!0)}_createStartTagToken(){this.currentToken={type:O.START_TAG,tagName:"",tagID:G.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:O.END_TAG,tagName:"",tagID:G.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(e){this.currentToken={type:O.COMMENT,data:"",location:this.getCurrentLocation(e)}}_createDoctypeToken(e){this.currentToken={type:O.DOCTYPE,name:e,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(e,t){this.currentCharacterToken={type:e,chars:t,location:this.currentLocation}}_createAttr(e){this.currentAttr={name:e,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var e,t;let n=this.currentToken;null===rJ(n,this.currentAttr.name)?(n.attrs.push(this.currentAttr),n.location&&this.currentLocation&&((null!==(e=(t=n.location).attrs)&&void 0!==e?e:t.attrs=Object.create(null))[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue())):this._err(N.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(e){this._emitCurrentCharacterToken(e.location),this.currentToken=null,e.location&&(e.location.endLine=this.preprocessor.line,e.location.endCol=this.preprocessor.col+1,e.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){let e=this.currentToken;this.prepareToken(e),e.tagID=r7(e.tagName),e.type===O.START_TAG?(this.lastStartTagName=e.tagName,this.handler.onStartTag(e)):(e.attrs.length>0&&this._err(N.endTagWithAttributes),e.selfClosing&&this._err(N.endTagWithTrailingSolidus),this.handler.onEndTag(e)),this.preprocessor.dropParsedChunk()}emitCurrentComment(e){this.prepareToken(e),this.handler.onComment(e),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(e){this.prepareToken(e),this.handler.onDoctype(e),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(e){if(this.currentCharacterToken){switch(e&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=e.startLine,this.currentCharacterToken.location.endCol=e.startCol,this.currentCharacterToken.location.endOffset=e.startOffset),this.currentCharacterToken.type){case O.CHARACTER:this.handler.onCharacter(this.currentCharacterToken);break;case O.NULL_CHARACTER:this.handler.onNullCharacter(this.currentCharacterToken);break;case O.WHITESPACE_CHARACTER:this.handler.onWhitespaceCharacter(this.currentCharacterToken)}this.currentCharacterToken=null}}_emitEOFToken(){let e=this.getCurrentLocation(0);e&&(e.endLine=e.startLine,e.endCol=e.startCol,e.endOffset=e.startOffset),this._emitCurrentCharacterToken(e),this.handler.onEof({type:O.EOF,location:e}),this.active=!1}_appendCharToCurrentCharacterToken(e,t){if(this.currentCharacterToken){if(this.currentCharacterToken.type!==e)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=t;return}}this._createCharacterToken(e,t)}_emitCodePoint(e){let t=ih(e)?O.WHITESPACE_CHARACTER:e===w.NULL?O.NULL_CHARACTER:O.CHARACTER;this._appendCharToCurrentCharacterToken(t,String.fromCodePoint(e))}_emitChars(e){this._appendCharToCurrentCharacterToken(O.CHARACTER,e)}_matchNamedCharacterReference(e){let t=null,n=0,r=!1;for(let a=0,s=r0[0];a>=0&&!((a=r8(r0,s,a+1,e))<0);e=this._consume()){n+=1;let o=(s=r0[a])&D.VALUE_LENGTH;if(o){var i;let s=(o>>14)-1;if(e!==w.SEMICOLON&&this._isCharacterReferenceInAttribute()&&((i=this.preprocessor.peek(1))===w.EQUALS_SIGN||ic(i))?(t=[w.AMPERSAND],a+=s):(t=0===s?[r0[a]&~D.VALUE_LENGTH]:1===s?[r0[++a]]:[r0[++a],r0[++a]],n=0,r=e!==w.SEMICOLON),0===s){this._consume();break}}}return this._unconsume(n),r&&!this.preprocessor.endOfChunkHit&&this._err(N.missingSemicolonAfterCharacterReference),this._unconsume(1),t}_isCharacterReferenceInAttribute(){return this.returnState===z.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===z.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===z.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(e){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(e):this._emitCodePoint(e)}_callState(e){switch(this.state){case z.DATA:this._stateData(e);break;case z.RCDATA:this._stateRcdata(e);break;case z.RAWTEXT:this._stateRawtext(e);break;case z.SCRIPT_DATA:this._stateScriptData(e);break;case z.PLAINTEXT:this._statePlaintext(e);break;case z.TAG_OPEN:this._stateTagOpen(e);break;case z.END_TAG_OPEN:this._stateEndTagOpen(e);break;case z.TAG_NAME:this._stateTagName(e);break;case z.RCDATA_LESS_THAN_SIGN:this._stateRcdataLessThanSign(e);break;case z.RCDATA_END_TAG_OPEN:this._stateRcdataEndTagOpen(e);break;case z.RCDATA_END_TAG_NAME:this._stateRcdataEndTagName(e);break;case z.RAWTEXT_LESS_THAN_SIGN:this._stateRawtextLessThanSign(e);break;case z.RAWTEXT_END_TAG_OPEN:this._stateRawtextEndTagOpen(e);break;case z.RAWTEXT_END_TAG_NAME:this._stateRawtextEndTagName(e);break;case z.SCRIPT_DATA_LESS_THAN_SIGN:this._stateScriptDataLessThanSign(e);break;case z.SCRIPT_DATA_END_TAG_OPEN:this._stateScriptDataEndTagOpen(e);break;case z.SCRIPT_DATA_END_TAG_NAME:this._stateScriptDataEndTagName(e);break;case z.SCRIPT_DATA_ESCAPE_START:this._stateScriptDataEscapeStart(e);break;case z.SCRIPT_DATA_ESCAPE_START_DASH:this._stateScriptDataEscapeStartDash(e);break;case z.SCRIPT_DATA_ESCAPED:this._stateScriptDataEscaped(e);break;case z.SCRIPT_DATA_ESCAPED_DASH:this._stateScriptDataEscapedDash(e);break;case z.SCRIPT_DATA_ESCAPED_DASH_DASH:this._stateScriptDataEscapedDashDash(e);break;case z.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:this._stateScriptDataEscapedLessThanSign(e);break;case z.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:this._stateScriptDataEscapedEndTagOpen(e);break;case z.SCRIPT_DATA_ESCAPED_END_TAG_NAME:this._stateScriptDataEscapedEndTagName(e);break;case z.SCRIPT_DATA_DOUBLE_ESCAPE_START:this._stateScriptDataDoubleEscapeStart(e);break;case z.SCRIPT_DATA_DOUBLE_ESCAPED:this._stateScriptDataDoubleEscaped(e);break;case z.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:this._stateScriptDataDoubleEscapedDash(e);break;case z.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:this._stateScriptDataDoubleEscapedDashDash(e);break;case z.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:this._stateScriptDataDoubleEscapedLessThanSign(e);break;case z.SCRIPT_DATA_DOUBLE_ESCAPE_END:this._stateScriptDataDoubleEscapeEnd(e);break;case z.BEFORE_ATTRIBUTE_NAME:this._stateBeforeAttributeName(e);break;case z.ATTRIBUTE_NAME:this._stateAttributeName(e);break;case z.AFTER_ATTRIBUTE_NAME:this._stateAfterAttributeName(e);break;case z.BEFORE_ATTRIBUTE_VALUE:this._stateBeforeAttributeValue(e);break;case z.ATTRIBUTE_VALUE_DOUBLE_QUOTED:this._stateAttributeValueDoubleQuoted(e);break;case z.ATTRIBUTE_VALUE_SINGLE_QUOTED:this._stateAttributeValueSingleQuoted(e);break;case z.ATTRIBUTE_VALUE_UNQUOTED:this._stateAttributeValueUnquoted(e);break;case z.AFTER_ATTRIBUTE_VALUE_QUOTED:this._stateAfterAttributeValueQuoted(e);break;case z.SELF_CLOSING_START_TAG:this._stateSelfClosingStartTag(e);break;case z.BOGUS_COMMENT:this._stateBogusComment(e);break;case z.MARKUP_DECLARATION_OPEN:this._stateMarkupDeclarationOpen(e);break;case z.COMMENT_START:this._stateCommentStart(e);break;case z.COMMENT_START_DASH:this._stateCommentStartDash(e);break;case z.COMMENT:this._stateComment(e);break;case z.COMMENT_LESS_THAN_SIGN:this._stateCommentLessThanSign(e);break;case z.COMMENT_LESS_THAN_SIGN_BANG:this._stateCommentLessThanSignBang(e);break;case z.COMMENT_LESS_THAN_SIGN_BANG_DASH:this._stateCommentLessThanSignBangDash(e);break;case z.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:this._stateCommentLessThanSignBangDashDash(e);break;case z.COMMENT_END_DASH:this._stateCommentEndDash(e);break;case z.COMMENT_END:this._stateCommentEnd(e);break;case z.COMMENT_END_BANG:this._stateCommentEndBang(e);break;case z.DOCTYPE:this._stateDoctype(e);break;case z.BEFORE_DOCTYPE_NAME:this._stateBeforeDoctypeName(e);break;case z.DOCTYPE_NAME:this._stateDoctypeName(e);break;case z.AFTER_DOCTYPE_NAME:this._stateAfterDoctypeName(e);break;case z.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._stateAfterDoctypePublicKeyword(e);break;case z.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:this._stateBeforeDoctypePublicIdentifier(e);break;case z.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:this._stateDoctypePublicIdentifierDoubleQuoted(e);break;case z.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:this._stateDoctypePublicIdentifierSingleQuoted(e);break;case z.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:this._stateAfterDoctypePublicIdentifier(e);break;case z.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:this._stateBetweenDoctypePublicAndSystemIdentifiers(e);break;case z.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._stateAfterDoctypeSystemKeyword(e);break;case z.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:this._stateBeforeDoctypeSystemIdentifier(e);break;case z.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:this._stateDoctypeSystemIdentifierDoubleQuoted(e);break;case z.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:this._stateDoctypeSystemIdentifierSingleQuoted(e);break;case z.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:this._stateAfterDoctypeSystemIdentifier(e);break;case z.BOGUS_DOCTYPE:this._stateBogusDoctype(e);break;case z.CDATA_SECTION:this._stateCdataSection(e);break;case z.CDATA_SECTION_BRACKET:this._stateCdataSectionBracket(e);break;case z.CDATA_SECTION_END:this._stateCdataSectionEnd(e);break;case z.CHARACTER_REFERENCE:this._stateCharacterReference(e);break;case z.NAMED_CHARACTER_REFERENCE:this._stateNamedCharacterReference(e);break;case z.AMBIGUOUS_AMPERSAND:this._stateAmbiguousAmpersand(e);break;case z.NUMERIC_CHARACTER_REFERENCE:this._stateNumericCharacterReference(e);break;case z.HEXADEMICAL_CHARACTER_REFERENCE_START:this._stateHexademicalCharacterReferenceStart(e);break;case z.HEXADEMICAL_CHARACTER_REFERENCE:this._stateHexademicalCharacterReference(e);break;case z.DECIMAL_CHARACTER_REFERENCE:this._stateDecimalCharacterReference(e);break;case z.NUMERIC_CHARACTER_REFERENCE_END:this._stateNumericCharacterReferenceEnd(e);break;default:throw Error("Unknown state")}}_stateData(e){switch(e){case w.LESS_THAN_SIGN:this.state=z.TAG_OPEN;break;case w.AMPERSAND:this.returnState=z.DATA,this.state=z.CHARACTER_REFERENCE;break;case w.NULL:this._err(N.unexpectedNullCharacter),this._emitCodePoint(e);break;case w.EOF:this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateRcdata(e){switch(e){case w.AMPERSAND:this.returnState=z.RCDATA,this.state=z.CHARACTER_REFERENCE;break;case w.LESS_THAN_SIGN:this.state=z.RCDATA_LESS_THAN_SIGN;break;case w.NULL:this._err(N.unexpectedNullCharacter),this._emitChars("");break;case w.EOF:this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateRawtext(e){switch(e){case w.LESS_THAN_SIGN:this.state=z.RAWTEXT_LESS_THAN_SIGN;break;case w.NULL:this._err(N.unexpectedNullCharacter),this._emitChars("");break;case w.EOF:this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateScriptData(e){switch(e){case w.LESS_THAN_SIGN:this.state=z.SCRIPT_DATA_LESS_THAN_SIGN;break;case w.NULL:this._err(N.unexpectedNullCharacter),this._emitChars("");break;case w.EOF:this._emitEOFToken();break;default:this._emitCodePoint(e)}}_statePlaintext(e){switch(e){case w.NULL:this._err(N.unexpectedNullCharacter),this._emitChars("");break;case w.EOF:this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateTagOpen(e){if(il(e))this._createStartTagToken(),this.state=z.TAG_NAME,this._stateTagName(e);else switch(e){case w.EXCLAMATION_MARK:this.state=z.MARKUP_DECLARATION_OPEN;break;case w.SOLIDUS:this.state=z.END_TAG_OPEN;break;case w.QUESTION_MARK:this._err(N.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=z.BOGUS_COMMENT,this._stateBogusComment(e);break;case w.EOF:this._err(N.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break;default:this._err(N.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=z.DATA,this._stateData(e)}}_stateEndTagOpen(e){if(il(e))this._createEndTagToken(),this.state=z.TAG_NAME,this._stateTagName(e);else switch(e){case w.GREATER_THAN_SIGN:this._err(N.missingEndTagName),this.state=z.DATA;break;case w.EOF:this._err(N.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break;default:this._err(N.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=z.BOGUS_COMMENT,this._stateBogusComment(e)}}_stateTagName(e){let t=this.currentToken;switch(e){case w.SPACE:case w.LINE_FEED:case w.TABULATION:case w.FORM_FEED:this.state=z.BEFORE_ATTRIBUTE_NAME;break;case w.SOLIDUS:this.state=z.SELF_CLOSING_START_TAG;break;case w.GREATER_THAN_SIGN:this.state=z.DATA,this.emitCurrentTagToken();break;case w.NULL:this._err(N.unexpectedNullCharacter),t.tagName+="";break;case w.EOF:this._err(N.eofInTag),this._emitEOFToken();break;default:t.tagName+=String.fromCodePoint(io(e)?e+32:e)}}_stateRcdataLessThanSign(e){e===w.SOLIDUS?this.state=z.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=z.RCDATA,this._stateRcdata(e))}_stateRcdataEndTagOpen(e){il(e)?(this.state=z.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(e)):(this._emitChars("</"),this.state=z.RCDATA,this._stateRcdata(e))}handleSpecialEndTag(e){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();switch(this._createEndTagToken(),this.currentToken.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case w.SPACE:case w.LINE_FEED:case w.TABULATION:case w.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=z.BEFORE_ATTRIBUTE_NAME,!1;case w.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=z.SELF_CLOSING_START_TAG,!1;case w.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=z.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=z.RCDATA,this._stateRcdata(e))}_stateRawtextLessThanSign(e){e===w.SOLIDUS?this.state=z.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=z.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagOpen(e){il(e)?(this.state=z.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(e)):(this._emitChars("</"),this.state=z.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=z.RAWTEXT,this._stateRawtext(e))}_stateScriptDataLessThanSign(e){switch(e){case w.SOLIDUS:this.state=z.SCRIPT_DATA_END_TAG_OPEN;break;case w.EXCLAMATION_MARK:this.state=z.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break;default:this._emitChars("<"),this.state=z.SCRIPT_DATA,this._stateScriptData(e)}}_stateScriptDataEndTagOpen(e){il(e)?(this.state=z.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(e)):(this._emitChars("</"),this.state=z.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=z.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStart(e){e===w.HYPHEN_MINUS?(this.state=z.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=z.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStartDash(e){e===w.HYPHEN_MINUS?(this.state=z.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=z.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscaped(e){switch(e){case w.HYPHEN_MINUS:this.state=z.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break;case w.LESS_THAN_SIGN:this.state=z.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break;case w.NULL:this._err(N.unexpectedNullCharacter),this._emitChars("");break;case w.EOF:this._err(N.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateScriptDataEscapedDash(e){switch(e){case w.HYPHEN_MINUS:this.state=z.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break;case w.LESS_THAN_SIGN:this.state=z.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break;case w.NULL:this._err(N.unexpectedNullCharacter),this.state=z.SCRIPT_DATA_ESCAPED,this._emitChars("");break;case w.EOF:this._err(N.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=z.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedDashDash(e){switch(e){case w.HYPHEN_MINUS:this._emitChars("-");break;case w.LESS_THAN_SIGN:this.state=z.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break;case w.GREATER_THAN_SIGN:this.state=z.SCRIPT_DATA,this._emitChars(">");break;case w.NULL:this._err(N.unexpectedNullCharacter),this.state=z.SCRIPT_DATA_ESCAPED,this._emitChars("");break;case w.EOF:this._err(N.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=z.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedLessThanSign(e){e===w.SOLIDUS?this.state=z.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:il(e)?(this._emitChars("<"),this.state=z.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(e)):(this._emitChars("<"),this.state=z.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagOpen(e){il(e)?(this.state=z.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(e)):(this._emitChars("</"),this.state=z.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=z.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscapeStart(e){if(this.preprocessor.startsWith(rq.SCRIPT,!1)&&ip(this.preprocessor.peek(rq.SCRIPT.length))){this._emitCodePoint(e);for(let e=0;e<rq.SCRIPT.length;e++)this._emitCodePoint(this._consume());this.state=z.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=z.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscaped(e){switch(e){case w.HYPHEN_MINUS:this.state=z.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break;case w.LESS_THAN_SIGN:this.state=z.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break;case w.NULL:this._err(N.unexpectedNullCharacter),this._emitChars("");break;case w.EOF:this._err(N.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDash(e){switch(e){case w.HYPHEN_MINUS:this.state=z.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break;case w.LESS_THAN_SIGN:this.state=z.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break;case w.NULL:this._err(N.unexpectedNullCharacter),this.state=z.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars("");break;case w.EOF:this._err(N.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=z.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDashDash(e){switch(e){case w.HYPHEN_MINUS:this._emitChars("-");break;case w.LESS_THAN_SIGN:this.state=z.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break;case w.GREATER_THAN_SIGN:this.state=z.SCRIPT_DATA,this._emitChars(">");break;case w.NULL:this._err(N.unexpectedNullCharacter),this.state=z.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars("");break;case w.EOF:this._err(N.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=z.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedLessThanSign(e){e===w.SOLIDUS?(this.state=z.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=z.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateScriptDataDoubleEscapeEnd(e){if(this.preprocessor.startsWith(rq.SCRIPT,!1)&&ip(this.preprocessor.peek(rq.SCRIPT.length))){this._emitCodePoint(e);for(let e=0;e<rq.SCRIPT.length;e++)this._emitCodePoint(this._consume());this.state=z.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=z.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateBeforeAttributeName(e){switch(e){case w.SPACE:case w.LINE_FEED:case w.TABULATION:case w.FORM_FEED:break;case w.SOLIDUS:case w.GREATER_THAN_SIGN:case w.EOF:this.state=z.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break;case w.EQUALS_SIGN:this._err(N.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=z.ATTRIBUTE_NAME;break;default:this._createAttr(""),this.state=z.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateAttributeName(e){switch(e){case w.SPACE:case w.LINE_FEED:case w.TABULATION:case w.FORM_FEED:case w.SOLIDUS:case w.GREATER_THAN_SIGN:case w.EOF:this._leaveAttrName(),this.state=z.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break;case w.EQUALS_SIGN:this._leaveAttrName(),this.state=z.BEFORE_ATTRIBUTE_VALUE;break;case w.QUOTATION_MARK:case w.APOSTROPHE:case w.LESS_THAN_SIGN:this._err(N.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(e);break;case w.NULL:this._err(N.unexpectedNullCharacter),this.currentAttr.name+="";break;default:this.currentAttr.name+=String.fromCodePoint(io(e)?e+32:e)}}_stateAfterAttributeName(e){switch(e){case w.SPACE:case w.LINE_FEED:case w.TABULATION:case w.FORM_FEED:break;case w.SOLIDUS:this.state=z.SELF_CLOSING_START_TAG;break;case w.EQUALS_SIGN:this.state=z.BEFORE_ATTRIBUTE_VALUE;break;case w.GREATER_THAN_SIGN:this.state=z.DATA,this.emitCurrentTagToken();break;case w.EOF:this._err(N.eofInTag),this._emitEOFToken();break;default:this._createAttr(""),this.state=z.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateBeforeAttributeValue(e){switch(e){case w.SPACE:case w.LINE_FEED:case w.TABULATION:case w.FORM_FEED:break;case w.QUOTATION_MARK:this.state=z.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break;case w.APOSTROPHE:this.state=z.ATTRIBUTE_VALUE_SINGLE_QUOTED;break;case w.GREATER_THAN_SIGN:this._err(N.missingAttributeValue),this.state=z.DATA,this.emitCurrentTagToken();break;default:this.state=z.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(e)}}_stateAttributeValueDoubleQuoted(e){switch(e){case w.QUOTATION_MARK:this.state=z.AFTER_ATTRIBUTE_VALUE_QUOTED;break;case w.AMPERSAND:this.returnState=z.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=z.CHARACTER_REFERENCE;break;case w.NULL:this._err(N.unexpectedNullCharacter),this.currentAttr.value+="";break;case w.EOF:this._err(N.eofInTag),this._emitEOFToken();break;default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueSingleQuoted(e){switch(e){case w.APOSTROPHE:this.state=z.AFTER_ATTRIBUTE_VALUE_QUOTED;break;case w.AMPERSAND:this.returnState=z.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=z.CHARACTER_REFERENCE;break;case w.NULL:this._err(N.unexpectedNullCharacter),this.currentAttr.value+="";break;case w.EOF:this._err(N.eofInTag),this._emitEOFToken();break;default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueUnquoted(e){switch(e){case w.SPACE:case w.LINE_FEED:case w.TABULATION:case w.FORM_FEED:this._leaveAttrValue(),this.state=z.BEFORE_ATTRIBUTE_NAME;break;case w.AMPERSAND:this.returnState=z.ATTRIBUTE_VALUE_UNQUOTED,this.state=z.CHARACTER_REFERENCE;break;case w.GREATER_THAN_SIGN:this._leaveAttrValue(),this.state=z.DATA,this.emitCurrentTagToken();break;case w.NULL:this._err(N.unexpectedNullCharacter),this.currentAttr.value+="";break;case w.QUOTATION_MARK:case w.APOSTROPHE:case w.LESS_THAN_SIGN:case w.EQUALS_SIGN:case w.GRAVE_ACCENT:this._err(N.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(e);break;case w.EOF:this._err(N.eofInTag),this._emitEOFToken();break;default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAfterAttributeValueQuoted(e){switch(e){case w.SPACE:case w.LINE_FEED:case w.TABULATION:case w.FORM_FEED:this._leaveAttrValue(),this.state=z.BEFORE_ATTRIBUTE_NAME;break;case w.SOLIDUS:this._leaveAttrValue(),this.state=z.SELF_CLOSING_START_TAG;break;case w.GREATER_THAN_SIGN:this._leaveAttrValue(),this.state=z.DATA,this.emitCurrentTagToken();break;case w.EOF:this._err(N.eofInTag),this._emitEOFToken();break;default:this._err(N.missingWhitespaceBetweenAttributes),this.state=z.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateSelfClosingStartTag(e){switch(e){case w.GREATER_THAN_SIGN:this.currentToken.selfClosing=!0,this.state=z.DATA,this.emitCurrentTagToken();break;case w.EOF:this._err(N.eofInTag),this._emitEOFToken();break;default:this._err(N.unexpectedSolidusInTag),this.state=z.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateBogusComment(e){let t=this.currentToken;switch(e){case w.GREATER_THAN_SIGN:this.state=z.DATA,this.emitCurrentComment(t);break;case w.EOF:this.emitCurrentComment(t),this._emitEOFToken();break;case w.NULL:this._err(N.unexpectedNullCharacter),t.data+="";break;default:t.data+=String.fromCodePoint(e)}}_stateMarkupDeclarationOpen(e){this._consumeSequenceIfMatch(rq.DASH_DASH,!0)?(this._createCommentToken(rq.DASH_DASH.length+1),this.state=z.COMMENT_START):this._consumeSequenceIfMatch(rq.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(rq.DOCTYPE.length+1),this.state=z.DOCTYPE):this._consumeSequenceIfMatch(rq.CDATA_START,!0)?this.inForeignNode?this.state=z.CDATA_SECTION:(this._err(N.cdataInHtmlContent),this._createCommentToken(rq.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=z.BOGUS_COMMENT):this._ensureHibernation()||(this._err(N.incorrectlyOpenedComment),this._createCommentToken(2),this.state=z.BOGUS_COMMENT,this._stateBogusComment(e))}_stateCommentStart(e){switch(e){case w.HYPHEN_MINUS:this.state=z.COMMENT_START_DASH;break;case w.GREATER_THAN_SIGN:{this._err(N.abruptClosingOfEmptyComment),this.state=z.DATA;let e=this.currentToken;this.emitCurrentComment(e);break}default:this.state=z.COMMENT,this._stateComment(e)}}_stateCommentStartDash(e){let t=this.currentToken;switch(e){case w.HYPHEN_MINUS:this.state=z.COMMENT_END;break;case w.GREATER_THAN_SIGN:this._err(N.abruptClosingOfEmptyComment),this.state=z.DATA,this.emitCurrentComment(t);break;case w.EOF:this._err(N.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break;default:t.data+="-",this.state=z.COMMENT,this._stateComment(e)}}_stateComment(e){let t=this.currentToken;switch(e){case w.HYPHEN_MINUS:this.state=z.COMMENT_END_DASH;break;case w.LESS_THAN_SIGN:t.data+="<",this.state=z.COMMENT_LESS_THAN_SIGN;break;case w.NULL:this._err(N.unexpectedNullCharacter),t.data+="";break;case w.EOF:this._err(N.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break;default:t.data+=String.fromCodePoint(e)}}_stateCommentLessThanSign(e){let t=this.currentToken;switch(e){case w.EXCLAMATION_MARK:t.data+="!",this.state=z.COMMENT_LESS_THAN_SIGN_BANG;break;case w.LESS_THAN_SIGN:t.data+="<";break;default:this.state=z.COMMENT,this._stateComment(e)}}_stateCommentLessThanSignBang(e){e===w.HYPHEN_MINUS?this.state=z.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=z.COMMENT,this._stateComment(e))}_stateCommentLessThanSignBangDash(e){e===w.HYPHEN_MINUS?this.state=z.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=z.COMMENT_END_DASH,this._stateCommentEndDash(e))}_stateCommentLessThanSignBangDashDash(e){e!==w.GREATER_THAN_SIGN&&e!==w.EOF&&this._err(N.nestedComment),this.state=z.COMMENT_END,this._stateCommentEnd(e)}_stateCommentEndDash(e){let t=this.currentToken;switch(e){case w.HYPHEN_MINUS:this.state=z.COMMENT_END;break;case w.EOF:this._err(N.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break;default:t.data+="-",this.state=z.COMMENT,this._stateComment(e)}}_stateCommentEnd(e){let t=this.currentToken;switch(e){case w.GREATER_THAN_SIGN:this.state=z.DATA,this.emitCurrentComment(t);break;case w.EXCLAMATION_MARK:this.state=z.COMMENT_END_BANG;break;case w.HYPHEN_MINUS:t.data+="-";break;case w.EOF:this._err(N.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break;default:t.data+="--",this.state=z.COMMENT,this._stateComment(e)}}_stateCommentEndBang(e){let t=this.currentToken;switch(e){case w.HYPHEN_MINUS:t.data+="--!",this.state=z.COMMENT_END_DASH;break;case w.GREATER_THAN_SIGN:this._err(N.incorrectlyClosedComment),this.state=z.DATA,this.emitCurrentComment(t);break;case w.EOF:this._err(N.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break;default:t.data+="--!",this.state=z.COMMENT,this._stateComment(e)}}_stateDoctype(e){switch(e){case w.SPACE:case w.LINE_FEED:case w.TABULATION:case w.FORM_FEED:this.state=z.BEFORE_DOCTYPE_NAME;break;case w.GREATER_THAN_SIGN:this.state=z.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e);break;case w.EOF:{this._err(N.eofInDoctype),this._createDoctypeToken(null);let e=this.currentToken;e.forceQuirks=!0,this.emitCurrentDoctype(e),this._emitEOFToken();break}default:this._err(N.missingWhitespaceBeforeDoctypeName),this.state=z.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e)}}_stateBeforeDoctypeName(e){if(io(e))this._createDoctypeToken(String.fromCharCode(e+32)),this.state=z.DOCTYPE_NAME;else switch(e){case w.SPACE:case w.LINE_FEED:case w.TABULATION:case w.FORM_FEED:break;case w.NULL:this._err(N.unexpectedNullCharacter),this._createDoctypeToken(""),this.state=z.DOCTYPE_NAME;break;case w.GREATER_THAN_SIGN:{this._err(N.missingDoctypeName),this._createDoctypeToken(null);let e=this.currentToken;e.forceQuirks=!0,this.emitCurrentDoctype(e),this.state=z.DATA;break}case w.EOF:{this._err(N.eofInDoctype),this._createDoctypeToken(null);let e=this.currentToken;e.forceQuirks=!0,this.emitCurrentDoctype(e),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(e)),this.state=z.DOCTYPE_NAME}}_stateDoctypeName(e){let t=this.currentToken;switch(e){case w.SPACE:case w.LINE_FEED:case w.TABULATION:case w.FORM_FEED:this.state=z.AFTER_DOCTYPE_NAME;break;case w.GREATER_THAN_SIGN:this.state=z.DATA,this.emitCurrentDoctype(t);break;case w.NULL:this._err(N.unexpectedNullCharacter),t.name+="";break;case w.EOF:this._err(N.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:t.name+=String.fromCodePoint(io(e)?e+32:e)}}_stateAfterDoctypeName(e){let t=this.currentToken;switch(e){case w.SPACE:case w.LINE_FEED:case w.TABULATION:case w.FORM_FEED:break;case w.GREATER_THAN_SIGN:this.state=z.DATA,this.emitCurrentDoctype(t);break;case w.EOF:this._err(N.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._consumeSequenceIfMatch(rq.PUBLIC,!1)?this.state=z.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(rq.SYSTEM,!1)?this.state=z.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(N.invalidCharacterSequenceAfterDoctypeName),t.forceQuirks=!0,this.state=z.BOGUS_DOCTYPE,this._stateBogusDoctype(e))}}_stateAfterDoctypePublicKeyword(e){let t=this.currentToken;switch(e){case w.SPACE:case w.LINE_FEED:case w.TABULATION:case w.FORM_FEED:this.state=z.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break;case w.QUOTATION_MARK:this._err(N.missingWhitespaceAfterDoctypePublicKeyword),t.publicId="",this.state=z.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break;case w.APOSTROPHE:this._err(N.missingWhitespaceAfterDoctypePublicKeyword),t.publicId="",this.state=z.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break;case w.GREATER_THAN_SIGN:this._err(N.missingDoctypePublicIdentifier),t.forceQuirks=!0,this.state=z.DATA,this.emitCurrentDoctype(t);break;case w.EOF:this._err(N.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(N.missingQuoteBeforeDoctypePublicIdentifier),t.forceQuirks=!0,this.state=z.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypePublicIdentifier(e){let t=this.currentToken;switch(e){case w.SPACE:case w.LINE_FEED:case w.TABULATION:case w.FORM_FEED:break;case w.QUOTATION_MARK:t.publicId="",this.state=z.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break;case w.APOSTROPHE:t.publicId="",this.state=z.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break;case w.GREATER_THAN_SIGN:this._err(N.missingDoctypePublicIdentifier),t.forceQuirks=!0,this.state=z.DATA,this.emitCurrentDoctype(t);break;case w.EOF:this._err(N.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(N.missingQuoteBeforeDoctypePublicIdentifier),t.forceQuirks=!0,this.state=z.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypePublicIdentifierDoubleQuoted(e){let t=this.currentToken;switch(e){case w.QUOTATION_MARK:this.state=z.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break;case w.NULL:this._err(N.unexpectedNullCharacter),t.publicId+="";break;case w.GREATER_THAN_SIGN:this._err(N.abruptDoctypePublicIdentifier),t.forceQuirks=!0,this.emitCurrentDoctype(t),this.state=z.DATA;break;case w.EOF:this._err(N.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:t.publicId+=String.fromCodePoint(e)}}_stateDoctypePublicIdentifierSingleQuoted(e){let t=this.currentToken;switch(e){case w.APOSTROPHE:this.state=z.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break;case w.NULL:this._err(N.unexpectedNullCharacter),t.publicId+="";break;case w.GREATER_THAN_SIGN:this._err(N.abruptDoctypePublicIdentifier),t.forceQuirks=!0,this.emitCurrentDoctype(t),this.state=z.DATA;break;case w.EOF:this._err(N.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:t.publicId+=String.fromCodePoint(e)}}_stateAfterDoctypePublicIdentifier(e){let t=this.currentToken;switch(e){case w.SPACE:case w.LINE_FEED:case w.TABULATION:case w.FORM_FEED:this.state=z.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break;case w.GREATER_THAN_SIGN:this.state=z.DATA,this.emitCurrentDoctype(t);break;case w.QUOTATION_MARK:this._err(N.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),t.systemId="",this.state=z.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break;case w.APOSTROPHE:this._err(N.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),t.systemId="",this.state=z.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break;case w.EOF:this._err(N.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(N.missingQuoteBeforeDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=z.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBetweenDoctypePublicAndSystemIdentifiers(e){let t=this.currentToken;switch(e){case w.SPACE:case w.LINE_FEED:case w.TABULATION:case w.FORM_FEED:break;case w.GREATER_THAN_SIGN:this.emitCurrentDoctype(t),this.state=z.DATA;break;case w.QUOTATION_MARK:t.systemId="",this.state=z.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break;case w.APOSTROPHE:t.systemId="",this.state=z.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break;case w.EOF:this._err(N.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(N.missingQuoteBeforeDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=z.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateAfterDoctypeSystemKeyword(e){let t=this.currentToken;switch(e){case w.SPACE:case w.LINE_FEED:case w.TABULATION:case w.FORM_FEED:this.state=z.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break;case w.QUOTATION_MARK:this._err(N.missingWhitespaceAfterDoctypeSystemKeyword),t.systemId="",this.state=z.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break;case w.APOSTROPHE:this._err(N.missingWhitespaceAfterDoctypeSystemKeyword),t.systemId="",this.state=z.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break;case w.GREATER_THAN_SIGN:this._err(N.missingDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=z.DATA,this.emitCurrentDoctype(t);break;case w.EOF:this._err(N.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(N.missingQuoteBeforeDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=z.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypeSystemIdentifier(e){let t=this.currentToken;switch(e){case w.SPACE:case w.LINE_FEED:case w.TABULATION:case w.FORM_FEED:break;case w.QUOTATION_MARK:t.systemId="",this.state=z.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break;case w.APOSTROPHE:t.systemId="",this.state=z.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break;case w.GREATER_THAN_SIGN:this._err(N.missingDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=z.DATA,this.emitCurrentDoctype(t);break;case w.EOF:this._err(N.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(N.missingQuoteBeforeDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=z.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypeSystemIdentifierDoubleQuoted(e){let t=this.currentToken;switch(e){case w.QUOTATION_MARK:this.state=z.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break;case w.NULL:this._err(N.unexpectedNullCharacter),t.systemId+="";break;case w.GREATER_THAN_SIGN:this._err(N.abruptDoctypeSystemIdentifier),t.forceQuirks=!0,this.emitCurrentDoctype(t),this.state=z.DATA;break;case w.EOF:this._err(N.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:t.systemId+=String.fromCodePoint(e)}}_stateDoctypeSystemIdentifierSingleQuoted(e){let t=this.currentToken;switch(e){case w.APOSTROPHE:this.state=z.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break;case w.NULL:this._err(N.unexpectedNullCharacter),t.systemId+="";break;case w.GREATER_THAN_SIGN:this._err(N.abruptDoctypeSystemIdentifier),t.forceQuirks=!0,this.emitCurrentDoctype(t),this.state=z.DATA;break;case w.EOF:this._err(N.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:t.systemId+=String.fromCodePoint(e)}}_stateAfterDoctypeSystemIdentifier(e){let t=this.currentToken;switch(e){case w.SPACE:case w.LINE_FEED:case w.TABULATION:case w.FORM_FEED:break;case w.GREATER_THAN_SIGN:this.emitCurrentDoctype(t),this.state=z.DATA;break;case w.EOF:this._err(N.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(N.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=z.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBogusDoctype(e){let t=this.currentToken;switch(e){case w.GREATER_THAN_SIGN:this.emitCurrentDoctype(t),this.state=z.DATA;break;case w.NULL:this._err(N.unexpectedNullCharacter);break;case w.EOF:this.emitCurrentDoctype(t),this._emitEOFToken()}}_stateCdataSection(e){switch(e){case w.RIGHT_SQUARE_BRACKET:this.state=z.CDATA_SECTION_BRACKET;break;case w.EOF:this._err(N.eofInCdata),this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateCdataSectionBracket(e){e===w.RIGHT_SQUARE_BRACKET?this.state=z.CDATA_SECTION_END:(this._emitChars("]"),this.state=z.CDATA_SECTION,this._stateCdataSection(e))}_stateCdataSectionEnd(e){switch(e){case w.GREATER_THAN_SIGN:this.state=z.DATA;break;case w.RIGHT_SQUARE_BRACKET:this._emitChars("]");break;default:this._emitChars("]]"),this.state=z.CDATA_SECTION,this._stateCdataSection(e)}}_stateCharacterReference(e){e===w.NUMBER_SIGN?this.state=z.NUMERIC_CHARACTER_REFERENCE:ic(e)?(this.state=z.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(e)):(this._flushCodePointConsumedAsCharacterReference(w.AMPERSAND),this._reconsumeInState(this.returnState,e))}_stateNamedCharacterReference(e){let t=this._matchNamedCharacterReference(e);if(this._ensureHibernation());else if(t){for(let e=0;e<t.length;e++)this._flushCodePointConsumedAsCharacterReference(t[e]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(w.AMPERSAND),this.state=z.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(e){ic(e)?this._flushCodePointConsumedAsCharacterReference(e):(e===w.SEMICOLON&&this._err(N.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,e))}_stateNumericCharacterReference(e){this.charRefCode=0,e===w.LATIN_SMALL_X||e===w.LATIN_CAPITAL_X?this.state=z.HEXADEMICAL_CHARACTER_REFERENCE_START:is(e)?(this.state=z.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(e)):(this._err(N.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(w.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(w.NUMBER_SIGN),this._reconsumeInState(this.returnState,e))}_stateHexademicalCharacterReferenceStart(e){is(e)||iu(e)||id(e)?(this.state=z.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(e)):(this._err(N.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(w.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(w.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(e){iu(e)?this.charRefCode=16*this.charRefCode+e-55:id(e)?this.charRefCode=16*this.charRefCode+e-87:is(e)?this.charRefCode=16*this.charRefCode+e-48:e===w.SEMICOLON?this.state=z.NUMERIC_CHARACTER_REFERENCE_END:(this._err(N.missingSemicolonAfterCharacterReference),this.state=z.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(e))}_stateDecimalCharacterReference(e){is(e)?this.charRefCode=10*this.charRefCode+e-48:e===w.SEMICOLON?this.state=z.NUMERIC_CHARACTER_REFERENCE_END:(this._err(N.missingSemicolonAfterCharacterReference),this.state=z.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(e))}_stateNumericCharacterReferenceEnd(e){if(this.charRefCode===w.NULL)this._err(N.nullCharacterReference),this.charRefCode=w.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(N.characterReferenceOutsideUnicodeRange),this.charRefCode=w.REPLACEMENT_CHARACTER;else if(rQ(this.charRefCode))this._err(N.surrogateCharacterReference),this.charRefCode=w.REPLACEMENT_CHARACTER;else if(rK(this.charRefCode))this._err(N.noncharacterCharacterReference);else if(rX(this.charRefCode)||this.charRefCode===w.CARRIAGE_RETURN){this._err(N.controlCharacterReference);let e=ii.get(this.charRefCode);void 0!==e&&(this.charRefCode=e)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,e)}}let ig=new Set([G.DD,G.DT,G.LI,G.OPTGROUP,G.OPTION,G.P,G.RB,G.RP,G.RT,G.RTC]),iE=new Set([...ig,G.CAPTION,G.COLGROUP,G.TBODY,G.TD,G.TFOOT,G.TH,G.THEAD,G.TR]),iT=new Map([[G.APPLET,F.HTML],[G.CAPTION,F.HTML],[G.HTML,F.HTML],[G.MARQUEE,F.HTML],[G.OBJECT,F.HTML],[G.TABLE,F.HTML],[G.TD,F.HTML],[G.TEMPLATE,F.HTML],[G.TH,F.HTML],[G.ANNOTATION_XML,F.MATHML],[G.MI,F.MATHML],[G.MN,F.MATHML],[G.MO,F.MATHML],[G.MS,F.MATHML],[G.MTEXT,F.MATHML],[G.DESC,F.SVG],[G.FOREIGN_OBJECT,F.SVG],[G.TITLE,F.SVG]]),iv=[G.H1,G.H2,G.H3,G.H4,G.H5,G.H6],iy=[G.TR,G.TEMPLATE,G.HTML],iA=[G.TBODY,G.TFOOT,G.THEAD,G.TEMPLATE,G.HTML],ib=[G.TABLE,G.TEMPLATE,G.HTML],i_=[G.TD,G.TH];class iC{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(e,t,n){this.treeAdapter=t,this.handler=n,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=G.UNKNOWN,this.current=e}_indexOf(e){return this.items.lastIndexOf(e,this.stackTop)}_isInTemplate(){return this.currentTagId===G.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===F.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(e,t){this.stackTop++,this.items[this.stackTop]=e,this.current=e,this.tagIDs[this.stackTop]=t,this.currentTagId=t,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(e,t,!0)}pop(){let e=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!0)}replace(e,t){let n=this._indexOf(e);this.items[n]=t,n===this.stackTop&&(this.current=t)}insertAfter(e,t,n){let r=this._indexOf(e)+1;this.items.splice(r,0,t),this.tagIDs.splice(r,0,n),this.stackTop++,r===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,r===this.stackTop)}popUntilTagNamePopped(e){let t=this.stackTop+1;do t=this.tagIDs.lastIndexOf(e,t-1);while(t>0&&this.treeAdapter.getNamespaceURI(this.items[t])!==F.HTML);this.shortenToLength(t<0?0:t)}shortenToLength(e){for(;this.stackTop>=e;){let t=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,this.stackTop<e)}}popUntilElementPopped(e){let t=this._indexOf(e);this.shortenToLength(t<0?0:t)}popUntilPopped(e,t){let n=this._indexOfTagNames(e,t);this.shortenToLength(n<0?0:n)}popUntilNumberedHeaderPopped(){this.popUntilPopped(iv,F.HTML)}popUntilTableCellPopped(){this.popUntilPopped(i_,F.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(e,t){for(let n=this.stackTop;n>=0;n--)if(e.includes(this.tagIDs[n])&&this.treeAdapter.getNamespaceURI(this.items[n])===t)return n;return -1}clearBackTo(e,t){let n=this._indexOfTagNames(e,t);this.shortenToLength(n+1)}clearBackToTableContext(){this.clearBackTo(ib,F.HTML)}clearBackToTableBodyContext(){this.clearBackTo(iA,F.HTML)}clearBackToTableRowContext(){this.clearBackTo(iy,F.HTML)}remove(e){let t=this._indexOf(e);t>=0&&(t===this.stackTop?this.pop():(this.items.splice(t,1),this.tagIDs.splice(t,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===G.BODY?this.items[1]:null}contains(e){return this._indexOf(e)>-1}getCommonAncestor(e){let t=this._indexOf(e)-1;return t>=0?this.items[t]:null}isRootHtmlElementCurrent(){return 0===this.stackTop&&this.tagIDs[0]===G.HTML}hasInScope(e){for(let t=this.stackTop;t>=0;t--){let n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(n===e&&r===F.HTML)break;if(iT.get(n)===r)return!1}return!0}hasNumberedHeaderInScope(){for(let e=this.stackTop;e>=0;e--){let t=this.tagIDs[e],n=this.treeAdapter.getNamespaceURI(this.items[e]);if(ir(t)&&n===F.HTML)break;if(iT.get(t)===n)return!1}return!0}hasInListItemScope(e){for(let t=this.stackTop;t>=0;t--){let n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(n===e&&r===F.HTML)break;if((n===G.UL||n===G.OL)&&r===F.HTML||iT.get(n)===r)return!1}return!0}hasInButtonScope(e){for(let t=this.stackTop;t>=0;t--){let n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(n===e&&r===F.HTML)break;if(n===G.BUTTON&&r===F.HTML||iT.get(n)===r)return!1}return!0}hasInTableScope(e){for(let t=this.stackTop;t>=0;t--){let n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===F.HTML){if(n===e)break;if(n===G.TABLE||n===G.TEMPLATE||n===G.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let e=this.stackTop;e>=0;e--){let t=this.tagIDs[e];if(this.treeAdapter.getNamespaceURI(this.items[e])===F.HTML){if(t===G.TBODY||t===G.THEAD||t===G.TFOOT)break;if(t===G.TABLE||t===G.HTML)return!1}}return!0}hasInSelectScope(e){for(let t=this.stackTop;t>=0;t--){let n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===F.HTML){if(n===e)break;if(n!==G.OPTION&&n!==G.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;ig.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;iE.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(e){for(;this.currentTagId!==e&&iE.has(this.currentTagId);)this.pop()}}(C=j=j||(j={}))[C.Marker=0]="Marker",C[C.Element=1]="Element";let iS={type:j.Marker};class iI{constructor(e){this.treeAdapter=e,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(e,t){let n=[],r=t.length,i=this.treeAdapter.getTagName(e),a=this.treeAdapter.getNamespaceURI(e);for(let e=0;e<this.entries.length;e++){let t=this.entries[e];if(t.type===j.Marker)break;let{element:s}=t;if(this.treeAdapter.getTagName(s)===i&&this.treeAdapter.getNamespaceURI(s)===a){let t=this.treeAdapter.getAttrList(s);t.length===r&&n.push({idx:e,attrs:t})}}return n}_ensureNoahArkCondition(e){if(this.entries.length<3)return;let t=this.treeAdapter.getAttrList(e),n=this._getNoahArkConditionCandidates(e,t);if(n.length<3)return;let r=new Map(t.map(e=>[e.name,e.value])),i=0;for(let e=0;e<n.length;e++){let t=n[e];t.attrs.every(e=>r.get(e.name)===e.value)&&(i+=1)>=3&&this.entries.splice(t.idx,1)}}insertMarker(){this.entries.unshift(iS)}pushElement(e,t){this._ensureNoahArkCondition(e),this.entries.unshift({type:j.Element,element:e,token:t})}insertElementAfterBookmark(e,t){let n=this.entries.indexOf(this.bookmark);this.entries.splice(n,0,{type:j.Element,element:e,token:t})}removeEntry(e){let t=this.entries.indexOf(e);t>=0&&this.entries.splice(t,1)}clearToLastMarker(){let e=this.entries.indexOf(iS);e>=0?this.entries.splice(0,e+1):this.entries.length=0}getElementEntryInScopeWithTagName(e){let t=this.entries.find(t=>t.type===j.Marker||this.treeAdapter.getTagName(t.element)===e);return t&&t.type===j.Element?t:null}getElementEntry(e){return this.entries.find(t=>t.type===j.Element&&t.element===e)}}function ix(e){return{nodeName:"#text",value:e,parentNode:null}}let ik={createDocument:()=>({nodeName:"#document",mode:H.NO_QUIRKS,childNodes:[]}),createDocumentFragment:()=>({nodeName:"#document-fragment",childNodes:[]}),createElement:(e,t,n)=>({nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}),createCommentNode:e=>({nodeName:"#comment",data:e,parentNode:null}),appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){let r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent:e=>e.content,setDocumentType(e,t,n,r){let i=e.childNodes.find(e=>"#documentType"===e.nodeName);i?(i.name=t,i.publicId=n,i.systemId=r):ik.appendChild(e,{nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null})},setDocumentMode(e,t){e.mode=t},getDocumentMode:e=>e.mode,detachNode(e){if(e.parentNode){let t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){let n=e.childNodes[e.childNodes.length-1];if(ik.isTextNode(n)){n.value+=t;return}}ik.appendChild(e,ix(t))},insertTextBefore(e,t,n){let r=e.childNodes[e.childNodes.indexOf(n)-1];r&&ik.isTextNode(r)?r.value+=t:ik.insertBefore(e,ix(t),n)},adoptAttributes(e,t){let n=new Set(e.attrs.map(e=>e.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild:e=>e.childNodes[0],getChildNodes:e=>e.childNodes,getParentNode:e=>e.parentNode,getAttrList:e=>e.attrs,getTagName:e=>e.tagName,getNamespaceURI:e=>e.namespaceURI,getTextNodeContent:e=>e.value,getCommentNodeContent:e=>e.data,getDocumentTypeNodeName:e=>e.name,getDocumentTypeNodePublicId:e=>e.publicId,getDocumentTypeNodeSystemId:e=>e.systemId,isTextNode:e=>"#text"===e.nodeName,isCommentNode:e=>"#comment"===e.nodeName,isDocumentTypeNode:e=>"#documentType"===e.nodeName,isElementNode:e=>Object.prototype.hasOwnProperty.call(e,"tagName"),setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation:e=>e.sourceCodeLocation,updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},iw="html",iN=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],iO=[...iN,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],iR=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),iL=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],iD=[...iL,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function iM(e,t){return t.some(t=>e.startsWith(t))}let iP={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},iF=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),iB=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:F.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:F.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:F.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:F.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:F.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:F.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:F.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:F.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:F.XML}],["xml:space",{prefix:"xml",name:"space",namespace:F.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:F.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:F.XMLNS}]]),iH=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),iU=new Set([G.B,G.BIG,G.BLOCKQUOTE,G.BODY,G.BR,G.CENTER,G.CODE,G.DD,G.DIV,G.DL,G.DT,G.EM,G.EMBED,G.H1,G.H2,G.H3,G.H4,G.H5,G.H6,G.HEAD,G.HR,G.I,G.IMG,G.LI,G.LISTING,G.MENU,G.META,G.NOBR,G.OL,G.P,G.PRE,G.RUBY,G.S,G.SMALL,G.SPAN,G.STRONG,G.STRIKE,G.SUB,G.SUP,G.TABLE,G.TT,G.U,G.UL,G.VAR]);function iG(e){for(let t=0;t<e.attrs.length;t++)if("definitionurl"===e.attrs[t].name){e.attrs[t].name="definitionURL";break}}function iz(e){for(let t=0;t<e.attrs.length;t++){let n=iF.get(e.attrs[t].name);null!=n&&(e.attrs[t].name=n)}}function ij(e){for(let t=0;t<e.attrs.length;t++){let n=iB.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}(S=$||($={}))[S.INITIAL=0]="INITIAL",S[S.BEFORE_HTML=1]="BEFORE_HTML",S[S.BEFORE_HEAD=2]="BEFORE_HEAD",S[S.IN_HEAD=3]="IN_HEAD",S[S.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",S[S.AFTER_HEAD=5]="AFTER_HEAD",S[S.IN_BODY=6]="IN_BODY",S[S.TEXT=7]="TEXT",S[S.IN_TABLE=8]="IN_TABLE",S[S.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",S[S.IN_CAPTION=10]="IN_CAPTION",S[S.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",S[S.IN_TABLE_BODY=12]="IN_TABLE_BODY",S[S.IN_ROW=13]="IN_ROW",S[S.IN_CELL=14]="IN_CELL",S[S.IN_SELECT=15]="IN_SELECT",S[S.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",S[S.IN_TEMPLATE=17]="IN_TEMPLATE",S[S.AFTER_BODY=18]="AFTER_BODY",S[S.IN_FRAMESET=19]="IN_FRAMESET",S[S.AFTER_FRAMESET=20]="AFTER_FRAMESET",S[S.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",S[S.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET";let i$={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},iW=new Set([G.TABLE,G.TBODY,G.TFOOT,G.THEAD,G.TR]),iV={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:ik,onParseError:null};class iY{constructor(e,t,n=null,r=null){this.fragmentContext=n,this.scriptHandler=r,this.currentToken=null,this.stopped=!1,this.insertionMode=$.INITIAL,this.originalInsertionMode=$.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...iV,...e},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=null!=t?t:this.treeAdapter.createDocument(),this.tokenizer=new im(this.options,this),this.activeFormattingElements=new iI(this.treeAdapter),this.fragmentContextID=n?r7(this.treeAdapter.getTagName(n)):G.UNKNOWN,this._setContextModes(null!=n?n:this.document,this.fragmentContextID),this.openElements=new iC(this.document,this.treeAdapter,this)}static parse(e,t){let n=new this(t);return n.tokenizer.write(e,!0),n.document}static getFragmentParser(e,t){let n={...iV,...t};null!=e||(e=n.treeAdapter.createElement(U.TEMPLATE,F.HTML,[]));let r=n.treeAdapter.createElement("documentmock",F.HTML,[]),i=new this(n,r,e);return i.fragmentContextID===G.TEMPLATE&&i.tmplInsertionModeStack.unshift($.IN_TEMPLATE),i._initTokenizerForFragmentParsing(),i._insertFakeRootElement(),i._resetInsertionMode(),i._findFormInFragmentContext(),i}getFragment(){let e=this.treeAdapter.getFirstChild(this.document),t=this.treeAdapter.createDocumentFragment();return this._adoptNodes(e,t),t}_err(e,t,n){var r;if(!this.onParseError)return;let i=null!==(r=e.location)&&void 0!==r?r:i$,a={code:t,startLine:i.startLine,startCol:i.startCol,startOffset:i.startOffset,endLine:n?i.startLine:i.endLine,endCol:n?i.startCol:i.endCol,endOffset:n?i.startOffset:i.endOffset};this.onParseError(a)}onItemPush(e,t,n){var r,i;null===(i=(r=this.treeAdapter).onItemPush)||void 0===i||i.call(r,e),n&&this.openElements.stackTop>0&&this._setContextModes(e,t)}onItemPop(e,t){var n,r;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(e,this.currentToken),null===(r=(n=this.treeAdapter).onItemPop)||void 0===r||r.call(n,e,this.openElements.current),t){let e,t;0===this.openElements.stackTop&&this.fragmentContext?(e=this.fragmentContext,t=this.fragmentContextID):{current:e,currentTagId:t}=this.openElements,this._setContextModes(e,t)}}_setContextModes(e,t){let n=e===this.document||this.treeAdapter.getNamespaceURI(e)===F.HTML;this.currentNotInHTML=!n,this.tokenizer.inForeignNode=!n&&!this._isIntegrationPoint(t,e)}_switchToTextParsing(e,t){this._insertElement(e,F.HTML),this.tokenizer.state=t,this.originalInsertionMode=this.insertionMode,this.insertionMode=$.TEXT}switchToPlaintextParsing(){this.insertionMode=$.TEXT,this.originalInsertionMode=$.IN_BODY,this.tokenizer.state=ia.PLAINTEXT}_getAdjustedCurrentElement(){return 0===this.openElements.stackTop&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let e=this.fragmentContext;for(;e;){if(this.treeAdapter.getTagName(e)===U.FORM){this.formElement=e;break}e=this.treeAdapter.getParentNode(e)}}_initTokenizerForFragmentParsing(){if(this.fragmentContext&&this.treeAdapter.getNamespaceURI(this.fragmentContext)===F.HTML)switch(this.fragmentContextID){case G.TITLE:case G.TEXTAREA:this.tokenizer.state=ia.RCDATA;break;case G.STYLE:case G.XMP:case G.IFRAME:case G.NOEMBED:case G.NOFRAMES:case G.NOSCRIPT:this.tokenizer.state=ia.RAWTEXT;break;case G.SCRIPT:this.tokenizer.state=ia.SCRIPT_DATA;break;case G.PLAINTEXT:this.tokenizer.state=ia.PLAINTEXT}}_setDocumentType(e){let t=e.name||"",n=e.publicId||"",r=e.systemId||"";if(this.treeAdapter.setDocumentType(this.document,t,n,r),e.location){let t=this.treeAdapter.getChildNodes(this.document).find(e=>this.treeAdapter.isDocumentTypeNode(e));t&&this.treeAdapter.setNodeSourceCodeLocation(t,e.location)}}_attachElementToTree(e,t){if(this.options.sourceCodeLocationInfo){let n=t&&{...t,startTag:t};this.treeAdapter.setNodeSourceCodeLocation(e,n)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(e);else{let t=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(t,e)}}_appendElement(e,t){let n=this.treeAdapter.createElement(e.tagName,t,e.attrs);this._attachElementToTree(n,e.location)}_insertElement(e,t){let n=this.treeAdapter.createElement(e.tagName,t,e.attrs);this._attachElementToTree(n,e.location),this.openElements.push(n,e.tagID)}_insertFakeElement(e,t){let n=this.treeAdapter.createElement(e,F.HTML,[]);this._attachElementToTree(n,null),this.openElements.push(n,t)}_insertTemplate(e){let t=this.treeAdapter.createElement(e.tagName,F.HTML,e.attrs),n=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(t,n),this._attachElementToTree(t,e.location),this.openElements.push(t,e.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(n,null)}_insertFakeRootElement(){let e=this.treeAdapter.createElement(U.HTML,F.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(e,null),this.treeAdapter.appendChild(this.openElements.current,e),this.openElements.push(e,G.HTML)}_appendCommentNode(e,t){let n=this.treeAdapter.createCommentNode(e.data);this.treeAdapter.appendChild(t,n),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(n,e.location)}_insertCharacters(e){let t,n;if(this._shouldFosterParentOnInsertion()?({parent:t,beforeElement:n}=this._findFosterParentingLocation(),n?this.treeAdapter.insertTextBefore(t,e.chars,n):this.treeAdapter.insertText(t,e.chars)):(t=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(t,e.chars)),!e.location)return;let r=this.treeAdapter.getChildNodes(t),i=n?r.lastIndexOf(n):r.length,a=r[i-1];if(this.treeAdapter.getNodeSourceCodeLocation(a)){let{endLine:t,endCol:n,endOffset:r}=e.location;this.treeAdapter.updateNodeSourceCodeLocation(a,{endLine:t,endCol:n,endOffset:r})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(a,e.location)}_adoptNodes(e,t){for(let n=this.treeAdapter.getFirstChild(e);n;n=this.treeAdapter.getFirstChild(e))this.treeAdapter.detachNode(n),this.treeAdapter.appendChild(t,n)}_setEndLocation(e,t){if(this.treeAdapter.getNodeSourceCodeLocation(e)&&t.location){let n=t.location,r=this.treeAdapter.getTagName(e),i=t.type===O.END_TAG&&r===t.tagName?{endTag:{...n},endLine:n.endLine,endCol:n.endCol,endOffset:n.endOffset}:{endLine:n.startLine,endCol:n.startCol,endOffset:n.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(e,i)}}shouldProcessStartTagTokenInForeignContent(e){let t,n;return!!this.currentNotInHTML&&(0===this.openElements.stackTop&&this.fragmentContext?(t=this.fragmentContext,n=this.fragmentContextID):{current:t,currentTagId:n}=this.openElements,(e.tagID!==G.SVG||this.treeAdapter.getTagName(t)!==U.ANNOTATION_XML||this.treeAdapter.getNamespaceURI(t)!==F.MATHML)&&(this.tokenizer.inForeignNode||(e.tagID===G.MGLYPH||e.tagID===G.MALIGNMARK)&&!this._isIntegrationPoint(n,t,F.HTML)))}_processToken(e){switch(e.type){case O.CHARACTER:this.onCharacter(e);break;case O.NULL_CHARACTER:this.onNullCharacter(e);break;case O.COMMENT:this.onComment(e);break;case O.DOCTYPE:this.onDoctype(e);break;case O.START_TAG:this._processStartTag(e);break;case O.END_TAG:this.onEndTag(e);break;case O.EOF:this.onEof(e);break;case O.WHITESPACE_CHARACTER:this.onWhitespaceCharacter(e)}}_isIntegrationPoint(e,t,n){let r=this.treeAdapter.getNamespaceURI(t),i=this.treeAdapter.getAttrList(t);return(!n||n===F.HTML)&&function(e,t,n){if(t===F.MATHML&&e===G.ANNOTATION_XML){for(let e=0;e<n.length;e++)if(n[e].name===B.ENCODING){let t=n[e].value.toLowerCase();return t===iP.TEXT_HTML||t===iP.APPLICATION_XML}}return t===F.SVG&&(e===G.FOREIGN_OBJECT||e===G.DESC||e===G.TITLE)}(e,r,i)||(!n||n===F.MATHML)&&r===F.MATHML&&(e===G.MI||e===G.MO||e===G.MN||e===G.MS||e===G.MTEXT)}_reconstructActiveFormattingElements(){let e=this.activeFormattingElements.entries.length;if(e){let t=this.activeFormattingElements.entries.findIndex(e=>e.type===j.Marker||this.openElements.contains(e.element)),n=t<0?e-1:t-1;for(let e=n;e>=0;e--){let t=this.activeFormattingElements.entries[e];this._insertElement(t.token,this.treeAdapter.getNamespaceURI(t.element)),t.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=$.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(G.P),this.openElements.popUntilTagNamePopped(G.P)}_resetInsertionMode(){for(let e=this.openElements.stackTop;e>=0;e--)switch(0===e&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[e]){case G.TR:this.insertionMode=$.IN_ROW;return;case G.TBODY:case G.THEAD:case G.TFOOT:this.insertionMode=$.IN_TABLE_BODY;return;case G.CAPTION:this.insertionMode=$.IN_CAPTION;return;case G.COLGROUP:this.insertionMode=$.IN_COLUMN_GROUP;return;case G.TABLE:this.insertionMode=$.IN_TABLE;return;case G.BODY:this.insertionMode=$.IN_BODY;return;case G.FRAMESET:this.insertionMode=$.IN_FRAMESET;return;case G.SELECT:this._resetInsertionModeForSelect(e);return;case G.TEMPLATE:this.insertionMode=this.tmplInsertionModeStack[0];return;case G.HTML:this.insertionMode=this.headElement?$.AFTER_HEAD:$.BEFORE_HEAD;return;case G.TD:case G.TH:if(e>0){this.insertionMode=$.IN_CELL;return}break;case G.HEAD:if(e>0){this.insertionMode=$.IN_HEAD;return}}this.insertionMode=$.IN_BODY}_resetInsertionModeForSelect(e){if(e>0)for(let t=e-1;t>0;t--){let e=this.openElements.tagIDs[t];if(e===G.TEMPLATE)break;if(e===G.TABLE){this.insertionMode=$.IN_SELECT_IN_TABLE;return}}this.insertionMode=$.IN_SELECT}_isElementCausesFosterParenting(e){return iW.has(e)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let e=this.openElements.stackTop;e>=0;e--){let t=this.openElements.items[e];switch(this.openElements.tagIDs[e]){case G.TEMPLATE:if(this.treeAdapter.getNamespaceURI(t)===F.HTML)return{parent:this.treeAdapter.getTemplateContent(t),beforeElement:null};break;case G.TABLE:{let n=this.treeAdapter.getParentNode(t);if(n)return{parent:n,beforeElement:t};return{parent:this.openElements.items[e-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(e){let t=this._findFosterParentingLocation();t.beforeElement?this.treeAdapter.insertBefore(t.parent,e,t.beforeElement):this.treeAdapter.appendChild(t.parent,e)}_isSpecialElement(e,t){return it[this.treeAdapter.getNamespaceURI(e)].has(t)}onCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){this._insertCharacters(e),this.framesetOk=!1;return}switch(this.insertionMode){case $.INITIAL:iK(this,e);break;case $.BEFORE_HTML:iZ(this,e);break;case $.BEFORE_HEAD:iJ(this,e);break;case $.IN_HEAD:i2(this,e);break;case $.IN_HEAD_NO_SCRIPT:i3(this,e);break;case $.AFTER_HEAD:i4(this,e);break;case $.IN_BODY:case $.IN_CAPTION:case $.IN_CELL:case $.IN_TEMPLATE:i8(this,e);break;case $.TEXT:case $.IN_SELECT:case $.IN_SELECT_IN_TABLE:this._insertCharacters(e);break;case $.IN_TABLE:case $.IN_TABLE_BODY:case $.IN_ROW:as(this,e);break;case $.IN_TABLE_TEXT:ad(this,e);break;case $.IN_COLUMN_GROUP:am(this,e);break;case $.AFTER_BODY:aC(this,e);break;case $.AFTER_AFTER_BODY:aS(this,e)}}onNullCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){e.chars="",this._insertCharacters(e);return}switch(this.insertionMode){case $.INITIAL:iK(this,e);break;case $.BEFORE_HTML:iZ(this,e);break;case $.BEFORE_HEAD:iJ(this,e);break;case $.IN_HEAD:i2(this,e);break;case $.IN_HEAD_NO_SCRIPT:i3(this,e);break;case $.AFTER_HEAD:i4(this,e);break;case $.TEXT:this._insertCharacters(e);break;case $.IN_TABLE:case $.IN_TABLE_BODY:case $.IN_ROW:as(this,e);break;case $.IN_COLUMN_GROUP:am(this,e);break;case $.AFTER_BODY:aC(this,e);break;case $.AFTER_AFTER_BODY:aS(this,e)}}onComment(e){if(this.skipNextNewLine=!1,this.currentNotInHTML){iQ(this,e);return}switch(this.insertionMode){case $.INITIAL:case $.BEFORE_HTML:case $.BEFORE_HEAD:case $.IN_HEAD:case $.IN_HEAD_NO_SCRIPT:case $.AFTER_HEAD:case $.IN_BODY:case $.IN_TABLE:case $.IN_CAPTION:case $.IN_COLUMN_GROUP:case $.IN_TABLE_BODY:case $.IN_ROW:case $.IN_CELL:case $.IN_SELECT:case $.IN_SELECT_IN_TABLE:case $.IN_TEMPLATE:case $.IN_FRAMESET:case $.AFTER_FRAMESET:iQ(this,e);break;case $.IN_TABLE_TEXT:ah(this,e);break;case $.AFTER_BODY:!function(e,t){e._appendCommentNode(t,e.openElements.items[0])}(this,e);break;case $.AFTER_AFTER_BODY:case $.AFTER_AFTER_FRAMESET:!function(e,t){e._appendCommentNode(t,e.document)}(this,e)}}onDoctype(e){switch(this.skipNextNewLine=!1,this.insertionMode){case $.INITIAL:!function(e,t){e._setDocumentType(t);let n=t.forceQuirks?H.QUIRKS:function(e){if(e.name!==iw)return H.QUIRKS;let{systemId:t}=e;if(t&&"http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd"===t.toLowerCase())return H.QUIRKS;let{publicId:n}=e;if(null!==n){if(n=n.toLowerCase(),iR.has(n))return H.QUIRKS;let e=null===t?iO:iN;if(iM(n,e))return H.QUIRKS;if(iM(n,e=null===t?iL:iD))return H.LIMITED_QUIRKS}return H.NO_QUIRKS}(t);t.name===iw&&null===t.publicId&&(null===t.systemId||"about:legacy-compat"===t.systemId)||e._err(t,N.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=$.BEFORE_HTML}(this,e);break;case $.BEFORE_HEAD:case $.IN_HEAD:case $.IN_HEAD_NO_SCRIPT:case $.AFTER_HEAD:this._err(e,N.misplacedDoctype);break;case $.IN_TABLE_TEXT:ah(this,e)}}onStartTag(e){this.skipNextNewLine=!1,this.currentToken=e,this._processStartTag(e),e.selfClosing&&!e.ackSelfClosing&&this._err(e,N.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(e){this.shouldProcessStartTagTokenInForeignContent(e)?function(e,t){if(function(e){let t=e.tagID;return t===G.FONT&&e.attrs.some(({name:e})=>e===B.COLOR||e===B.SIZE||e===B.FACE)||iU.has(t)}(t))aI(e),e._startTagOutsideForeignContent(t);else{let n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===F.MATHML?iG(t):r===F.SVG&&(function(e){let t=iH.get(e.tagName);null!=t&&(e.tagName=t,e.tagID=r7(e.tagName))}(t),iz(t)),ij(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}(this,e):this._startTagOutsideForeignContent(e)}_startTagOutsideForeignContent(e){switch(this.insertionMode){case $.INITIAL:iK(this,e);break;case $.BEFORE_HTML:e.tagID===G.HTML?(this._insertElement(e,F.HTML),this.insertionMode=$.BEFORE_HEAD):iZ(this,e);break;case $.BEFORE_HEAD:!function(e,t){switch(t.tagID){case G.HTML:an(e,t);break;case G.HEAD:e._insertElement(t,F.HTML),e.headElement=e.openElements.current,e.insertionMode=$.IN_HEAD;break;default:iJ(e,t)}}(this,e);break;case $.IN_HEAD:i0(this,e);break;case $.IN_HEAD_NO_SCRIPT:!function(e,t){switch(t.tagID){case G.HTML:an(e,t);break;case G.BASEFONT:case G.BGSOUND:case G.HEAD:case G.LINK:case G.META:case G.NOFRAMES:case G.STYLE:i0(e,t);break;case G.NOSCRIPT:e._err(t,N.nestedNoscriptInHead);break;default:i3(e,t)}}(this,e);break;case $.AFTER_HEAD:!function(e,t){switch(t.tagID){case G.HTML:an(e,t);break;case G.BODY:e._insertElement(t,F.HTML),e.framesetOk=!1,e.insertionMode=$.IN_BODY;break;case G.FRAMESET:e._insertElement(t,F.HTML),e.insertionMode=$.IN_FRAMESET;break;case G.BASE:case G.BASEFONT:case G.BGSOUND:case G.LINK:case G.META:case G.NOFRAMES:case G.SCRIPT:case G.STYLE:case G.TEMPLATE:case G.TITLE:e._err(t,N.abandonedHeadElementChild),e.openElements.push(e.headElement,G.HEAD),i0(e,t),e.openElements.remove(e.headElement);break;case G.HEAD:e._err(t,N.misplacedStartTagForHeadElement);break;default:i4(e,t)}}(this,e);break;case $.IN_BODY:an(this,e);break;case $.IN_TABLE:ao(this,e);break;case $.IN_TABLE_TEXT:ah(this,e);break;case $.IN_CAPTION:!function(e,t){let n=t.tagID;ap.has(n)?e.openElements.hasInTableScope(G.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(G.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=$.IN_TABLE,ao(e,t)):an(e,t)}(this,e);break;case $.IN_COLUMN_GROUP:af(this,e);break;case $.IN_TABLE_BODY:ag(this,e);break;case $.IN_ROW:aT(this,e);break;case $.IN_CELL:!function(e,t){let n=t.tagID;ap.has(n)?(e.openElements.hasInTableScope(G.TD)||e.openElements.hasInTableScope(G.TH))&&(e._closeTableCell(),aT(e,t)):an(e,t)}(this,e);break;case $.IN_SELECT:ay(this,e);break;case $.IN_SELECT_IN_TABLE:!function(e,t){let n=t.tagID;n===G.CAPTION||n===G.TABLE||n===G.TBODY||n===G.TFOOT||n===G.THEAD||n===G.TR||n===G.TD||n===G.TH?(e.openElements.popUntilTagNamePopped(G.SELECT),e._resetInsertionMode(),e._processStartTag(t)):ay(e,t)}(this,e);break;case $.IN_TEMPLATE:!function(e,t){switch(t.tagID){case G.BASE:case G.BASEFONT:case G.BGSOUND:case G.LINK:case G.META:case G.NOFRAMES:case G.SCRIPT:case G.STYLE:case G.TEMPLATE:case G.TITLE:i0(e,t);break;case G.CAPTION:case G.COLGROUP:case G.TBODY:case G.TFOOT:case G.THEAD:e.tmplInsertionModeStack[0]=$.IN_TABLE,e.insertionMode=$.IN_TABLE,ao(e,t);break;case G.COL:e.tmplInsertionModeStack[0]=$.IN_COLUMN_GROUP,e.insertionMode=$.IN_COLUMN_GROUP,af(e,t);break;case G.TR:e.tmplInsertionModeStack[0]=$.IN_TABLE_BODY,e.insertionMode=$.IN_TABLE_BODY,ag(e,t);break;case G.TD:case G.TH:e.tmplInsertionModeStack[0]=$.IN_ROW,e.insertionMode=$.IN_ROW,aT(e,t);break;default:e.tmplInsertionModeStack[0]=$.IN_BODY,e.insertionMode=$.IN_BODY,an(e,t)}}(this,e);break;case $.AFTER_BODY:e.tagID===G.HTML?an(this,e):aC(this,e);break;case $.IN_FRAMESET:!function(e,t){switch(t.tagID){case G.HTML:an(e,t);break;case G.FRAMESET:e._insertElement(t,F.HTML);break;case G.FRAME:e._appendElement(t,F.HTML),t.ackSelfClosing=!0;break;case G.NOFRAMES:i0(e,t)}}(this,e);break;case $.AFTER_FRAMESET:!function(e,t){switch(t.tagID){case G.HTML:an(e,t);break;case G.NOFRAMES:i0(e,t)}}(this,e);break;case $.AFTER_AFTER_BODY:e.tagID===G.HTML?an(this,e):aS(this,e);break;case $.AFTER_AFTER_FRAMESET:!function(e,t){switch(t.tagID){case G.HTML:an(e,t);break;case G.NOFRAMES:i0(e,t)}}(this,e)}}onEndTag(e){this.skipNextNewLine=!1,this.currentToken=e,this.currentNotInHTML?function(e,t){if(t.tagID===G.P||t.tagID===G.BR){aI(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){let r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===F.HTML){e._endTagOutsideForeignContent(t);break}let i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}(this,e):this._endTagOutsideForeignContent(e)}_endTagOutsideForeignContent(e){var t;switch(this.insertionMode){case $.INITIAL:iK(this,e);break;case $.BEFORE_HTML:!function(e,t){let n=t.tagID;(n===G.HTML||n===G.HEAD||n===G.BODY||n===G.BR)&&iZ(e,t)}(this,e);break;case $.BEFORE_HEAD:!function(e,t){let n=t.tagID;n===G.HEAD||n===G.BODY||n===G.HTML||n===G.BR?iJ(e,t):e._err(t,N.endTagWithoutMatchingOpenElement)}(this,e);break;case $.IN_HEAD:!function(e,t){switch(t.tagID){case G.HEAD:e.openElements.pop(),e.insertionMode=$.AFTER_HEAD;break;case G.BODY:case G.BR:case G.HTML:i2(e,t);break;case G.TEMPLATE:i1(e,t);break;default:e._err(t,N.endTagWithoutMatchingOpenElement)}}(this,e);break;case $.IN_HEAD_NO_SCRIPT:!function(e,t){switch(t.tagID){case G.NOSCRIPT:e.openElements.pop(),e.insertionMode=$.IN_HEAD;break;case G.BR:i3(e,t);break;default:e._err(t,N.endTagWithoutMatchingOpenElement)}}(this,e);break;case $.AFTER_HEAD:!function(e,t){switch(t.tagID){case G.BODY:case G.HTML:case G.BR:i4(e,t);break;case G.TEMPLATE:i1(e,t);break;default:e._err(t,N.endTagWithoutMatchingOpenElement)}}(this,e);break;case $.IN_BODY:ai(this,e);break;case $.TEXT:e.tagID===G.SCRIPT&&(null===(t=this.scriptHandler)||void 0===t||t.call(this,this.openElements.current)),this.openElements.pop(),this.insertionMode=this.originalInsertionMode;break;case $.IN_TABLE:al(this,e);break;case $.IN_TABLE_TEXT:ah(this,e);break;case $.IN_CAPTION:!function(e,t){let n=t.tagID;switch(n){case G.CAPTION:case G.TABLE:e.openElements.hasInTableScope(G.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(G.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=$.IN_TABLE,n===G.TABLE&&al(e,t));break;case G.BODY:case G.COL:case G.COLGROUP:case G.HTML:case G.TBODY:case G.TD:case G.TFOOT:case G.TH:case G.THEAD:case G.TR:break;default:ai(e,t)}}(this,e);break;case $.IN_COLUMN_GROUP:!function(e,t){switch(t.tagID){case G.COLGROUP:e.openElements.currentTagId===G.COLGROUP&&(e.openElements.pop(),e.insertionMode=$.IN_TABLE);break;case G.TEMPLATE:i1(e,t);break;case G.COL:break;default:am(e,t)}}(this,e);break;case $.IN_TABLE_BODY:aE(this,e);break;case $.IN_ROW:av(this,e);break;case $.IN_CELL:!function(e,t){let n=t.tagID;switch(n){case G.TD:case G.TH:e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=$.IN_ROW);break;case G.TABLE:case G.TBODY:case G.TFOOT:case G.THEAD:case G.TR:e.openElements.hasInTableScope(n)&&(e._closeTableCell(),av(e,t));break;case G.BODY:case G.CAPTION:case G.COL:case G.COLGROUP:case G.HTML:break;default:ai(e,t)}}(this,e);break;case $.IN_SELECT:aA(this,e);break;case $.IN_SELECT_IN_TABLE:!function(e,t){let n=t.tagID;n===G.CAPTION||n===G.TABLE||n===G.TBODY||n===G.TFOOT||n===G.THEAD||n===G.TR||n===G.TD||n===G.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(G.SELECT),e._resetInsertionMode(),e.onEndTag(t)):aA(e,t)}(this,e);break;case $.IN_TEMPLATE:e.tagID===G.TEMPLATE&&i1(this,e);break;case $.AFTER_BODY:a_(this,e);break;case $.IN_FRAMESET:e.tagID!==G.FRAMESET||this.openElements.isRootHtmlElementCurrent()||(this.openElements.pop(),this.fragmentContext||this.openElements.currentTagId===G.FRAMESET||(this.insertionMode=$.AFTER_FRAMESET));break;case $.AFTER_FRAMESET:e.tagID===G.HTML&&(this.insertionMode=$.AFTER_AFTER_FRAMESET);break;case $.AFTER_AFTER_BODY:aS(this,e)}}onEof(e){switch(this.insertionMode){case $.INITIAL:iK(this,e);break;case $.BEFORE_HTML:iZ(this,e);break;case $.BEFORE_HEAD:iJ(this,e);break;case $.IN_HEAD:i2(this,e);break;case $.IN_HEAD_NO_SCRIPT:i3(this,e);break;case $.AFTER_HEAD:i4(this,e);break;case $.IN_BODY:case $.IN_TABLE:case $.IN_CAPTION:case $.IN_COLUMN_GROUP:case $.IN_TABLE_BODY:case $.IN_ROW:case $.IN_CELL:case $.IN_SELECT:case $.IN_SELECT_IN_TABLE:aa(this,e);break;case $.TEXT:this._err(e,N.eofInElementThatCanContainOnlyText),this.openElements.pop(),this.insertionMode=this.originalInsertionMode,this.onEof(e);break;case $.IN_TABLE_TEXT:ah(this,e);break;case $.IN_TEMPLATE:ab(this,e);break;case $.AFTER_BODY:case $.IN_FRAMESET:case $.AFTER_FRAMESET:case $.AFTER_AFTER_BODY:case $.AFTER_AFTER_FRAMESET:iX(this,e)}}onWhitespaceCharacter(e){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,e.chars.charCodeAt(0)===w.LINE_FEED)){if(1===e.chars.length)return;e.chars=e.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(e);return}switch(this.insertionMode){case $.IN_HEAD:case $.IN_HEAD_NO_SCRIPT:case $.AFTER_HEAD:case $.TEXT:case $.IN_COLUMN_GROUP:case $.IN_SELECT:case $.IN_SELECT_IN_TABLE:case $.IN_FRAMESET:case $.AFTER_FRAMESET:this._insertCharacters(e);break;case $.IN_BODY:case $.IN_CAPTION:case $.IN_CELL:case $.IN_TEMPLATE:case $.AFTER_BODY:case $.AFTER_AFTER_BODY:case $.AFTER_AFTER_FRAMESET:i6(this,e);break;case $.IN_TABLE:case $.IN_TABLE_BODY:case $.IN_ROW:as(this,e);break;case $.IN_TABLE_TEXT:au(this,e)}}}function iq(e,t){for(let n=0;n<8;n++){let n=function(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):ar(e,t),n}(e,t);if(!n)break;let r=function(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){let i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(r<0?0:r),e.activeFormattingElements.removeEntry(t)),n}(e,n);if(!r)break;e.activeFormattingElements.bookmark=n;let i=function(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let a=0,s=i;s!==n;a++,s=i){i=e.openElements.getCommonAncestor(s);let n=e.activeFormattingElements.getElementEntry(s),o=n&&a>=3;!n||o?(o&&e.activeFormattingElements.removeEntry(n),e.openElements.remove(s)):(s=function(e,t){let n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}(e,n),r===t&&(e.activeFormattingElements.bookmark=n),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(s,r),r=s)}return r}(e,r,n.element),a=e.openElements.getCommonAncestor(n.element);e.treeAdapter.detachNode(i),a&&function(e,t,n){let r=r7(e.treeAdapter.getTagName(t));if(e._isElementCausesFosterParenting(r))e._fosterParentElement(n);else{let i=e.treeAdapter.getNamespaceURI(t);r===G.TEMPLATE&&i===F.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}(e,a,i),function(e,t,n){let r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,a=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,a),e.treeAdapter.appendChild(t,a),e.activeFormattingElements.insertElementAfterBookmark(a,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,a,i.tagID)}(e,r,n)}}function iQ(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function iX(e,t){if(e.stopped=!0,t.location){let n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){let n=e.openElements.items[0],r=e.treeAdapter.getNodeSourceCodeLocation(n);if(r&&!r.endTag&&(e._setEndLocation(n,t),e.openElements.stackTop>=1)){let n=e.openElements.items[1],r=e.treeAdapter.getNodeSourceCodeLocation(n);r&&!r.endTag&&e._setEndLocation(n,t)}}}}function iK(e,t){e._err(t,N.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,H.QUIRKS),e.insertionMode=$.BEFORE_HTML,e._processToken(t)}function iZ(e,t){e._insertFakeRootElement(),e.insertionMode=$.BEFORE_HEAD,e._processToken(t)}function iJ(e,t){e._insertFakeElement(U.HEAD,G.HEAD),e.headElement=e.openElements.current,e.insertionMode=$.IN_HEAD,e._processToken(t)}function i0(e,t){switch(t.tagID){case G.HTML:an(e,t);break;case G.BASE:case G.BASEFONT:case G.BGSOUND:case G.LINK:case G.META:e._appendElement(t,F.HTML),t.ackSelfClosing=!0;break;case G.TITLE:e._switchToTextParsing(t,ia.RCDATA);break;case G.NOSCRIPT:e.options.scriptingEnabled?e._switchToTextParsing(t,ia.RAWTEXT):(e._insertElement(t,F.HTML),e.insertionMode=$.IN_HEAD_NO_SCRIPT);break;case G.NOFRAMES:case G.STYLE:e._switchToTextParsing(t,ia.RAWTEXT);break;case G.SCRIPT:e._switchToTextParsing(t,ia.SCRIPT_DATA);break;case G.TEMPLATE:e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=$.IN_TEMPLATE,e.tmplInsertionModeStack.unshift($.IN_TEMPLATE);break;case G.HEAD:e._err(t,N.misplacedStartTagForHeadElement);break;default:i2(e,t)}}function i1(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==G.TEMPLATE&&e._err(t,N.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(G.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,N.endTagWithoutMatchingOpenElement)}function i2(e,t){e.openElements.pop(),e.insertionMode=$.AFTER_HEAD,e._processToken(t)}function i3(e,t){let n=t.type===O.EOF?N.openElementsLeftAfterEof:N.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=$.IN_HEAD,e._processToken(t)}function i4(e,t){e._insertFakeElement(U.BODY,G.BODY),e.insertionMode=$.IN_BODY,i5(e,t)}function i5(e,t){switch(t.type){case O.CHARACTER:i8(e,t);break;case O.WHITESPACE_CHARACTER:i6(e,t);break;case O.COMMENT:iQ(e,t);break;case O.START_TAG:an(e,t);break;case O.END_TAG:ai(e,t);break;case O.EOF:aa(e,t)}}function i6(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function i8(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function i9(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,F.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function i7(e){let t=rJ(e,B.TYPE);return null!=t&&"hidden"===t.toLowerCase()}function ae(e,t){e._switchToTextParsing(t,ia.RAWTEXT)}function at(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,F.HTML)}function an(e,t){switch(t.tagID){case G.I:case G.S:case G.B:case G.U:case G.EM:case G.TT:case G.BIG:case G.CODE:case G.FONT:case G.SMALL:case G.STRIKE:case G.STRONG:e._reconstructActiveFormattingElements(),e._insertElement(t,F.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t);break;case G.A:!function(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(U.A);n&&(iq(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,F.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}(e,t);break;case G.H1:case G.H2:case G.H3:case G.H4:case G.H5:case G.H6:e.openElements.hasInButtonScope(G.P)&&e._closePElement(),ir(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,F.HTML);break;case G.P:case G.DL:case G.OL:case G.UL:case G.DIV:case G.DIR:case G.NAV:case G.MAIN:case G.MENU:case G.ASIDE:case G.CENTER:case G.FIGURE:case G.FOOTER:case G.HEADER:case G.HGROUP:case G.DIALOG:case G.DETAILS:case G.ADDRESS:case G.ARTICLE:case G.SECTION:case G.SUMMARY:case G.FIELDSET:case G.BLOCKQUOTE:case G.FIGCAPTION:e.openElements.hasInButtonScope(G.P)&&e._closePElement(),e._insertElement(t,F.HTML);break;case G.LI:case G.DD:case G.DT:!function(e,t){e.framesetOk=!1;let n=t.tagID;for(let t=e.openElements.stackTop;t>=0;t--){let r=e.openElements.tagIDs[t];if(n===G.LI&&r===G.LI||(n===G.DD||n===G.DT)&&(r===G.DD||r===G.DT)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.popUntilTagNamePopped(r);break}if(r!==G.ADDRESS&&r!==G.DIV&&r!==G.P&&e._isSpecialElement(e.openElements.items[t],r))break}e.openElements.hasInButtonScope(G.P)&&e._closePElement(),e._insertElement(t,F.HTML)}(e,t);break;case G.BR:case G.IMG:case G.WBR:case G.AREA:case G.EMBED:case G.KEYGEN:i9(e,t);break;case G.HR:e.openElements.hasInButtonScope(G.P)&&e._closePElement(),e._appendElement(t,F.HTML),e.framesetOk=!1,t.ackSelfClosing=!0;break;case G.RB:case G.RTC:e.openElements.hasInScope(G.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,F.HTML);break;case G.RT:case G.RP:e.openElements.hasInScope(G.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(G.RTC),e._insertElement(t,F.HTML);break;case G.PRE:case G.LISTING:e.openElements.hasInButtonScope(G.P)&&e._closePElement(),e._insertElement(t,F.HTML),e.skipNextNewLine=!0,e.framesetOk=!1;break;case G.XMP:e.openElements.hasInButtonScope(G.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,ia.RAWTEXT);break;case G.SVG:e._reconstructActiveFormattingElements(),iz(t),ij(t),t.selfClosing?e._appendElement(t,F.SVG):e._insertElement(t,F.SVG),t.ackSelfClosing=!0;break;case G.HTML:0===e.openElements.tmplCount&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs);break;case G.BASE:case G.LINK:case G.META:case G.STYLE:case G.TITLE:case G.SCRIPT:case G.BGSOUND:case G.BASEFONT:case G.TEMPLATE:i0(e,t);break;case G.BODY:!function(e,t){let n=e.openElements.tryPeekProperlyNestedBodyElement();n&&0===e.openElements.tmplCount&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}(e,t);break;case G.FORM:!function(e,t){let n=e.openElements.tmplCount>0;e.formElement&&!n||(e.openElements.hasInButtonScope(G.P)&&e._closePElement(),e._insertElement(t,F.HTML),n||(e.formElement=e.openElements.current))}(e,t);break;case G.NOBR:e._reconstructActiveFormattingElements(),e.openElements.hasInScope(G.NOBR)&&(iq(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,F.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t);break;case G.MATH:e._reconstructActiveFormattingElements(),iG(t),ij(t),t.selfClosing?e._appendElement(t,F.MATHML):e._insertElement(t,F.MATHML),t.ackSelfClosing=!0;break;case G.TABLE:e.treeAdapter.getDocumentMode(e.document)!==H.QUIRKS&&e.openElements.hasInButtonScope(G.P)&&e._closePElement(),e._insertElement(t,F.HTML),e.framesetOk=!1,e.insertionMode=$.IN_TABLE;break;case G.INPUT:e._reconstructActiveFormattingElements(),e._appendElement(t,F.HTML),i7(t)||(e.framesetOk=!1),t.ackSelfClosing=!0;break;case G.PARAM:case G.TRACK:case G.SOURCE:e._appendElement(t,F.HTML),t.ackSelfClosing=!0;break;case G.IMAGE:t.tagName=U.IMG,t.tagID=G.IMG,i9(e,t);break;case G.BUTTON:e.openElements.hasInScope(G.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(G.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,F.HTML),e.framesetOk=!1;break;case G.APPLET:case G.OBJECT:case G.MARQUEE:e._reconstructActiveFormattingElements(),e._insertElement(t,F.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1;break;case G.IFRAME:e.framesetOk=!1,e._switchToTextParsing(t,ia.RAWTEXT);break;case G.SELECT:e._reconstructActiveFormattingElements(),e._insertElement(t,F.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===$.IN_TABLE||e.insertionMode===$.IN_CAPTION||e.insertionMode===$.IN_TABLE_BODY||e.insertionMode===$.IN_ROW||e.insertionMode===$.IN_CELL?$.IN_SELECT_IN_TABLE:$.IN_SELECT;break;case G.OPTION:case G.OPTGROUP:e.openElements.currentTagId===G.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,F.HTML);break;case G.NOEMBED:ae(e,t);break;case G.FRAMESET:!function(e,t){let n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,F.HTML),e.insertionMode=$.IN_FRAMESET)}(e,t);break;case G.TEXTAREA:e._insertElement(t,F.HTML),e.skipNextNewLine=!0,e.tokenizer.state=ia.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=$.TEXT;break;case G.NOSCRIPT:e.options.scriptingEnabled?ae(e,t):at(e,t);break;case G.PLAINTEXT:e.openElements.hasInButtonScope(G.P)&&e._closePElement(),e._insertElement(t,F.HTML),e.tokenizer.state=ia.PLAINTEXT;break;case G.COL:case G.TH:case G.TD:case G.TR:case G.HEAD:case G.FRAME:case G.TBODY:case G.TFOOT:case G.THEAD:case G.CAPTION:case G.COLGROUP:break;default:at(e,t)}}function ar(e,t){let n=t.tagName,r=t.tagID;for(let t=e.openElements.stackTop;t>0;t--){let i=e.openElements.items[t],a=e.openElements.tagIDs[t];if(r===a&&(r!==G.UNKNOWN||e.treeAdapter.getTagName(i)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=t&&e.openElements.shortenToLength(t);break}if(e._isSpecialElement(i,a))break}}function ai(e,t){switch(t.tagID){case G.A:case G.B:case G.I:case G.S:case G.U:case G.EM:case G.TT:case G.BIG:case G.CODE:case G.FONT:case G.NOBR:case G.SMALL:case G.STRIKE:case G.STRONG:iq(e,t);break;case G.P:e.openElements.hasInButtonScope(G.P)||e._insertFakeElement(U.P,G.P),e._closePElement();break;case G.DL:case G.UL:case G.OL:case G.DIR:case G.DIV:case G.NAV:case G.PRE:case G.MAIN:case G.MENU:case G.ASIDE:case G.BUTTON:case G.CENTER:case G.FIGURE:case G.FOOTER:case G.HEADER:case G.HGROUP:case G.DIALOG:case G.ADDRESS:case G.ARTICLE:case G.DETAILS:case G.SECTION:case G.SUMMARY:case G.LISTING:case G.FIELDSET:case G.BLOCKQUOTE:case G.FIGCAPTION:!function(e,t){let n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}(e,t);break;case G.LI:e.openElements.hasInListItemScope(G.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(G.LI),e.openElements.popUntilTagNamePopped(G.LI));break;case G.DD:case G.DT:!function(e,t){let n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}(e,t);break;case G.H1:case G.H2:case G.H3:case G.H4:case G.H5:case G.H6:e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped());break;case G.BR:e._reconstructActiveFormattingElements(),e._insertFakeElement(U.BR,G.BR),e.openElements.pop(),e.framesetOk=!1;break;case G.BODY:!function(e,t){if(e.openElements.hasInScope(G.BODY)&&(e.insertionMode=$.AFTER_BODY,e.options.sourceCodeLocationInfo)){let n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}(e,t);break;case G.HTML:e.openElements.hasInScope(G.BODY)&&(e.insertionMode=$.AFTER_BODY,a_(e,t));break;case G.FORM:!function(e){let t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(G.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(G.FORM):n&&e.openElements.remove(n))}(e);break;case G.APPLET:case G.OBJECT:case G.MARQUEE:!function(e,t){let n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}(e,t);break;case G.TEMPLATE:i1(e,t);break;default:ar(e,t)}}function aa(e,t){e.tmplInsertionModeStack.length>0?ab(e,t):iX(e,t)}function as(e,t){if(iW.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=$.IN_TABLE_TEXT,t.type){case O.CHARACTER:ad(e,t);break;case O.WHITESPACE_CHARACTER:au(e,t)}else ac(e,t)}function ao(e,t){switch(t.tagID){case G.TD:case G.TH:case G.TR:e.openElements.clearBackToTableContext(),e._insertFakeElement(U.TBODY,G.TBODY),e.insertionMode=$.IN_TABLE_BODY,ag(e,t);break;case G.STYLE:case G.SCRIPT:case G.TEMPLATE:i0(e,t);break;case G.COL:e.openElements.clearBackToTableContext(),e._insertFakeElement(U.COLGROUP,G.COLGROUP),e.insertionMode=$.IN_COLUMN_GROUP,af(e,t);break;case G.FORM:e.formElement||0!==e.openElements.tmplCount||(e._insertElement(t,F.HTML),e.formElement=e.openElements.current,e.openElements.pop());break;case G.TABLE:e.openElements.hasInTableScope(G.TABLE)&&(e.openElements.popUntilTagNamePopped(G.TABLE),e._resetInsertionMode(),e._processStartTag(t));break;case G.TBODY:case G.TFOOT:case G.THEAD:e.openElements.clearBackToTableContext(),e._insertElement(t,F.HTML),e.insertionMode=$.IN_TABLE_BODY;break;case G.INPUT:i7(t)?e._appendElement(t,F.HTML):ac(e,t),t.ackSelfClosing=!0;break;case G.CAPTION:e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,F.HTML),e.insertionMode=$.IN_CAPTION;break;case G.COLGROUP:e.openElements.clearBackToTableContext(),e._insertElement(t,F.HTML),e.insertionMode=$.IN_COLUMN_GROUP;break;default:ac(e,t)}}function al(e,t){switch(t.tagID){case G.TABLE:e.openElements.hasInTableScope(G.TABLE)&&(e.openElements.popUntilTagNamePopped(G.TABLE),e._resetInsertionMode());break;case G.TEMPLATE:i1(e,t);break;case G.BODY:case G.CAPTION:case G.COL:case G.COLGROUP:case G.HTML:case G.TBODY:case G.TD:case G.TFOOT:case G.TH:case G.THEAD:case G.TR:break;default:ac(e,t)}}function ac(e,t){let n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,i5(e,t),e.fosterParentingEnabled=n}function au(e,t){e.pendingCharacterTokens.push(t)}function ad(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function ah(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)ac(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}let ap=new Set([G.CAPTION,G.COL,G.COLGROUP,G.TBODY,G.TD,G.TFOOT,G.TH,G.THEAD,G.TR]);function af(e,t){switch(t.tagID){case G.HTML:an(e,t);break;case G.COL:e._appendElement(t,F.HTML),t.ackSelfClosing=!0;break;case G.TEMPLATE:i0(e,t);break;default:am(e,t)}}function am(e,t){e.openElements.currentTagId===G.COLGROUP&&(e.openElements.pop(),e.insertionMode=$.IN_TABLE,e._processToken(t))}function ag(e,t){switch(t.tagID){case G.TR:e.openElements.clearBackToTableBodyContext(),e._insertElement(t,F.HTML),e.insertionMode=$.IN_ROW;break;case G.TH:case G.TD:e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(U.TR,G.TR),e.insertionMode=$.IN_ROW,aT(e,t);break;case G.CAPTION:case G.COL:case G.COLGROUP:case G.TBODY:case G.TFOOT:case G.THEAD:e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=$.IN_TABLE,ao(e,t));break;default:ao(e,t)}}function aE(e,t){let n=t.tagID;switch(t.tagID){case G.TBODY:case G.TFOOT:case G.THEAD:e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=$.IN_TABLE);break;case G.TABLE:e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=$.IN_TABLE,al(e,t));break;case G.BODY:case G.CAPTION:case G.COL:case G.COLGROUP:case G.HTML:case G.TD:case G.TH:case G.TR:break;default:al(e,t)}}function aT(e,t){switch(t.tagID){case G.TH:case G.TD:e.openElements.clearBackToTableRowContext(),e._insertElement(t,F.HTML),e.insertionMode=$.IN_CELL,e.activeFormattingElements.insertMarker();break;case G.CAPTION:case G.COL:case G.COLGROUP:case G.TBODY:case G.TFOOT:case G.THEAD:case G.TR:e.openElements.hasInTableScope(G.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=$.IN_TABLE_BODY,ag(e,t));break;default:ao(e,t)}}function av(e,t){switch(t.tagID){case G.TR:e.openElements.hasInTableScope(G.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=$.IN_TABLE_BODY);break;case G.TABLE:e.openElements.hasInTableScope(G.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=$.IN_TABLE_BODY,aE(e,t));break;case G.TBODY:case G.TFOOT:case G.THEAD:(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(G.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=$.IN_TABLE_BODY,aE(e,t));break;case G.BODY:case G.CAPTION:case G.COL:case G.COLGROUP:case G.HTML:case G.TD:case G.TH:break;default:al(e,t)}}function ay(e,t){switch(t.tagID){case G.HTML:an(e,t);break;case G.OPTION:e.openElements.currentTagId===G.OPTION&&e.openElements.pop(),e._insertElement(t,F.HTML);break;case G.OPTGROUP:e.openElements.currentTagId===G.OPTION&&e.openElements.pop(),e.openElements.currentTagId===G.OPTGROUP&&e.openElements.pop(),e._insertElement(t,F.HTML);break;case G.INPUT:case G.KEYGEN:case G.TEXTAREA:case G.SELECT:e.openElements.hasInSelectScope(G.SELECT)&&(e.openElements.popUntilTagNamePopped(G.SELECT),e._resetInsertionMode(),t.tagID!==G.SELECT&&e._processStartTag(t));break;case G.SCRIPT:case G.TEMPLATE:i0(e,t)}}function aA(e,t){switch(t.tagID){case G.OPTGROUP:e.openElements.stackTop>0&&e.openElements.currentTagId===G.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===G.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===G.OPTGROUP&&e.openElements.pop();break;case G.OPTION:e.openElements.currentTagId===G.OPTION&&e.openElements.pop();break;case G.SELECT:e.openElements.hasInSelectScope(G.SELECT)&&(e.openElements.popUntilTagNamePopped(G.SELECT),e._resetInsertionMode());break;case G.TEMPLATE:i1(e,t)}}function ab(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(G.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):iX(e,t)}function a_(e,t){var n;if(t.tagID===G.HTML){if(e.fragmentContext||(e.insertionMode=$.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===G.HTML){e._setEndLocation(e.openElements.items[0],t);let r=e.openElements.items[1];!r||(null===(n=e.treeAdapter.getNodeSourceCodeLocation(r))||void 0===n?void 0:n.endTag)||e._setEndLocation(r,t)}}else aC(e,t)}function aC(e,t){e.insertionMode=$.IN_BODY,i5(e,t)}function aS(e,t){e.insertionMode=$.IN_BODY,i5(e,t)}function aI(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==F.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}let ax=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]);function ak(e,t){return function(n){let r;let i=0,a="";for(;r=e.exec(n);)i!==r.index&&(a+=n.substring(i,r.index)),a+=t.get(r[0].charCodeAt(0)),i=r.index+1;return a+n.substring(i)}}null!=String.prototype.codePointAt||((e,t)=>(64512&e.charCodeAt(t))==55296?(e.charCodeAt(t)-55296)*1024+e.charCodeAt(t+1)-56320+65536:e.charCodeAt(t)),ak(/[&<>'"]/g,ax),ak(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),ak(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]])),U.AREA,U.BASE,U.BASEFONT,U.BGSOUND,U.BR,U.COL,U.EMBED,U.FRAME,U.HR,U.IMG,U.INPUT,U.KEYGEN,U.LINK,U.META,U.PARAM,U.SOURCE,U.TRACK,U.WBR;let aw=aO("end"),aN=aO("start");function aO(e){return function(t){let n=t&&t.position&&t.position[e]||{};if("number"==typeof n.line&&n.line>0&&"number"==typeof n.column&&n.column>0)return{line:n.line,column:n.column,offset:"number"==typeof n.offset&&n.offset>-1?n.offset:void 0}}}let aR=function(e){if(null==e)return aD;if("function"==typeof e)return aL(e);if("object"==typeof e)return Array.isArray(e)?function(e){let t=[],n=-1;for(;++n<e.length;)t[n]=aR(e[n]);return aL(function(...e){let n=-1;for(;++n<t.length;)if(t[n].apply(this,e))return!0;return!1})}(e):aL(function(t){let n;for(n in e)if(t[n]!==e[n])return!1;return!0});if("string"==typeof e)return aL(function(t){return t&&t.type===e});throw Error("Expected function, string, or object as test")};function aL(e){return function(t,n,r){var i;return!!(null!==(i=t)&&"object"==typeof i&&"type"in i&&e.call(this,t,"number"==typeof n?n:void 0,r||void 0))}}function aD(){return!0}let aM=[];function aP(e,t,n,r){let i;"function"==typeof t&&"function"!=typeof n?(r=n,n=t):i=t;let a=aR(i),s=r?-1:1;(function e(i,o,l){let c=i&&"object"==typeof i?i:{};if("string"==typeof c.type){let e="string"==typeof c.tagName?c.tagName:"string"==typeof c.name?c.name:void 0;Object.defineProperty(u,"name",{value:"node ("+i.type+(e?"<"+e+">":"")+")"})}return u;function u(){var c;let u,d,h,p=aM;if((!t||a(i,o,l[l.length-1]||void 0))&&!1===(p=Array.isArray(c=n(i,l))?c:"number"==typeof c?[!0,c]:null==c?aM:[c])[0])return p;if("children"in i&&i.children&&i.children&&"skip"!==p[0])for(d=(r?i.children.length:-1)+s,h=l.concat(i);d>-1&&d<i.children.length;){if(!1===(u=e(i.children[d],d,h)())[0])return u;d="number"==typeof u[1]?u[1]:d+s}return p}})(e,void 0,[])()}function aF(e,t,n,r){let i,a,s;"function"==typeof t&&"function"!=typeof n?(a=void 0,s=t,i=n):(a=t,s=n,i=r),aP(e,a,function(e,t){let n=t[t.length-1],r=n?n.children.indexOf(e):void 0;return s(e,r,n)},i)}let aB=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),aH={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function aU(e,t){let n=function(e){let t="root"===e.type?e.children[0]:e;return!!(t&&("doctype"===t.type||"element"===t.type&&"html"===t.tagName.toLowerCase()))}(e),r=rG("type",{handlers:{root:az,element:aj,text:a$,comment:aV,doctype:aW,raw:aY},unknown:aq}),i={parser:n?new iY(aH):iY.getFragmentParser(void 0,aH),handle(e){r(e,i)},stitches:!1,options:t||{}};r(e,i),aQ(i,aN());let a=function(e,t){let n=t||{};return rM({file:n.file||void 0,location:!1,schema:"svg"===n.space?rp:rh,verbose:n.verbose||!1},e)}(n?i.parser.document:i.parser.getFragment(),{file:i.options.file});return(i.stitches&&aF(a,"comment",function(e,t,n){if(e.value.stitch&&n&&void 0!==t)return n.children[t]=e.value.stitch,t}),"root"===a.type&&1===a.children.length&&a.children[0].type===e.type)?a.children[0]:a}function aG(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function az(e,t){aG(e.children,t)}function aj(e,t){(function(e,t){let n=e.tagName.toLowerCase();if(t.parser.tokenizer.state===ia.PLAINTEXT)return;aQ(t,aN(e));let r=t.parser.openElements.current,i="namespaceURI"in r?r.namespaceURI:rR.html;i===rR.html&&"svg"===n&&(i=rR.svg);let a=rj({...e,children:[]},"svg"===({space:i===rR.svg?"svg":"html"}).space?rp:rh),s={type:O.START_TAG,tagName:n,tagID:r7(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in a?a.attrs:[],location:aK(e)};t.parser.currentToken=s,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=n})(e,t),aG(e.children,t),function(e,t){let n=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&rV.includes(n)||t.parser.tokenizer.state===ia.PLAINTEXT)return;aQ(t,aw(e));let r={type:O.END_TAG,tagName:n,tagID:r7(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:aK(e)};t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken),n===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===ia.RCDATA||t.parser.tokenizer.state===ia.RAWTEXT||t.parser.tokenizer.state===ia.SCRIPT_DATA)&&(t.parser.tokenizer.state=ia.DATA)}(e,t)}function a$(e,t){let n={type:O.CHARACTER,chars:e.value,location:aK(e)};aQ(t,aN(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function aW(e,t){let n={type:O.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:aK(e)};aQ(t,aN(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function aV(e,t){let n=e.value,r={type:O.COMMENT,data:n,location:aK(e)};aQ(t,aN(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function aY(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,aX(t,aN(e)),t.parser.tokenizer.write(e.value,!1),t.parser.tokenizer._runParsingLoop(),72===t.parser.tokenizer.state||78===t.parser.tokenizer.state){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;let e=t.parser.tokenizer._consume();t.parser.tokenizer._callState(e)}}function aq(e,t){if(t.options.passThrough&&t.options.passThrough.includes(e.type))!function(e,t){t.stitches=!0;let n="children"in e?nX({...e,children:[]}):nX(e);if("children"in e&&"children"in n){let r=aU({type:"root",children:e.children},t.options);n.children=r.children}aV({type:"comment",value:{stitch:n}},t)}(e,t);else{let t="";throw aB.has(e.type)&&(t=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),Error("Cannot compile `"+e.type+"` node"+t)}}function aQ(e,t){aX(e,t);let n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=ia.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function aX(e,t){if(t&&void 0!==t.offset){let n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function aK(e){let t=aN(e)||{line:void 0,column:void 0,offset:void 0},n=aw(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function aZ(e){return function(t,n){return aU(t,{...e,file:n})}}let aJ=/["&'<>`]/g,a0=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,a1=/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,a2=/[|\\{}()[\]^$+*?.]/g,a3=new WeakMap,a4=/[\dA-Fa-f]/,a5=/\d/,a6=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],a8={nbsp:"\xa0",iexcl:"\xa1",cent:"\xa2",pound:"\xa3",curren:"\xa4",yen:"\xa5",brvbar:"\xa6",sect:"\xa7",uml:"\xa8",copy:"\xa9",ordf:"\xaa",laquo:"\xab",not:"\xac",shy:"\xad",reg:"\xae",macr:"\xaf",deg:"\xb0",plusmn:"\xb1",sup2:"\xb2",sup3:"\xb3",acute:"\xb4",micro:"\xb5",para:"\xb6",middot:"\xb7",cedil:"\xb8",sup1:"\xb9",ordm:"\xba",raquo:"\xbb",frac14:"\xbc",frac12:"\xbd",frac34:"\xbe",iquest:"\xbf",Agrave:"\xc0",Aacute:"\xc1",Acirc:"\xc2",Atilde:"\xc3",Auml:"\xc4",Aring:"\xc5",AElig:"\xc6",Ccedil:"\xc7",Egrave:"\xc8",Eacute:"\xc9",Ecirc:"\xca",Euml:"\xcb",Igrave:"\xcc",Iacute:"\xcd",Icirc:"\xce",Iuml:"\xcf",ETH:"\xd0",Ntilde:"\xd1",Ograve:"\xd2",Oacute:"\xd3",Ocirc:"\xd4",Otilde:"\xd5",Ouml:"\xd6",times:"\xd7",Oslash:"\xd8",Ugrave:"\xd9",Uacute:"\xda",Ucirc:"\xdb",Uuml:"\xdc",Yacute:"\xdd",THORN:"\xde",szlig:"\xdf",agrave:"\xe0",aacute:"\xe1",acirc:"\xe2",atilde:"\xe3",auml:"\xe4",aring:"\xe5",aelig:"\xe6",ccedil:"\xe7",egrave:"\xe8",eacute:"\xe9",ecirc:"\xea",euml:"\xeb",igrave:"\xec",iacute:"\xed",icirc:"\xee",iuml:"\xef",eth:"\xf0",ntilde:"\xf1",ograve:"\xf2",oacute:"\xf3",ocirc:"\xf4",otilde:"\xf5",ouml:"\xf6",divide:"\xf7",oslash:"\xf8",ugrave:"\xf9",uacute:"\xfa",ucirc:"\xfb",uuml:"\xfc",yacute:"\xfd",thorn:"\xfe",yuml:"\xff",fnof:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",bull:"",hellip:"",prime:"",Prime:"",oline:"",frasl:"",weierp:"",image:"",real:"",trade:"",alefsym:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lArr:"",uArr:"",rArr:"",dArr:"",hArr:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",lceil:"",rceil:"",lfloor:"",rfloor:"",lang:"",rang:"",loz:"",spades:"",clubs:"",hearts:"",diams:"",quot:'"',amp:"&",lt:"<",gt:">",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",circ:"",tilde:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",permil:"",lsaquo:"",rsaquo:"",euro:""},a9=["cent","copy","divide","gt","lt","not","para","times"],a7={}.hasOwnProperty,se={};for(i in a8)a7.call(a8,i)&&(se[a8[i]]=i);let st=/[^\dA-Za-z]/;function sn(e,t,n){let r,i=function(e,t,n){let r="&#x"+e.toString(16).toUpperCase();return n&&t&&!a4.test(String.fromCharCode(t))?r:r+";"}(e,t,n.omitOptionalSemicolons);if((n.useNamedReferences||n.useShortestReferences)&&(r=function(e,t,n,r){let i=String.fromCharCode(e);if(a7.call(se,i)){let e=se[i],a="&"+e;return n&&a6.includes(e)&&!a9.includes(e)&&(!r||t&&61!==t&&st.test(String.fromCharCode(t)))?a:a+";"}return""}(e,t,n.omitOptionalSemicolons,n.attribute)),(n.useShortestReferences||!r)&&n.useShortestReferences){let r=function(e,t,n){let r="&#"+String(e);return n&&t&&!a5.test(String.fromCharCode(t))?r:r+";"}(e,t,n.omitOptionalSemicolons);r.length<i.length&&(i=r)}return r&&(!n.useShortestReferences||r.length<i.length)?r:i}function sr(e,t){return function(e,t){var n;let r;if(e=e.replace(t.subset?(n=t.subset,(r=a3.get(n))||(r=function(e){let t=[],n=-1;for(;++n<e.length;)t.push(e[n].replace(a2,"\\$&"));return RegExp("(?:"+t.join("|")+")","g")}(n),a3.set(n,r)),r):aJ,i),t.subset||t.escapeOnly)return e;return e.replace(a0,function(e,n,r){return t.format((e.charCodeAt(0)-55296)*1024+e.charCodeAt(1)-56320+65536,r.charCodeAt(n+2),t)}).replace(a1,i);function i(e,n,r){return t.format(e.charCodeAt(0),r.charCodeAt(n+1),t)}}(e,Object.assign({format:sn},t))}let si=/^>|^->|<!--|-->|--!>|<!-$/g,sa=[">"],ss=["<",">"];function so(e,t){let n=String(e);if("string"!=typeof t)throw TypeError("Expected character");let r=0,i=n.indexOf(t);for(;-1!==i;)r++,i=n.indexOf(t,i+t.length);return r}let sl=/[ \t\n\f\r]/g;function sc(e){return"object"==typeof e?"text"===e.type&&su(e.value):su(e)}function su(e){return""===e.replace(sl,"")}let sd=sf(1),sh=sf(-1),sp=[];function sf(e){return function(t,n,r){let i=t?t.children:sp,a=(n||0)+e,s=i[a];if(!r)for(;s&&sc(s);)a+=e,s=i[a];return s}}let sm={}.hasOwnProperty;function sg(e){return function(t,n,r){return sm.call(e,t.tagName)&&e[t.tagName](t,n,r)}}let sE=sg({body:function(e,t,n){let r=sd(n,t);return!r||"comment"!==r.type},caption:sT,colgroup:sT,dd:function(e,t,n){let r=sd(n,t);return!r||"element"===r.type&&("dt"===r.tagName||"dd"===r.tagName)},dt:function(e,t,n){let r=sd(n,t);return!!(r&&"element"===r.type&&("dt"===r.tagName||"dd"===r.tagName))},head:sT,html:function(e,t,n){let r=sd(n,t);return!r||"comment"!==r.type},li:function(e,t,n){let r=sd(n,t);return!r||"element"===r.type&&"li"===r.tagName},optgroup:function(e,t,n){let r=sd(n,t);return!r||"element"===r.type&&"optgroup"===r.tagName},option:function(e,t,n){let r=sd(n,t);return!r||"element"===r.type&&("option"===r.tagName||"optgroup"===r.tagName)},p:function(e,t,n){let r=sd(n,t);return r?"element"===r.type&&("address"===r.tagName||"article"===r.tagName||"aside"===r.tagName||"blockquote"===r.tagName||"details"===r.tagName||"div"===r.tagName||"dl"===r.tagName||"fieldset"===r.tagName||"figcaption"===r.tagName||"figure"===r.tagName||"footer"===r.tagName||"form"===r.tagName||"h1"===r.tagName||"h2"===r.tagName||"h3"===r.tagName||"h4"===r.tagName||"h5"===r.tagName||"h6"===r.tagName||"header"===r.tagName||"hgroup"===r.tagName||"hr"===r.tagName||"main"===r.tagName||"menu"===r.tagName||"nav"===r.tagName||"ol"===r.tagName||"p"===r.tagName||"pre"===r.tagName||"section"===r.tagName||"table"===r.tagName||"ul"===r.tagName):!n||!("element"===n.type&&("a"===n.tagName||"audio"===n.tagName||"del"===n.tagName||"ins"===n.tagName||"map"===n.tagName||"noscript"===n.tagName||"video"===n.tagName))},rp:sv,rt:sv,tbody:function(e,t,n){let r=sd(n,t);return!r||"element"===r.type&&("tbody"===r.tagName||"tfoot"===r.tagName)},td:sy,tfoot:function(e,t,n){return!sd(n,t)},th:sy,thead:function(e,t,n){let r=sd(n,t);return!!(r&&"element"===r.type&&("tbody"===r.tagName||"tfoot"===r.tagName))},tr:function(e,t,n){let r=sd(n,t);return!r||"element"===r.type&&"tr"===r.tagName}});function sT(e,t,n){let r=sd(n,t,!0);return!r||"comment"!==r.type&&!("text"===r.type&&sc(r.value.charAt(0)))}function sv(e,t,n){let r=sd(n,t);return!r||"element"===r.type&&("rp"===r.tagName||"rt"===r.tagName)}function sy(e,t,n){let r=sd(n,t);return!r||"element"===r.type&&("td"===r.tagName||"th"===r.tagName)}let sA=sg({body:function(e){let t=sd(e,-1,!0);return!t||"comment"!==t.type&&!("text"===t.type&&sc(t.value.charAt(0)))&&!("element"===t.type&&("meta"===t.tagName||"link"===t.tagName||"script"===t.tagName||"style"===t.tagName||"template"===t.tagName))},colgroup:function(e,t,n){let r=sh(n,t),i=sd(e,-1,!0);return!(n&&r&&"element"===r.type&&"colgroup"===r.tagName&&sE(r,n.children.indexOf(r),n))&&!!(i&&"element"===i.type&&"col"===i.tagName)},head:function(e){let t=e.children,n=[],r=-1;for(;++r<t.length;){let e=t[r];if("element"===e.type&&("title"===e.tagName||"base"===e.tagName)){if(n.includes(e.tagName))return!1;n.push(e.tagName)}}return t.length>0},html:function(e){let t=sd(e,-1);return!t||"comment"!==t.type},tbody:function(e,t,n){let r=sh(n,t),i=sd(e,-1);return!(n&&r&&"element"===r.type&&("thead"===r.tagName||"tbody"===r.tagName)&&sE(r,n.children.indexOf(r),n))&&!!(i&&"element"===i.type&&"tr"===i.tagName)}}),sb={name:[["	\n\f\r &/=>".split(""),"	\n\f\r \"&'/=>`".split("")],["\0	\n\f\r \"&'/<=>".split(""),"\0	\n\f\r \"&'/<=>`".split("")]],unquoted:[["	\n\f\r &>".split(""),"\0	\n\f\r \"&'<=>`".split("")],["\0	\n\f\r \"&'<=>`".split(""),"\0	\n\f\r \"&'<=>`".split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]},s_=["<","&"];function sC(e,t,n,r){return n&&"element"===n.type&&("script"===n.tagName||"style"===n.tagName)?e.value:sr(e.value,Object.assign({},r.settings.characterReferences,{subset:s_}))}let sS=rG("type",{invalid:function(e){throw Error("Expected node, not `"+e+"`")},unknown:function(e){throw Error("Cannot compile unknown node `"+e.type+"`")},handlers:{comment:function(e,t,n,r){return r.settings.bogusComments?"<?"+sr(e.value,Object.assign({},r.settings.characterReferences,{subset:sa}))+">":"<!--"+e.value.replace(si,function(e){return sr(e,Object.assign({},r.settings.characterReferences,{subset:ss}))})+"-->"},doctype:function(e,t,n,r){return"<!"+(r.settings.upperDoctype?"DOCTYPE":"doctype")+(r.settings.tightDoctype?"":" ")+"html>"},element:function(e,t,n,r){let i;let a=r.schema,s="svg"!==a.space&&r.settings.omitOptionalTags,o="svg"===a.space?r.settings.closeEmptyElements:r.settings.voids.includes(e.tagName.toLowerCase()),l=[];"html"===a.space&&"svg"===e.tagName&&(r.schema=rp);let c=function(e,t){let n;let r=[],i=-1;if(t){for(n in t)if(null!==t[n]&&void 0!==t[n]){let i=function(e,t,n){let r;let i=ry(e.schema,t),a=e.settings.allowParseErrors&&"html"===e.schema.space?0:1,s=e.settings.allowDangerousCharacters?0:1,o=e.quote;if(i.overloadedBoolean&&(n===i.attribute||""===n)?n=!0:(i.boolean||i.overloadedBoolean&&"string"!=typeof n)&&(n=!!n),null==n||!1===n||"number"==typeof n&&Number.isNaN(n))return"";let l=sr(i.attribute,Object.assign({},e.settings.characterReferences,{subset:sb.name[a][s]}));return!0===n?l:(n=Array.isArray(n)?(i.commaSeparated?rm:rC)(n,{padLeft:!e.settings.tightCommaSeparatedLists}):String(n),e.settings.collapseEmptyAttributes&&!n)?l:(e.settings.preferUnquoted&&(r=sr(n,Object.assign({},e.settings.characterReferences,{attribute:!0,subset:sb.unquoted[a][s]}))),r!==n&&(e.settings.quoteSmart&&so(n,o)>so(n,e.alternative)&&(o=e.alternative),r=o+sr(n,Object.assign({},e.settings.characterReferences,{subset:("'"===o?sb.single:sb.double)[a][s],attribute:!0}))+o),l+(r?"="+r:r))}(e,n,t[n]);i&&r.push(i)}}for(;++i<r.length;){let t=e.settings.tightAttributes?r[i].charAt(r[i].length-1):void 0;i!==r.length-1&&'"'!==t&&"'"!==t&&(r[i]+=" ")}return r.join("")}(r,e.properties),u=r.all("html"===a.space&&"template"===e.tagName?e.content:e);return r.schema=a,u&&(o=!1),!c&&s&&sA(e,t,n)||(l.push("<",e.tagName,c?" "+c:""),o&&("svg"===a.space||r.settings.closeSelfClosing)&&(i=c.charAt(c.length-1),(!r.settings.tightSelfClosing||"/"===i||i&&'"'!==i&&"'"!==i)&&l.push(" "),l.push("/")),l.push(">")),l.push(u),o||s&&sE(e,t,n)||l.push("</"+e.tagName+">"),l.join("")},raw:function(e,t,n,r){return r.settings.allowDangerousHtml?e.value:sC(e,t,n,r)},root:function(e,t,n,r){return r.all(e)},text:sC}}),sI={},sx={},sk=[];function sw(e,t,n){return sS(e,t,n,this)}function sN(e){let t=[],n=e&&e.children||sk,r=-1;for(;++r<n.length;)t[r]=this.one(n[r],r,e);return t.join("")}function sO(e){let t={...this.data("settings"),...e};this.compiler=function(e){return function(e,t){let n=t||sI,r=n.quote||'"';if('"'!==r&&"'"!==r)throw Error("Invalid quote `"+r+"`, expected `'` or `\"`");return({one:sw,all:sN,settings:{omitOptionalTags:n.omitOptionalTags||!1,allowParseErrors:n.allowParseErrors||!1,allowDangerousCharacters:n.allowDangerousCharacters||!1,quoteSmart:n.quoteSmart||!1,preferUnquoted:n.preferUnquoted||!1,tightAttributes:n.tightAttributes||!1,upperDoctype:n.upperDoctype||!1,tightDoctype:n.tightDoctype||!1,bogusComments:n.bogusComments||!1,tightCommaSeparatedLists:n.tightCommaSeparatedLists||!1,tightSelfClosing:n.tightSelfClosing||!1,collapseEmptyAttributes:n.collapseEmptyAttributes||!1,allowDangerousHtml:n.allowDangerousHtml||!1,voids:n.voids||rV,characterReferences:n.characterReferences||sx,closeSelfClosing:n.closeSelfClosing||!1,closeEmptyElements:n.closeEmptyElements||!1},schema:"svg"===n.space?rp:rh,quote:r,alternative:'"'===r?"'":'"'}).one(Array.isArray(e)?{type:"root",children:e}:e,void 0,void 0)}(e,t)}}let sR=s$(/[A-Za-z]/),sL=s$(/[\dA-Za-z]/),sD=s$(/[#-'*+\--9=?A-Z^-~]/);function sM(e){return null!==e&&(e<32||127===e)}let sP=s$(/\d/),sF=s$(/[\dA-Fa-f]/),sB=s$(/[!-/:-@[-`{-~]/);function sH(e){return null!==e&&e<-2}function sU(e){return null!==e&&(e<0||32===e)}function sG(e){return -2===e||-1===e||32===e}let sz=s$(/\p{P}|\p{S}/u),sj=s$(/\s/);function s$(e){return function(t){return null!==t&&t>-1&&e.test(String.fromCharCode(t))}}let sW="phrasing",sV=["autolink","link","image","label"];function sY(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function sq(e){this.config.enter.autolinkProtocol.call(this,e)}function sQ(e){this.config.exit.autolinkProtocol.call(this,e)}function sX(e){this.config.exit.data.call(this,e);let t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function sK(e){this.config.exit.autolinkEmail.call(this,e)}function sZ(e){this.exit(e)}function sJ(e){!function(e,t,n){let r=aR((n||{}).ignore||[]),i=function(e){let t=[];if(!Array.isArray(e))throw TypeError("Expected find and replace tuple or list of tuples");let n=!e[0]||Array.isArray(e[0])?e:[e],r=-1;for(;++r<n.length;){var i;let e=n[r];t.push(["string"==typeof(i=e[0])?RegExp(function(e){if("string"!=typeof e)throw TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}(i),"g"):i,function(e){return"function"==typeof e?e:function(){return e}}(e[1])])}return t}(t),a=-1;for(;++a<i.length;)aP(e,"text",s);function s(e,t){let n,s=-1;for(;++s<t.length;){let e=t[s],i=n?n.children:void 0;if(r(e,i?i.indexOf(e):void 0,n))return;n=e}if(n)return function(e,t){let n=t[t.length-1],r=i[a][0],s=i[a][1],o=0,l=n.children.indexOf(e),c=!1,u=[];r.lastIndex=0;let d=r.exec(e.value);for(;d;){let n=d.index,i={index:d.index,input:d.input,stack:[...t,e]},a=s(...d,i);if("string"==typeof a&&(a=a.length>0?{type:"text",value:a}:void 0),!1===a?r.lastIndex=n+1:(o!==n&&u.push({type:"text",value:e.value.slice(o,n)}),Array.isArray(a)?u.push(...a):a&&u.push(a),o=n+d[0].length,c=!0),!r.global)break;d=r.exec(e.value)}return c?(o<e.value.length&&u.push({type:"text",value:e.value.slice(o)}),n.children.splice(l,1,...u)):u=[e],l+u.length}(e,t)}}(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,s0],[/([-.\w+]+)@([-\w]+(?:\.[-\w]+)+)/g,s1]],{ignore:["link","linkReference"]})}function s0(e,t,n,r,i){let a="";if(!s2(i)||(/^w/i.test(t)&&(n=t+n,t="",a="http://"),!function(e){let t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}(n)))return!1;let s=function(e){let t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],r=n.indexOf(")"),i=so(e,"("),a=so(e,")");for(;-1!==r&&i>a;)e+=n.slice(0,r+1),r=(n=n.slice(r+1)).indexOf(")"),a++;return[e,n]}(n+r);if(!s[0])return!1;let o={type:"link",title:null,url:a+t+s[0],children:[{type:"text",value:t+s[0]}]};return s[1]?[o,{type:"text",value:s[1]}]:o}function s1(e,t,n,r){return!(!s2(r,!0)||/[-\d_]$/.test(n))&&{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function s2(e,t){let n=e.input.charCodeAt(e.index-1);return(0===e.index||sj(n)||sz(n))&&(!t||47!==n)}function s3(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}function s4(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function s5(){this.buffer()}function s6(e){let t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.label=t,n.identifier=s3(this.sliceSerialize(e)).toLowerCase()}function s8(e){this.exit(e)}function s9(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function s7(){this.buffer()}function oe(e){let t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.label=t,n.identifier=s3(this.sliceSerialize(e)).toLowerCase()}function ot(e){this.exit(e)}function on(e,t,n,r){let i=n.createTracker(r),a=i.move("[^"),s=n.enter("footnoteReference"),o=n.enter("reference");return a+=i.move(n.safe(n.associationId(e),{...i.current(),before:a,after:"]"})),o(),s(),a+=i.move("]")}function or(e,t,n,r){let i=n.createTracker(r),a=i.move("[^"),s=n.enter("footnoteDefinition"),o=n.enter("label");return a+=i.move(n.safe(n.associationId(e),{...i.current(),before:a,after:"]"})),o(),a+=i.move("]:"+(e.children&&e.children.length>0?" ":"")),i.shift(4),a+=i.move(n.indentLines(n.containerFlow(e,i.current()),oi)),s(),a}function oi(e,t,n){return 0===t?e:(n?"":"    ")+e}on.peek=function(){return"["};let oa=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];function os(e){this.enter({type:"delete",children:[]},e)}function oo(e){this.exit(e)}function ol(e,t,n,r){let i=n.createTracker(r),a=n.enter("strikethrough"),s=i.move("~~");return s+=n.containerPhrasing(e,{...i.current(),before:s,after:"~"})+i.move("~~"),a(),s}function oc(e){return e.length}function ou(e){let t="string"==typeof e?e.codePointAt(0):0;return 67===t||99===t?99:76===t||108===t?108:82===t||114===t?114:0}ol.peek=function(){return"~"};let od={};function oh(e,t){let n=t||od;return op(e,"boolean"!=typeof n.includeImageAlt||n.includeImageAlt,"boolean"!=typeof n.includeHtml||n.includeHtml)}function op(e,t,n){if(e&&"object"==typeof e){if("value"in e)return"html"!==e.type||n?e.value:"";if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return of(e.children,t,n)}return Array.isArray(e)?of(e,t,n):""}function of(e,t,n){let r=[],i=-1;for(;++i<e.length;)r[i]=op(e[i],t,n);return r.join("")}function om(e,t,n){let r=e.value||"",i="`",a=-1;for(;RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++a<n.unsafe.length;){let e;let t=n.unsafe[a],i=n.compilePattern(t);if(t.atBreak)for(;e=i.exec(r);){let t=e.index;10===r.charCodeAt(t)&&13===r.charCodeAt(t-1)&&t--,r=r.slice(0,t)+" "+r.slice(e.index+1)}}return i+r+i}om.peek=function(){return"`"},aR(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);let og=function(e,t,n,r){let i=function(e){let t=e.options.listItemIndent||"one";if("tab"!==t&&"one"!==t&&"mixed"!==t)throw Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}(n),a=n.bulletCurrent||function(e){let t=e.options.bullet||"*";if("*"!==t&&"+"!==t&&"-"!==t)throw Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}(n);t&&"list"===t.type&&t.ordered&&(a=("number"==typeof t.start&&t.start>-1?t.start:1)+(!1===n.options.incrementListMarker?0:t.children.indexOf(e))+a);let s=a.length+1;("tab"===i||"mixed"===i&&(t&&"list"===t.type&&t.spread||e.spread))&&(s=4*Math.ceil(s/4));let o=n.createTracker(r);o.move(a+" ".repeat(s-a.length)),o.shift(s);let l=n.enter("listItem"),c=n.indentLines(n.containerFlow(e,o.current()),function(e,t,n){return t?(n?"":" ".repeat(s))+e:(n?a:a+" ".repeat(s-a.length))+e});return l(),c};function oE(e){let t=e._align;this.enter({type:"table",align:t.map(function(e){return"none"===e?null:e}),children:[]},e),this.data.inTable=!0}function oT(e){this.exit(e),this.data.inTable=void 0}function ov(e){this.enter({type:"tableRow",children:[]},e)}function oy(e){this.exit(e)}function oA(e){this.enter({type:"tableCell",children:[]},e)}function ob(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,o_));let n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function o_(e,t){return"|"===t?t:e}function oC(e){let t=this.stack[this.stack.length-2];t.type,t.checked="taskListCheckValueChecked"===e.type}function oS(e){let t=this.stack[this.stack.length-2];if(t&&"listItem"===t.type&&"boolean"==typeof t.checked){let e=this.stack[this.stack.length-1];e.type;let n=e.children[0];if(n&&"text"===n.type){let r;let i=t.children,a=-1;for(;++a<i.length;){let e=i[a];if("paragraph"===e.type){r=e;break}}r===e&&(n.value=n.value.slice(1),0===n.value.length?e.children.shift():e.position&&n.position&&"number"==typeof n.position.start.offset&&(n.position.start.column++,n.position.start.offset++,e.position.start=Object.assign({},n.position.start)))}}this.exit(e)}function oI(e,t,n,r){let i=e.children[0],a="boolean"==typeof e.checked&&i&&"paragraph"===i.type,s="["+(e.checked?"x":" ")+"] ",o=n.createTracker(r);a&&o.move(s);let l=og(e,t,n,{...r,...o.current()});return a&&(l=l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,function(e){return e+s})),l}function ox(e,t,n,r){let i;let a=e.length,s=0;if(t=t<0?-t>a?0:a+t:t>a?a:t,n=n>0?n:0,r.length<1e4)(i=Array.from(r)).unshift(t,n),e.splice(...i);else for(n&&e.splice(t,n);s<r.length;)(i=r.slice(s,s+1e4)).unshift(t,0),e.splice(...i),s+=1e4,t+=1e4}function ok(e,t){return e.length>0?(ox(e,e.length,0,t),e):t}let ow={}.hasOwnProperty;function oN(e){let t={},n=-1;for(;++n<e.length;)!function(e,t){let n;for(n in t){let r;let i=(ow.call(e,n)?e[n]:void 0)||(e[n]={}),a=t[n];if(a)for(r in a){ow.call(i,r)||(i[r]=[]);let e=a[r];!function(e,t){let n=-1,r=[];for(;++n<t.length;)("after"===t[n].add?e:r).push(t[n]);ox(e,0,0,r)}(i[r],Array.isArray(e)?e:e?[e]:[])}}}(t,e[n]);return t}let oO={tokenize:function(e,t,n){let r=0;return function t(a){return(87===a||119===a)&&r<3?(r++,e.consume(a),t):46===a&&3===r?(e.consume(a),i):n(a)};function i(e){return null===e?n(e):t(e)}},partial:!0},oR={tokenize:function(e,t,n){let r,i,a;return s;function s(t){return 46===t||95===t?e.check(oD,l,o)(t):null===t||sU(t)||sj(t)||45!==t&&sz(t)?l(t):(a=!0,e.consume(t),s)}function o(t){return 95===t?r=!0:(i=r,r=void 0),e.consume(t),s}function l(e){return i||r||!a?n(e):t(e)}},partial:!0},oL={tokenize:function(e,t){let n=0,r=0;return i;function i(s){return 40===s?(n++,e.consume(s),i):41===s&&r<n?a(s):33===s||34===s||38===s||39===s||41===s||42===s||44===s||46===s||58===s||59===s||60===s||63===s||93===s||95===s||126===s?e.check(oD,t,a)(s):null===s||sU(s)||sj(s)?t(s):(e.consume(s),i)}function a(t){return 41===t&&r++,e.consume(t),i}},partial:!0},oD={tokenize:function(e,t,n){return r;function r(s){return 33===s||34===s||39===s||41===s||42===s||44===s||46===s||58===s||59===s||63===s||95===s||126===s?(e.consume(s),r):38===s?(e.consume(s),a):93===s?(e.consume(s),i):60===s||null===s||sU(s)||sj(s)?t(s):n(s)}function i(e){return null===e||40===e||91===e||sU(e)||sj(e)?t(e):r(e)}function a(t){return sR(t)?function t(i){return 59===i?(e.consume(i),r):sR(i)?(e.consume(i),t):n(i)}(t):n(t)}},partial:!0},oM={tokenize:function(e,t,n){return function(t){return e.consume(t),r};function r(e){return sL(e)?n(e):t(e)}},partial:!0},oP={tokenize:function(e,t,n){let r=this;return function(t){return 87!==t&&119!==t||!oG.call(r,r.previous)||oW(r.events)?n(t):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(oO,e.attempt(oR,e.attempt(oL,i),n),n)(t))};function i(n){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(n)}},previous:oG},oF={tokenize:function(e,t,n){let r=this,i="",a=!1;return function(t){return(72===t||104===t)&&oz.call(r,r.previous)&&!oW(r.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),i+=String.fromCodePoint(t),e.consume(t),s):n(t)};function s(t){if(sR(t)&&i.length<5)return i+=String.fromCodePoint(t),e.consume(t),s;if(58===t){let n=i.toLowerCase();if("http"===n||"https"===n)return e.consume(t),o}return n(t)}function o(t){return 47===t?(e.consume(t),a)?l:(a=!0,o):n(t)}function l(t){return null===t||sM(t)||sU(t)||sj(t)||sz(t)?n(t):e.attempt(oR,e.attempt(oL,c),n)(t)}function c(n){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(n)}},previous:oz},oB={tokenize:function(e,t,n){let r,i;let a=this;return function(t){return!o$(t)||!oj.call(a,a.previous)||oW(a.events)?n(t):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),function t(r){return o$(r)?(e.consume(r),t):64===r?(e.consume(r),s):n(r)}(t))};function s(t){return 46===t?e.check(oM,l,o)(t):45===t||95===t||sL(t)?(i=!0,e.consume(t),s):l(t)}function o(t){return e.consume(t),r=!0,s}function l(s){return i&&r&&sR(a.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(s)):n(s)}},previous:oj},oH={},oU=48;for(;oU<123;)oH[oU]=oB,58==++oU?oU=65:91===oU&&(oU=97);function oG(e){return null===e||40===e||42===e||95===e||91===e||93===e||126===e||sU(e)}function oz(e){return!sR(e)}function oj(e){return!(47===e||o$(e))}function o$(e){return 43===e||45===e||46===e||95===e||sL(e)}function oW(e){let t=e.length,n=!1;for(;t--;){let r=e[t][1];if(("labelLink"===r.type||"labelImage"===r.type)&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}function oV(e,t,n,r){let i=r?r-1:Number.POSITIVE_INFINITY,a=0;return function(r){return sG(r)?(e.enter(n),function r(s){return sG(s)&&a++<i?(e.consume(s),r):(e.exit(n),t(s))}(r)):t(r)}}oH[43]=oB,oH[45]=oB,oH[46]=oB,oH[95]=oB,oH[72]=[oB,oF],oH[104]=[oB,oF],oH[87]=[oB,oP],oH[119]=[oB,oP];let oY={tokenize:function(e,t,n){return function(t){return sG(t)?oV(e,r,"linePrefix")(t):r(t)};function r(e){return null===e||sH(e)?t(e):n(e)}},partial:!0},oq={tokenize:function(e,t,n){let r=this;return oV(e,function(e){let i=r.events[r.events.length-1];return i&&"gfmFootnoteDefinitionIndent"===i[1].type&&4===i[2].sliceSerialize(i[1],!0).length?t(e):n(e)},"gfmFootnoteDefinitionIndent",5)},partial:!0};function oQ(e,t,n){let r;let i=this,a=i.events.length,s=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);for(;a--;){let e=i.events[a][1];if("labelImage"===e.type){r=e;break}if("gfmFootnoteCall"===e.type||"labelLink"===e.type||"label"===e.type||"image"===e.type||"link"===e.type)break}return function(a){if(!r||!r._balanced)return n(a);let o=s3(i.sliceSerialize({start:r.end,end:i.now()}));return 94===o.codePointAt(0)&&s.includes(o.slice(1))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(a),e.exit("gfmFootnoteCallLabelMarker"),t(a)):n(a)}}function oX(e,t){let n=e.length;for(;n--;)if("labelImage"===e[n][1].type&&"enter"===e[n][0]){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";let r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;let a={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},e[e.length-1][1].start)},s={type:"chunkString",contentType:"string",start:Object.assign({},a.start),end:Object.assign({},a.end)},o=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",i,t],["exit",i,t],["enter",a,t],["enter",s,t],["exit",s,t],["exit",a,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(n,e.length-n+1,...o),e}function oK(e,t,n){let r;let i=this,a=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]),s=0;return function(t){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(t),e.exit("gfmFootnoteCallLabelMarker"),o};function o(t){return 94!==t?n(t):(e.enter("gfmFootnoteCallMarker"),e.consume(t),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",l)}function l(o){if(s>999||93===o&&!r||null===o||91===o||sU(o))return n(o);if(93===o){e.exit("chunkString");let r=e.exit("gfmFootnoteCallString");return a.includes(s3(i.sliceSerialize(r)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(o),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(o)}return sU(o)||(r=!0),s++,e.consume(o),92===o?c:l}function c(t){return 91===t||92===t||93===t?(e.consume(t),s++,l):l(t)}}function oZ(e,t,n){let r,i;let a=this,s=a.parser.gfmFootnotes||(a.parser.gfmFootnotes=[]),o=0;return function(t){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(t),e.exit("gfmFootnoteDefinitionLabelMarker"),l};function l(t){return 94===t?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(t),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",c):n(t)}function c(t){if(o>999||93===t&&!i||null===t||91===t||sU(t))return n(t);if(93===t){e.exit("chunkString");let n=e.exit("gfmFootnoteDefinitionLabelString");return r=s3(a.sliceSerialize(n)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(t),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),d}return sU(t)||(i=!0),o++,e.consume(t),92===t?u:c}function u(t){return 91===t||92===t||93===t?(e.consume(t),o++,c):c(t)}function d(t){return 58===t?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),s.includes(r)||s.push(r),oV(e,h,"gfmFootnoteDefinitionWhitespace")):n(t)}function h(e){return t(e)}}function oJ(e,t,n){return e.check(oY,t,e.attempt(oq,t,n))}function o0(e){e.exit("gfmFootnoteDefinition")}function o1(e){return null===e||sU(e)||sj(e)?1:sz(e)?2:void 0}function o2(e,t,n){let r=[],i=-1;for(;++i<e.length;){let a=e[i].resolveAll;a&&!r.includes(a)&&(t=a(t,n),r.push(a))}return t}class o3{constructor(){this.map=[]}add(e,t,n){!function(e,t,n,r){let i=0;if(0!==n||0!==r.length){for(;i<e.map.length;){if(e.map[i][0]===t){e.map[i][1]+=n,e.map[i][2].push(...r);return}i+=1}e.map.push([t,n,r])}}(this,e,t,n)}consume(e){if(this.map.sort(function(e,t){return e[0]-t[0]}),0===this.map.length)return;let t=this.map.length,n=[];for(;t>0;)t-=1,n.push(e.slice(this.map[t][0]+this.map[t][1]),this.map[t][2]),e.length=this.map[t][0];n.push([...e]),e.length=0;let r=n.pop();for(;r;)e.push(...r),r=n.pop();this.map.length=0}}function o4(e,t,n){let r;let i=this,a=0,s=0;return function(e){let t=i.events.length-1;for(;t>-1;){let e=i.events[t][1].type;if("lineEnding"===e||"linePrefix"===e)t--;else break}let r=t>-1?i.events[t][1].type:null,a="tableHead"===r||"tableRow"===r?T:o;return a===T&&i.parser.lazy[i.now().line]?n(e):a(e)};function o(t){return e.enter("tableHead"),e.enter("tableRow"),124===t||(r=!0,s+=1),l(t)}function l(t){return null===t?n(t):sH(t)?s>1?(s=0,i.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),d):n(t):sG(t)?oV(e,l,"whitespace")(t):(s+=1,r&&(r=!1,a+=1),124===t)?(e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),r=!0,l):(e.enter("data"),c(t))}function c(t){return null===t||124===t||sU(t)?(e.exit("data"),l(t)):(e.consume(t),92===t?u:c)}function u(t){return 92===t||124===t?(e.consume(t),c):c(t)}function d(t){return(i.interrupt=!1,i.parser.lazy[i.now().line])?n(t):(e.enter("tableDelimiterRow"),r=!1,sG(t))?oV(e,h,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):h(t)}function h(t){return 45===t||58===t?f(t):124===t?(r=!0,e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),p):n(t)}function p(t){return sG(t)?oV(e,f,"whitespace")(t):f(t)}function f(t){return 58===t?(s+=1,r=!0,e.enter("tableDelimiterMarker"),e.consume(t),e.exit("tableDelimiterMarker"),m):45===t?(s+=1,m(t)):null===t||sH(t)?E(t):n(t)}function m(t){return 45===t?(e.enter("tableDelimiterFiller"),function t(n){return 45===n?(e.consume(n),t):58===n?(r=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(n),e.exit("tableDelimiterMarker"),g):(e.exit("tableDelimiterFiller"),g(n))}(t)):n(t)}function g(t){return sG(t)?oV(e,E,"whitespace")(t):E(t)}function E(i){return 124===i?h(i):null===i||sH(i)?r&&a===s?(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(i)):n(i):n(i)}function T(t){return e.enter("tableRow"),v(t)}function v(n){return 124===n?(e.enter("tableCellDivider"),e.consume(n),e.exit("tableCellDivider"),v):null===n||sH(n)?(e.exit("tableRow"),t(n)):sG(n)?oV(e,v,"whitespace")(n):(e.enter("data"),y(n))}function y(t){return null===t||124===t||sU(t)?(e.exit("data"),v(t)):(e.consume(t),92===t?A:y)}function A(t){return 92===t||124===t?(e.consume(t),y):y(t)}}function o5(e,t){let n,r,i,a=-1,s=!0,o=0,l=[0,0,0,0],c=[0,0,0,0],u=!1,d=0,h=new o3;for(;++a<e.length;){let p=e[a],f=p[1];"enter"===p[0]?"tableHead"===f.type?(u=!1,0!==d&&(o8(h,t,d,n,r),r=void 0,d=0),n={type:"table",start:Object.assign({},f.start),end:Object.assign({},f.end)},h.add(a,0,[["enter",n,t]])):"tableRow"===f.type||"tableDelimiterRow"===f.type?(s=!0,i=void 0,l=[0,0,0,0],c=[0,a+1,0,0],u&&(u=!1,r={type:"tableBody",start:Object.assign({},f.start),end:Object.assign({},f.end)},h.add(a,0,[["enter",r,t]])),o="tableDelimiterRow"===f.type?2:r?3:1):o&&("data"===f.type||"tableDelimiterMarker"===f.type||"tableDelimiterFiller"===f.type)?(s=!1,0===c[2]&&(0!==l[1]&&(c[0]=c[1],i=o6(h,t,l,o,void 0,i),l=[0,0,0,0]),c[2]=a)):"tableCellDivider"===f.type&&(s?s=!1:(0!==l[1]&&(c[0]=c[1],i=o6(h,t,l,o,void 0,i)),c=[(l=c)[1],a,0,0])):"tableHead"===f.type?(u=!0,d=a):"tableRow"===f.type||"tableDelimiterRow"===f.type?(d=a,0!==l[1]?(c[0]=c[1],i=o6(h,t,l,o,a,i)):0!==c[1]&&(i=o6(h,t,c,o,a,i)),o=0):o&&("data"===f.type||"tableDelimiterMarker"===f.type||"tableDelimiterFiller"===f.type)&&(c[3]=a)}for(0!==d&&o8(h,t,d,n,r),h.consume(t.events),a=-1;++a<t.events.length;){let e=t.events[a];"enter"===e[0]&&"table"===e[1].type&&(e[1]._align=function(e,t){let n=!1,r=[];for(;t<e.length;){let i=e[t];if(n){if("enter"===i[0])"tableContent"===i[1].type&&r.push("tableDelimiterMarker"===e[t+1][1].type?"left":"none");else if("tableContent"===i[1].type){if("tableDelimiterMarker"===e[t-1][1].type){let e=r.length-1;r[e]="left"===r[e]?"center":"right"}}else if("tableDelimiterRow"===i[1].type)break}else"enter"===i[0]&&"tableDelimiterRow"===i[1].type&&(n=!0);t+=1}return r}(t.events,a))}return e}function o6(e,t,n,r,i,a){0!==n[0]&&(a.end=Object.assign({},o9(t.events,n[0])),e.add(n[0],0,[["exit",a,t]]));let s=o9(t.events,n[1]);if(a={type:1===r?"tableHeader":2===r?"tableDelimiter":"tableData",start:Object.assign({},s),end:Object.assign({},s)},e.add(n[1],0,[["enter",a,t]]),0!==n[2]){let i=o9(t.events,n[2]),a=o9(t.events,n[3]),s={type:"tableContent",start:Object.assign({},i),end:Object.assign({},a)};if(e.add(n[2],0,[["enter",s,t]]),2!==r){let r=t.events[n[2]],i=t.events[n[3]];if(r[1].end=Object.assign({},i[1].end),r[1].type="chunkText",r[1].contentType="text",n[3]>n[2]+1){let t=n[2]+1,r=n[3]-n[2]-1;e.add(t,r,[])}}e.add(n[3]+1,0,[["exit",s,t]])}return void 0!==i&&(a.end=Object.assign({},o9(t.events,i)),e.add(i,0,[["exit",a,t]]),a=void 0),a}function o8(e,t,n,r,i){let a=[],s=o9(t.events,n);i&&(i.end=Object.assign({},s),a.push(["exit",i,t])),r.end=Object.assign({},s),a.push(["exit",r,t]),e.add(n+1,0,a)}function o9(e,t){let n=e[t],r="enter"===n[0]?"start":"end";return n[1][r]}let o7={tokenize:function(e,t,n){let r=this;return function(t){return null===r.previous&&r._gfmTasklistFirstContentOfListItem?(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(t),e.exit("taskListCheckMarker"),i):n(t)};function i(t){return sU(t)?(e.enter("taskListCheckValueUnchecked"),e.consume(t),e.exit("taskListCheckValueUnchecked"),a):88===t||120===t?(e.enter("taskListCheckValueChecked"),e.consume(t),e.exit("taskListCheckValueChecked"),a):n(t)}function a(t){return 93===t?(e.enter("taskListCheckMarker"),e.consume(t),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),s):n(t)}function s(r){return sH(r)?t(r):sG(r)?e.check({tokenize:le},t,n)(r):n(r)}}};function le(e,t,n){return oV(e,function(e){return null===e?n(e):t(e)},"whitespace")}let lt={};function ln(e){let t=e||lt,n=this.data(),r=n.micromarkExtensions||(n.micromarkExtensions=[]),i=n.fromMarkdownExtensions||(n.fromMarkdownExtensions=[]),a=n.toMarkdownExtensions||(n.toMarkdownExtensions=[]);r.push(oN([{text:oH},{document:{91:{tokenize:oZ,continuation:{tokenize:oJ},exit:o0}},text:{91:{tokenize:oK},93:{add:"after",tokenize:oQ,resolveTo:oX}}},function(e){let t=(e||{}).singleTilde,n={tokenize:function(e,n,r){let i=this.previous,a=this.events,s=0;return function(o){return 126===i&&"characterEscape"!==a[a.length-1][1].type?r(o):(e.enter("strikethroughSequenceTemporary"),function a(o){let l=o1(i);if(126===o)return s>1?r(o):(e.consume(o),s++,a);if(s<2&&!t)return r(o);let c=e.exit("strikethroughSequenceTemporary"),u=o1(o);return c._open=!u||2===u&&!!l,c._close=!l||2===l&&!!u,n(o)}(o))}},resolveAll:function(e,t){let n=-1;for(;++n<e.length;)if("enter"===e[n][0]&&"strikethroughSequenceTemporary"===e[n][1].type&&e[n][1]._close){let r=n;for(;r--;)if("exit"===e[r][0]&&"strikethroughSequenceTemporary"===e[r][1].type&&e[r][1]._open&&e[n][1].end.offset-e[n][1].start.offset==e[r][1].end.offset-e[r][1].start.offset){e[n][1].type="strikethroughSequence",e[r][1].type="strikethroughSequence";let i={type:"strikethrough",start:Object.assign({},e[r][1].start),end:Object.assign({},e[n][1].end)},a={type:"strikethroughText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},s=[["enter",i,t],["enter",e[r][1],t],["exit",e[r][1],t],["enter",a,t]],o=t.parser.constructs.insideSpan.null;o&&ox(s,s.length,0,o2(o,e.slice(r+1,n),t)),ox(s,s.length,0,[["exit",a,t],["enter",e[n][1],t],["exit",e[n][1],t],["exit",i,t]]),ox(e,r-1,n-r+3,s),n=r+s.length-2;break}}for(n=-1;++n<e.length;)"strikethroughSequenceTemporary"===e[n][1].type&&(e[n][1].type="data");return e}};return null==t&&(t=!0),{text:{126:n},insideSpan:{null:[n]},attentionMarkers:{null:[126]}}}(t),{flow:{null:{tokenize:o4,resolveAll:o5}}},{text:{91:o7}}])),i.push([{transforms:[sJ],enter:{literalAutolink:sY,literalAutolinkEmail:sq,literalAutolinkHttp:sq,literalAutolinkWww:sq},exit:{literalAutolink:sZ,literalAutolinkEmail:sK,literalAutolinkHttp:sQ,literalAutolinkWww:sX}},{enter:{gfmFootnoteDefinition:s4,gfmFootnoteDefinitionLabelString:s5,gfmFootnoteCall:s9,gfmFootnoteCallString:s7},exit:{gfmFootnoteDefinition:s8,gfmFootnoteDefinitionLabelString:s6,gfmFootnoteCall:ot,gfmFootnoteCallString:oe}},{canContainEols:["delete"],enter:{strikethrough:os},exit:{strikethrough:oo}},{enter:{table:oE,tableData:oA,tableHeader:oA,tableRow:ov},exit:{codeText:ob,table:oT,tableData:oy,tableHeader:oy,tableRow:oy}},{exit:{taskListCheckValueChecked:oC,taskListCheckValueUnchecked:oC,paragraph:oS}}]),a.push({extensions:[{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:sW,notInConstruct:sV},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:sW,notInConstruct:sV},{character:":",before:"[ps]",after:"\\/",inConstruct:sW,notInConstruct:sV}]},{unsafe:[{character:"[",inConstruct:["phrasing","label","reference"]}],handlers:{footnoteDefinition:or,footnoteReference:on}},{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:oa}],handlers:{delete:ol}},function(e){let t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,i=t.stringLength,a=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:"\n",inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:function(e,t,n){let r=om(e,t,n);return n.stack.includes("tableCell")&&(r=r.replace(/\|/g,"\\$&")),r},table:function(e,t,n,r){return o(function(e,t,n){let r=e.children,i=-1,a=[],s=t.enter("table");for(;++i<r.length;)a[i]=l(r[i],t,n);return s(),a}(e,n,r),e.align)},tableCell:s,tableRow:function(e,t,n,r){let i=o([l(e,n,r)]);return i.slice(0,i.indexOf("\n"))}}};function s(e,t,n,r){let i=n.enter("tableCell"),s=n.enter("phrasing"),o=n.containerPhrasing(e,{...r,before:a,after:a});return s(),i(),o}function o(e,t){return function(e,t={}){let n=(t.align||[]).concat(),r=t.stringLength||oc,i=[],a=[],s=[],o=[],l=0,c=-1;for(;++c<e.length;){let n=[],i=[],d=-1;for(e[c].length>l&&(l=e[c].length);++d<e[c].length;){var u;let a=null==(u=e[c][d])?"":String(u);if(!1!==t.alignDelimiters){let e=r(a);i[d]=e,(void 0===o[d]||e>o[d])&&(o[d]=e)}n.push(a)}a[c]=n,s[c]=i}let d=-1;if("object"==typeof n&&"length"in n)for(;++d<l;)i[d]=ou(n[d]);else{let e=ou(n);for(;++d<l;)i[d]=e}d=-1;let h=[],p=[];for(;++d<l;){let e=i[d],n="",r="";99===e?(n=":",r=":"):108===e?n=":":114===e&&(r=":");let a=!1===t.alignDelimiters?1:Math.max(1,o[d]-n.length-r.length),s=n+"-".repeat(a)+r;!1!==t.alignDelimiters&&((a=n.length+a+r.length)>o[d]&&(o[d]=a),p[d]=a),h[d]=s}a.splice(1,0,h),s.splice(1,0,p),c=-1;let f=[];for(;++c<a.length;){let e=a[c],n=s[c];d=-1;let r=[];for(;++d<l;){let a=e[d]||"",s="",c="";if(!1!==t.alignDelimiters){let e=o[d]-(n[d]||0),t=i[d];114===t?s=" ".repeat(e):99===t?e%2?(s=" ".repeat(e/2+.5),c=" ".repeat(e/2-.5)):c=s=" ".repeat(e/2):c=" ".repeat(e)}!1===t.delimiterStart||d||r.push("|"),!1!==t.padding&&!(!1===t.alignDelimiters&&""===a)&&(!1!==t.delimiterStart||d)&&r.push(" "),!1!==t.alignDelimiters&&r.push(s),r.push(a),!1!==t.alignDelimiters&&r.push(c),!1!==t.padding&&r.push(" "),(!1!==t.delimiterEnd||d!==l-1)&&r.push("|")}f.push(!1===t.delimiterEnd?r.join("").replace(/ +$/,""):r.join(""))}return f.join("\n")}(e,{align:t,alignDelimiters:r,padding:n,stringLength:i})}function l(e,t,n){let r=e.children,i=-1,a=[],o=t.enter("tableRow");for(;++i<r.length;)a[i]=s(r[i],e,t,n);return o(),a}}(t),{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:oI}}]})}class lr{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,t){let n=null==t?Number.POSITIVE_INFINITY:t;return n<this.left.length?this.left.slice(e,n):e>this.left.length?this.right.slice(this.right.length-n+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-n+this.left.length).reverse())}splice(e,t,n){this.setCursor(Math.trunc(e));let r=this.right.splice(this.right.length-(t||0),Number.POSITIVE_INFINITY);return n&&li(this.left,n),r.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),li(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),li(this.right,e.reverse())}setCursor(e){if(e!==this.left.length&&(!(e>this.left.length)||0!==this.right.length)&&(!(e<0)||0!==this.left.length)){if(e<this.left.length){let t=this.left.splice(e,Number.POSITIVE_INFINITY);li(this.right,t.reverse())}else{let t=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);li(this.left,t.reverse())}}}}function li(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function la(e){let t,n,r,i,a,s,o;let l={},c=-1,u=new lr(e);for(;++c<u.length;){for(;(c in l);)c=l[c];if(t=u.get(c),c&&"chunkFlow"===t[1].type&&"listItemPrefix"===u.get(c-1)[1].type&&((r=0)<(s=t[1]._tokenizer.events).length&&"lineEndingBlank"===s[r][1].type&&(r+=2),r<s.length&&"content"===s[r][1].type))for(;++r<s.length&&"content"!==s[r][1].type;)"chunkText"===s[r][1].type&&(s[r][1]._isInFirstContentOfListItem=!0,r++);if("enter"===t[0])t[1].contentType&&(Object.assign(l,function(e,t){let n,r;let i=e.get(t)[1],a=e.get(t)[2],s=t-1,o=[],l=i._tokenizer||a.parser[i.contentType](i.start),c=l.events,u=[],d={},h=-1,p=i,f=0,m=0,g=[0];for(;p;){for(;e.get(++s)[1]!==p;);o.push(s),!p._tokenizer&&(n=a.sliceStream(p),p.next||n.push(null),r&&l.defineSkip(p.start),p._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=!0),l.write(n),p._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=void 0)),r=p,p=p.next}for(p=i;++h<c.length;)"exit"===c[h][0]&&"enter"===c[h-1][0]&&c[h][1].type===c[h-1][1].type&&c[h][1].start.line!==c[h][1].end.line&&(m=h+1,g.push(m),p._tokenizer=void 0,p.previous=void 0,p=p.next);for(l.events=[],p?(p._tokenizer=void 0,p.previous=void 0):g.pop(),h=g.length;h--;){let t=c.slice(g[h],g[h+1]),n=o.pop();u.push([n,n+t.length-1]),e.splice(n,2,t)}for(u.reverse(),h=-1;++h<u.length;)d[f+u[h][0]]=f+u[h][1],f+=u[h][1]-u[h][0]-1;return d}(u,c)),c=l[c],o=!0);else if(t[1]._container){for(r=c,n=void 0;r--;)if("lineEnding"===(i=u.get(r))[1].type||"lineEndingBlank"===i[1].type)"enter"===i[0]&&(n&&(u.get(n)[1].type="lineEndingBlank"),i[1].type="lineEnding",n=r);else break;n&&(t[1].end=Object.assign({},u.get(n)[1].start),(a=u.slice(n,c)).unshift(t),u.splice(n,c-n+1,a))}}return ox(e,0,Number.POSITIVE_INFINITY,u.slice(0)),!o}let ls={tokenize:function(e){let t;let n=e.attempt(this.parser.constructs.contentInitial,function(t){if(null===t){e.consume(t);return}return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),oV(e,n,"linePrefix")},function(n){return e.enter("paragraph"),function n(r){let i=e.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=i),t=i,function t(r){if(null===r){e.exit("chunkText"),e.exit("paragraph"),e.consume(r);return}return sH(r)?(e.consume(r),e.exit("chunkText"),n):(e.consume(r),t)}(r)}(n)});return n}},lo={tokenize:function(e){let t,n,r;let i=this,a=[],s=0;return o;function o(t){if(s<a.length){let n=a[s];return i.containerState=n[1],e.attempt(n[0].continuation,l,c)(t)}return c(t)}function l(e){if(s++,i.containerState._closeFlow){let n;i.containerState._closeFlow=void 0,t&&E();let r=i.events.length,a=r;for(;a--;)if("exit"===i.events[a][0]&&"chunkFlow"===i.events[a][1].type){n=i.events[a][1].end;break}g(s);let o=r;for(;o<i.events.length;)i.events[o][1].end=Object.assign({},n),o++;return ox(i.events,a+1,0,i.events.slice(r)),i.events.length=o,c(e)}return o(e)}function c(n){if(s===a.length){if(!t)return h(n);if(t.currentConstruct&&t.currentConstruct.concrete)return f(n);i.interrupt=!!(t.currentConstruct&&!t._gfmTableDynamicInterruptHack)}return i.containerState={},e.check(ll,u,d)(n)}function u(e){return t&&E(),g(s),h(e)}function d(e){return i.parser.lazy[i.now().line]=s!==a.length,r=i.now().offset,f(e)}function h(t){return i.containerState={},e.attempt(ll,p,f)(t)}function p(e){return s++,a.push([i.currentConstruct,i.containerState]),h(e)}function f(r){if(null===r){t&&E(),g(0),e.consume(r);return}return t=t||i.parser.flow(i.now()),e.enter("chunkFlow",{contentType:"flow",previous:n,_tokenizer:t}),function t(n){if(null===n){m(e.exit("chunkFlow"),!0),g(0),e.consume(n);return}return sH(n)?(e.consume(n),m(e.exit("chunkFlow")),s=0,i.interrupt=void 0,o):(e.consume(n),t)}(r)}function m(e,a){let o=i.sliceStream(e);if(a&&o.push(null),e.previous=n,n&&(n.next=e),n=e,t.defineSkip(e.start),t.write(o),i.parser.lazy[e.start.line]){let e,n,a=t.events.length;for(;a--;)if(t.events[a][1].start.offset<r&&(!t.events[a][1].end||t.events[a][1].end.offset>r))return;let o=i.events.length,l=o;for(;l--;)if("exit"===i.events[l][0]&&"chunkFlow"===i.events[l][1].type){if(e){n=i.events[l][1].end;break}e=!0}for(g(s),a=o;a<i.events.length;)i.events[a][1].end=Object.assign({},n),a++;ox(i.events,l+1,0,i.events.slice(o)),i.events.length=a}}function g(t){let n=a.length;for(;n-- >t;){let t=a[n];i.containerState=t[1],t[0].exit.call(i,e)}a.length=t}function E(){t.write([null]),n=void 0,t=void 0,i.containerState._closeFlow=void 0}}},ll={tokenize:function(e,t,n){return oV(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}},lc={tokenize:function(e,t){let n;return function(t){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),r(t)};function r(t){return null===t?i(t):sH(t)?e.check(lu,a,i)(t):(e.consume(t),r)}function i(n){return e.exit("chunkContent"),e.exit("content"),t(n)}function a(t){return e.consume(t),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,r}},resolve:function(e){return la(e),e}},lu={tokenize:function(e,t,n){let r=this;return function(t){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),oV(e,i,"linePrefix")};function i(i){if(null===i||sH(i))return n(i);let a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&"linePrefix"===a[1].type&&a[2].sliceSerialize(a[1],!0).length>=4?t(i):e.interrupt(r.parser.constructs.flow,n,t)(i)}},partial:!0},ld={tokenize:function(e){let t=this,n=e.attempt(oY,function(r){if(null===r){e.consume(r);return}return e.enter("lineEndingBlank"),e.consume(r),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n},e.attempt(this.parser.constructs.flowInitial,r,oV(e,e.attempt(this.parser.constructs.flow,r,e.attempt(lc,r)),"linePrefix")));return n;function r(r){if(null===r){e.consume(r);return}return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),t.currentConstruct=void 0,n}}},lh={resolveAll:lg()},lp=lm("string"),lf=lm("text");function lm(e){return{tokenize:function(t){let n=this,r=this.parser.constructs[e],i=t.attempt(r,a,s);return a;function a(e){return l(e)?i(e):s(e)}function s(e){if(null===e){t.consume(e);return}return t.enter("data"),t.consume(e),o}function o(e){return l(e)?(t.exit("data"),i(e)):(t.consume(e),o)}function l(e){if(null===e)return!0;let t=r[e],i=-1;if(t)for(;++i<t.length;){let e=t[i];if(!e.previous||e.previous.call(n,n.previous))return!0}return!1}},resolveAll:lg("text"===e?lE:void 0)}}function lg(e){return function(t,n){let r,i=-1;for(;++i<=t.length;)void 0===r?t[i]&&"data"===t[i][1].type&&(r=i,i++):t[i]&&"data"===t[i][1].type||(i!==r+2&&(t[r][1].end=t[i-1][1].end,t.splice(r+2,i-r-2),i=r+2),r=void 0);return e?e(t,n):t}}function lE(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||"lineEnding"===e[n][1].type)&&"data"===e[n-1][1].type){let r;let i=e[n-1][1],a=t.sliceStream(i),s=a.length,o=-1,l=0;for(;s--;){let e=a[s];if("string"==typeof e){for(o=e.length;32===e.charCodeAt(o-1);)l++,o--;if(o)break;o=-1}else if(-2===e)r=!0,l++;else if(-1===e);else{s++;break}}if(l){let a={type:n===e.length||r||l<2?"lineSuffix":"hardBreakTrailing",start:{line:i.end.line,column:i.end.column-l,offset:i.end.offset-l,_index:i.start._index+s,_bufferIndex:s?o:i.start._bufferIndex+o},end:Object.assign({},i.end)};i.end=Object.assign({},a.start),i.start.offset===i.end.offset?Object.assign(i,a):(e.splice(n,0,["enter",a,t],["exit",a,t]),n+=2)}n++}return e}let lT={name:"thematicBreak",tokenize:function(e,t,n){let r,i=0;return function(a){return e.enter("thematicBreak"),r=a,function a(s){return s===r?(e.enter("thematicBreakSequence"),function t(n){return n===r?(e.consume(n),i++,t):(e.exit("thematicBreakSequence"),sG(n)?oV(e,a,"whitespace")(n):a(n))}(s)):i>=3&&(null===s||sH(s))?(e.exit("thematicBreak"),t(s)):n(s)}(a)}}},lv={name:"list",tokenize:function(e,t,n){let r=this,i=r.events[r.events.length-1],a=i&&"linePrefix"===i[1].type?i[2].sliceSerialize(i[1],!0).length:0,s=0;return function(t){let i=r.containerState.type||(42===t||43===t||45===t?"listUnordered":"listOrdered");if("listUnordered"===i?!r.containerState.marker||t===r.containerState.marker:sP(t)){if(r.containerState.type||(r.containerState.type=i,e.enter(i,{_container:!0})),"listUnordered"===i)return e.enter("listItemPrefix"),42===t||45===t?e.check(lT,n,o)(t):o(t);if(!r.interrupt||49===t)return e.enter("listItemPrefix"),e.enter("listItemValue"),function t(i){return sP(i)&&++s<10?(e.consume(i),t):(!r.interrupt||s<2)&&(r.containerState.marker?i===r.containerState.marker:41===i||46===i)?(e.exit("listItemValue"),o(i)):n(i)}(t)}return n(t)};function o(t){return e.enter("listItemMarker"),e.consume(t),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||t,e.check(oY,r.interrupt?n:l,e.attempt(ly,u,c))}function l(e){return r.containerState.initialBlankLine=!0,a++,u(e)}function c(t){return sG(t)?(e.enter("listItemPrefixWhitespace"),e.consume(t),e.exit("listItemPrefixWhitespace"),u):n(t)}function u(n){return r.containerState.size=a+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(n)}},continuation:{tokenize:function(e,t,n){let r=this;return r.containerState._closeFlow=void 0,e.check(oY,function(n){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,oV(e,t,"listItemIndent",r.containerState.size+1)(n)},function(n){return r.containerState.furtherBlankLines||!sG(n)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,i(n)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(lA,t,i)(n))});function i(i){return r.containerState._closeFlow=!0,r.interrupt=void 0,oV(e,e.attempt(lv,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(i)}}},exit:function(e){e.exit(this.containerState.type)}},ly={tokenize:function(e,t,n){let r=this;return oV(e,function(e){let i=r.events[r.events.length-1];return!sG(e)&&i&&"listItemPrefixWhitespace"===i[1].type?t(e):n(e)},"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5)},partial:!0},lA={tokenize:function(e,t,n){let r=this;return oV(e,function(e){let i=r.events[r.events.length-1];return i&&"listItemIndent"===i[1].type&&i[2].sliceSerialize(i[1],!0).length===r.containerState.size?t(e):n(e)},"listItemIndent",r.containerState.size+1)},partial:!0},lb={name:"blockQuote",tokenize:function(e,t,n){let r=this;return function(t){if(62===t){let n=r.containerState;return n.open||(e.enter("blockQuote",{_container:!0}),n.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(t),e.exit("blockQuoteMarker"),i}return n(t)};function i(n){return sG(n)?(e.enter("blockQuotePrefixWhitespace"),e.consume(n),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(n))}},continuation:{tokenize:function(e,t,n){let r=this;return function(t){return sG(t)?oV(e,i,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):i(t)};function i(r){return e.attempt(lb,t,n)(r)}}},exit:function(e){e.exit("blockQuote")}};function l_(e,t,n,r,i,a,s,o,l){let c=l||Number.POSITIVE_INFINITY,u=0;return function(t){return 60===t?(e.enter(r),e.enter(i),e.enter(a),e.consume(t),e.exit(a),d):null===t||32===t||41===t||sM(t)?n(t):(e.enter(r),e.enter(s),e.enter(o),e.enter("chunkString",{contentType:"string"}),f(t))};function d(n){return 62===n?(e.enter(a),e.consume(n),e.exit(a),e.exit(i),e.exit(r),t):(e.enter(o),e.enter("chunkString",{contentType:"string"}),h(n))}function h(t){return 62===t?(e.exit("chunkString"),e.exit(o),d(t)):null===t||60===t||sH(t)?n(t):(e.consume(t),92===t?p:h)}function p(t){return 60===t||62===t||92===t?(e.consume(t),h):h(t)}function f(i){return!u&&(null===i||41===i||sU(i))?(e.exit("chunkString"),e.exit(o),e.exit(s),e.exit(r),t(i)):u<c&&40===i?(e.consume(i),u++,f):41===i?(e.consume(i),u--,f):null===i||32===i||40===i||sM(i)?n(i):(e.consume(i),92===i?m:f)}function m(t){return 40===t||41===t||92===t?(e.consume(t),f):f(t)}}function lC(e,t,n,r,i,a){let s;let o=this,l=0;return function(t){return e.enter(r),e.enter(i),e.consume(t),e.exit(i),e.enter(a),c};function c(d){return l>999||null===d||91===d||93===d&&!s||94===d&&!l&&"_hiddenFootnoteSupport"in o.parser.constructs?n(d):93===d?(e.exit(a),e.enter(i),e.consume(d),e.exit(i),e.exit(r),t):sH(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),u(d))}function u(t){return null===t||91===t||93===t||sH(t)||l++>999?(e.exit("chunkString"),c(t)):(e.consume(t),s||(s=!sG(t)),92===t?d:u)}function d(t){return 91===t||92===t||93===t?(e.consume(t),l++,u):u(t)}}function lS(e,t,n,r,i,a){let s;return function(t){return 34===t||39===t||40===t?(e.enter(r),e.enter(i),e.consume(t),e.exit(i),s=40===t?41:t,o):n(t)};function o(n){return n===s?(e.enter(i),e.consume(n),e.exit(i),e.exit(r),t):(e.enter(a),l(n))}function l(t){return t===s?(e.exit(a),o(s)):null===t?n(t):sH(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),oV(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(t))}function c(t){return t===s||null===t||sH(t)?(e.exit("chunkString"),l(t)):(e.consume(t),92===t?u:c)}function u(t){return t===s||92===t?(e.consume(t),c):c(t)}}function lI(e,t){let n;return function r(i){return sH(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):sG(i)?oV(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}let lx={tokenize:function(e,t,n){return function(t){return sU(t)?lI(e,r)(t):n(t)};function r(t){return lS(e,i,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(t)}function i(t){return sG(t)?oV(e,a,"whitespace")(t):a(t)}function a(e){return null===e||sH(e)?t(e):n(e)}},partial:!0},lk={name:"codeIndented",tokenize:function(e,t,n){let r=this;return function(t){return e.enter("codeIndented"),oV(e,i,"linePrefix",5)(t)};function i(t){let i=r.events[r.events.length-1];return i&&"linePrefix"===i[1].type&&i[2].sliceSerialize(i[1],!0).length>=4?function t(n){return null===n?a(n):sH(n)?e.attempt(lw,t,a)(n):(e.enter("codeFlowValue"),function n(r){return null===r||sH(r)?(e.exit("codeFlowValue"),t(r)):(e.consume(r),n)}(n))}(t):n(t)}function a(n){return e.exit("codeIndented"),t(n)}}},lw={tokenize:function(e,t,n){let r=this;return i;function i(t){return r.parser.lazy[r.now().line]?n(t):sH(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),i):oV(e,a,"linePrefix",5)(t)}function a(e){let a=r.events[r.events.length-1];return a&&"linePrefix"===a[1].type&&a[2].sliceSerialize(a[1],!0).length>=4?t(e):sH(e)?i(e):n(e)}},partial:!0},lN={name:"setextUnderline",tokenize:function(e,t,n){let r;let i=this;return function(t){let s,o=i.events.length;for(;o--;)if("lineEnding"!==i.events[o][1].type&&"linePrefix"!==i.events[o][1].type&&"content"!==i.events[o][1].type){s="paragraph"===i.events[o][1].type;break}return!i.parser.lazy[i.now().line]&&(i.interrupt||s)?(e.enter("setextHeadingLine"),r=t,e.enter("setextHeadingLineSequence"),function t(n){return n===r?(e.consume(n),t):(e.exit("setextHeadingLineSequence"),sG(n)?oV(e,a,"lineSuffix")(n):a(n))}(t)):n(t)};function a(r){return null===r||sH(r)?(e.exit("setextHeadingLine"),t(r)):n(r)}},resolveTo:function(e,t){let n,r,i,a=e.length;for(;a--;)if("enter"===e[a][0]){if("content"===e[a][1].type){n=a;break}"paragraph"===e[a][1].type&&(r=a)}else"content"===e[a][1].type&&e.splice(a,1),i||"definition"!==e[a][1].type||(i=a);let s={type:"setextHeading",start:Object.assign({},e[r][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[r][1].type="setextHeadingText",i?(e.splice(r,0,["enter",s,t]),e.splice(i+1,0,["exit",e[n][1],t]),e[n][1].end=Object.assign({},e[i][1].end)):e[n][1]=s,e.push(["exit",s,t]),e}},lO=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],lR=["pre","script","style","textarea"],lL={tokenize:function(e,t,n){return function(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),e.attempt(oY,t,n)}},partial:!0},lD={tokenize:function(e,t,n){let r=this;return function(t){return sH(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),i):n(t)};function i(e){return r.parser.lazy[r.now().line]?n(e):t(e)}},partial:!0},lM={tokenize:function(e,t,n){let r=this;return function(t){return null===t?n(t):(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),i)};function i(e){return r.parser.lazy[r.now().line]?n(e):t(e)}},partial:!0},lP={name:"codeFenced",tokenize:function(e,t,n){let r;let i=this,a={tokenize:function(e,t,n){let a=0;return function(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),s};function s(t){return e.enter("codeFencedFence"),sG(t)?oV(e,l,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):l(t)}function l(t){return t===r?(e.enter("codeFencedFenceSequence"),function t(i){return i===r?(a++,e.consume(i),t):a>=o?(e.exit("codeFencedFenceSequence"),sG(i)?oV(e,c,"whitespace")(i):c(i)):n(i)}(t)):n(t)}function c(r){return null===r||sH(r)?(e.exit("codeFencedFence"),t(r)):n(r)}},partial:!0},s=0,o=0;return function(t){return function(t){let a=i.events[i.events.length-1];return s=a&&"linePrefix"===a[1].type?a[2].sliceSerialize(a[1],!0).length:0,r=t,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),function t(i){return i===r?(o++,e.consume(i),t):o<3?n(i):(e.exit("codeFencedFenceSequence"),sG(i)?oV(e,l,"whitespace")(i):l(i))}(t)}(t)};function l(a){return null===a||sH(a)?(e.exit("codeFencedFence"),i.interrupt?t(a):e.check(lM,u,f)(a)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),function t(i){return null===i||sH(i)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),l(i)):sG(i)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),oV(e,c,"whitespace")(i)):96===i&&i===r?n(i):(e.consume(i),t)}(a))}function c(t){return null===t||sH(t)?l(t):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),function t(i){return null===i||sH(i)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),l(i)):96===i&&i===r?n(i):(e.consume(i),t)}(t))}function u(t){return e.attempt(a,f,d)(t)}function d(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),h}function h(t){return s>0&&sG(t)?oV(e,p,"linePrefix",s+1)(t):p(t)}function p(t){return null===t||sH(t)?e.check(lM,u,f)(t):(e.enter("codeFlowValue"),function t(n){return null===n||sH(n)?(e.exit("codeFlowValue"),p(n)):(e.consume(n),t)}(t))}function f(n){return e.exit("codeFenced"),t(n)}},concrete:!0},lF=document.createElement("i");function lB(e){let t="&"+e+";";lF.innerHTML=t;let n=lF.textContent;return(59!==n.charCodeAt(n.length-1)||"semi"===e)&&n!==t&&n}let lH={name:"characterReference",tokenize:function(e,t,n){let r,i;let a=this,s=0;return function(t){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(t),e.exit("characterReferenceMarker"),o};function o(t){return 35===t?(e.enter("characterReferenceMarkerNumeric"),e.consume(t),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),r=31,i=sL,c(t))}function l(t){return 88===t||120===t?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(t),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),r=6,i=sF,c):(e.enter("characterReferenceValue"),r=7,i=sP,c(t))}function c(o){if(59===o&&s){let r=e.exit("characterReferenceValue");return i!==sL||lB(a.sliceSerialize(r))?(e.enter("characterReferenceMarker"),e.consume(o),e.exit("characterReferenceMarker"),e.exit("characterReference"),t):n(o)}return i(o)&&s++<r?(e.consume(o),c):n(o)}}},lU={name:"characterEscape",tokenize:function(e,t,n){return function(t){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(t),e.exit("escapeMarker"),r};function r(r){return sB(r)?(e.enter("characterEscapeValue"),e.consume(r),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(r)}}},lG={name:"lineEnding",tokenize:function(e,t){return function(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),oV(e,t,"linePrefix")}}},lz={name:"labelEnd",tokenize:function(e,t,n){let r,i;let a=this,s=a.events.length;for(;s--;)if(("labelImage"===a.events[s][1].type||"labelLink"===a.events[s][1].type)&&!a.events[s][1]._balanced){r=a.events[s][1];break}return function(t){return r?r._inactive?u(t):(i=a.parser.defined.includes(s3(a.sliceSerialize({start:r.end,end:a.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelEnd"),o):n(t)};function o(t){return 40===t?e.attempt(lj,c,i?c:u)(t):91===t?e.attempt(l$,c,i?l:u)(t):i?c(t):u(t)}function l(t){return e.attempt(lW,c,u)(t)}function c(e){return t(e)}function u(e){return r._balanced=!0,n(e)}},resolveTo:function(e,t){let n,r,i,a,s=e.length,o=0;for(;s--;)if(n=e[s][1],r){if("link"===n.type||"labelLink"===n.type&&n._inactive)break;"enter"===e[s][0]&&"labelLink"===n.type&&(n._inactive=!0)}else if(i){if("enter"===e[s][0]&&("labelImage"===n.type||"labelLink"===n.type)&&!n._balanced&&(r=s,"labelLink"!==n.type)){o=2;break}}else"labelEnd"===n.type&&(i=s);let l={type:"labelLink"===e[r][1].type?"link":"image",start:Object.assign({},e[r][1].start),end:Object.assign({},e[e.length-1][1].end)},c={type:"label",start:Object.assign({},e[r][1].start),end:Object.assign({},e[i][1].end)},u={type:"labelText",start:Object.assign({},e[r+o+2][1].end),end:Object.assign({},e[i-2][1].start)};return a=ok(a=[["enter",l,t],["enter",c,t]],e.slice(r+1,r+o+3)),a=ok(a,[["enter",u,t]]),a=ok(a,o2(t.parser.constructs.insideSpan.null,e.slice(r+o+4,i-3),t)),a=ok(a,[["exit",u,t],e[i-2],e[i-1],["exit",c,t]]),a=ok(a,e.slice(i+1)),a=ok(a,[["exit",l,t]]),ox(e,r,e.length,a),e},resolveAll:function(e){let t=-1;for(;++t<e.length;){let n=e[t][1];("labelImage"===n.type||"labelLink"===n.type||"labelEnd"===n.type)&&(e.splice(t+1,"labelImage"===n.type?4:2),n.type="data",t++)}return e}},lj={tokenize:function(e,t,n){return function(t){return e.enter("resource"),e.enter("resourceMarker"),e.consume(t),e.exit("resourceMarker"),r};function r(t){return sU(t)?lI(e,i)(t):i(t)}function i(t){return 41===t?c(t):l_(e,a,s,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(t)}function a(t){return sU(t)?lI(e,o)(t):c(t)}function s(e){return n(e)}function o(t){return 34===t||39===t||40===t?lS(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(t):c(t)}function l(t){return sU(t)?lI(e,c)(t):c(t)}function c(r){return 41===r?(e.enter("resourceMarker"),e.consume(r),e.exit("resourceMarker"),e.exit("resource"),t):n(r)}}},l$={tokenize:function(e,t,n){let r=this;return function(t){return lC.call(r,e,i,a,"reference","referenceMarker","referenceString")(t)};function i(e){return r.parser.defined.includes(s3(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(e):n(e)}function a(e){return n(e)}}},lW={tokenize:function(e,t,n){return function(t){return e.enter("reference"),e.enter("referenceMarker"),e.consume(t),e.exit("referenceMarker"),r};function r(r){return 93===r?(e.enter("referenceMarker"),e.consume(r),e.exit("referenceMarker"),e.exit("reference"),t):n(r)}}},lV={name:"labelStartImage",tokenize:function(e,t,n){let r=this;return function(t){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(t),e.exit("labelImageMarker"),i};function i(t){return 91===t?(e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelImage"),a):n(t)}function a(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}},resolveAll:lz.resolveAll},lY={name:"attention",tokenize:function(e,t){let n;let r=this.parser.constructs.attentionMarkers.null,i=this.previous,a=o1(i);return function(s){return n=s,e.enter("attentionSequence"),function s(o){if(o===n)return e.consume(o),s;let l=e.exit("attentionSequence"),c=o1(o),u=!c||2===c&&a||r.includes(o),d=!a||2===a&&c||r.includes(i);return l._open=!!(42===n?u:u&&(a||!d)),l._close=!!(42===n?d:d&&(c||!u)),t(o)}(s)}},resolveAll:function(e,t){let n,r,i,a,s,o,l,c,u=-1;for(;++u<e.length;)if("enter"===e[u][0]&&"attentionSequence"===e[u][1].type&&e[u][1]._close){for(n=u;n--;)if("exit"===e[n][0]&&"attentionSequence"===e[n][1].type&&e[n][1]._open&&t.sliceSerialize(e[n][1]).charCodeAt(0)===t.sliceSerialize(e[u][1]).charCodeAt(0)){if((e[n][1]._close||e[u][1]._open)&&(e[u][1].end.offset-e[u][1].start.offset)%3&&!((e[n][1].end.offset-e[n][1].start.offset+e[u][1].end.offset-e[u][1].start.offset)%3))continue;o=e[n][1].end.offset-e[n][1].start.offset>1&&e[u][1].end.offset-e[u][1].start.offset>1?2:1;let d=Object.assign({},e[n][1].end),h=Object.assign({},e[u][1].start);lq(d,-o),lq(h,o),a={type:o>1?"strongSequence":"emphasisSequence",start:d,end:Object.assign({},e[n][1].end)},s={type:o>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[u][1].start),end:h},i={type:o>1?"strongText":"emphasisText",start:Object.assign({},e[n][1].end),end:Object.assign({},e[u][1].start)},r={type:o>1?"strong":"emphasis",start:Object.assign({},a.start),end:Object.assign({},s.end)},e[n][1].end=Object.assign({},a.start),e[u][1].start=Object.assign({},s.end),l=[],e[n][1].end.offset-e[n][1].start.offset&&(l=ok(l,[["enter",e[n][1],t],["exit",e[n][1],t]])),l=ok(l,[["enter",r,t],["enter",a,t],["exit",a,t],["enter",i,t]]),l=ok(l,o2(t.parser.constructs.insideSpan.null,e.slice(n+1,u),t)),l=ok(l,[["exit",i,t],["enter",s,t],["exit",s,t],["exit",r,t]]),e[u][1].end.offset-e[u][1].start.offset?(c=2,l=ok(l,[["enter",e[u][1],t],["exit",e[u][1],t]])):c=0,ox(e,n-1,u-n+3,l),u=n+l.length-c-2;break}}for(u=-1;++u<e.length;)"attentionSequence"===e[u][1].type&&(e[u][1].type="data");return e}};function lq(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}let lQ={name:"labelStartLink",tokenize:function(e,t,n){let r=this;return function(t){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelLink"),i};function i(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}},resolveAll:lz.resolveAll},lX={42:lv,43:lv,45:lv,48:lv,49:lv,50:lv,51:lv,52:lv,53:lv,54:lv,55:lv,56:lv,57:lv,62:lb},lK={91:{name:"definition",tokenize:function(e,t,n){let r;let i=this;return function(t){return e.enter("definition"),lC.call(i,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(t)};function a(t){return(r=s3(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)),58===t)?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),s):n(t)}function s(t){return sU(t)?lI(e,o)(t):o(t)}function o(t){return l_(e,l,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(t)}function l(t){return e.attempt(lx,c,c)(t)}function c(t){return sG(t)?oV(e,u,"whitespace")(t):u(t)}function u(a){return null===a||sH(a)?(e.exit("definition"),i.parser.defined.push(r),t(a)):n(a)}}}},lZ={[-2]:lk,[-1]:lk,32:lk},lJ={35:{name:"headingAtx",tokenize:function(e,t,n){let r=0;return function(i){return e.enter("atxHeading"),e.enter("atxHeadingSequence"),function i(a){return 35===a&&r++<6?(e.consume(a),i):null===a||sU(a)?(e.exit("atxHeadingSequence"),function n(r){return 35===r?(e.enter("atxHeadingSequence"),function t(r){return 35===r?(e.consume(r),t):(e.exit("atxHeadingSequence"),n(r))}(r)):null===r||sH(r)?(e.exit("atxHeading"),t(r)):sG(r)?oV(e,n,"whitespace")(r):(e.enter("atxHeadingText"),function t(r){return null===r||35===r||sU(r)?(e.exit("atxHeadingText"),n(r)):(e.consume(r),t)}(r))}(a)):n(a)}(i)}},resolve:function(e,t){let n,r,i=e.length-2,a=3;return"whitespace"===e[3][1].type&&(a+=2),i-2>a&&"whitespace"===e[i][1].type&&(i-=2),"atxHeadingSequence"===e[i][1].type&&(a===i-1||i-4>a&&"whitespace"===e[i-2][1].type)&&(i-=a+1===i?2:4),i>a&&(n={type:"atxHeadingText",start:e[a][1].start,end:e[i][1].end},r={type:"chunkText",start:e[a][1].start,end:e[i][1].end,contentType:"text"},ox(e,a,i-a+1,[["enter",n,t],["enter",r,t],["exit",r,t],["exit",n,t]])),e}},42:lT,45:[lN,lT],60:{name:"htmlFlow",tokenize:function(e,t,n){let r,i,a,s,o;let l=this;return function(t){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(t),c};function c(s){return 33===s?(e.consume(s),u):47===s?(e.consume(s),i=!0,p):63===s?(e.consume(s),r=3,l.interrupt?t:R):sR(s)?(e.consume(s),a=String.fromCharCode(s),f):n(s)}function u(i){return 45===i?(e.consume(i),r=2,d):91===i?(e.consume(i),r=5,s=0,h):sR(i)?(e.consume(i),r=4,l.interrupt?t:R):n(i)}function d(r){return 45===r?(e.consume(r),l.interrupt?t:R):n(r)}function h(r){let i="CDATA[";return r===i.charCodeAt(s++)?(e.consume(r),s===i.length)?l.interrupt?t:C:h:n(r)}function p(t){return sR(t)?(e.consume(t),a=String.fromCharCode(t),f):n(t)}function f(s){if(null===s||47===s||62===s||sU(s)){let o=47===s,c=a.toLowerCase();return!o&&!i&&lR.includes(c)?(r=1,l.interrupt?t(s):C(s)):lO.includes(a.toLowerCase())?(r=6,o)?(e.consume(s),m):l.interrupt?t(s):C(s):(r=7,l.interrupt&&!l.parser.lazy[l.now().line]?n(s):i?function t(n){return sG(n)?(e.consume(n),t):b(n)}(s):g(s))}return 45===s||sL(s)?(e.consume(s),a+=String.fromCharCode(s),f):n(s)}function m(r){return 62===r?(e.consume(r),l.interrupt?t:C):n(r)}function g(t){return 47===t?(e.consume(t),b):58===t||95===t||sR(t)?(e.consume(t),E):sG(t)?(e.consume(t),g):b(t)}function E(t){return 45===t||46===t||58===t||95===t||sL(t)?(e.consume(t),E):T(t)}function T(t){return 61===t?(e.consume(t),v):sG(t)?(e.consume(t),T):g(t)}function v(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),o=t,y):sG(t)?(e.consume(t),v):function t(n){return null===n||34===n||39===n||47===n||60===n||61===n||62===n||96===n||sU(n)?T(n):(e.consume(n),t)}(t)}function y(t){return t===o?(e.consume(t),o=null,A):null===t||sH(t)?n(t):(e.consume(t),y)}function A(e){return 47===e||62===e||sG(e)?g(e):n(e)}function b(t){return 62===t?(e.consume(t),_):n(t)}function _(t){return null===t||sH(t)?C(t):sG(t)?(e.consume(t),_):n(t)}function C(t){return 45===t&&2===r?(e.consume(t),k):60===t&&1===r?(e.consume(t),w):62===t&&4===r?(e.consume(t),L):63===t&&3===r?(e.consume(t),R):93===t&&5===r?(e.consume(t),O):sH(t)&&(6===r||7===r)?(e.exit("htmlFlowData"),e.check(lL,D,S)(t)):null===t||sH(t)?(e.exit("htmlFlowData"),S(t)):(e.consume(t),C)}function S(t){return e.check(lD,I,D)(t)}function I(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),x}function x(t){return null===t||sH(t)?S(t):(e.enter("htmlFlowData"),C(t))}function k(t){return 45===t?(e.consume(t),R):C(t)}function w(t){return 47===t?(e.consume(t),a="",N):C(t)}function N(t){if(62===t){let n=a.toLowerCase();return lR.includes(n)?(e.consume(t),L):C(t)}return sR(t)&&a.length<8?(e.consume(t),a+=String.fromCharCode(t),N):C(t)}function O(t){return 93===t?(e.consume(t),R):C(t)}function R(t){return 62===t?(e.consume(t),L):45===t&&2===r?(e.consume(t),R):C(t)}function L(t){return null===t||sH(t)?(e.exit("htmlFlowData"),D(t)):(e.consume(t),L)}function D(n){return e.exit("htmlFlow"),t(n)}},resolveTo:function(e){let t=e.length;for(;t--&&("enter"!==e[t][0]||"htmlFlow"!==e[t][1].type););return t>1&&"linePrefix"===e[t-2][1].type&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e},concrete:!0},61:lN,95:lT,96:lP,126:lP},l0={38:lH,92:lU},l1={[-5]:lG,[-4]:lG,[-3]:lG,33:lV,38:lH,42:lY,60:[{name:"autolink",tokenize:function(e,t,n){let r=0;return function(t){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(t),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),i};function i(t){return sR(t)?(e.consume(t),a):64===t?n(t):o(t)}function a(t){return 43===t||45===t||46===t||sL(t)?(r=1,function t(n){return 58===n?(e.consume(n),r=0,s):(43===n||45===n||46===n||sL(n))&&r++<32?(e.consume(n),t):(r=0,o(n))}(t)):o(t)}function s(r){return 62===r?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(r),e.exit("autolinkMarker"),e.exit("autolink"),t):null===r||32===r||60===r||sM(r)?n(r):(e.consume(r),s)}function o(t){return 64===t?(e.consume(t),l):sD(t)?(e.consume(t),o):n(t)}function l(i){return sL(i)?function i(a){return 46===a?(e.consume(a),r=0,l):62===a?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(a),e.exit("autolinkMarker"),e.exit("autolink"),t):function t(a){if((45===a||sL(a))&&r++<63){let n=45===a?t:i;return e.consume(a),n}return n(a)}(a)}(i):n(i)}}},{name:"htmlText",tokenize:function(e,t,n){let r,i,a;let s=this;return function(t){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(t),o};function o(t){return 33===t?(e.consume(t),l):47===t?(e.consume(t),y):63===t?(e.consume(t),T):sR(t)?(e.consume(t),b):n(t)}function l(t){return 45===t?(e.consume(t),c):91===t?(e.consume(t),i=0,p):sR(t)?(e.consume(t),E):n(t)}function c(t){return 45===t?(e.consume(t),h):n(t)}function u(t){return null===t?n(t):45===t?(e.consume(t),d):sH(t)?(a=u,N(t)):(e.consume(t),u)}function d(t){return 45===t?(e.consume(t),h):u(t)}function h(e){return 62===e?w(e):45===e?d(e):u(e)}function p(t){let r="CDATA[";return t===r.charCodeAt(i++)?(e.consume(t),i===r.length?f:p):n(t)}function f(t){return null===t?n(t):93===t?(e.consume(t),m):sH(t)?(a=f,N(t)):(e.consume(t),f)}function m(t){return 93===t?(e.consume(t),g):f(t)}function g(t){return 62===t?w(t):93===t?(e.consume(t),g):f(t)}function E(t){return null===t||62===t?w(t):sH(t)?(a=E,N(t)):(e.consume(t),E)}function T(t){return null===t?n(t):63===t?(e.consume(t),v):sH(t)?(a=T,N(t)):(e.consume(t),T)}function v(e){return 62===e?w(e):T(e)}function y(t){return sR(t)?(e.consume(t),A):n(t)}function A(t){return 45===t||sL(t)?(e.consume(t),A):function t(n){return sH(n)?(a=t,N(n)):sG(n)?(e.consume(n),t):w(n)}(t)}function b(t){return 45===t||sL(t)?(e.consume(t),b):47===t||62===t||sU(t)?_(t):n(t)}function _(t){return 47===t?(e.consume(t),w):58===t||95===t||sR(t)?(e.consume(t),C):sH(t)?(a=_,N(t)):sG(t)?(e.consume(t),_):w(t)}function C(t){return 45===t||46===t||58===t||95===t||sL(t)?(e.consume(t),C):function t(n){return 61===n?(e.consume(n),S):sH(n)?(a=t,N(n)):sG(n)?(e.consume(n),t):_(n)}(t)}function S(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),r=t,I):sH(t)?(a=S,N(t)):sG(t)?(e.consume(t),S):(e.consume(t),x)}function I(t){return t===r?(e.consume(t),r=void 0,k):null===t?n(t):sH(t)?(a=I,N(t)):(e.consume(t),I)}function x(t){return null===t||34===t||39===t||60===t||61===t||96===t?n(t):47===t||62===t||sU(t)?_(t):(e.consume(t),x)}function k(e){return 47===e||62===e||sU(e)?_(e):n(e)}function w(r){return 62===r?(e.consume(r),e.exit("htmlTextData"),e.exit("htmlText"),t):n(r)}function N(t){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),O}function O(t){return sG(t)?oV(e,R,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):R(t)}function R(t){return e.enter("htmlTextData"),a(t)}}}],91:lQ,92:[{name:"hardBreakEscape",tokenize:function(e,t,n){return function(t){return e.enter("hardBreakEscape"),e.consume(t),r};function r(r){return sH(r)?(e.exit("hardBreakEscape"),t(r)):n(r)}}},lU],93:lz,95:lY,96:{name:"codeText",tokenize:function(e,t,n){let r,i,a=0;return function(t){return e.enter("codeText"),e.enter("codeTextSequence"),function t(n){return 96===n?(e.consume(n),a++,t):(e.exit("codeTextSequence"),s(n))}(t)};function s(l){return null===l?n(l):32===l?(e.enter("space"),e.consume(l),e.exit("space"),s):96===l?(i=e.enter("codeTextSequence"),r=0,function n(s){return 96===s?(e.consume(s),r++,n):r===a?(e.exit("codeTextSequence"),e.exit("codeText"),t(s)):(i.type="codeTextData",o(s))}(l)):sH(l)?(e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),s):(e.enter("codeTextData"),o(l))}function o(t){return null===t||32===t||96===t||sH(t)?(e.exit("codeTextData"),s(t)):(e.consume(t),o)}},resolve:function(e){let t,n,r=e.length-4,i=3;if(("lineEnding"===e[3][1].type||"space"===e[i][1].type)&&("lineEnding"===e[r][1].type||"space"===e[r][1].type)){for(t=i;++t<r;)if("codeTextData"===e[t][1].type){e[i][1].type="codeTextPadding",e[r][1].type="codeTextPadding",i+=2,r-=2;break}}for(t=i-1,r++;++t<=r;)void 0===n?t!==r&&"lineEnding"!==e[t][1].type&&(n=t):(t===r||"lineEnding"===e[t][1].type)&&(e[n][1].type="codeTextData",t!==n+2&&(e[n][1].end=e[t-1][1].end,e.splice(n+2,t-n-2),r-=t-n-2,t=n+2),n=void 0);return e},previous:function(e){return 96!==e||"characterEscape"===this.events[this.events.length-1][1].type}}},l2={null:[lY,lh]},l3={null:[42,95]},l4={null:[]},l5=/[\0\t\n\r]/g;function l6(e,t){let n=Number.parseInt(e,t);return n<9||11===n||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(65535&n)==65535||(65535&n)==65534||n>1114111?"":String.fromCodePoint(n)}let l8=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function l9(e,t,n){if(t)return t;if(35===n.charCodeAt(0)){let e=n.charCodeAt(1),t=120===e||88===e;return l6(n.slice(t?2:1),t?16:10)}return lB(n)||e}function l7(e){return e&&"object"==typeof e?"position"in e||"type"in e?ct(e.position):"start"in e||"end"in e?ct(e):"line"in e||"column"in e?ce(e):"":""}function ce(e){return cn(e&&e.line)+":"+cn(e&&e.column)}function ct(e){return ce(e&&e.start)+"-"+ce(e&&e.end)}function cn(e){return e&&"number"==typeof e?e:1}let cr={}.hasOwnProperty;function ci(e){return{line:e.line,column:e.column,offset:e.offset}}function ca(e,t){if(e)throw Error("Cannot close `"+e.type+"` ("+l7({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+l7({start:t.start,end:t.end})+") is open");throw Error("Cannot close document, a token (`"+t.type+"`, "+l7({start:t.start,end:t.end})+") is still open")}function cs(e){let t=this;t.parser=function(n){var r,i;let a,s,o,l;return"string"!=typeof(r={...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})&&(i=r,r=void 0),(function(e){let t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:r(E),autolinkProtocol:c,autolinkEmail:c,atxHeading:r(f),blockQuote:r(function(){return{type:"blockquote",children:[]}}),characterEscape:c,characterReference:c,codeFenced:r(p),codeFencedFenceInfo:i,codeFencedFenceMeta:i,codeIndented:r(p,i),codeText:r(function(){return{type:"inlineCode",value:""}},i),codeTextData:c,data:c,codeFlowValue:c,definition:r(function(){return{type:"definition",identifier:"",label:null,title:null,url:""}}),definitionDestinationString:i,definitionLabelString:i,definitionTitleString:i,emphasis:r(function(){return{type:"emphasis",children:[]}}),hardBreakEscape:r(m),hardBreakTrailing:r(m),htmlFlow:r(g,i),htmlFlowData:c,htmlText:r(g,i),htmlTextData:c,image:r(function(){return{type:"image",title:null,url:"",alt:null}}),label:i,link:r(E),listItem:r(function(e){return{type:"listItem",spread:e._spread,checked:null,children:[]}}),listItemValue:function(e){this.data.expectingFirstListItemValue&&(this.stack[this.stack.length-2].start=Number.parseInt(this.sliceSerialize(e),10),this.data.expectingFirstListItemValue=void 0)},listOrdered:r(T,function(){this.data.expectingFirstListItemValue=!0}),listUnordered:r(T),paragraph:r(function(){return{type:"paragraph",children:[]}}),reference:function(){this.data.referenceType="collapsed"},referenceString:i,resourceDestinationString:i,resourceTitleString:i,setextHeading:r(f),strong:r(function(){return{type:"strong",children:[]}}),thematicBreak:r(function(){return{type:"thematicBreak"}})},exit:{atxHeading:s(),atxHeadingSequence:function(e){let t=this.stack[this.stack.length-1];if(!t.depth){let n=this.sliceSerialize(e).length;t.depth=n}},autolink:s(),autolinkEmail:function(e){u.call(this,e),this.stack[this.stack.length-1].url="mailto:"+this.sliceSerialize(e)},autolinkProtocol:function(e){u.call(this,e),this.stack[this.stack.length-1].url=this.sliceSerialize(e)},blockQuote:s(),characterEscapeValue:u,characterReferenceMarkerHexadecimal:h,characterReferenceMarkerNumeric:h,characterReferenceValue:function(e){let t;let n=this.sliceSerialize(e),r=this.data.characterReferenceType;r?(t=l6(n,"characterReferenceMarkerNumeric"===r?10:16),this.data.characterReferenceType=void 0):t=lB(n);let i=this.stack.pop();i.value+=t,i.position.end=ci(e.end)},codeFenced:s(function(){let e=this.resume();this.stack[this.stack.length-1].value=e.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}),codeFencedFence:function(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)},codeFencedFenceInfo:function(){let e=this.resume();this.stack[this.stack.length-1].lang=e},codeFencedFenceMeta:function(){let e=this.resume();this.stack[this.stack.length-1].meta=e},codeFlowValue:u,codeIndented:s(function(){let e=this.resume();this.stack[this.stack.length-1].value=e.replace(/(\r?\n|\r)$/g,"")}),codeText:s(function(){let e=this.resume();this.stack[this.stack.length-1].value=e}),codeTextData:u,data:u,definition:s(),definitionDestinationString:function(){let e=this.resume();this.stack[this.stack.length-1].url=e},definitionLabelString:function(e){let t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=s3(this.sliceSerialize(e)).toLowerCase()},definitionTitleString:function(){let e=this.resume();this.stack[this.stack.length-1].title=e},emphasis:s(),hardBreakEscape:s(d),hardBreakTrailing:s(d),htmlFlow:s(function(){let e=this.resume();this.stack[this.stack.length-1].value=e}),htmlFlowData:u,htmlText:s(function(){let e=this.resume();this.stack[this.stack.length-1].value=e}),htmlTextData:u,image:s(function(){let e=this.stack[this.stack.length-1];if(this.data.inReference){let t=this.data.referenceType||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;this.data.referenceType=void 0}),label:function(){let e=this.stack[this.stack.length-1],t=this.resume(),n=this.stack[this.stack.length-1];if(this.data.inReference=!0,"link"===n.type){let t=e.children;n.children=t}else n.alt=t},labelText:function(e){let t=this.sliceSerialize(e),n=this.stack[this.stack.length-2];n.label=t.replace(l8,l9),n.identifier=s3(t).toLowerCase()},lineEnding:function(e){let n=this.stack[this.stack.length-1];if(this.data.atHardBreak){n.children[n.children.length-1].position.end=ci(e.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(n.type)&&(c.call(this,e),u.call(this,e))},link:s(function(){let e=this.stack[this.stack.length-1];if(this.data.inReference){let t=this.data.referenceType||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;this.data.referenceType=void 0}),listItem:s(),listOrdered:s(),listUnordered:s(),paragraph:s(),referenceString:function(e){let t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=s3(this.sliceSerialize(e)).toLowerCase(),this.data.referenceType="full"},resourceDestinationString:function(){let e=this.resume();this.stack[this.stack.length-1].url=e},resourceTitleString:function(){let e=this.resume();this.stack[this.stack.length-1].title=e},resource:function(){this.data.inReference=void 0},setextHeading:s(function(){this.data.setextHeadingSlurpLineEnding=void 0}),setextHeadingLineSequence:function(e){this.stack[this.stack.length-1].depth=61===this.sliceSerialize(e).codePointAt(0)?1:2},setextHeadingText:function(){this.data.setextHeadingSlurpLineEnding=!0},strong:s(),thematicBreak:s()}};(function e(t,n){let r=-1;for(;++r<n.length;){let i=n[r];Array.isArray(i)?e(t,i):function(e,t){let n;for(n in t)if(cr.call(t,n))switch(n){case"canContainEols":{let r=t[n];r&&e[n].push(...r);break}case"transforms":{let r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{let r=t[n];r&&Object.assign(e[n],r)}}}(t,i)}})(t,(e||{}).mdastExtensions||[]);let n={};return function(e){let r={type:"root",children:[]},s={stack:[r],tokenStack:[],config:t,enter:a,exit:o,buffer:i,resume:l,data:n},c=[],u=-1;for(;++u<e.length;)("listOrdered"===e[u][1].type||"listUnordered"===e[u][1].type)&&("enter"===e[u][0]?c.push(u):u=function(e,t,n){let r,i,a,s,o=t-1,l=-1,c=!1;for(;++o<=n;){let t=e[o];switch(t[1].type){case"listUnordered":case"listOrdered":case"blockQuote":"enter"===t[0]?l++:l--,s=void 0;break;case"lineEndingBlank":"enter"===t[0]&&(!r||s||l||a||(a=o),s=void 0);break;case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:s=void 0}if(!l&&"enter"===t[0]&&"listItemPrefix"===t[1].type||-1===l&&"exit"===t[0]&&("listUnordered"===t[1].type||"listOrdered"===t[1].type)){if(r){let s=o;for(i=void 0;s--;){let t=e[s];if("lineEnding"===t[1].type||"lineEndingBlank"===t[1].type){if("exit"===t[0])continue;i&&(e[i][1].type="lineEndingBlank",c=!0),t[1].type="lineEnding",i=s}else if("linePrefix"===t[1].type||"blockQuotePrefix"===t[1].type||"blockQuotePrefixWhitespace"===t[1].type||"blockQuoteMarker"===t[1].type||"listItemIndent"===t[1].type);else break}a&&(!i||a<i)&&(r._spread=!0),r.end=Object.assign({},i?e[i][1].start:t[1].end),e.splice(i||o,0,["exit",r,t[2]]),o++,n++}if("listItemPrefix"===t[1].type){let i={type:"listItem",_spread:!1,start:Object.assign({},t[1].start),end:void 0};r=i,e.splice(o,0,["enter",i,t[2]]),o++,n++,a=void 0,s=!0}}}return e[t][1]._spread=c,n}(e,c.pop(),u));for(u=-1;++u<e.length;){let n=t[e[u][0]];cr.call(n,e[u][1].type)&&n[e[u][1].type].call(Object.assign({sliceSerialize:e[u][2].sliceSerialize},s),e[u][1])}if(s.tokenStack.length>0){let e=s.tokenStack[s.tokenStack.length-1];(e[1]||ca).call(s,void 0,e[0])}for(r.position={start:ci(e.length>0?e[0][1].start:{line:1,column:1,offset:0}),end:ci(e.length>0?e[e.length-2][1].end:{line:1,column:1,offset:0})},u=-1;++u<t.transforms.length;)r=t.transforms[u](r)||r;return r};function r(e,t){return function(n){a.call(this,e(n),n),t&&t.call(this,n)}}function i(){this.stack.push({type:"fragment",children:[]})}function a(e,t,n){this.stack[this.stack.length-1].children.push(e),this.stack.push(e),this.tokenStack.push([t,n]),e.position={start:ci(t.start),end:void 0}}function s(e){return function(t){e&&e.call(this,t),o.call(this,t)}}function o(e,t){let n=this.stack.pop(),r=this.tokenStack.pop();if(r)r[0].type!==e.type&&(t?t.call(this,e,r[0]):(r[1]||ca).call(this,e,r[0]));else throw Error("Cannot close `"+e.type+"` ("+l7({start:e.start,end:e.end})+"): its not open");n.position.end=ci(e.end)}function l(){return oh(this.stack.pop())}function c(e){let t=this.stack[this.stack.length-1].children,n=t[t.length-1];n&&"text"===n.type||((n={type:"text",value:""}).position={start:ci(e.start),end:void 0},t.push(n)),this.stack.push(n)}function u(e){let t=this.stack.pop();t.value+=this.sliceSerialize(e),t.position.end=ci(e.end)}function d(){this.data.atHardBreak=!0}function h(e){this.data.characterReferenceType=e.type}function p(){return{type:"code",lang:null,meta:null,value:""}}function f(){return{type:"heading",depth:0,children:[]}}function m(){return{type:"break"}}function g(){return{type:"html",value:""}}function E(){return{type:"link",title:null,url:"",children:[]}}function T(e){return{type:"list",ordered:"listOrdered"===e.type,start:null,spread:e._spread,children:[]}}})(i)(function(e){for(;!la(e););return e}((function(e){let t={defined:[],lazy:{},constructs:oN([K,...(e||{}).extensions||[]]),content:n(ls),document:n(lo),flow:n(ld),string:n(lp),text:n(lf)};return t;function n(e){return function(n){return function(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1}),i={},a=[],s=[],o=[],l={consume:function(e){sH(e)?(r.line++,r.column=1,r.offset+=-3===e?2:1,g()):-1!==e&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===s[r._index].length&&(r._bufferIndex=-1,r._index++)),c.previous=e},enter:function(e,t){let n=t||{};return n.type=e,n.start=h(),c.events.push(["enter",n,c]),o.push(n),n},exit:function(e){let t=o.pop();return t.end=h(),c.events.push(["exit",t,c]),t},attempt:f(function(e,t){m(e,t.from)}),check:f(p),interrupt:f(p,{interrupt:!0})},c={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:d,sliceSerialize:function(e,t){return function(e,t){let n,r=-1,i=[];for(;++r<e.length;){let a;let s=e[r];if("string"==typeof s)a=s;else switch(s){case -5:a="\r";break;case -4:a="\n";break;case -3:a="\r\n";break;case -2:a=t?" ":"	";break;case -1:if(!t&&n)continue;a=" ";break;default:a=String.fromCharCode(s)}n=-2===s,i.push(a)}return i.join("")}(d(e),t)},now:h,defineSkip:function(e){i[e.line]=e.column,g()},write:function(e){return(s=ok(s,e),function(){let e;for(;r._index<s.length;){let n=s[r._index];if("string"==typeof n)for(e=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===e&&r._bufferIndex<n.length;){var t;t=n.charCodeAt(r._bufferIndex),u=u(t)}else u=u(n)}}(),null!==s[s.length-1])?[]:(m(t,0),c.events=o2(a,c.events,c),c.events)}},u=t.tokenize.call(c,l);return t.resolveAll&&a.push(t),c;function d(e){return function(e,t){let n;let r=t.start._index,i=t.start._bufferIndex,a=t.end._index,s=t.end._bufferIndex;if(r===a)n=[e[r].slice(i,s)];else{if(n=e.slice(r,a),i>-1){let e=n[0];"string"==typeof e?n[0]=e.slice(i):n.shift()}s>0&&n.push(e[a].slice(0,s))}return n}(s,e)}function h(){let{line:e,column:t,offset:n,_index:i,_bufferIndex:a}=r;return{line:e,column:t,offset:n,_index:i,_bufferIndex:a}}function p(e,t){t.restore()}function f(e,t){return function(n,i,a){let s,u,d,p;return Array.isArray(n)?f(n):"tokenize"in n?f([n]):function(e){let t=null!==e&&n[e],r=null!==e&&n.null;return f([...Array.isArray(t)?t:t?[t]:[],...Array.isArray(r)?r:r?[r]:[]])(e)};function f(e){return(s=e,u=0,0===e.length)?a:m(e[u])}function m(e){return function(n){return(p=function(){let e=h(),t=c.previous,n=c.currentConstruct,i=c.events.length,a=Array.from(o);return{restore:function(){r=e,c.previous=t,c.currentConstruct=n,c.events.length=i,o=a,g()},from:i}}(),d=e,e.partial||(c.currentConstruct=e),e.name&&c.parser.constructs.disable.null.includes(e.name))?T(n):e.tokenize.call(t?Object.assign(Object.create(c),t):c,l,E,T)(n)}}function E(t){return e(d,p),i}function T(e){return(p.restore(),++u<s.length)?m(s[u]):a}}}function m(e,t){e.resolveAll&&!a.includes(e)&&a.push(e),e.resolve&&ox(c.events,t,c.events.length-t,e.resolve(c.events.slice(t),c)),e.resolveTo&&(c.events=e.resolveTo(c.events,c))}function g(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}(t,e,n)}}})(i).document().write((s=1,o="",l=!0,function(e,t,n){let r,i,c,u,d;let h=[];for(e=o+("string"==typeof e?e.toString():new TextDecoder(t||void 0).decode(e)),c=0,o="",l&&(65279===e.charCodeAt(0)&&c++,l=void 0);c<e.length;){if(l5.lastIndex=c,u=(r=l5.exec(e))&&void 0!==r.index?r.index:e.length,d=e.charCodeAt(u),!r){o=e.slice(c);break}if(10===d&&c===u&&a)h.push(-3),a=void 0;else switch(a&&(h.push(-5),a=void 0),c<u&&(h.push(e.slice(c,u)),s+=u-c),d){case 0:h.push(65533),s++;break;case 9:for(i=4*Math.ceil(s/4),h.push(-2);s++<i;)h.push(-1);break;case 10:h.push(-4),s=1;break;default:a=!0,s=1}c=u+1}return n&&(a&&h.push(-5),o&&h.push(o),h.push(null)),h})(n,r,!0))))}}function co(e){let t=[],n=-1,r=0,i=0;for(;++n<e.length;){let a=e.charCodeAt(n),s="";if(37===a&&sL(e.charCodeAt(n+1))&&sL(e.charCodeAt(n+2)))i=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(s=String.fromCharCode(a));else if(a>55295&&a<57344){let t=e.charCodeAt(n+1);a<56320&&t>56319&&t<57344?(s=String.fromCharCode(a,t),i=1):s=""}else s=String.fromCharCode(a);s&&(t.push(e.slice(r,n),encodeURIComponent(s)),r=n+i+1,s=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function cl(e,t){let n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function cc(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function cu(e,t){let n=t.referenceType,r="]";if("collapsed"===n?r+="[]":"full"===n&&(r+="["+(t.label||t.identifier)+"]"),"imageReference"===t.type)return[{type:"text",value:"!["+t.alt+r}];let i=e.all(t),a=i[0];a&&"text"===a.type?a.value="["+a.value:i.unshift({type:"text",value:"["});let s=i[i.length-1];return s&&"text"===s.type?s.value+=r:i.push({type:"text",value:r}),i}function cd(e){let t=e.spread;return null==t?e.children.length>1:t}function ch(e,t,n){let r=0,i=e.length;if(t){let t=e.codePointAt(r);for(;9===t||32===t;)r++,t=e.codePointAt(r)}if(n){let t=e.codePointAt(i-1);for(;9===t||32===t;)i--,t=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}let cp={blockquote:function(e,t){let n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)},break:function(e,t){let n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:"\n"}]},code:function(e,t){let n=t.value?t.value+"\n":"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i={type:"element",tagName:"pre",properties:{},children:[i=e.applyData(t,i)]},e.patch(t,i),i},delete:function(e,t){let n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},emphasis:function(e,t){let n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},footnoteReference:function(e,t){let n;let r="string"==typeof e.options.clobberPrefix?e.options.clobberPrefix:"user-content-",i=String(t.identifier).toUpperCase(),a=co(i.toLowerCase()),s=e.footnoteOrder.indexOf(i),o=e.footnoteCounts.get(i);void 0===o?(o=0,e.footnoteOrder.push(i),n=e.footnoteOrder.length):n=s+1,o+=1,e.footnoteCounts.set(i,o);let l={type:"element",tagName:"a",properties:{href:"#"+r+"fn-"+a,id:r+"fnref-"+a+(o>1?"-"+o:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(n)}]};e.patch(t,l);let c={type:"element",tagName:"sup",properties:{},children:[l]};return e.patch(t,c),e.applyData(t,c)},heading:function(e,t){let n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},html:function(e,t){if(e.options.allowDangerousHtml){let n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}},imageReference:function(e,t){let n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return cu(e,t);let i={src:co(r.url||""),alt:t.alt};null!==r.title&&void 0!==r.title&&(i.title=r.title);let a={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,a),e.applyData(t,a)},image:function(e,t){let n={src:co(t.url)};null!==t.alt&&void 0!==t.alt&&(n.alt=t.alt),null!==t.title&&void 0!==t.title&&(n.title=t.title);let r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)},inlineCode:function(e,t){let n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);let r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)},linkReference:function(e,t){let n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return cu(e,t);let i={href:co(r.url||"")};null!==r.title&&void 0!==r.title&&(i.title=r.title);let a={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,a),e.applyData(t,a)},link:function(e,t){let n={href:co(t.url)};null!==t.title&&void 0!==t.title&&(n.title=t.title);let r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)},listItem:function(e,t,n){let r=e.all(t),i=n?function(e){let t=!1;if("list"===e.type){t=e.spread||!1;let n=e.children,r=-1;for(;!t&&++r<n.length;)t=cd(n[r])}return t}(n):cd(t),a={},s=[];if("boolean"==typeof t.checked){let e;let n=r[0];n&&"element"===n.type&&"p"===n.tagName?e=n:(e={type:"element",tagName:"p",properties:{},children:[]},r.unshift(e)),e.children.length>0&&e.children.unshift({type:"text",value:" "}),e.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let o=-1;for(;++o<r.length;){let e=r[o];(i||0!==o||"element"!==e.type||"p"!==e.tagName)&&s.push({type:"text",value:"\n"}),"element"!==e.type||"p"!==e.tagName||i?s.push(e):s.push(...e.children)}let l=r[r.length-1];l&&(i||"element"!==l.type||"p"!==l.tagName)&&s.push({type:"text",value:"\n"});let c={type:"element",tagName:"li",properties:a,children:s};return e.patch(t,c),e.applyData(t,c)},list:function(e,t){let n={},r=e.all(t),i=-1;for("number"==typeof t.start&&1!==t.start&&(n.start=t.start);++i<r.length;){let e=r[i];if("element"===e.type&&"li"===e.tagName&&e.properties&&Array.isArray(e.properties.className)&&e.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}let a={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,a),e.applyData(t,a)},paragraph:function(e,t){let n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},root:function(e,t){let n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)},strong:function(e,t){let n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},table:function(e,t){let n=e.all(t),r=n.shift(),i=[];if(r){let n={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],n),i.push(n)}if(n.length>0){let r={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=aN(t.children[1]),s=aw(t.children[t.children.length-1]);a&&s&&(r.position={start:a,end:s}),i.push(r)}let a={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,a),e.applyData(t,a)},tableCell:function(e,t){let n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},tableRow:function(e,t,n){let r=n?n.children:void 0,i=0===(r?r.indexOf(t):1)?"th":"td",a=n&&"table"===n.type?n.align:void 0,s=a?a.length:t.children.length,o=-1,l=[];for(;++o<s;){let n=t.children[o],r={},s=a?a[o]:void 0;s&&(r.align=s);let c={type:"element",tagName:i,properties:r,children:[]};n&&(c.children=e.all(n),e.patch(n,c),c=e.applyData(n,c)),l.push(c)}let c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)},text:function(e,t){let n={type:"text",value:function(e){let t=String(e),n=/\r?\n|\r/g,r=n.exec(t),i=0,a=[];for(;r;)a.push(ch(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return a.push(ch(t.slice(i),i>0,!1)),a.join("")}(String(t.value))};return e.patch(t,n),e.applyData(t,n)},thematicBreak:function(e,t){let n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)},toml:cf,yaml:cf,definition:cf,footnoteDefinition:cf};function cf(){}let cm={}.hasOwnProperty,cg={};function cE(e,t){e.position&&(t.position=function(e){let t=aN(e),n=aw(e);if(t&&n)return{start:t,end:n}}(e))}function cT(e,t){let n=t;if(e&&e.data){let t=e.data.hName,r=e.data.hChildren,i=e.data.hProperties;"string"==typeof t&&("element"===n.type?n.tagName=t:n={type:"element",tagName:t,properties:{},children:"children"in n?n.children:[n]}),"element"===n.type&&i&&Object.assign(n.properties,nX(i)),"children"in n&&n.children&&null!=r&&(n.children=r)}return n}function cv(e,t){let n=[],r=-1;for(t&&n.push({type:"text",value:"\n"});++r<e.length;)r&&n.push({type:"text",value:"\n"}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:"\n"}),n}function cy(e){let t=0,n=e.charCodeAt(t);for(;9===n||32===n;)t++,n=e.charCodeAt(t);return e.slice(t)}function cA(e,t){let n=function(e,t){let n=t||cg,r=new Map,i=new Map,a={all:function(e){let t=[];if("children"in e){let n=e.children,r=-1;for(;++r<n.length;){let i=a.one(n[r],e);if(i){if(r&&"break"===n[r-1].type&&(Array.isArray(i)||"text"!==i.type||(i.value=cy(i.value)),!Array.isArray(i)&&"element"===i.type)){let e=i.children[0];e&&"text"===e.type&&(e.value=cy(e.value))}Array.isArray(i)?t.push(...i):t.push(i)}}}return t},applyData:cT,definitionById:r,footnoteById:i,footnoteCounts:new Map,footnoteOrder:[],handlers:{...cp,...n.handlers},one:function(e,t){let n=e.type,r=a.handlers[n];if(cm.call(a.handlers,n)&&r)return r(a,e,t);if(a.options.passThrough&&a.options.passThrough.includes(n)){if("children"in e){let{children:t,...n}=e,r=nX(n);return r.children=a.all(e),r}return nX(e)}return(a.options.unknownHandler||function(e,t){let n=t.data||{},r="value"in t&&!(cm.call(n,"hProperties")||cm.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)})(a,e,t)},options:n,patch:cE,wrap:cv};return aF(e,function(e){if("definition"===e.type||"footnoteDefinition"===e.type){let t="definition"===e.type?r:i,n=String(e.identifier).toUpperCase();t.has(n)||t.set(n,e)}}),a}(e,t),r=n.one(e,void 0),i=function(e){let t="string"==typeof e.options.clobberPrefix?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||cl,r=e.options.footnoteBackLabel||cc,i=e.options.footnoteLabel||"Footnotes",a=e.options.footnoteLabelTagName||"h2",s=e.options.footnoteLabelProperties||{className:["sr-only"]},o=[],l=-1;for(;++l<e.footnoteOrder.length;){let i=e.footnoteById.get(e.footnoteOrder[l]);if(!i)continue;let a=e.all(i),s=String(i.identifier).toUpperCase(),c=co(s.toLowerCase()),u=0,d=[],h=e.footnoteCounts.get(s);for(;void 0!==h&&++u<=h;){d.length>0&&d.push({type:"text",value:" "});let e="string"==typeof n?n:n(l,u);"string"==typeof e&&(e={type:"text",value:e}),d.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+c+(u>1?"-"+u:""),dataFootnoteBackref:"",ariaLabel:"string"==typeof r?r:r(l,u),className:["data-footnote-backref"]},children:Array.isArray(e)?e:[e]})}let p=a[a.length-1];if(p&&"element"===p.type&&"p"===p.tagName){let e=p.children[p.children.length-1];e&&"text"===e.type?e.value+=" ":p.children.push({type:"text",value:" "}),p.children.push(...d)}else a.push(...d);let f={type:"element",tagName:"li",properties:{id:t+"fn-"+c},children:e.wrap(a,!0)};e.patch(i,f),o.push(f)}if(0!==o.length)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:{...nX(s),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:"\n"},{type:"element",tagName:"ol",properties:{},children:e.wrap(o,!0)},{type:"text",value:"\n"}]}}(n),a=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&a.children.push({type:"text",value:"\n"},i),a}function cb(e,t){return e&&"run"in e?async function(n,r){let i=cA(n,{file:r,...t});await e.run(i,r)}:function(n,r){return cA(n,{file:r,...t||e})}}function c_(e){if(e)throw e}var cC=n(4470);function cS(e){if("object"!=typeof e||null===e)return!1;let t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}class cI extends Error{constructor(e,t,n){super(),"string"==typeof t&&(n=t,t=void 0);let r="",i={},a=!1;if(t&&(i="line"in t&&"column"in t?{place:t}:"start"in t&&"end"in t?{place:t}:"type"in t?{ancestors:[t],place:t.position}:{...t}),"string"==typeof e?r=e:!i.cause&&e&&(a=!0,r=e.message,i.cause=e),!i.ruleId&&!i.source&&"string"==typeof n){let e=n.indexOf(":");-1===e?i.ruleId=n:(i.source=n.slice(0,e),i.ruleId=n.slice(e+1))}if(!i.place&&i.ancestors&&i.ancestors){let e=i.ancestors[i.ancestors.length-1];e&&(i.place=e.position)}let s=i.place&&"start"in i.place?i.place.start:i.place;this.ancestors=i.ancestors||void 0,this.cause=i.cause||void 0,this.column=s?s.column:void 0,this.fatal=void 0,this.file,this.message=r,this.line=s?s.line:void 0,this.name=l7(i.place)||"1:1",this.place=i.place||void 0,this.reason=this.message,this.ruleId=i.ruleId||void 0,this.source=i.source||void 0,this.stack=a&&i.cause&&"string"==typeof i.cause.stack?i.cause.stack:"",this.actual,this.expected,this.note,this.url}}cI.prototype.file="",cI.prototype.name="",cI.prototype.reason="",cI.prototype.message="",cI.prototype.stack="",cI.prototype.column=void 0,cI.prototype.line=void 0,cI.prototype.ancestors=void 0,cI.prototype.cause=void 0,cI.prototype.fatal=void 0,cI.prototype.place=void 0,cI.prototype.ruleId=void 0,cI.prototype.source=void 0;let cx={basename:function(e,t){let n;if(void 0!==t&&"string"!=typeof t)throw TypeError('"ext" argument must be a string');ck(e);let r=0,i=-1,a=e.length;if(void 0===t||0===t.length||t.length>e.length){for(;a--;)if(47===e.codePointAt(a)){if(n){r=a+1;break}}else i<0&&(n=!0,i=a+1);return i<0?"":e.slice(r,i)}if(t===e)return"";let s=-1,o=t.length-1;for(;a--;)if(47===e.codePointAt(a)){if(n){r=a+1;break}}else s<0&&(n=!0,s=a+1),o>-1&&(e.codePointAt(a)===t.codePointAt(o--)?o<0&&(i=a):(o=-1,i=s));return r===i?i=s:i<0&&(i=e.length),e.slice(r,i)},dirname:function(e){let t;if(ck(e),0===e.length)return".";let n=-1,r=e.length;for(;--r;)if(47===e.codePointAt(r)){if(t){n=r;break}}else t||(t=!0);return n<0?47===e.codePointAt(0)?"/":".":1===n&&47===e.codePointAt(0)?"//":e.slice(0,n)},extname:function(e){let t;ck(e);let n=e.length,r=-1,i=0,a=-1,s=0;for(;n--;){let o=e.codePointAt(n);if(47===o){if(t){i=n+1;break}continue}r<0&&(t=!0,r=n+1),46===o?a<0?a=n:1!==s&&(s=1):a>-1&&(s=-1)}return a<0||r<0||0===s||1===s&&a===r-1&&a===i+1?"":e.slice(a,r)},join:function(...e){let t,n=-1;for(;++n<e.length;)ck(e[n]),e[n]&&(t=void 0===t?e[n]:t+"/"+e[n]);return void 0===t?".":function(e){ck(e);let t=47===e.codePointAt(0),n=function(e,t){let n,r,i="",a=0,s=-1,o=0,l=-1;for(;++l<=e.length;){if(l<e.length)n=e.codePointAt(l);else if(47===n)break;else n=47;if(47===n){if(s===l-1||1===o);else if(s!==l-1&&2===o){if(i.length<2||2!==a||46!==i.codePointAt(i.length-1)||46!==i.codePointAt(i.length-2)){if(i.length>2){if((r=i.lastIndexOf("/"))!==i.length-1){r<0?(i="",a=0):a=(i=i.slice(0,r)).length-1-i.lastIndexOf("/"),s=l,o=0;continue}}else if(i.length>0){i="",a=0,s=l,o=0;continue}}t&&(i=i.length>0?i+"/..":"..",a=2)}else i.length>0?i+="/"+e.slice(s+1,l):i=e.slice(s+1,l),a=l-s-1;s=l,o=0}else 46===n&&o>-1?o++:o=-1}return i}(e,!t);return 0!==n.length||t||(n="."),n.length>0&&47===e.codePointAt(e.length-1)&&(n+="/"),t?"/"+n:n}(t)},sep:"/"};function ck(e){if("string"!=typeof e)throw TypeError("Path must be a string. Received "+JSON.stringify(e))}function cw(e){return!!(null!==e&&"object"==typeof e&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&void 0===e.auth)}let cN=["history","path","basename","stem","extname","dirname"];class cO{constructor(e){let t,n;t=e?cw(e)?{path:e}:"string"==typeof e||e&&"object"==typeof e&&"byteLength"in e&&"byteOffset"in e?{value:e}:e:{},this.cwd="/",this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<cN.length;){let e=cN[r];e in t&&void 0!==t[e]&&null!==t[e]&&(this[e]="history"===e?[...t[e]]:t[e])}for(n in t)cN.includes(n)||(this[n]=t[n])}get basename(){return"string"==typeof this.path?cx.basename(this.path):void 0}set basename(e){cL(e,"basename"),cR(e,"basename"),this.path=cx.join(this.dirname||"",e)}get dirname(){return"string"==typeof this.path?cx.dirname(this.path):void 0}set dirname(e){cD(this.basename,"dirname"),this.path=cx.join(e||"",this.basename)}get extname(){return"string"==typeof this.path?cx.extname(this.path):void 0}set extname(e){if(cR(e,"extname"),cD(this.dirname,"extname"),e){if(46!==e.codePointAt(0))throw Error("`extname` must start with `.`");if(e.includes(".",1))throw Error("`extname` cannot contain multiple dots")}this.path=cx.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){cw(e)&&(e=function(e){if("string"==typeof e)e=new URL(e);else if(!cw(e)){let t=TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if("file:"!==e.protocol){let e=TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return function(e){if(""!==e.hostname){let e=TypeError('File URL host must be "localhost" or empty on darwin');throw e.code="ERR_INVALID_FILE_URL_HOST",e}let t=e.pathname,n=-1;for(;++n<t.length;)if(37===t.codePointAt(n)&&50===t.codePointAt(n+1)){let e=t.codePointAt(n+2);if(70===e||102===e){let e=TypeError("File URL path must not include encoded / characters");throw e.code="ERR_INVALID_FILE_URL_PATH",e}}return decodeURIComponent(t)}(e)}(e)),cL(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return"string"==typeof this.path?cx.basename(this.path,this.extname):void 0}set stem(e){cL(e,"stem"),cR(e,"stem"),this.path=cx.join(this.dirname||"",e+(this.extname||""))}fail(e,t,n){let r=this.message(e,t,n);throw r.fatal=!0,r}info(e,t,n){let r=this.message(e,t,n);return r.fatal=void 0,r}message(e,t,n){let r=new cI(e,t,n);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}toString(e){return void 0===this.value?"":"string"==typeof this.value?this.value:new TextDecoder(e||void 0).decode(this.value)}}function cR(e,t){if(e&&e.includes(cx.sep))throw Error("`"+t+"` cannot be a path: did not expect `"+cx.sep+"`")}function cL(e,t){if(!e)throw Error("`"+t+"` cannot be empty")}function cD(e,t){if(!e)throw Error("Setting `"+t+"` requires `path` to be set too")}let cM=function(e){let t=this.constructor.prototype,n=t[e],r=function(){return n.apply(r,arguments)};for(let e of(Object.setPrototypeOf(r,t),Object.getOwnPropertyNames(n))){let t=Object.getOwnPropertyDescriptor(n,e);t&&Object.defineProperty(r,e,t)}return r},cP={}.hasOwnProperty;class cF extends cM{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=function(){let e=[],t={run:function(...t){let n=-1,r=t.pop();if("function"!=typeof r)throw TypeError("Expected function as last argument, not "+r);(function i(a,...s){let o=e[++n],l=-1;if(a){r(a);return}for(;++l<t.length;)(null===s[l]||void 0===s[l])&&(s[l]=t[l]);t=s,o?(function(e,t){let n;return function(...t){let a;let s=e.length>t.length;s&&t.push(r);try{a=e.apply(this,t)}catch(e){if(s&&n)throw e;return r(e)}s||(a&&a.then&&"function"==typeof a.then?a.then(i,r):a instanceof Error?r(a):i(a))};function r(e,...i){n||(n=!0,t(e,...i))}function i(e){r(null,e)}})(o,i)(...s):r(null,...s)})(null,...t)},use:function(n){if("function"!=typeof n)throw TypeError("Expected `middelware` to be a function, not "+n);return e.push(n),t}};return t}()}copy(){let e=new cF,t=-1;for(;++t<this.attachers.length;){let n=this.attachers[t];e.use(...n)}return e.data(cC(!0,{},this.namespace)),e}data(e,t){return"string"==typeof e?2==arguments.length?(cG("data",this.frozen),this.namespace[e]=t,this):cP.call(this.namespace,e)&&this.namespace[e]||void 0:e?(cG("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;for(;++this.freezeIndex<this.attachers.length;){let[e,...t]=this.attachers[this.freezeIndex];if(!1===t[0])continue;!0===t[0]&&(t[0]=void 0);let n=e.call(this,...t);"function"==typeof n&&this.transformers.use(n)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();let t=c$(e),n=this.parser||this.Parser;return cH("parse",n),n(String(t),t)}process(e,t){let n=this;return this.freeze(),cH("process",this.parser||this.Parser),cU("process",this.compiler||this.Compiler),t?r(void 0,t):new Promise(r);function r(r,i){let a=c$(e),s=n.parse(a);function o(e,n){e||!n?i(e):r?r(n):t(void 0,n)}n.run(s,a,function(e,t,r){if(e||!t||!r)return o(e);let i=n.stringify(t,r);"string"==typeof i||i&&"object"==typeof i&&"byteLength"in i&&"byteOffset"in i?r.value=i:r.result=i,o(e,r)})}}processSync(e){let t,n=!1;return this.freeze(),cH("processSync",this.parser||this.Parser),cU("processSync",this.compiler||this.Compiler),this.process(e,function(e,r){n=!0,c_(e),t=r}),cj("processSync","process",n),t}run(e,t,n){cz(e),this.freeze();let r=this.transformers;return n||"function"!=typeof t||(n=t,t=void 0),n?i(void 0,n):new Promise(i);function i(i,a){let s=c$(t);r.run(e,s,function(t,r,s){let o=r||e;t?a(t):i?i(o):n(void 0,o,s)})}}runSync(e,t){let n,r=!1;return this.run(e,t,function(e,t){c_(e),n=t,r=!0}),cj("runSync","run",r),n}stringify(e,t){this.freeze();let n=c$(t),r=this.compiler||this.Compiler;return cU("stringify",r),cz(e),r(e,n)}use(e,...t){let n=this.attachers,r=this.namespace;if(cG("use",this.frozen),null==e);else if("function"==typeof e)s(e,t);else if("object"==typeof e)Array.isArray(e)?a(e):i(e);else throw TypeError("Expected usable value, not `"+e+"`");return this;function i(e){if(!("plugins"in e)&&!("settings"in e))throw Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(e.plugins),e.settings&&(r.settings=cC(!0,r.settings,e.settings))}function a(e){let t=-1;if(null==e);else if(Array.isArray(e))for(;++t<e.length;)!function(e){if("function"==typeof e)s(e,[]);else if("object"==typeof e){if(Array.isArray(e)){let[t,...n]=e;s(t,n)}else i(e)}else throw TypeError("Expected usable value, not `"+e+"`")}(e[t]);else throw TypeError("Expected a list of plugins, not `"+e+"`")}function s(e,t){let r=-1,i=-1;for(;++r<n.length;)if(n[r][0]===e){i=r;break}if(-1===i)n.push([e,...t]);else if(t.length>0){let[r,...a]=t,s=n[i][1];cS(s)&&cS(r)&&(r=cC(!0,s,r)),n[i]=[e,r,...a]}}}}let cB=new cF().freeze();function cH(e,t){if("function"!=typeof t)throw TypeError("Cannot `"+e+"` without `parser`")}function cU(e,t){if("function"!=typeof t)throw TypeError("Cannot `"+e+"` without `compiler`")}function cG(e,t){if(t)throw Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function cz(e){if(!cS(e)||"string"!=typeof e.type)throw TypeError("Expected node, got `"+e+"`")}function cj(e,t,n){if(!n)throw Error("`"+e+"` finished async. Use `"+t+"` instead")}function c$(e){return e&&"object"==typeof e&&"message"in e&&"messages"in e?e:new cO(e)}var cW={exports:{}},cV={};cW.exports=function(){if(W)return cV;W=1;var e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,r=J.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function a(t,a,s){var o,l={},c=null,u=null;for(o in void 0!==s&&(c=""+s),void 0!==a.key&&(c=""+a.key),void 0!==a.ref&&(u=a.ref),a)n.call(a,o)&&!i.hasOwnProperty(o)&&(l[o]=a[o]);if(t&&t.defaultProps)for(o in a=t.defaultProps)void 0===l[o]&&(l[o]=a[o]);return{$$typeof:e,type:t,key:c,ref:u,props:l,_owner:r.current}}return cV.Fragment=t,cV.jsx=a,cV.jsxs=a,cV}();var cY=cW.exports;async function cq(e){return String(await cB().use(cs).use(ln).use(cb,{allowDangerousHtml:!0}).use(aZ).use(sO).processSync(e))}function cQ(e){return void 0===e||e}function cX(e){let t=Array(e);for(let n=0;n<e;n++)t[n]=cK();return t}function cK(){return Object.create(null)}function cZ(e,t){return t.length-e.length}function cJ(e){return"string"==typeof e}function c0(e){return"object"==typeof e}function c1(e){return"function"==typeof e}function c2(e,t){var n=c3;if(e&&(t&&(e=c6(e,t)),this.H&&(e=c6(e,this.H)),this.J&&1<e.length&&(e=c6(e,this.J)),n||""===n)){if(t=e.split(n),this.filter){e=this.filter,n=t.length;let r=[];for(let i=0,a=0;i<n;i++){let n=t[i];n&&!e[n]&&(r[a++]=n)}e=r}else e=t}return e}let c3=/[\p{Z}\p{S}\p{P}\p{C}]+/u,c4=/[\u0300-\u036f]/g;function c5(e,t){let n=Object.keys(e),r=n.length,i=[],a="",s=0;for(let o=0,l,c;o<r;o++)(c=e[l=n[o]])?(i[s++]=c8(t?"(?!\\b)"+l+"(\\b|_)":l),i[s++]=c):a+=(a?"|":"")+l;return a&&(i[s++]=c8(t?"(?!\\b)("+a+")(\\b|_)":"("+a+")"),i[s]=""),i}function c6(e,t){for(let n=0,r=t.length;n<r&&(e=e.replace(t[n],t[n+1]));n+=2);return e}function c8(e){return RegExp(e,"g")}function c9(e){let t="",n="";for(let r=0,i=e.length,a;r<i;r++)(a=e[r])!==n&&(t+=n=a);return t}function c7(e){return c2.call(this,(""+e).toLowerCase(),!1)}let ue={},ut={};function un(e){ur(e,"add"),ur(e,"append"),ur(e,"search"),ur(e,"update"),ur(e,"remove")}function ur(e,t){e[t+"Async"]=function(){let e;let n=this,r=arguments;var i=r[r.length-1];return c1(i)&&(e=i,delete r[r.length-1]),i=new Promise(function(e){setTimeout(function(){n.async=!0;let i=n[t].apply(n,r);n.async=!1,e(i)})}),e?(i.then(e),this):i}}function ui(e,t,n,r){let i=e.length,a=[],s,o,l=0;r&&(r=[]);for(let c=i-1;0<=c;c--){let u=e[c],d=u.length,h=cK(),p=!s;for(let e=0;e<d;e++){let d=u[e],f=d.length;if(f)for(let e=0,u,m;e<f;e++)if(m=d[e],s){if(s[m]){if(!c){if(n)n--;else if(a[l++]=m,l===t)return a}(c||r)&&(h[m]=1),p=!0}if(r&&(u=(o[m]||0)+1,o[m]=u,u<i)){let e=r[u-2]||(r[u-2]=[]);e[e.length]=m}}else h[m]=1}if(r)s||(o=h);else if(!p)return[];s=h}if(r)for(let e=r.length-1,i,o;0<=e;e--){o=(i=r[e]).length;for(let e=0,r;e<o;e++)if(!s[r=i[e]]){if(n)n--;else if(a[l++]=r,l===t)return a;s[r]=1}}return a}function ua(e){this.l=!0!==e&&e,this.cache=cK(),this.h=[]}function us(e,t,n){c0(e)&&(e=e.query);let r=this.cache.get(e);return r||(r=this.search(e,t,n),this.cache.set(e,r)),r}ua.prototype.set=function(e,t){if(!this.cache[e]){var n=this.h.length;for(n===this.l?delete this.cache[this.h[n-1]]:n++,--n;0<n;n--)this.h[n]=this.h[n-1];this.h[0]=e}this.cache[e]=t},ua.prototype.get=function(e){let t=this.cache[e];if(this.l&&t&&(e=this.h.indexOf(e))){let t=this.h[e-1];this.h[e-1]=this.h[e],this.h[e]=t}return t};let uo={memory:{charset:"latin:extra",D:3,B:4,m:!1},performance:{D:3,B:3,s:!1,context:{depth:2,D:1}},match:{charset:"latin:extra",G:"reverse"},score:{charset:"latin:advanced",D:20,B:3,context:{depth:3,D:9}},default:{}};function ul(e,t,n,r,i,a,s,o){setTimeout(function(){let l=e(n?n+"."+r:r,JSON.stringify(s));l&&l.then?l.then(function(){t.export(e,t,n,i,a+1,o)}):t.export(e,t,n,i,a+1,o)})}function uc(e,t){if(!(this instanceof uc))return new uc(e);if(e){cJ(e)?e=uo[e]:(n=e.preset)&&(e=Object.assign({},n[n],e)),n=e.charset;var n,r=e.lang;cJ(n)&&(-1===n.indexOf(":")&&(n+=":default"),n=ut[n]),cJ(r)&&(r=ue[r])}else e={};let i,a,s=e.context||{};if(this.encode=e.encode||n&&n.encode||c7,this.register=t||cK(),this.D=i=e.resolution||9,this.G=t=n&&n.G||e.tokenize||"strict",this.depth="strict"===t&&s.depth,this.l=cQ(s.bidirectional),this.s=a=cQ(e.optimize),this.m=cQ(e.fastupdate),this.B=e.minlength||1,this.C=e.boost,this.map=a?cX(i):cK(),this.A=i=s.resolution||1,this.h=a?cX(i):cK(),this.F=n&&n.F||e.rtl,this.H=(t=e.matcher||r&&r.H)&&c5(t,!1),this.J=(t=e.stemmer||r&&r.J)&&c5(t,!0),n=t=e.filter||r&&r.filter){n=t,r=cK();for(let e=0,t=n.length;e<t;e++)r[n[e]]=1;n=r}this.filter=n,this.cache=(t=e.cache)&&new ua(t)}function uu(e,t,n,r,i){return n&&1<e?t+(r||0)<=e?n+(i||0):(e-1)/(t+(r||0))*(n+(i||0))+1|0:0}function ud(e,t,n,r,i,a,s){let o=s?e.h:e.map;(!t[n]||s&&!t[n][s])&&(e.s&&(o=o[r]),s?((t=t[n]||(t[n]=cK()))[s]=1,o=o[s]||(o[s]=cK())):t[n]=1,o=o[n]||(o[n]=[]),e.s||(o=o[r]||(o[r]=[])),a&&o.includes(i)||(o[o.length]=i,e.m&&((e=e.register[i]||(e.register[i]=[]))[e.length]=o)))}function uh(e,t,n,r,i,a,s,o){let l=[],c=o?e.h:e.map;if(e.s||(c=uf(c,s,o,e.l)),c){let n=0,u=Math.min(c.length,o?e.A:e.D);for(let t=0,d=0,h,p;t<u&&(!(h=c[t])||(e.s&&(h=uf(h,s,o,e.l)),i&&h&&a&&((p=h.length)<=i?(i-=p,h=null):(h=h.slice(i),i=0)),!h||(l[n++]=h,!a||!((d+=h.length)>=r))));t++);if(n)return a?up(l,r,0):void(t[t.length]=l)}return!n&&l}function up(e,t,n){return e=1===e.length?e[0]:[].concat.apply([],e),n||e.length>t?e.slice(n,n+t):e}function uf(e,t,n,r){return e=n?(e=e[(r=r&&t>n)?t:n])&&e[r?n:t]:e[t]}function um(e,t,n,r,i){let a=0;if(e.constructor===Array){if(i)-1!==(t=e.indexOf(t))?1<e.length&&(e.splice(t,1),a++):a++;else{i=Math.min(e.length,n);for(let s=0,o;s<i;s++)(o=e[s])&&(a=um(o,t,n,r,i),r||a||delete e[s])}}else for(let s in e)(a=um(e[s],t,n,r,i))||delete e[s];return a}function ug(e){e=e.data;var t=self._index;let n=e.args;var r=e.task;"init"===r?(r=e.options||{},e=e.factory,t=r.encode,r.cache=!1,t&&0===t.indexOf("function")&&(r.encode=Function("return "+t)()),e?(Function("return "+e)()(self),self._index=new self.FlexSearch.Index(r),delete self.FlexSearch):self._index=new uc(r)):(e=e.id,t=t[r].apply(t,n),postMessage("search"===r?{id:e,msg:t}:{id:e}))}(V=uc.prototype).append=function(e,t){return this.add(e,t,!0)},V.add=function(e,t,n,r){if(t&&(e||0===e)){if(!r&&!n&&this.register[e])return this.update(e,t);if(r=(t=this.encode(t)).length){let c=cK(),u=cK(),d=this.depth,h=this.D;for(let p=0;p<r;p++){let f=t[this.F?r-1-p:p];var i=f.length;if(f&&i>=this.B&&(d||!u[f])){var a=uu(h,r,p),s="";switch(this.G){case"full":if(2<i){for(a=0;a<i;a++)for(var o=i;o>a;o--)if(o-a>=this.B){var l=uu(h,r,p,i,a);ud(this,u,s=f.substring(a,o),l,e,n)}break}case"reverse":if(1<i){for(o=i-1;0<o;o--)(s=f[o]+s).length>=this.B&&ud(this,u,s,uu(h,r,p,i,o),e,n);s=""}case"forward":if(1<i){for(o=0;o<i;o++)(s+=f[o]).length>=this.B&&ud(this,u,s,a,e,n);break}default:if(this.C&&(a=Math.min(a/this.C(t,f,p)|0,h-1)),ud(this,u,f,a,e,n),d&&1<r&&p<r-1){for(i=cK(),s=this.A,a=f,o=Math.min(d+1,r-p),i[a]=1,l=1;l<o;l++)if((f=t[this.F?r-1-p-l:p+l])&&f.length>=this.B&&!i[f]){i[f]=1;let t=this.l&&f>a;ud(this,c,t?a:f,uu(s+(r/2>s?0:1),r,p,o-1,l-1),e,n,t?f:a)}}}}}this.m||(this.register[e]=1)}}return this},V.search=function(e,t,n){let r,i,a;n||(!t&&c0(e)?e=(n=e).query:c0(t)&&(n=t));let s=[],o,l,c=0;if(n){e=n.query||e,t=n.limit,c=n.offset||0;var u=n.context;l=n.suggest}if(e&&1<(o=(e=this.encode(""+e)).length)){n=cK();var d=[];for(let t=0,r=0,i;t<o;t++)if((i=e[t])&&i.length>=this.B&&!n[i]){if(!this.s&&!l&&!this.map[i])return s;d[r++]=i,n[i]=1}o=(e=d).length}if(!o)return s;for(t||(t=100),u=this.depth&&1<o&&!1!==u,n=0,u?(r=e[0],n=1):1<o&&e.sort(cZ);n<o;n++){if(a=e[n],u?(i=uh(this,s,l,t,c,2===o,a,r),l&&!1===i&&s.length||(r=a)):i=uh(this,s,l,t,c,1===o,a),i)return i;if(l&&n===o-1){if(!(d=s.length)){if(u){u=0,n=-1;continue}return s}if(1===d)return up(s[0],t,c)}}return ui(s,t,c,l)},V.contain=function(e){return!!this.register[e]},V.update=function(e,t){return this.remove(e).add(e,t)},V.remove=function(e,t){let n=this.register[e];if(n){if(this.m)for(let t=0,r;t<n.length;t++)(r=n[t]).splice(r.indexOf(e),1);else um(this.map,e,this.D,this.s),this.depth&&um(this.h,e,this.A,this.s);if(t||delete this.register[e],this.cache){t=this.cache;for(let n=0,r;n<t.h.length;n++)r=t.h[n],t.cache[r].includes(e)&&(t.h.splice(n--,1),delete t.cache[r])}}return this},V.searchCache=us,V.export=function(e,t,n,r,i,a){let s,o,l=!0;switch(void 0===a&&(l=new Promise(e=>{a=e})),i||(i=0)){case 0:if(s="reg",this.m)for(let e in o=cK(),this.register)o[e]=1;else o=this.register;break;case 1:s="cfg",o={doc:0,opt:this.s?1:0};break;case 2:s="map",o=this.map;break;case 3:s="ctx",o=this.h;break;default:void 0===n&&a&&a();return}return ul(e,t||this,n,s,r,i,o,a),l},V.import=function(e,t){if(t)switch(cJ(t)&&(t=JSON.parse(t)),e){case"cfg":this.s=!!t.opt;break;case"reg":this.m=!1,this.register=t;break;case"map":this.map=t;break;case"ctx":this.h=t}},un(uc.prototype);let uE=0;function uT(e){var t;if(!(this instanceof uT))return new uT(e);e?c1(t=e.encode)&&(e.encode=t.toString()):e={},(t=(self||window)._factory)&&(t=t.toString());let r="undefined"==typeof window&&self.exports,i=this;this.o=function(e,t,r){let i;try{i=t?new(n(5789)).Worker("//node/node.js"):e?new Worker(URL.createObjectURL(new Blob(["onmessage="+ug.toString()],{type:"text/javascript"}))):new Worker(cJ(r)?r:"worker/worker.js",{type:"module"})}catch(e){}return i}(t,r,e.worker),this.h=cK(),this.o&&(r?this.o.on("message",function(e){i.h[e.id](e.msg),delete i.h[e.id]}):this.o.onmessage=function(e){e=e.data,i.h[e.id](e.msg),delete i.h[e.id]},this.o.postMessage({task:"init",factory:t,options:e}))}function uv(e){uT.prototype[e]=uT.prototype[e+"Async"]=function(){let t;let n=this,r=[].slice.call(arguments);var i=r[r.length-1];return c1(i)&&(t=i,r.splice(r.length-1,1)),i=new Promise(function(t){setTimeout(function(){n.h[++uE]=t,n.o.postMessage({task:e,id:uE,args:r})})}),t?(i.then(t),this):i}}function uy(e){if(!(this instanceof uy))return new uy(e);var t,n=e.document||e.doc||e;this.K=[],this.h=[],this.A=[],this.register=cK(),this.key=(t=n.key||n.id)&&uA(t,this.A)||"id",this.m=cQ(e.fastupdate),this.C=(t=n.store)&&!0!==t&&[],this.store=t&&cK(),this.I=(t=n.tag)&&uA(t,this.A),this.l=t&&cK(),this.cache=(t=e.cache)&&new ua(t),e.cache=!1,this.o=e.worker,this.async=!1,t=cK();let r=n.index||n.field||n;cJ(r)&&(r=[r]);for(let n=0,i,a;n<r.length;n++)cJ(i=r[n])||(a=i,i=i.field),a=c0(a)?Object.assign({},e,a):e,this.o&&(t[i]=new uT(a),t[i].o||(this.o=!1)),this.o||(t[i]=new uc(a,this.register)),this.K[n]=uA(i,this.A),this.h[n]=i;if(this.C)for(cJ(e=n.store)&&(e=[e]),n=0;n<e.length;n++)this.C[n]=uA(e[n],this.A);this.index=t}function uA(e,t){let n=e.split(":"),r=0;for(let i=0;i<n.length;i++)0<=(e=n[i]).indexOf("[]")&&(e=e.substring(0,e.length-2))&&(t[r]=!0),e&&(n[r++]=e);return r<n.length&&(n.length=r),1<r?n:n[0]}function ub(e,t){if(cJ(t))e=e[t];else for(let n=0;e&&n<t.length;n++)e=e[t[n]];return e}function u_(e,t,n,r){let i=this.l[e],a=i&&i.length-n;if(a&&0<a)return(a>t||n)&&(i=i.slice(n,n+t)),r&&(i=uC.call(this,i)),{tag:e,result:i}}function uC(e){let t=Array(e.length);for(let n=0,r;n<e.length;n++)r=e[n],t[n]={id:r,doc:this.store[r]};return t}uv("add"),uv("append"),uv("search"),uv("update"),uv("remove"),(V=uy.prototype).add=function(e,t,n){if(c0(e)&&(e=ub(t=e,this.key)),t&&(e||0===e)){if(!n&&this.register[e])return this.update(e,t);for(let r=0,i,a;r<this.h.length;r++)a=this.h[r],cJ(i=this.K[r])&&(i=[i]),function e(t,n,r,i,a,s,o,l){if(t=t[o]){if(i===n.length-1){if(t.constructor===Array){if(r[i]){for(n=0;n<t.length;n++)a.add(s,t[n],!0,!0);return}t=t.join(" ")}a.add(s,t,l,!0)}else if(t.constructor===Array)for(o=0;o<t.length;o++)e(t,n,r,i,a,s,o,l);else o=n[++i],e(t,n,r,i,a,s,o,l)}}(t,i,this.A,0,this.index[a],e,i[0],n);if(this.I){let r=ub(t,this.I),i=cK();cJ(r)&&(r=[r]);for(let t=0,a,s;t<r.length;t++)if(!i[a=r[t]]&&(i[a]=1,s=this.l[a]||(this.l[a]=[]),!n||!s.includes(e))&&(s[s.length]=e,this.m)){let t=this.register[e]||(this.register[e]=[]);t[t.length]=s}}if(this.store&&(!n||!this.store[e])){let n;if(this.C){n=cK();for(let e=0,r;e<this.C.length;e++)cJ(r=this.C[e])?n[r]=t[r]:function e(t,n,r,i,a){if(t=t[a],i===r.length-1)n[a]=t;else if(t){if(t.constructor===Array)for(n=n[a]=Array(t.length),a=0;a<t.length;a++)e(t,n,r,i,a);else n=n[a]||(n[a]=cK()),a=r[++i],e(t,n,r,i,a)}}(t,n,r,0,r[0])}this.store[e]=n||t}}return this},V.append=function(e,t){return this.add(e,t,!0)},V.update=function(e,t){return this.remove(e).add(e,t)},V.remove=function(e){if(c0(e)&&(e=ub(e,this.key)),this.register[e]){for(var t=0;t<this.h.length&&(this.index[this.h[t]].remove(e,!this.o),!this.m);t++);if(this.I&&!this.m)for(let n in this.l){let r=(t=this.l[n]).indexOf(e);-1!==r&&(1<t.length?t.splice(r,1):delete this.l[n])}this.store&&delete this.store[e],delete this.register[e]}return this},V.search=function(e,t,n,r){n||(!t&&c0(e)?(n=e,e=""):c0(t)&&(n=t,t=0));let i=[],a=[],s,o,l,c,u,d,h=0;if(n){if(n.constructor===Array)l=n,n=null;else{if(e=n.query||e,l=(s=n.pluck)||n.index||n.field,c=n.tag,o=this.store&&n.enrich,u="and"===n.bool,t=n.limit||t||100,d=n.offset||0,c&&(cJ(c)&&(c=[c]),!e)){for(let e=0,n;e<c.length;e++)(n=u_.call(this,c[e],t,d,o))&&(i[i.length]=n,h++);return h?i:[]}cJ(l)&&(l=[l])}}l||(l=this.h),u=u&&(1<l.length||c&&1<c.length);let p=!r&&(this.o||this.async)&&[];for(let s=0,f,m,g;s<l.length;s++){let E;if(cJ(m=l[s])||(m=(E=m).field,e=E.query||e,t=E.limit||t,o=E.enrich||o),p)p[s]=this.index[m].searchAsync(e,t,E||n);else{if(g=(f=r?r[s]:this.index[m].search(e,t,E||n))&&f.length,c&&g){let e=[],n=0;u&&(e[0]=[f]);for(let t=0,r,i;t<c.length;t++)r=c[t],(g=(i=this.l[r])&&i.length)&&(n++,e[e.length]=u?[i]:i);n&&(g=(f=u?ui(e,t||100,d||0):function(e,t){let n=cK(),r=cK(),i=[];for(let t=0;t<e.length;t++)n[e[t]]=1;for(let e=0,a;e<t.length;e++){a=t[e];for(let e=0,t;e<a.length;e++)n[t=a[e]]&&!r[t]&&(r[t]=1,i[i.length]=t)}return i}(f,e)).length)}if(g)a[h]=m,i[h++]=f;else if(u)return[]}}if(p){let r=this;return new Promise(function(i){Promise.all(p).then(function(a){i(r.search(e,t,n,a))})})}if(!h)return[];if(s&&(!o||!this.store))return i[0];for(let e=0,t;e<a.length;e++){if((t=i[e]).length&&o&&(t=uC.call(this,t)),s)return t;i[e]={field:a[e],result:t}}return i},V.contain=function(e){return!!this.register[e]},V.get=function(e){return this.store[e]},V.set=function(e,t){return this.store[e]=t,this},V.searchCache=us,V.export=function(e,t,n,r,i,a){let s;if(void 0===a&&(s=new Promise(e=>{a=e})),i||(i=0),r||(r=0),r<this.h.length){let n=this.h[r],s=this.index[n];t=this,setTimeout(function(){s.export(e,t,i?n:"",r,i++,a)||(r++,i=1,t.export(e,t,n,r,i,a))})}else{let t,s;switch(i){case 1:t="tag",s=this.l,n=null;break;case 2:t="store",s=this.store,n=null;break;default:a();return}ul(e,this,n,t,r,i,s,a)}return s},V.import=function(e,t){if(t)switch(cJ(t)&&(t=JSON.parse(t)),e){case"tag":this.l=t;break;case"reg":this.m=!1,this.register=t;for(let e=0,n;e<this.h.length;e++)(n=this.index[this.h[e]]).register=t,n.m=!1;break;case"store":this.store=t;break;default:let n=(e=e.split("."))[0];e=e[1],n&&e&&this.index[n].import(e,t)}},un(uy.prototype);let uS=[c8("[\xe0\xe1\xe2\xe3\xe4\xe5]"),"a",c8("[\xe8\xe9\xea\xeb]"),"e",c8("[\xec\xed\xee\xef]"),"i",c8("[\xf2\xf3\xf4\xf5\xf6]"),"o",c8("[\xf9\xfa\xfb\xfc]"),"u",c8("[\xfd\xff]"),"y",c8("\xf1"),"n",c8("[\xe7c]"),"k",c8("\xdf"),"s",c8(" & ")," and "];function uI(e){var t=e=""+e;return t.normalize&&(t=t.normalize("NFD").replace(c4,"")),c2.call(this,t.toLowerCase(),!e.normalize&&uS)}let ux=/[^a-z0-9]+/,uk={b:"p",v:"f",w:"f",z:"s",x:"s",:"s",d:"t",n:"m",c:"k",g:"k",j:"k",q:"k",i:"e",y:"e",u:"o"};function uw(e){e=uI.call(this,e).join(" ");let t=[];if(e){let n=e.split(ux),r=n.length;for(let i=0,a,s=0;i<r;i++)if((e=n[i])&&(!this.filter||!this.filter[e])){let n=uk[a=e[0]]||a,r=n;for(let t=1;t<e.length;t++){let i=uk[a=e[t]]||a;i&&i!==r&&(n+=i,r=i)}t[s++]=n}}return t}let uN=[c8("ae"),"a",c8("oe"),"o",c8("sh"),"s",c8("th"),"t",c8("ph"),"f",c8("pf"),"f",c8("(?![aeo])h(?![aeo])"),"",c8("(?!^[aeo])h(?!^[aeo])"),""];function uO(e,t){return e&&(2<(e=uw.call(this,e).join(" ")).length&&(e=c6(e,uN)),t||(1<e.length&&(e=c9(e)),e&&(e=e.split(" ")))),e||[]}let uR=c8("(?!\\b)[aeo]");ut["latin:default"]={encode:c7,F:!1,G:""},ut["latin:simple"]={encode:uI,F:!1,G:""},ut["latin:balance"]={encode:uw,F:!1,G:"strict"},ut["latin:advanced"]={encode:uO,F:!1,G:""},ut["latin:extra"]={encode:function(e){return e&&(1<(e=uO.call(this,e,!0)).length&&(e=e.replace(uR,"")),1<e.length&&(e=c9(e)),e&&(e=e.split(" "))),e||[]},F:!1,G:""};let uL={annotations:[],manifest:void 0,searchString:void 0,options:{offset:0},vault:new nB};function uD(e,t){switch(t.type){case"updateAnnotations":return{...e,annotations:t.payload};case"updateSearchString":return{...e,searchString:t.payload};default:return e}}let uM=(0,J.createContext)({dispatch:()=>null,state:uL}),uP=e=>{let{children:t,manifest:n}=e,r={...uL.options,...e.options},[i,a]=(0,J.useReducer)(uD,uL);return J.createElement(uM.Provider,{value:{state:{...i,manifest:n,options:r},dispatch:a}},t)},uF=(e,t="none")=>{if(!e)return null;if("string"==typeof e)return[e];if(!e[t]){let t=Object.getOwnPropertyNames(e);if(t.length>0)return e[t[0]]}return e[t]&&Array.isArray(e[t])?e[t]:null},uB=(e,t="none",n=", ")=>{let r=uF(e,t);return Array.isArray(r)?r.join(`${n}`):r};function uH(e,t){let n=Object.keys(e).filter(e=>t.includes(e)?null:e),r={};return n.forEach(t=>{r[t]=e[t]}),r}let{styled:uU,css:uG,keyframes:uz,createTheme:uj}=(0,er.Th)({theme:{colors:{primary:"#1a1d1e",primaryMuted:"#26292b",primaryAlt:"#151718",accent:"hsl(209 100% 38.2%)",accentMuted:"hsl(209 80% 61.8%)",accentAlt:"hsl(209 80% 30%)",secondary:"#FFFFFF",secondaryMuted:"#e6e8eb",secondaryAlt:"#c1c8cd"},fontSizes:{1:"12px",2:"13px",3:"15px",4:"17px",5:"19px",6:"21px",7:"27px",8:"35px",9:"59px"},lineHeights:{1:"12px",2:"13px",3:"15px",4:"17px",5:"19px",6:"21px",7:"27px",8:"35px",9:"59px"},sizes:{1:"5px",2:"10px",3:"15px",4:"20px",5:"25px",6:"35px",7:"45px",8:"65px",9:"80px"},space:{1:"5px",2:"10px",3:"15px",4:"20px",5:"25px",6:"35px",7:"45px",8:"65px",9:"80px"},radii:{1:"4px",2:"6px",3:"8px",4:"12px",round:"50%",pill:"9999px"},transitions:{all:"all 300ms cubic-bezier(0.16, 1, 0.3, 1)"},zIndices:{1:"100",2:"200",3:"300",4:"400",max:"999"}},media:{xxs:"(max-width: 349px)",xs:"(max-width: 575px)",sm:"(max-width: 767px)",md:"(max-width: 991px)",lg:"(max-width: 90rem)",xl:"(min-width: calc(90rem + 1px))"}}),u$=uU("span",{}),uW=e=>{let{as:t,label:n}=e,r=uH(e,["as","label"]);return J.createElement(u$,{as:t,...r},uB(n,r.lang))};uU("img",{objectFit:"cover"}),uU("a",{});let uV={delimiter:", "},uY=(0,J.createContext)(void 0),uq=()=>{let e=(0,J.useContext)(uY);if(void 0===e)throw Error("usePrimitivesContext must be used with a PrimitivesProvider");return e},uQ=({children:e,initialState:t=uV})=>{let n=uX(t,"delimiter");return J.createElement(uY.Provider,{value:{delimiter:n}},e)},uX=(e,t)=>Object.hasOwn(e,t)?e[t].toString():void 0,uK=uU("span",{}),uZ=e=>{let{as:t,markup:n}=e,{delimiter:r}=uq();if(!n)return J.createElement(J.Fragment,null);let i=uH(e,["as","markup"]),a={__html:nH(uB(n,i.lang,r),{allowedAttributes:{a:["href"],img:["alt","src","height","width"]},allowedSchemes:["http","https","mailto"],allowedTags:["a","b","br","i","img","p","small","span","sub","sup"]})};return J.createElement(uK,{as:t,...i,dangerouslySetInnerHTML:a})},uJ=e=>J.useContext(uY)?J.createElement(uZ,{...e}):J.createElement(uQ,null,J.createElement(uZ,{...e}));uU("span",{}),uU("dl",{}),uU("li",{}),uU("ul",{}),uU("li",{}),uU("ul",{}),uU("dl",{}),uU("li",{}),uU("ul",{});let u0=e=>{let{as:t,summary:n}=e,r=uH(e,["as","customValueDelimiter","summary"]);return J.createElement(uJ,{as:t,markup:n,...r})},u1=uU("div",{display:"flex",flexDirection:"column",justifyContent:"space-between"}),u2=uU("aside",{margin:"0",padding:"0",position:"relative",zIndex:2,flexGrow:"1",flexShrink:"0",[`& ${u1}`]:{position:"absolute",width:"50%",top:0},"&.anchor":{[`& ${u1}`]:{position:"fixed",width:"50%"}}}),u3=uU("header",{display:"flex",justifyContent:"space-between",fontSize:"1",flexGrow:"1",flexShrink:"0",marginBottom:"1.618rem",strong:{fontWeight:"400",fontSize:"1.33rem"}}),u4=uU("section",{margin:"0",gap:"1rem"}),u5=({label:e})=>J.createElement(u3,null,J.createElement("strong",null,J.createElement(uW,{label:e}))),u6=uU("article",{transition:"all 0.382s ease-in-out",display:"flex",flexDirection:"row",flexWrap:"nowrap",gap:"2.618rem"}),u8=uU("div",{transition:"$all",width:"50%",opacity:0,transform:"translateX(2.618rem)",zIndex:-1}),u9=uU("div",{width:"50%",display:"flex",flexDirection:"column",justifyContent:"flex-start"}),u7=uU("hr",{margin:"0",borderColor:"transparent",height:"1.618rem",position:"relative",zIndex:0,display:"flex",justifyContent:"flex-end",marginTop:"2.618rem","&::before":{content:"attr(aria-label)",position:"absolute",right:"1.618rem",bottom:"0",zIndex:1,display:"flex",fontSize:"0.7222rem",fontWeight:"400",lineHeight:"1rem",background:"inherit",opacity:.7},"&::after":{content:"",width:"100%",position:"absolute",zIndex:0,height:"1px",background:"#6662"}}),de=uU("div",{position:"relative",zIndex:"1",display:"flex",flexDirection:"column",gap:"2.618rem","&[data-figures-visible='true']":{[`& ${u8}`]:{opacity:1,zIndex:0,transform:"translateX(0)"}}}),dt=({canvas:e,canvasInfo:{current:t,total:n}})=>J.createElement("figcaption",null,J.createElement("em",null,t," / ",n),(null==e?void 0:e.label)&&J.createElement(uW,{label:null==e?void 0:e.label}),(null==e?void 0:e.summary)&&J.createElement(u0,{summary:null==e?void 0:e.summary,as:"p"})),dn=window.OpenSeadragon;if(!dn&&!(dn=Z))throw Error("OpenSeadragon is missing.");let dr="http://www.w3.org/2000/svg";dn.Viewer&&(dn.Viewer.prototype.svgOverlay=function(){return this._svgOverlayInfo||(this._svgOverlayInfo=new di(this)),this._svgOverlayInfo});let di=function(e){let t=this;this._viewer=e,this._containerWidth=0,this._containerHeight=0,this._svg=document.createElementNS(dr,"svg"),this._svg.style.position="absolute",this._svg.style.left=0,this._svg.style.top=0,this._svg.style.width="100%",this._svg.style.height="100%",this._viewer.canvas.appendChild(this._svg),this._node=document.createElementNS(dr,"g"),this._svg.appendChild(this._node),this._viewer.addHandler("animation",function(){t.resize()}),this._viewer.addHandler("open",function(){t.resize()}),this._viewer.addHandler("rotate",function(){t.resize()}),this._viewer.addHandler("flip",function(){t.resize()}),this._viewer.addHandler("resize",function(){t.resize()}),this.resize()};di.prototype={node:function(){return this._node},resize:function(){this._containerWidth!==this._viewer.container.clientWidth&&(this._containerWidth=this._viewer.container.clientWidth,this._svg.setAttribute("width",this._containerWidth)),this._containerHeight!==this._viewer.container.clientHeight&&(this._containerHeight=this._viewer.container.clientHeight,this._svg.setAttribute("height",this._containerHeight));let e=this._viewer.viewport.pixelFromPoint(new dn.Point(0,0),!0),t=this._viewer.viewport.getZoom(!0),n=this._viewer.viewport.getRotation(),r=this._viewer.viewport.getFlip(),i=this._viewer.viewport._containerInnerSize.x,a=i*t,s=a;r&&(a=-a,e.x=-e.x+i),this._node.setAttribute("transform","translate("+e.x+","+e.y+") scale("+a+","+s+") rotate("+n+")")},onClick:function(e,t){new dn.MouseTracker({element:e,clickHandler:t}).setTracking(!0)}};let da=e=>fetch(`${e.replace(/\/$/,"")}/info.json`).then(e=>e.json()).then(e=>e).catch(t=>{console.error(`The IIIF tilesource ${e.replace(/\/$/,"")}/info.json failed to load: ${t}`)}),ds=e=>{let t,n;return Array.isArray(e)&&(t=e[0])&&(n="@id"in t?t["@id"]:t.id),n};var dl=((c=dl||{}).TiledImage="tiledImage",c.SimpleImage="simpleImage",c);let dc=e=>{let t=Array.isArray(null==e?void 0:e.service)&&(null==e?void 0:e.service.length)>0;return{uri:t?ds(null==e?void 0:e.service):null==e?void 0:e.id,imageType:t?dl.TiledImage:dl.SimpleImage}},du=(e,t)=>({uri:e,imageType:t?dl.TiledImage:dl.SimpleImage}),dd=uU("div",{display:"flex",flexDirection:"column",alignItems:"center"}),dh=uU("p",{fontWeight:"bold",fontSize:"x-large"}),dp=uU("span",{fontSize:"medium"}),df=({error:e})=>{let{message:t}=e;return J.createElement(dd,{role:"alert"},J.createElement(dh,{"data-testid":"headline"},"Something went wrong"),t&&J.createElement(dp,null,`Error message: ${t}`," "))},dm=uU("div",{position:"absolute !important",zIndex:"1",top:"1rem",left:"1rem",width:"161.8px",height:"100px",backgroundColor:"#000D",boxShadow:"5px 5px 5px #0002",borderRadius:"3px",".displayregion":{border:" 3px solid $accent !important",boxShadow:"0 0 3px #0006"},"@sm":{width:"123px",height:"76px"},"@xs":{width:"100px",height:"61.8px"}}),dg=uU("div",{position:"relative",width:"100%",height:"100%",zIndex:"0"}),dE=uU("div",{width:"100%",height:"100%",maxHeight:"100vh",background:"transparent",backgroundSize:"contain",color:"white",position:"relative",zIndex:"0",overflow:"hidden",variants:{hasNavigator:{true:{[`${dm}`]:{display:"block"}},false:{[`${dm}`]:{display:"none"}}}}}),dT=uU("button",{display:"flex",height:"2rem",width:"2rem",borderRadius:"2rem",padding:"0",margin:"0",fontFamily:"inherit",background:"none",backgroundColor:"$primary",border:"none",color:"white",cursor:"pointer",marginLeft:"0.618rem",filter:"drop-shadow(2px 2px 5px #0003)",transition:"$all",boxSizing:"content-box !important","&:first-child":{marginLeft:"0"},"@xs":{marginBottom:"0.618rem",marginLeft:"0","&:last-child":{marginBottom:"0"}},svg:{height:"60%",width:"60%",padding:"20%",fill:"$secondary",stroke:"$secondary",filter:"drop-shadow(2px 2px 5px #0003)",transition:"$all",boxSizing:"inherit"},"&:hover, &:focus":{backgroundColor:"$accent"},"&[data-button=rotate-right]":{"&:hover, &:focus":{svg:{rotate:"45deg"}}},"&[data-button=rotate-left]":{transform:"scaleX(-1)","&:hover, &:focus":{svg:{rotate:"45deg"}}},"&[data-button=reset]":{"&:hover, &:focus":{svg:{rotate:"-15deg"}}}}),dv=({className:e,id:t,label:n,children:r})=>{let i=n.toLowerCase().replace(/\s/g,"-");return J.createElement(dT,{id:t,className:e,"data-testid":"openseadragon-button","data-button":i},J.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-labelledby":`${t}-svg-title`,"data-testid":"openseadragon-button-svg",focusable:"false",viewBox:"0 0 512 512",role:"img"},J.createElement("title",{id:`${t}-svg-title`},n),r))},dy=uU("div",{position:"absolute",zIndex:"1",top:"1rem",right:"1rem",display:"flex","@xs":{flexDirection:"column",zIndex:"2"},variants:{hasPlaceholder:{true:{right:"3.618rem","@xs":{top:"3.618rem",right:"1rem"}},false:{right:"1rem","@xs":{top:"1rem",right:"1rem"}}}}}),dA=()=>J.createElement("path",{strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M256 112v288M400 256H112"}),db=()=>J.createElement("path",{strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M400 256H112"}),d_=()=>J.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M432 320v112H320M421.8 421.77L304 304M80 192V80h112M90.2 90.23L208 208M320 80h112v112M421.77 90.2L304 208M192 432H80V320M90.23 421.8L208 304"}),dC=()=>J.createElement("path",{d:"M448 440a16 16 0 01-12.61-6.15c-22.86-29.27-44.07-51.86-73.32-67C335 352.88 301 345.59 256 344.23V424a16 16 0 01-27 11.57l-176-168a16 16 0 010-23.14l176-168A16 16 0 01256 88v80.36c74.14 3.41 129.38 30.91 164.35 81.87C449.32 292.44 464 350.9 464 424a16 16 0 01-16 16z"}),dS=()=>J.createElement(J.Fragment,null,J.createElement("path",{fill:"none",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M400 148l-21.12-24.57A191.43 191.43 0 00240 64C134 64 48 150 48 256s86 192 192 192a192.09 192.09 0 00181.07-128"}),J.createElement("path",{d:"M464 97.42V208a16 16 0 01-16 16H337.42c-14.26 0-21.4-17.23-11.32-27.31L436.69 86.1C446.77 76 464 83.16 464 97.42z"})),dI=({_cloverViewerHasPlaceholder:e,config:t})=>J.createElement(dy,{"data-testid":"clover-iiif-image-openseadragon-controls",hasPlaceholder:e},t.showZoomControl&&J.createElement(J.Fragment,null,J.createElement(dv,{id:t.zoomInButton,label:"zoom in"},J.createElement(dA,null)),J.createElement(dv,{id:t.zoomOutButton,label:"zoom out"},J.createElement(db,null))),t.showFullPageControl&&J.createElement(dv,{id:t.fullPageButton,label:"full page"},J.createElement(d_,null)),t.showRotationControl&&J.createElement(J.Fragment,null,J.createElement(dv,{id:t.rotateRightButton,label:"rotate right"},J.createElement(dS,null)),J.createElement(dv,{id:t.rotateLeftButton,label:"rotate left"},J.createElement(dS,null))),t.showHomeControl&&J.createElement(dv,{id:t.homeButton,label:"reset"},J.createElement(dC,null))),dx=({ariaLabel:e,config:t,uri:n,_cloverViewerHasPlaceholder:r,imageType:i,openSeadragonCallback:a})=>{let[s,o]=(0,J.useState)(),[l,c]=(0,J.useState)(),u=(0,J.useRef)(!1);return(0,J.useEffect)(()=>(u.current||(u.current=!0,l||c(Z(t))),()=>null==l?void 0:l.destroy()),[]),(0,J.useEffect)(()=>{l&&a&&a(l)},[l,a]),(0,J.useEffect)(()=>{l&&n!==s&&(null==l||l.forceRedraw(),o(n))},[l,s,n]),(0,J.useEffect)(()=>{if(s&&l)switch(i){case"simpleImage":null==l||l.addSimpleImage({url:s});break;case"tiledImage":da(s).then(e=>{try{if(!e)throw Error(`No tile source found for ${s}`);null==l||l.addTiledImage({tileSource:e})}catch(e){console.error(e)}});break;default:null==l||l.close(),console.warn(`Unable to render ${s} in OpenSeadragon as type: "${i}"`)}},[i,s]),J.createElement(dE,{className:"clover-iiif-image-openseadragon","data-testid":"clover-iiif-image-openseadragon","data-openseadragon-instance":t.id,hasNavigator:t.showNavigator},J.createElement(dI,{_cloverViewerHasPlaceholder:r,config:t}),t.showNavigator&&J.createElement(dm,{id:t.navigatorId,"data-testid":"clover-iiif-image-openseadragon-navigator"}),J.createElement(dg,{id:t.id,"data-testid":"clover-iiif-image-openseadragon-viewport",role:"img",...e&&{"aria-label":e}}))},dk=({_cloverViewerHasPlaceholder:e=!1,body:t,instanceId:n,isTiledImage:r=!1,label:i,src:a="",openSeadragonCallback:s,openSeadragonConfig:o={}})=>{let l=n||eo(),c="string"==typeof i?i:uB(i),u={id:`openseadragon-${l}`,navigatorId:`openseadragon-navigator-${l}`,loadTilesWithAjax:!0,fullPageButton:`fullPage-${l}`,homeButton:`reset-${l}`,rotateLeftButton:`rotateLeft-${l}`,rotateRightButton:`rotateRight-${l}`,zoomInButton:`zoomIn-${l}`,zoomOutButton:`zoomOut-${l}`,showNavigator:!0,showFullPageControl:!0,showHomeControl:!0,showRotationControl:!0,showZoomControl:!0,navigatorBorderColor:"transparent",gestureSettingsMouse:{clickToZoom:!0,dblClickToZoom:!0,pinchToZoom:!0,scrollToZoom:!1},...o},{imageType:d,uri:h}=t?dc(t):du(a,r);return h?J.createElement(en,{FallbackComponent:df},J.createElement(dx,{_cloverViewerHasPlaceholder:e,ariaLabel:c,config:u,imageType:d,key:l,uri:h,openSeadragonCallback:s})):null},dw=uU("div",{width:"100%",height:"400px",background:"#6662",backgroundSize:"contain",color:"white",position:"relative",zIndex:"1",overflow:"hidden"}),dN=({body:e,label:t})=>J.createElement(dw,{"data-testid":"scroll-figure-image"},J.createElement(dk,{body:e,openSeadragonConfig:{showNavigator:!1,showHomeControl:!1},...t&&{label:t}})),dO=uU("figure",{figcaption:{display:"flex",flexDirection:"column",margin:"1.618rem 0 0",opacity:.9,em:{fontSize:"0.9em",fontStyle:"normal",opacity:.7}}}),dR=(e,t,n,r)=>{var i,a;let s={canvas:void 0,accompanyingCanvas:void 0,annotationPage:void 0,annotations:[]};if(s.canvas=e.get(t),s.canvas&&(s.annotationPage=e.get(s.canvas.items[0]),s.accompanyingCanvas=null!=(i=s.canvas)&&i.accompanyingCanvas?e.get(null==(a=s.canvas)?void 0:a.accompanyingCanvas):void 0),s.annotationPage){let i=e.get(s.annotationPage.items).map(t=>({body:e.get(t.body[0].id),motivation:t.motivation,type:"Annotation"})),a=[];i.forEach(t=>{"Choice"===t.body.type?t.body.items.forEach(n=>a.push({...t,id:n.id,body:e.get(n.id)})):a.push(t)}),s.annotations=a.filter(i=>{if(i){if(!i.body||!i.motivation){console.error("Invalid annotation after Hyperion parsing: missing either 'body' or 'motivation'",i);return}let a=i.body;Array.isArray(a)&&(a=a[0]);let s=e.get(a.id);if(s)switch(n){case"painting":return i.target===t.id&&i.motivation&&"painting"===i.motivation[0]&&r.includes(s.type)&&(i.body=s),!!i;case"supplementing":return;default:throw Error("Invalid annotation motivation.")}}})}return s},dL=(e,t)=>{let n=dR(e,{id:t,type:"Canvas"},"painting",["Image","Sound","Video"]);if(0!==n.annotations.length&&n.annotations&&n.annotations)return n.annotations.map(e=>null==e?void 0:e.body)},dD=({canvas:e,canvasInfo:t})=>{let{state:n}=(0,J.useContext)(uM),{vault:r}=n,i=dL(r,e.id);return i?J.createElement(dO,null,null==i?void 0:i.map(t=>J.createElement(dN,{body:t,key:null==t?void 0:t.id,label:null==e?void 0:e.label})),J.createElement(dt,{canvas:e,canvasInfo:t})):null},dM="255, 197, 32",dP=uU("div",{ul:{padding:"1rem"},li:{listStyleType:"disc",li:{listStyleType:"circle"}},"span.highlight":{position:"relative",fontWeight:"bold","&::before":{top:"0",position:"absolute",display:"inline",content:"",width:"calc(100% + 4px)",height:"calc(100% + 2px) ",marginLeft:"-2px",borderRadius:"3px",border:`1px solid rgba(${dM}, 0.2)`,borderBottom:`1px solid rgba(${dM}, 0.618)`,boxShadow:"1px 1px 1px #6661"},"&::after":{left:"0",top:"0",position:"absolute",display:"inline",content:"",width:"calc(100% + 4px)",height:"calc(100% + 2px) ",marginLeft:"-2px",marginTop:"-1px",borderRadius:"3px",backgroundColor:`rgba(${dM}, 0.2)`,zIndex:-1}}}),dF=({searchString:e="",content:t,stringLength:n=150})=>{let r=t.toLowerCase().indexOf(e.toLowerCase());if(-1!==r){let i=Math.max(0,r-n/2),a=Math.min(t.length,r+e.length+n/2);if(i>0){let e=t.lastIndexOf(" ",i+1);i=e>0?e+1:i}if(a<t.length){let e=t.indexOf(" ",a-1);a=e>-1?e:a}t=(i>0?"... ":"")+t.substring(i,a)+(a<t.length?" ...":"")}else t=t.substring(0,n)+"...";return t},dB=({body:e,stringLength:t,type:n="content"})=>{let r;let{state:i}=(0,J.useContext)(uM),{searchString:a}=i,s=String(e.value);"snippet"==n&&(s=dF({searchString:a,content:s,stringLength:t}));let o=function(e){let[t,n]=J.useState("");return J.useEffect(()=>{(async()=>{n(await cq(e))})()},[e]),{html:t,jsx:cY.jsx("div",{dangerouslySetInnerHTML:{__html:t}})}}(s);if("text/plain"===e.format&&(r=null==s?void 0:s.replace(/\n/g,"<br />")),"text/markdown"===e.format&&(r=null==o?void 0:o.html),"text/html"===e.format&&(r=s),a&&r){let e=RegExp(`(${a})`,"gi");r=null==r?void 0:r.replace(e,e=>`<span class="highlight">${e}</span>`)}let l=[e.id,n].join("-"),c=["ar"].includes(String(e.language));return r?J.createElement(dP,{dangerouslySetInnerHTML:{__html:r},"data-body-id":l,"data-testid":"scroll-item-body",id:l,dir:c?"rtl":"ltr",css:{fontSize:c?"1.3em":"1em"}}):null},dH=J.memo(({hasItemBreak:e,isLastItem:t,item:n,itemCount:r,itemNumber:i})=>{var a;let{state:s}=J.useContext(uM),{annotations:o,vault:l}=s,c=null==l?void 0:l.get(n),u=null==(a=null==o?void 0:o.filter(e=>e.target===n.id))?void 0:a.map(e=>{var t;return null==(t=null==e?void 0:e.body)?void 0:t.map((e,t)=>J.createElement(dB,{body:e,key:t}))}),d={current:i,total:r};return J.createElement(u6,{"data-page-break":e,"data-page-number":i,"data-last-item":t},J.createElement(u8,null,c&&J.createElement(dD,{canvas:c,canvasInfo:d})),J.createElement(u9,null,(null==c?void 0:c.label)&&J.createElement("strong",null,J.createElement(uW,{label:null==c?void 0:c.label})," ",`(${d.current} / ${d.total})`),J.createElement("div",null,u||J.createElement("p",null,"[Blank]")),e&&J.createElement(u7,{"aria-label":"Page Break"})))}),dU="255, 197, 32",dG=uU("span",{fontWeight:"700"}),dz=uU("div",{display:"flex",gap:"0.25rem"}),dj=uU("div",{fontSize:"0.9rem",padding:"1rem 0.618rem"}),d$=uU("div",{display:"flex",flexDirection:"column",gap:"0.5rem",hr:{margin:"0.618rem",border:"none",borderBottom:"1px solid #6662"},button:{backgroundColor:"#6660",opacity:"0.7",transition:"$all",padding:"0.5rem 0.618rem",fontSize:"0.9rem",lineHeight:"1.1rem",textAlign:"left",borderRadius:"6px",border:"1px solid #6662",display:"flex",flexDirection:"column",gap:"0.25rem","&:hover":{opacity:"1",boxShadow:"5px 5px 13px #6662"},"&[data-result=true]":{backgroundColor:`rgba(${dU}, 0.2)`,borderColor:`rgba(${dU}, 0.2)`,opacity:"1","&:hover":{backgroundColor:`rgba(${dU}, 0.2)`}}}}),dW=uU("input",{margin:"0",padding:"0 1rem 0 2rem",background:"none",zIndex:"2",height:"2rem",marginLeft:"1rem",marginTop:"1rem",justifyContent:"center",display:"flex",alignItems:"center",fontSize:"1rem",borderRadius:"2rem",fontFamily:"inherit",backgroundColor:"$primary",border:"none",color:"$secondary",cursor:"text",filter:"drop-shadow(2px 2px 5px #0003)",transition:"$all",boxSizing:"content-box !important",flexGrow:"0",width:"100%","&:placeholder":{color:"inherit"}}),dV=uU("span",{position:"absolute",zIndex:"3",width:"2rem",height:"2rem",padding:"8px",marginTop:"1rem",marginLeft:"1rem",color:"$secondary",fill:"$secondary",stroke:"$secondary",transition:"$all",cursor:"text"}),dY=uU("button",{opacity:"1",display:"flex",alignItems:"center",borderRadius:"2rem",width:"2rem",height:"2rem",alignSelf:"center",marginTop:"1rem",gap:"0.35rem",backgroundColor:"$accent",fill:"$secondary",flexShrink:"0",svg:{padding:"6px",color:"inherit",fill:"inherit"},'&[aria-disabled="true"]':{opacity:"0",display:"none"}}),dq=uU("form",{display:"flex",justifyContent:"space-between",gap:"1rem",width:"100%",variants:{isPanelExpanded:{true:{[`${dV}`]:{marginLeft:"0"},[`& ${dW}`]:{marginLeft:"0",backgroundColor:"$primary",width:"auto",flexGrow:"1"}},false:{}}}}),dQ=uU("div",{}),dX=({annotation:e,isResult:t})=>{var n,r;let i=[null==(n=null==e?void 0:e.body)?void 0:n.id,"content"].join("-"),a=e=>{var t;e&&(null==(t=document.getElementById(e))||t.scrollIntoView({behavior:"smooth"}))};return J.createElement("button",{"data-result":t?"true":"false",onClick:()=>a(i),key:i},J.createElement(dz,null,J.createElement(dG,null,e.motivation),J.createElement("span",null,null==(r=null==e?void 0:e.body)?void 0:r.language)),J.createElement(dB,{body:e.body,stringLength:144,type:"snippet"}))},dK=({results:e})=>J.createElement(d$,null,e.found.map(e=>J.createElement(dX,{annotation:e,isResult:!0,key:e.id})),J.createElement("hr",null),e.notFound.map(e=>J.createElement(dX,{annotation:e,key:e.id}))),dZ={charset:"latin:extra, arabic:extra, cyrillic:extra, cjk:extra",optimize:!0,tokenize:"full",resolution:9,document:{id:"id",index:"content"}},dJ=()=>{var e;let{state:t}=(0,J.useContext)(uM),{annotations:n,searchString:r=""}=t,i=new uy(dZ),a=[];function s(e){return e.map(e=>null==n?void 0:n.filter(t=>t.body.find(t=>t.id===e)).map(t=>{let n=t.body.findIndex(t=>t.id===e);return{...t,body:t.body[n]}}).shift())}null==n||n.forEach(e=>{var t;null==(t=null==e?void 0:e.body)||t.forEach(e=>{var t;let n=null==(t=null==e?void 0:e.value)?void 0:t.replace(/\n/g,"");a.push(null==e?void 0:e.id),i.add({id:null==e?void 0:e.id,content:n})})});let o=null==i?void 0:i.search(r).reduce((e,t)=>[...new Set([...e,...t.result])],[]),l={found:s(o),notFound:s(a.filter(e=>!o.includes(e)))};return J.createElement(dQ,null,r&&J.createElement(dj,null,null==(e=l.found)?void 0:e.length," results for ",J.createElement("strong",null,r)),J.createElement(dK,{results:l}))},d0=()=>J.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},J.createElement("title",null,"Search"),J.createElement("path",{d:"M456.69 421.39L362.6 327.3a173.81 173.81 0 0034.84-104.58C397.44 126.38 319.06 48 222.72 48S48 126.38 48 222.72s78.38 174.72 174.72 174.72A173.81 173.81 0 00327.3 362.6l94.09 94.09a25 25 0 0035.3-35.3zM97.92 222.72a124.8 124.8 0 11124.8 124.8 124.95 124.95 0 01-124.8-124.8z"})),d1=()=>J.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},J.createElement("title",null,"Close"),J.createElement("path",{d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"})),d2=({togglePanel:e,isPanelExpanded:t})=>{let{dispatch:n,state:r}=(0,J.useContext)(uM),{searchString:i}=r,a=(0,J.useRef)(null),s=()=>a.current===document.activeElement&&e(!0),o=()=>{var t;null==(t=a.current)||t.blur(),l(),e(!1),n({payload:"",type:"updateSearchString"})},l=()=>{a.current&&(a.current.value="")},c=e=>{"Escape"===e.key&&(e.preventDefault(),o())};return(0,J.useEffect)(()=>(null==document||document.addEventListener("keydown",c),()=>{null==document||document.removeEventListener("keydown",c)}),[]),(0,J.useEffect)(()=>{if(null!=a&&a.current)return a.current.addEventListener("focus",s),a.current.addEventListener("blur",s),()=>{a.current&&(a.current.removeEventListener("focus",s),a.current.removeEventListener("blur",s))}},[]),J.createElement(dq,{id:"scroll-search",autoComplete:"off",isPanelExpanded:t},J.createElement(dV,{onClick:()=>{var e;return null==(e=null==a?void 0:a.current)?void 0:e.focus()}},J.createElement(d0,null)),J.createElement(dW,{ref:a,name:"clover-search",type:"text",placeholder:"Search...",defaultValue:i,onChange:e=>{var t;n({payload:null==(t=null==e?void 0:e.target)?void 0:t.value,type:"updateSearchString"})}}),J.createElement(dY,{"aria-disabled":!t,"aria-label":"Close search panel",onClick:e=>{e.preventDefault(),o()},disabled:!t},J.createElement(d1,null)))},d3=uU("div",{display:"flex",flexDirection:"column",flexGrow:"1",flexShrink:"0",position:"relative",zIndex:"1",maxWidth:"100%",marginTop:"1rem",transition:"$all",variants:{isPanelExpanded:{true:{zIndex:1,opacity:1,transform:"translateX(0)"},false:{zIndex:-1,opacity:0,transform:"translateX(-2.618rem)",transitionDelay:"0",transition:"none"}}}}),d4=e=>{let[t,n]=(0,J.useState)({top:0,left:0});return(0,J.useEffect)(()=>{let t=()=>{if(e.current){let t=e.current.getBoundingClientRect();n({top:t.top,left:t.left})}};return window.addEventListener("scroll",t),window.addEventListener("resize",t),t(),()=>{window.removeEventListener("scroll",t),window.removeEventListener("resize",t)}},[e]),t},d5=({isPanelExpanded:e,handlePanel:t})=>{var n;let r=(0,J.useRef)(null),{state:i}=(0,J.useContext)(uM),{options:a}=i,{offset:s}=a,{top:o}=d4(r),l=!!o&&o<s,c=null==(n=null==r?void 0:r.current)?void 0:n.offsetWidth,u=c&&.5*c,d={top:l?s:0,width:`calc(${u}px - 1.318rem)`,maxWidth:e?"100%":`${u?u-315:180}px`,minWidth:"130px"};return J.createElement(u2,{ref:r,className:l?"anchor":"","data-testid":"scroll-panel"},J.createElement(u1,{style:d},J.createElement(d2,{togglePanel:t,isPanelExpanded:e}),J.createElement(d3,{"data-testid":"scroll-panel-results","data-panel-expanded":e,isPanelExpanded:e},e&&J.createElement(dJ,null))))},d6=({items:e})=>{let[t,n]=(0,J.useState)(!1);return J.createElement(J.Fragment,null,J.createElement(d5,{isPanelExpanded:t,handlePanel:e=>n(e)}),J.createElement(de,{"data-figures-visible":!t},e.map((t,n)=>{let r=n+1,i=r===e.length;return J.createElement(dH,{item:t,hasItemBreak:r<e.length,isLastItem:i,key:t.id,itemCount:e.length,itemNumber:r})})))},d8=(e,t)=>{let[n,r]=(0,J.useState)([]);return(0,J.useEffect)(()=>{if(!t)return;let n=[];null==e||e.forEach(e=>{var r;let i=t.get(e);null==(r=null==i?void 0:i.annotations)||r.forEach(e=>{var r;let i=t.get(e);null==(r=null==i?void 0:i.items)||r.forEach(e=>{var r;let i=t.get(e);i&&n.push({...i,body:null==(r=null==i?void 0:i.body)?void 0:r.map(e=>t.get(e))})})})}),r(n.reduce((e,t)=>(e.some(e=>e.id===t.id)||e.push(t),e),[]))},[e,t]),n},d9=({iiifContent:e})=>{let[t,n]=(0,J.useState)(),{state:r,dispatch:i}=(0,J.useContext)(uM),{vault:a}=r,s=d8(null==t?void 0:t.items,a);return(0,J.useEffect)(()=>{a&&a.load(e).then(e=>e&&n(e)).catch(t=>console.error(`Manifest ${e} failed to load: ${t}`))},[e,a]),(0,J.useEffect)(()=>{i({type:"updateAnnotations",payload:s})},[s,i]),t?J.createElement(u4,null,t.label&&J.createElement(u5,{label:t.label}),t.items&&J.createElement(d6,{items:t.items})):null},d7=({iiifContent:e,options:t})=>J.createElement(uP,{options:t},J.createElement(d9,{iiifContent:e}));function he(e){return null!==e&&"object"==typeof e&&"constructor"in e&&e.constructor===Object}function ht(e={},t={}){Object.keys(t).forEach(n=>{void 0===e[n]?e[n]=t[n]:he(t[n])&&he(e[n])&&Object.keys(t[n]).length>0&&ht(e[n],t[n])})}let hn={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector:()=>null,querySelectorAll:()=>[],getElementById:()=>null,createEvent:()=>({initEvent(){}}),createElement:()=>({children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName:()=>[]}),createElementNS:()=>({}),importNode:()=>null,location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function hr(){let e="undefined"!=typeof document?document:{};return ht(e,hn),e}let hi={document:hn,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle:()=>({getPropertyValue:()=>""}),Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia:()=>({}),requestAnimationFrame:e=>"undefined"==typeof setTimeout?(e(),null):setTimeout(e,0),cancelAnimationFrame(e){"undefined"!=typeof setTimeout&&clearTimeout(e)}};function ha(){let e="undefined"!=typeof window?window:{};return ht(e,hi),e}function hs(e,t=0){return setTimeout(e,t)}function ho(){return Date.now()}function hl(e){return"object"==typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)}function hc(...e){let t=Object(e[0]),n=["__proto__","constructor","prototype"];for(let r=1;r<e.length;r+=1){let i=e[r];if(null!=i&&("undefined"!=typeof window&&void 0!==window.HTMLElement?!(i instanceof HTMLElement):!i||1!==i.nodeType&&11!==i.nodeType)){let e=Object.keys(Object(i)).filter(e=>0>n.indexOf(e));for(let n=0,r=e.length;n<r;n+=1){let r=e[n],a=Object.getOwnPropertyDescriptor(i,r);void 0!==a&&a.enumerable&&(hl(t[r])&&hl(i[r])?i[r].__swiper__?t[r]=i[r]:hc(t[r],i[r]):!hl(t[r])&&hl(i[r])?(t[r]={},i[r].__swiper__?t[r]=i[r]:hc(t[r],i[r])):t[r]=i[r])}}}return t}function hu(e,t,n){e.style.setProperty(t,n)}function hd({swiper:e,targetPosition:t,side:n}){let r;let i=ha(),a=-e.translate,s=null,o=e.params.speed;e.wrapperEl.style.scrollSnapType="none",i.cancelAnimationFrame(e.cssModeFrameID);let l=t>a?"next":"prev",c=(e,t)=>"next"===l&&e>=t||"prev"===l&&e<=t,u=()=>{r=new Date().getTime(),null===s&&(s=r);let l=a+(.5-Math.cos(Math.max(Math.min((r-s)/o,1),0)*Math.PI)/2)*(t-a);if(c(l,t)&&(l=t),e.wrapperEl.scrollTo({[n]:l}),c(l,t)){e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout(()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[n]:l})}),i.cancelAnimationFrame(e.cssModeFrameID);return}e.cssModeFrameID=i.requestAnimationFrame(u)};u()}function hh(e,t=""){return[...e.children].filter(e=>e.matches(t))}function hp(e,t=[]){let n=document.createElement(e);return n.classList.add(...Array.isArray(t)?t:[t]),n}function hf(e,t){return ha().getComputedStyle(e,null).getPropertyValue(t)}function hm(e){let t,n=e;if(n){for(t=0;null!==(n=n.previousSibling);)1===n.nodeType&&(t+=1);return t}}function hg(e,t,n){let r=ha();return n?e["width"===t?"offsetWidth":"offsetHeight"]+parseFloat(r.getComputedStyle(e,null).getPropertyValue("width"===t?"margin-right":"margin-top"))+parseFloat(r.getComputedStyle(e,null).getPropertyValue("width"===t?"margin-left":"margin-bottom")):e.offsetWidth}function hE(){return a||(a=function(){let e=ha(),t=hr();return{smoothScroll:t.documentElement&&t.documentElement.style&&"scrollBehavior"in t.documentElement.style,touch:!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch)}}()),a}let hT=(e,t)=>{if(!e||e.destroyed||!e.params)return;let n=t.closest(e.isElement?"swiper-slide":`.${e.params.slideClass}`);if(n){let t=n.querySelector(`.${e.params.lazyPreloaderClass}`);t&&t.remove()}},hv=(e,t)=>{if(!e.slides[t])return;let n=e.slides[t].querySelector('[loading="lazy"]');n&&n.removeAttribute("loading")},hy=e=>{if(!e||e.destroyed||!e.params)return;let t=e.params.lazyPreloadPrevNext,n=e.slides.length;if(!n||!t||t<0)return;t=Math.min(t,n);let r="auto"===e.params.slidesPerView?e.slidesPerViewDynamic():Math.ceil(e.params.slidesPerView),i=e.activeIndex;if(e.params.grid&&e.params.grid.rows>1){let n=[i-t];n.push(...Array.from({length:t}).map((e,t)=>i+r+t)),e.slides.forEach((t,r)=>{n.includes(t.column)&&hv(e,r)});return}let a=i+r-1;if(e.params.rewind||e.params.loop)for(let r=i-t;r<=a+t;r+=1){let t=(r%n+n)%n;(t<i||t>a)&&hv(e,t)}else for(let r=Math.max(i-t,0);r<=Math.min(a+t,n-1);r+=1)r!==i&&(r>a||r<i)&&hv(e,r)};function hA({swiper:e,runCallbacks:t,direction:n,step:r}){let{activeIndex:i,previousIndex:a}=e,s=n;if(s||(s=i>a?"next":i<a?"prev":"reset"),e.emit(`transition${r}`),t&&i!==a){if("reset"===s){e.emit(`slideResetTransition${r}`);return}e.emit(`slideChangeTransition${r}`),"next"===s?e.emit(`slideNextTransition${r}`):e.emit(`slidePrevTransition${r}`)}}function hb(e){let t=hr(),n=ha(),r=this.touchEventsData;r.evCache.push(e);let{params:i,touches:a,enabled:s}=this;if(!s||!i.simulateTouch&&"mouse"===e.pointerType||this.animating&&i.preventInteractionOnTransition)return;!this.animating&&i.cssMode&&i.loop&&this.loopFix();let o=e;o.originalEvent&&(o=o.originalEvent);let l=o.target;if("wrapper"===i.touchEventsTarget&&!this.wrapperEl.contains(l)||"which"in o&&3===o.which||"button"in o&&o.button>0||r.isTouched&&r.isMoved)return;let c=!!i.noSwipingClass&&""!==i.noSwipingClass,u=e.composedPath?e.composedPath():e.path;c&&o.target&&o.target.shadowRoot&&u&&(l=u[0]);let d=i.noSwipingSelector?i.noSwipingSelector:`.${i.noSwipingClass}`,h=!!(o.target&&o.target.shadowRoot);if(i.noSwiping&&(h?function(e,t=this){return function t(n){if(!n||n===hr()||n===ha())return null;n.assignedSlot&&(n=n.assignedSlot);let r=n.closest(e);return r||n.getRootNode?r||t(n.getRootNode().host):null}(t)}(d,l):l.closest(d))){this.allowClick=!0;return}if(i.swipeHandler&&!l.closest(i.swipeHandler))return;a.currentX=o.pageX,a.currentY=o.pageY;let p=a.currentX,f=a.currentY,m=i.edgeSwipeDetection||i.iOSEdgeSwipeDetection,g=i.edgeSwipeThreshold||i.iOSEdgeSwipeThreshold;if(m&&(p<=g||p>=n.innerWidth-g)){if("prevent"!==m)return;e.preventDefault()}Object.assign(r,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),a.startX=p,a.startY=f,r.touchStartTime=ho(),this.allowClick=!0,this.updateSize(),this.swipeDirection=void 0,i.threshold>0&&(r.allowThresholdMove=!1);let E=!0;l.matches(r.focusableElements)&&(E=!1,"SELECT"===l.nodeName&&(r.isTouched=!1)),t.activeElement&&t.activeElement.matches(r.focusableElements)&&t.activeElement!==l&&t.activeElement.blur();let T=E&&this.allowTouchMove&&i.touchStartPreventDefault;(i.touchStartForcePreventDefault||T)&&!l.isContentEditable&&o.preventDefault(),i.freeMode&&i.freeMode.enabled&&this.freeMode&&this.animating&&!i.cssMode&&this.freeMode.onTouchStart(),this.emit("touchStart",o)}function h_(e){let t;let n=hr(),r=this.touchEventsData,{params:i,touches:a,rtlTranslate:s,enabled:o}=this;if(!o||!i.simulateTouch&&"mouse"===e.pointerType)return;let l=e;if(l.originalEvent&&(l=l.originalEvent),!r.isTouched){r.startMoving&&r.isScrolling&&this.emit("touchMoveOpposite",l);return}let c=r.evCache.findIndex(e=>e.pointerId===l.pointerId);c>=0&&(r.evCache[c]=l);let u=r.evCache.length>1?r.evCache[0]:l,d=u.pageX,h=u.pageY;if(l.preventedByNestedSwiper){a.startX=d,a.startY=h;return}if(!this.allowTouchMove){l.target.matches(r.focusableElements)||(this.allowClick=!1),r.isTouched&&(Object.assign(a,{startX:d,startY:h,prevX:this.touches.currentX,prevY:this.touches.currentY,currentX:d,currentY:h}),r.touchStartTime=ho());return}if(i.touchReleaseOnEdges&&!i.loop){if(this.isVertical()){if(h<a.startY&&this.translate<=this.maxTranslate()||h>a.startY&&this.translate>=this.minTranslate()){r.isTouched=!1,r.isMoved=!1;return}}else if(d<a.startX&&this.translate<=this.maxTranslate()||d>a.startX&&this.translate>=this.minTranslate())return}if(n.activeElement&&l.target===n.activeElement&&l.target.matches(r.focusableElements)){r.isMoved=!0,this.allowClick=!1;return}if(r.allowTouchCallbacks&&this.emit("touchMove",l),l.targetTouches&&l.targetTouches.length>1)return;a.currentX=d,a.currentY=h;let p=a.currentX-a.startX,f=a.currentY-a.startY;if(this.params.threshold&&Math.sqrt(p**2+f**2)<this.params.threshold)return;if(void 0===r.isScrolling){let e;this.isHorizontal()&&a.currentY===a.startY||this.isVertical()&&a.currentX===a.startX?r.isScrolling=!1:p*p+f*f>=25&&(e=180*Math.atan2(Math.abs(f),Math.abs(p))/Math.PI,r.isScrolling=this.isHorizontal()?e>i.touchAngle:90-e>i.touchAngle)}if(r.isScrolling&&this.emit("touchMoveOpposite",l),void 0===r.startMoving&&(a.currentX!==a.startX||a.currentY!==a.startY)&&(r.startMoving=!0),r.isScrolling||this.zoom&&this.params.zoom&&this.params.zoom.enabled&&r.evCache.length>1){r.isTouched=!1;return}if(!r.startMoving)return;this.allowClick=!1,!i.cssMode&&l.cancelable&&l.preventDefault(),i.touchMoveStopPropagation&&!i.nested&&l.stopPropagation();let m=this.isHorizontal()?p:f,g=this.isHorizontal()?a.currentX-a.previousX:a.currentY-a.previousY;i.oneWayMovement&&(m=Math.abs(m)*(s?1:-1),g=Math.abs(g)*(s?1:-1)),a.diff=m,m*=i.touchRatio,s&&(m=-m,g=-g);let E=this.touchesDirection;this.swipeDirection=m>0?"prev":"next",this.touchesDirection=g>0?"prev":"next";let T=this.params.loop&&!i.cssMode;if(!r.isMoved){if(T&&this.loopFix({direction:this.swipeDirection}),r.startTranslate=this.getTranslate(),this.setTransition(0),this.animating){let e=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});this.wrapperEl.dispatchEvent(e)}r.allowMomentumBounce=!1,i.grabCursor&&(!0===this.allowSlideNext||!0===this.allowSlidePrev)&&this.setGrabCursor(!0),this.emit("sliderFirstMove",l)}r.isMoved&&E!==this.touchesDirection&&T&&Math.abs(m)>=1&&(this.loopFix({direction:this.swipeDirection,setTranslate:!0}),t=!0),this.emit("sliderMove",l),r.isMoved=!0,r.currentTranslate=m+r.startTranslate;let v=!0,y=i.resistanceRatio;if(i.touchReleaseOnEdges&&(y=0),m>0?(T&&!t&&r.currentTranslate>(i.centeredSlides?this.minTranslate()-this.size/2:this.minTranslate())&&this.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),r.currentTranslate>this.minTranslate()&&(v=!1,i.resistance&&(r.currentTranslate=this.minTranslate()-1+(-this.minTranslate()+r.startTranslate+m)**y))):m<0&&(T&&!t&&r.currentTranslate<(i.centeredSlides?this.maxTranslate()+this.size/2:this.maxTranslate())&&this.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:this.slides.length-("auto"===i.slidesPerView?this.slidesPerViewDynamic():Math.ceil(parseFloat(i.slidesPerView,10)))}),r.currentTranslate<this.maxTranslate()&&(v=!1,i.resistance&&(r.currentTranslate=this.maxTranslate()+1-(this.maxTranslate()-r.startTranslate-m)**y))),v&&(l.preventedByNestedSwiper=!0),!this.allowSlideNext&&"next"===this.swipeDirection&&r.currentTranslate<r.startTranslate&&(r.currentTranslate=r.startTranslate),!this.allowSlidePrev&&"prev"===this.swipeDirection&&r.currentTranslate>r.startTranslate&&(r.currentTranslate=r.startTranslate),this.allowSlidePrev||this.allowSlideNext||(r.currentTranslate=r.startTranslate),i.threshold>0){if(Math.abs(m)>i.threshold||r.allowThresholdMove){if(!r.allowThresholdMove){r.allowThresholdMove=!0,a.startX=a.currentX,a.startY=a.currentY,r.currentTranslate=r.startTranslate,a.diff=this.isHorizontal()?a.currentX-a.startX:a.currentY-a.startY;return}}else{r.currentTranslate=r.startTranslate;return}}i.followFinger&&!i.cssMode&&((i.freeMode&&i.freeMode.enabled&&this.freeMode||i.watchSlidesProgress)&&(this.updateActiveIndex(),this.updateSlidesClasses()),i.freeMode&&i.freeMode.enabled&&this.freeMode&&this.freeMode.onTouchMove(),this.updateProgress(r.currentTranslate),this.setTranslate(r.currentTranslate))}function hC(e){let t;let n=this,r=n.touchEventsData,i=r.evCache.findIndex(t=>t.pointerId===e.pointerId);if(i>=0&&r.evCache.splice(i,1),["pointercancel","pointerout","pointerleave"].includes(e.type)&&!("pointercancel"===e.type&&(n.browser.isSafari||n.browser.isWebView)))return;let{params:a,touches:s,rtlTranslate:o,slidesGrid:l,enabled:c}=n;if(!c||!a.simulateTouch&&"mouse"===e.pointerType)return;let u=e;if(u.originalEvent&&(u=u.originalEvent),r.allowTouchCallbacks&&n.emit("touchEnd",u),r.allowTouchCallbacks=!1,!r.isTouched){r.isMoved&&a.grabCursor&&n.setGrabCursor(!1),r.isMoved=!1,r.startMoving=!1;return}a.grabCursor&&r.isMoved&&r.isTouched&&(!0===n.allowSlideNext||!0===n.allowSlidePrev)&&n.setGrabCursor(!1);let d=ho(),h=d-r.touchStartTime;if(n.allowClick){let e=u.path||u.composedPath&&u.composedPath();n.updateClickedSlide(e&&e[0]||u.target),n.emit("tap click",u),h<300&&d-r.lastClickTime<300&&n.emit("doubleTap doubleClick",u)}if(r.lastClickTime=ho(),hs(()=>{n.destroyed||(n.allowClick=!0)}),!r.isTouched||!r.isMoved||!n.swipeDirection||0===s.diff||r.currentTranslate===r.startTranslate){r.isTouched=!1,r.isMoved=!1,r.startMoving=!1;return}if(r.isTouched=!1,r.isMoved=!1,r.startMoving=!1,t=a.followFinger?o?n.translate:-n.translate:-r.currentTranslate,a.cssMode)return;if(a.freeMode&&a.freeMode.enabled){n.freeMode.onTouchEnd({currentPos:t});return}let p=0,f=n.slidesSizesGrid[0];for(let e=0;e<l.length;e+=e<a.slidesPerGroupSkip?1:a.slidesPerGroup){let n=e<a.slidesPerGroupSkip-1?1:a.slidesPerGroup;void 0!==l[e+n]?t>=l[e]&&t<l[e+n]&&(p=e,f=l[e+n]-l[e]):t>=l[e]&&(p=e,f=l[l.length-1]-l[l.length-2])}let m=null,g=null;a.rewind&&(n.isBeginning?g=a.virtual&&a.virtual.enabled&&n.virtual?n.virtual.slides.length-1:n.slides.length-1:n.isEnd&&(m=0));let E=(t-l[p])/f,T=p<a.slidesPerGroupSkip-1?1:a.slidesPerGroup;if(h>a.longSwipesMs){if(!a.longSwipes){n.slideTo(n.activeIndex);return}"next"===n.swipeDirection&&(E>=a.longSwipesRatio?n.slideTo(a.rewind&&n.isEnd?m:p+T):n.slideTo(p)),"prev"===n.swipeDirection&&(E>1-a.longSwipesRatio?n.slideTo(p+T):null!==g&&E<0&&Math.abs(E)>a.longSwipesRatio?n.slideTo(g):n.slideTo(p))}else{if(!a.shortSwipes){n.slideTo(n.activeIndex);return}n.navigation&&(u.target===n.navigation.nextEl||u.target===n.navigation.prevEl)?u.target===n.navigation.nextEl?n.slideTo(p+T):n.slideTo(p):("next"===n.swipeDirection&&n.slideTo(null!==m?m:p+T),"prev"===n.swipeDirection&&n.slideTo(null!==g?g:p))}}function hS(){let e=this,{params:t,el:n}=e;if(n&&0===n.offsetWidth)return;t.breakpoints&&e.setBreakpoint();let{allowSlideNext:r,allowSlidePrev:i,snapGrid:a}=e,s=e.virtual&&e.params.virtual.enabled;e.allowSlideNext=!0,e.allowSlidePrev=!0,e.updateSize(),e.updateSlides(),e.updateSlidesClasses();let o=s&&t.loop;"auto"!==t.slidesPerView&&!(t.slidesPerView>1)||!e.isEnd||e.isBeginning||e.params.centeredSlides||o?e.params.loop&&!s?e.slideToLoop(e.realIndex,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0):e.slideTo(e.slides.length-1,0,!1,!0),e.autoplay&&e.autoplay.running&&e.autoplay.paused&&(clearTimeout(e.autoplay.resizeTimeout),e.autoplay.resizeTimeout=setTimeout(()=>{e.autoplay&&e.autoplay.running&&e.autoplay.paused&&e.autoplay.resume()},500)),e.allowSlidePrev=i,e.allowSlideNext=r,e.params.watchOverflow&&a!==e.snapGrid&&e.checkOverflow()}function hI(e){this.enabled&&!this.allowClick&&(this.params.preventClicks&&e.preventDefault(),this.params.preventClicksPropagation&&this.animating&&(e.stopPropagation(),e.stopImmediatePropagation()))}function hx(){let{wrapperEl:e,rtlTranslate:t,enabled:n}=this;if(!n)return;this.previousTranslate=this.translate,this.isHorizontal()?this.translate=-e.scrollLeft:this.translate=-e.scrollTop,0===this.translate&&(this.translate=0),this.updateActiveIndex(),this.updateSlidesClasses();let r=this.maxTranslate()-this.minTranslate();(0===r?0:(this.translate-this.minTranslate())/r)!==this.progress&&this.updateProgress(t?-this.translate:this.translate),this.emit("setTranslate",this.translate,!1)}function hk(e){hT(this,e.target),!this.params.cssMode&&("auto"===this.params.slidesPerView||this.params.autoHeight)&&this.update()}let hw=!1;function hN(){}let hO=(e,t)=>{let n=hr(),{params:r,el:i,wrapperEl:a,device:s}=e,o=!!r.nested,l="on"===t?"addEventListener":"removeEventListener";i[l]("pointerdown",e.onTouchStart,{passive:!1}),n[l]("pointermove",e.onTouchMove,{passive:!1,capture:o}),n[l]("pointerup",e.onTouchEnd,{passive:!0}),n[l]("pointercancel",e.onTouchEnd,{passive:!0}),n[l]("pointerout",e.onTouchEnd,{passive:!0}),n[l]("pointerleave",e.onTouchEnd,{passive:!0}),(r.preventClicks||r.preventClicksPropagation)&&i[l]("click",e.onClick,!0),r.cssMode&&a[l]("scroll",e.onScroll),r.updateOnWindowResize?e[t](s.ios||s.android?"resize orientationchange observerUpdate":"resize observerUpdate",hS,!0):e[t]("observerUpdate",hS,!0),i[l]("load",e.onLoad,{capture:!0})},hR=(e,t)=>e.grid&&t.grid&&t.grid.rows>1;var hL={init:!0,direction:"horizontal",oneWayMovement:!1,touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopedSlides:null,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};let hD={eventsEmitter:{on(e,t,n){let r=this;if(!r.eventsListeners||r.destroyed||"function"!=typeof t)return r;let i=n?"unshift":"push";return e.split(" ").forEach(e=>{r.eventsListeners[e]||(r.eventsListeners[e]=[]),r.eventsListeners[e][i](t)}),r},once(e,t,n){let r=this;if(!r.eventsListeners||r.destroyed||"function"!=typeof t)return r;function i(...n){r.off(e,i),i.__emitterProxy&&delete i.__emitterProxy,t.apply(r,n)}return i.__emitterProxy=t,r.on(e,i,n)},onAny(e,t){return!this.eventsListeners||this.destroyed||"function"!=typeof e||0>this.eventsAnyListeners.indexOf(e)&&this.eventsAnyListeners[t?"unshift":"push"](e),this},offAny(e){if(!this.eventsListeners||this.destroyed||!this.eventsAnyListeners)return this;let t=this.eventsAnyListeners.indexOf(e);return t>=0&&this.eventsAnyListeners.splice(t,1),this},off(e,t){let n=this;return n.eventsListeners&&!n.destroyed&&n.eventsListeners&&e.split(" ").forEach(e=>{void 0===t?n.eventsListeners[e]=[]:n.eventsListeners[e]&&n.eventsListeners[e].forEach((r,i)=>{(r===t||r.__emitterProxy&&r.__emitterProxy===t)&&n.eventsListeners[e].splice(i,1)})}),n},emit(...e){let t,n,r;let i=this;return i.eventsListeners&&!i.destroyed&&i.eventsListeners&&("string"==typeof e[0]||Array.isArray(e[0])?(t=e[0],n=e.slice(1,e.length),r=i):(t=e[0].events,n=e[0].data,r=e[0].context||i),n.unshift(r),(Array.isArray(t)?t:t.split(" ")).forEach(e=>{i.eventsAnyListeners&&i.eventsAnyListeners.length&&i.eventsAnyListeners.forEach(t=>{t.apply(r,[e,...n])}),i.eventsListeners&&i.eventsListeners[e]&&i.eventsListeners[e].forEach(e=>{e.apply(r,n)})})),i}},update:{updateSize:function(){let e,t;let n=this.el;e=void 0!==this.params.width&&null!==this.params.width?this.params.width:n.clientWidth,t=void 0!==this.params.height&&null!==this.params.height?this.params.height:n.clientHeight,0===e&&this.isHorizontal()||0===t&&this.isVertical()||(e=e-parseInt(hf(n,"padding-left")||0,10)-parseInt(hf(n,"padding-right")||0,10),t=t-parseInt(hf(n,"padding-top")||0,10)-parseInt(hf(n,"padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(t)&&(t=0),Object.assign(this,{width:e,height:t,size:this.isHorizontal()?e:t}))},updateSlides:function(){let e;let t=this;function n(e){return t.isHorizontal()?e:({width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"})[e]}function r(e,t){return parseFloat(e.getPropertyValue(n(t))||0)}let i=t.params,{wrapperEl:a,slidesEl:s,size:o,rtlTranslate:l,wrongRTL:c}=t,u=t.virtual&&i.virtual.enabled,d=u?t.virtual.slides.length:t.slides.length,h=hh(s,`.${t.params.slideClass}, swiper-slide`),p=u?t.virtual.slides.length:h.length,f=[],m=[],g=[],E=i.slidesOffsetBefore;"function"==typeof E&&(E=i.slidesOffsetBefore.call(t));let T=i.slidesOffsetAfter;"function"==typeof T&&(T=i.slidesOffsetAfter.call(t));let v=t.snapGrid.length,y=t.slidesGrid.length,A=i.spaceBetween,b=-E,_=0,C=0;if(void 0===o)return;"string"==typeof A&&A.indexOf("%")>=0?A=parseFloat(A.replace("%",""))/100*o:"string"==typeof A&&(A=parseFloat(A)),t.virtualSize=-A,h.forEach(e=>{l?e.style.marginLeft="":e.style.marginRight="",e.style.marginBottom="",e.style.marginTop=""}),i.centeredSlides&&i.cssMode&&(hu(a,"--swiper-centered-offset-before",""),hu(a,"--swiper-centered-offset-after",""));let S=i.grid&&i.grid.rows>1&&t.grid;S&&t.grid.initSlides(p);let I="auto"===i.slidesPerView&&i.breakpoints&&Object.keys(i.breakpoints).filter(e=>void 0!==i.breakpoints[e].slidesPerView).length>0;for(let a=0;a<p;a+=1){let s;if(e=0,h[a]&&(s=h[a]),S&&t.grid.updateSlide(a,s,p,n),!h[a]||"none"!==hf(s,"display")){if("auto"===i.slidesPerView){I&&(h[a].style[n("width")]="");let o=getComputedStyle(s),l=s.style.transform,c=s.style.webkitTransform;if(l&&(s.style.transform="none"),c&&(s.style.webkitTransform="none"),i.roundLengths)e=t.isHorizontal()?hg(s,"width",!0):hg(s,"height",!0);else{let t=r(o,"width"),n=r(o,"padding-left"),i=r(o,"padding-right"),a=r(o,"margin-left"),l=r(o,"margin-right"),c=o.getPropertyValue("box-sizing");if(c&&"border-box"===c)e=t+a+l;else{let{clientWidth:r,offsetWidth:o}=s;e=t+n+i+a+l+(o-r)}}l&&(s.style.transform=l),c&&(s.style.webkitTransform=c),i.roundLengths&&(e=Math.floor(e))}else e=(o-(i.slidesPerView-1)*A)/i.slidesPerView,i.roundLengths&&(e=Math.floor(e)),h[a]&&(h[a].style[n("width")]=`${e}px`);h[a]&&(h[a].swiperSlideSize=e),g.push(e),i.centeredSlides?(b=b+e/2+_/2+A,0===_&&0!==a&&(b=b-o/2-A),0===a&&(b=b-o/2-A),.001>Math.abs(b)&&(b=0),i.roundLengths&&(b=Math.floor(b)),C%i.slidesPerGroup==0&&f.push(b),m.push(b)):(i.roundLengths&&(b=Math.floor(b)),(C-Math.min(t.params.slidesPerGroupSkip,C))%t.params.slidesPerGroup==0&&f.push(b),m.push(b),b=b+e+A),t.virtualSize+=e+A,_=e,C+=1}}if(t.virtualSize=Math.max(t.virtualSize,o)+T,l&&c&&("slide"===i.effect||"coverflow"===i.effect)&&(a.style.width=`${t.virtualSize+A}px`),i.setWrapperSize&&(a.style[n("width")]=`${t.virtualSize+A}px`),S&&t.grid.updateWrapperSize(e,f,n),!i.centeredSlides){let e=[];for(let n=0;n<f.length;n+=1){let r=f[n];i.roundLengths&&(r=Math.floor(r)),f[n]<=t.virtualSize-o&&e.push(r)}f=e,Math.floor(t.virtualSize-o)-Math.floor(f[f.length-1])>1&&f.push(t.virtualSize-o)}if(u&&i.loop){let e=g[0]+A;if(i.slidesPerGroup>1){let n=Math.ceil((t.virtual.slidesBefore+t.virtual.slidesAfter)/i.slidesPerGroup),r=e*i.slidesPerGroup;for(let e=0;e<n;e+=1)f.push(f[f.length-1]+r)}for(let n=0;n<t.virtual.slidesBefore+t.virtual.slidesAfter;n+=1)1===i.slidesPerGroup&&f.push(f[f.length-1]+e),m.push(m[m.length-1]+e),t.virtualSize+=e}if(0===f.length&&(f=[0]),0!==A){let e=t.isHorizontal()&&l?"marginLeft":n("marginRight");h.filter((e,t)=>!i.cssMode||!!i.loop||t!==h.length-1).forEach(t=>{t.style[e]=`${A}px`})}if(i.centeredSlides&&i.centeredSlidesBounds){let e=0;g.forEach(t=>{e+=t+(A||0)});let t=(e-=A)-o;f=f.map(e=>e<=0?-E:e>t?t+T:e)}if(i.centerInsufficientSlides){let e=0;if(g.forEach(t=>{e+=t+(A||0)}),(e-=A)<o){let t=(o-e)/2;f.forEach((e,n)=>{f[n]=e-t}),m.forEach((e,n)=>{m[n]=e+t})}}if(Object.assign(t,{slides:h,snapGrid:f,slidesGrid:m,slidesSizesGrid:g}),i.centeredSlides&&i.cssMode&&!i.centeredSlidesBounds){hu(a,"--swiper-centered-offset-before",`${-f[0]}px`),hu(a,"--swiper-centered-offset-after",`${t.size/2-g[g.length-1]/2}px`);let e=-t.snapGrid[0],n=-t.slidesGrid[0];t.snapGrid=t.snapGrid.map(t=>t+e),t.slidesGrid=t.slidesGrid.map(e=>e+n)}if(p!==d&&t.emit("slidesLengthChange"),f.length!==v&&(t.params.watchOverflow&&t.checkOverflow(),t.emit("snapGridLengthChange")),m.length!==y&&t.emit("slidesGridLengthChange"),i.watchSlidesProgress&&t.updateSlidesOffset(),!u&&!i.cssMode&&("slide"===i.effect||"fade"===i.effect)){let e=`${i.containerModifierClass}backface-hidden`,n=t.el.classList.contains(e);p<=i.maxBackfaceHiddenSlides?n||t.el.classList.add(e):n&&t.el.classList.remove(e)}},updateAutoHeight:function(e){let t;let n=this,r=[],i=n.virtual&&n.params.virtual.enabled,a=0;"number"==typeof e?n.setTransition(e):!0===e&&n.setTransition(n.params.speed);let s=e=>i?n.slides[n.getSlideIndexByData(e)]:n.slides[e];if("auto"!==n.params.slidesPerView&&n.params.slidesPerView>1){if(n.params.centeredSlides)(n.visibleSlides||[]).forEach(e=>{r.push(e)});else for(t=0;t<Math.ceil(n.params.slidesPerView);t+=1){let e=n.activeIndex+t;if(e>n.slides.length&&!i)break;r.push(s(e))}}else r.push(s(n.activeIndex));for(t=0;t<r.length;t+=1)if(void 0!==r[t]){let e=r[t].offsetHeight;a=e>a?e:a}(a||0===a)&&(n.wrapperEl.style.height=`${a}px`)},updateSlidesOffset:function(){let e=this.slides,t=this.isElement?this.isHorizontal()?this.wrapperEl.offsetLeft:this.wrapperEl.offsetTop:0;for(let n=0;n<e.length;n+=1)e[n].swiperSlideOffset=(this.isHorizontal()?e[n].offsetLeft:e[n].offsetTop)-t-this.cssOverflowAdjustment()},updateSlidesProgress:function(e=this&&this.translate||0){let t=this.params,{slides:n,rtlTranslate:r,snapGrid:i}=this;if(0===n.length)return;void 0===n[0].swiperSlideOffset&&this.updateSlidesOffset();let a=-e;r&&(a=e),n.forEach(e=>{e.classList.remove(t.slideVisibleClass)}),this.visibleSlidesIndexes=[],this.visibleSlides=[];let s=t.spaceBetween;"string"==typeof s&&s.indexOf("%")>=0?s=parseFloat(s.replace("%",""))/100*this.size:"string"==typeof s&&(s=parseFloat(s));for(let e=0;e<n.length;e+=1){let o=n[e],l=o.swiperSlideOffset;t.cssMode&&t.centeredSlides&&(l-=n[0].swiperSlideOffset);let c=(a+(t.centeredSlides?this.minTranslate():0)-l)/(o.swiperSlideSize+s),u=(a-i[0]+(t.centeredSlides?this.minTranslate():0)-l)/(o.swiperSlideSize+s),d=-(a-l),h=d+this.slidesSizesGrid[e];(d>=0&&d<this.size-1||h>1&&h<=this.size||d<=0&&h>=this.size)&&(this.visibleSlides.push(o),this.visibleSlidesIndexes.push(e),n[e].classList.add(t.slideVisibleClass)),o.progress=r?-c:c,o.originalProgress=r?-u:u}},updateProgress:function(e){if(void 0===e){let t=this.rtlTranslate?-1:1;e=this&&this.translate&&this.translate*t||0}let t=this.params,n=this.maxTranslate()-this.minTranslate(),{progress:r,isBeginning:i,isEnd:a,progressLoop:s}=this,o=i,l=a;if(0===n)r=0,i=!0,a=!0;else{r=(e-this.minTranslate())/n;let t=1>Math.abs(e-this.minTranslate()),s=1>Math.abs(e-this.maxTranslate());i=t||r<=0,a=s||r>=1,t&&(r=0),s&&(r=1)}if(t.loop){let t=this.getSlideIndexByData(0),n=this.getSlideIndexByData(this.slides.length-1),r=this.slidesGrid[t],i=this.slidesGrid[n],a=this.slidesGrid[this.slidesGrid.length-1],o=Math.abs(e);(s=o>=r?(o-r)/a:(o+a-i)/a)>1&&(s-=1)}Object.assign(this,{progress:r,progressLoop:s,isBeginning:i,isEnd:a}),(t.watchSlidesProgress||t.centeredSlides&&t.autoHeight)&&this.updateSlidesProgress(e),i&&!o&&this.emit("reachBeginning toEdge"),a&&!l&&this.emit("reachEnd toEdge"),(o&&!i||l&&!a)&&this.emit("fromEdge"),this.emit("progress",r)},updateSlidesClasses:function(){let e;let{slides:t,params:n,slidesEl:r,activeIndex:i}=this,a=this.virtual&&n.virtual.enabled,s=e=>hh(r,`.${n.slideClass}${e}, swiper-slide${e}`)[0];if(t.forEach(e=>{e.classList.remove(n.slideActiveClass,n.slideNextClass,n.slidePrevClass)}),a){if(n.loop){let t=i-this.virtual.slidesBefore;t<0&&(t=this.virtual.slides.length+t),t>=this.virtual.slides.length&&(t-=this.virtual.slides.length),e=s(`[data-swiper-slide-index="${t}"]`)}else e=s(`[data-swiper-slide-index="${i}"]`)}else e=t[i];if(e){e.classList.add(n.slideActiveClass);let r=function(e,t){let n=[];for(;e.nextElementSibling;){let r=e.nextElementSibling;t?r.matches(t)&&n.push(r):n.push(r),e=r}return n}(e,`.${n.slideClass}, swiper-slide`)[0];n.loop&&!r&&(r=t[0]),r&&r.classList.add(n.slideNextClass);let i=function(e,t){let n=[];for(;e.previousElementSibling;){let r=e.previousElementSibling;t?r.matches(t)&&n.push(r):n.push(r),e=r}return n}(e,`.${n.slideClass}, swiper-slide`)[0];n.loop,i&&i.classList.add(n.slidePrevClass)}this.emitSlidesClasses()},updateActiveIndex:function(e){let t,n;let r=this,i=r.rtlTranslate?r.translate:-r.translate,{snapGrid:a,params:s,activeIndex:o,realIndex:l,snapIndex:c}=r,u=e,d=e=>{let t=e-r.virtual.slidesBefore;return t<0&&(t=r.virtual.slides.length+t),t>=r.virtual.slides.length&&(t-=r.virtual.slides.length),t};if(void 0===u&&(u=function(e){let t;let{slidesGrid:n,params:r}=e,i=e.rtlTranslate?e.translate:-e.translate;for(let e=0;e<n.length;e+=1)void 0!==n[e+1]?i>=n[e]&&i<n[e+1]-(n[e+1]-n[e])/2?t=e:i>=n[e]&&i<n[e+1]&&(t=e+1):i>=n[e]&&(t=e);return r.normalizeSlideIndex&&(t<0||void 0===t)&&(t=0),t}(r)),a.indexOf(i)>=0)t=a.indexOf(i);else{let e=Math.min(s.slidesPerGroupSkip,u);t=e+Math.floor((u-e)/s.slidesPerGroup)}if(t>=a.length&&(t=a.length-1),u===o){t!==c&&(r.snapIndex=t,r.emit("snapIndexChange")),r.params.loop&&r.virtual&&r.params.virtual.enabled&&(r.realIndex=d(u));return}n=r.virtual&&s.virtual.enabled&&s.loop?d(u):r.slides[u]?parseInt(r.slides[u].getAttribute("data-swiper-slide-index")||u,10):u,Object.assign(r,{previousSnapIndex:c,snapIndex:t,previousRealIndex:l,realIndex:n,previousIndex:o,activeIndex:u}),r.initialized&&hy(r),r.emit("activeIndexChange"),r.emit("snapIndexChange"),l!==n&&r.emit("realIndexChange"),(r.initialized||r.params.runCallbacksOnInit)&&r.emit("slideChange")},updateClickedSlide:function(e){let t;let n=this.params,r=e.closest(`.${n.slideClass}, swiper-slide`),i=!1;if(r){for(let e=0;e<this.slides.length;e+=1)if(this.slides[e]===r){i=!0,t=e;break}}if(r&&i)this.clickedSlide=r,this.virtual&&this.params.virtual.enabled?this.clickedIndex=parseInt(r.getAttribute("data-swiper-slide-index"),10):this.clickedIndex=t;else{this.clickedSlide=void 0,this.clickedIndex=void 0;return}n.slideToClickedSlide&&void 0!==this.clickedIndex&&this.clickedIndex!==this.activeIndex&&this.slideToClickedSlide()}},translate:{getTranslate:function(e=this.isHorizontal()?"x":"y"){let{params:t,rtlTranslate:n,translate:r,wrapperEl:i}=this;if(t.virtualTranslate)return n?-r:r;if(t.cssMode)return r;let a=function(e,t="x"){let n,r,i;let a=ha(),s=function(e){let t;let n=ha();return n.getComputedStyle&&(t=n.getComputedStyle(e,null)),!t&&e.currentStyle&&(t=e.currentStyle),t||(t=e.style),t}(e,null);return a.WebKitCSSMatrix?((r=s.transform||s.webkitTransform).split(",").length>6&&(r=r.split(", ").map(e=>e.replace(",",".")).join(", ")),i=new a.WebKitCSSMatrix("none"===r?"":r)):n=(i=s.MozTransform||s.OTransform||s.MsTransform||s.msTransform||s.transform||s.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,")).toString().split(","),"x"===t&&(r=a.WebKitCSSMatrix?i.m41:16===n.length?parseFloat(n[12]):parseFloat(n[4])),"y"===t&&(r=a.WebKitCSSMatrix?i.m42:16===n.length?parseFloat(n[13]):parseFloat(n[5])),r||0}(i,e);return a+=this.cssOverflowAdjustment(),n&&(a=-a),a||0},setTranslate:function(e,t){let{rtlTranslate:n,params:r,wrapperEl:i,progress:a}=this,s=0,o=0;this.isHorizontal()?s=n?-e:e:o=e,r.roundLengths&&(s=Math.floor(s),o=Math.floor(o)),this.previousTranslate=this.translate,this.translate=this.isHorizontal()?s:o,r.cssMode?i[this.isHorizontal()?"scrollLeft":"scrollTop"]=this.isHorizontal()?-s:-o:r.virtualTranslate||(this.isHorizontal()?s-=this.cssOverflowAdjustment():o-=this.cssOverflowAdjustment(),i.style.transform=`translate3d(${s}px, ${o}px, 0px)`);let l=this.maxTranslate()-this.minTranslate();(0===l?0:(e-this.minTranslate())/l)!==a&&this.updateProgress(e),this.emit("setTranslate",this.translate,t)},minTranslate:function(){return-this.snapGrid[0]},maxTranslate:function(){return-this.snapGrid[this.snapGrid.length-1]},translateTo:function(e=0,t=this.params.speed,n=!0,r=!0,i){let a;let s=this,{params:o,wrapperEl:l}=s;if(s.animating&&o.preventInteractionOnTransition)return!1;let c=s.minTranslate(),u=s.maxTranslate();if(a=r&&e>c?c:r&&e<u?u:e,s.updateProgress(a),o.cssMode){let e=s.isHorizontal();if(0===t)l[e?"scrollLeft":"scrollTop"]=-a;else{if(!s.support.smoothScroll)return hd({swiper:s,targetPosition:-a,side:e?"left":"top"}),!0;l.scrollTo({[e?"left":"top"]:-a,behavior:"smooth"})}return!0}return 0===t?(s.setTransition(0),s.setTranslate(a),n&&(s.emit("beforeTransitionStart",t,i),s.emit("transitionEnd"))):(s.setTransition(t),s.setTranslate(a),n&&(s.emit("beforeTransitionStart",t,i),s.emit("transitionStart")),s.animating||(s.animating=!0,s.onTranslateToWrapperTransitionEnd||(s.onTranslateToWrapperTransitionEnd=function(e){s&&!s.destroyed&&e.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onTranslateToWrapperTransitionEnd),s.onTranslateToWrapperTransitionEnd=null,delete s.onTranslateToWrapperTransitionEnd,n&&s.emit("transitionEnd"))}),s.wrapperEl.addEventListener("transitionend",s.onTranslateToWrapperTransitionEnd))),!0}},transition:{setTransition:function(e,t){this.params.cssMode||(this.wrapperEl.style.transitionDuration=`${e}ms`),this.emit("setTransition",e,t)},transitionStart:function(e=!0,t){let{params:n}=this;n.cssMode||(n.autoHeight&&this.updateAutoHeight(),hA({swiper:this,runCallbacks:e,direction:t,step:"Start"}))},transitionEnd:function(e=!0,t){let{params:n}=this;this.animating=!1,n.cssMode||(this.setTransition(0),hA({swiper:this,runCallbacks:e,direction:t,step:"End"}))}},slide:{slideTo:function(e=0,t=this.params.speed,n=!0,r,i){let a;"string"==typeof e&&(e=parseInt(e,10));let s=this,o=e;o<0&&(o=0);let{params:l,snapGrid:c,slidesGrid:u,previousIndex:d,activeIndex:h,rtlTranslate:p,wrapperEl:f,enabled:m}=s;if(s.animating&&l.preventInteractionOnTransition||!m&&!r&&!i)return!1;let g=Math.min(s.params.slidesPerGroupSkip,o),E=g+Math.floor((o-g)/s.params.slidesPerGroup);E>=c.length&&(E=c.length-1);let T=-c[E];if(l.normalizeSlideIndex)for(let e=0;e<u.length;e+=1){let t=-Math.floor(100*T),n=Math.floor(100*u[e]),r=Math.floor(100*u[e+1]);void 0!==u[e+1]?t>=n&&t<r-(r-n)/2?o=e:t>=n&&t<r&&(o=e+1):t>=n&&(o=e)}if(s.initialized&&o!==h&&(!s.allowSlideNext&&(p?T>s.translate&&T>s.minTranslate():T<s.translate&&T<s.minTranslate())||!s.allowSlidePrev&&T>s.translate&&T>s.maxTranslate()&&(h||0)!==o))return!1;if(o!==(d||0)&&n&&s.emit("beforeSlideChangeStart"),s.updateProgress(T),a=o>h?"next":o<h?"prev":"reset",p&&-T===s.translate||!p&&T===s.translate)return s.updateActiveIndex(o),l.autoHeight&&s.updateAutoHeight(),s.updateSlidesClasses(),"slide"!==l.effect&&s.setTranslate(T),"reset"!==a&&(s.transitionStart(n,a),s.transitionEnd(n,a)),!1;if(l.cssMode){let e=s.isHorizontal(),n=p?T:-T;if(0===t){let t=s.virtual&&s.params.virtual.enabled;t&&(s.wrapperEl.style.scrollSnapType="none",s._immediateVirtual=!0),t&&!s._cssModeVirtualInitialSet&&s.params.initialSlide>0?(s._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{f[e?"scrollLeft":"scrollTop"]=n})):f[e?"scrollLeft":"scrollTop"]=n,t&&requestAnimationFrame(()=>{s.wrapperEl.style.scrollSnapType="",s._immediateVirtual=!1})}else{if(!s.support.smoothScroll)return hd({swiper:s,targetPosition:n,side:e?"left":"top"}),!0;f.scrollTo({[e?"left":"top"]:n,behavior:"smooth"})}return!0}return s.setTransition(t),s.setTranslate(T),s.updateActiveIndex(o),s.updateSlidesClasses(),s.emit("beforeTransitionStart",t,r),s.transitionStart(n,a),0===t?s.transitionEnd(n,a):s.animating||(s.animating=!0,s.onSlideToWrapperTransitionEnd||(s.onSlideToWrapperTransitionEnd=function(e){s&&!s.destroyed&&e.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.onSlideToWrapperTransitionEnd=null,delete s.onSlideToWrapperTransitionEnd,s.transitionEnd(n,a))}),s.wrapperEl.addEventListener("transitionend",s.onSlideToWrapperTransitionEnd)),!0},slideToLoop:function(e=0,t=this.params.speed,n=!0,r){"string"==typeof e&&(e=parseInt(e,10));let i=e;return this.params.loop&&(this.virtual&&this.params.virtual.enabled?i+=this.virtual.slidesBefore:i=this.getSlideIndexByData(i)),this.slideTo(i,t,n,r)},slideNext:function(e=this.params.speed,t=!0,n){let{enabled:r,params:i,animating:a}=this;if(!r)return this;let s=i.slidesPerGroup;"auto"===i.slidesPerView&&1===i.slidesPerGroup&&i.slidesPerGroupAuto&&(s=Math.max(this.slidesPerViewDynamic("current",!0),1));let o=this.activeIndex<i.slidesPerGroupSkip?1:s,l=this.virtual&&i.virtual.enabled;if(i.loop){if(a&&!l&&i.loopPreventsSliding)return!1;this.loopFix({direction:"next"}),this._clientLeft=this.wrapperEl.clientLeft}return i.rewind&&this.isEnd?this.slideTo(0,e,t,n):this.slideTo(this.activeIndex+o,e,t,n)},slidePrev:function(e=this.params.speed,t=!0,n){let{params:r,snapGrid:i,slidesGrid:a,rtlTranslate:s,enabled:o,animating:l}=this;if(!o)return this;let c=this.virtual&&r.virtual.enabled;if(r.loop){if(l&&!c&&r.loopPreventsSliding)return!1;this.loopFix({direction:"prev"}),this._clientLeft=this.wrapperEl.clientLeft}function u(e){return e<0?-Math.floor(Math.abs(e)):Math.floor(e)}let d=u(s?this.translate:-this.translate),h=i.map(e=>u(e)),p=i[h.indexOf(d)-1];if(void 0===p&&r.cssMode){let e;i.forEach((t,n)=>{d>=t&&(e=n)}),void 0!==e&&(p=i[e>0?e-1:e])}let f=0;if(void 0!==p&&((f=a.indexOf(p))<0&&(f=this.activeIndex-1),"auto"===r.slidesPerView&&1===r.slidesPerGroup&&r.slidesPerGroupAuto&&(f=Math.max(f=f-this.slidesPerViewDynamic("previous",!0)+1,0))),r.rewind&&this.isBeginning){let r=this.params.virtual&&this.params.virtual.enabled&&this.virtual?this.virtual.slides.length-1:this.slides.length-1;return this.slideTo(r,e,t,n)}return this.slideTo(f,e,t,n)},slideReset:function(e=this.params.speed,t=!0,n){return this.slideTo(this.activeIndex,e,t,n)},slideToClosest:function(e=this.params.speed,t=!0,n,r=.5){let i=this.activeIndex,a=Math.min(this.params.slidesPerGroupSkip,i),s=a+Math.floor((i-a)/this.params.slidesPerGroup),o=this.rtlTranslate?this.translate:-this.translate;if(o>=this.snapGrid[s]){let e=this.snapGrid[s];o-e>(this.snapGrid[s+1]-e)*r&&(i+=this.params.slidesPerGroup)}else{let e=this.snapGrid[s-1];o-e<=(this.snapGrid[s]-e)*r&&(i-=this.params.slidesPerGroup)}return i=Math.min(i=Math.max(i,0),this.slidesGrid.length-1),this.slideTo(i,e,t,n)},slideToClickedSlide:function(){let e;let t=this,{params:n,slidesEl:r}=t,i="auto"===n.slidesPerView?t.slidesPerViewDynamic():n.slidesPerView,a=t.clickedIndex,s=t.isElement?"swiper-slide":`.${n.slideClass}`;if(n.loop){if(t.animating)return;e=parseInt(t.clickedSlide.getAttribute("data-swiper-slide-index"),10),n.centeredSlides?a<t.loopedSlides-i/2||a>t.slides.length-t.loopedSlides+i/2?(t.loopFix(),a=t.getSlideIndex(hh(r,`${s}[data-swiper-slide-index="${e}"]`)[0]),hs(()=>{t.slideTo(a)})):t.slideTo(a):a>t.slides.length-i?(t.loopFix(),a=t.getSlideIndex(hh(r,`${s}[data-swiper-slide-index="${e}"]`)[0]),hs(()=>{t.slideTo(a)})):t.slideTo(a)}else t.slideTo(a)}},loop:{loopCreate:function(e){let{params:t,slidesEl:n}=this;!t.loop||this.virtual&&this.params.virtual.enabled||(hh(n,`.${t.slideClass}, swiper-slide`).forEach((e,t)=>{e.setAttribute("data-swiper-slide-index",t)}),this.loopFix({slideRealIndex:e,direction:t.centeredSlides?void 0:"next"}))},loopFix:function({slideRealIndex:e,slideTo:t=!0,direction:n,setTranslate:r,activeSlideIndex:i,byController:a,byMousewheel:s}={}){let o=this;if(!o.params.loop)return;o.emit("beforeLoopFix");let{slides:l,allowSlidePrev:c,allowSlideNext:u,slidesEl:d,params:h}=o;if(o.allowSlidePrev=!0,o.allowSlideNext=!0,o.virtual&&h.virtual.enabled){t&&(h.centeredSlides||0!==o.snapIndex?h.centeredSlides&&o.snapIndex<h.slidesPerView?o.slideTo(o.virtual.slides.length+o.snapIndex,0,!1,!0):o.snapIndex===o.snapGrid.length-1&&o.slideTo(o.virtual.slidesBefore,0,!1,!0):o.slideTo(o.virtual.slides.length,0,!1,!0)),o.allowSlidePrev=c,o.allowSlideNext=u,o.emit("loopFix");return}let p="auto"===h.slidesPerView?o.slidesPerViewDynamic():Math.ceil(parseFloat(h.slidesPerView,10)),f=h.loopedSlides||p;f%h.slidesPerGroup!=0&&(f+=h.slidesPerGroup-f%h.slidesPerGroup),o.loopedSlides=f;let m=[],g=[],E=o.activeIndex;void 0===i?i=o.getSlideIndex(o.slides.filter(e=>e.classList.contains(h.slideActiveClass))[0]):E=i;let T="next"===n||!n,v="prev"===n||!n,y=0,A=0;if(i<f){y=Math.max(f-i,h.slidesPerGroup);for(let e=0;e<f-i;e+=1){let t=e-Math.floor(e/l.length)*l.length;m.push(l.length-t-1)}}else if(i>o.slides.length-2*f){A=Math.max(i-(o.slides.length-2*f),h.slidesPerGroup);for(let e=0;e<A;e+=1){let t=e-Math.floor(e/l.length)*l.length;g.push(t)}}if(v&&m.forEach(e=>{o.slides[e].swiperLoopMoveDOM=!0,d.prepend(o.slides[e]),o.slides[e].swiperLoopMoveDOM=!1}),T&&g.forEach(e=>{o.slides[e].swiperLoopMoveDOM=!0,d.append(o.slides[e]),o.slides[e].swiperLoopMoveDOM=!1}),o.recalcSlides(),"auto"===h.slidesPerView&&o.updateSlides(),h.watchSlidesProgress&&o.updateSlidesOffset(),t){if(m.length>0&&v){if(void 0===e){let e=o.slidesGrid[E],t=o.slidesGrid[E+y]-e;s?o.setTranslate(o.translate-t):(o.slideTo(E+y,0,!1,!0),r&&(o.touches[o.isHorizontal()?"startX":"startY"]+=t))}else r&&o.slideToLoop(e,0,!1,!0)}else if(g.length>0&&T){if(void 0===e){let e=o.slidesGrid[E],t=o.slidesGrid[E-A]-e;s?o.setTranslate(o.translate-t):(o.slideTo(E-A,0,!1,!0),r&&(o.touches[o.isHorizontal()?"startX":"startY"]+=t))}else o.slideToLoop(e,0,!1,!0)}}if(o.allowSlidePrev=c,o.allowSlideNext=u,o.controller&&o.controller.control&&!a){let t={slideRealIndex:e,slideTo:!1,direction:n,setTranslate:r,activeSlideIndex:i,byController:!0};Array.isArray(o.controller.control)?o.controller.control.forEach(e=>{!e.destroyed&&e.params.loop&&e.loopFix(t)}):o.controller.control instanceof o.constructor&&o.controller.control.params.loop&&o.controller.control.loopFix(t)}o.emit("loopFix")},loopDestroy:function(){let{params:e,slidesEl:t}=this;if(!e.loop||this.virtual&&this.params.virtual.enabled)return;this.recalcSlides();let n=[];this.slides.forEach(e=>{n[void 0===e.swiperSlideIndex?1*e.getAttribute("data-swiper-slide-index"):e.swiperSlideIndex]=e}),this.slides.forEach(e=>{e.removeAttribute("data-swiper-slide-index")}),n.forEach(e=>{t.append(e)}),this.recalcSlides(),this.slideTo(this.realIndex,0)}},grabCursor:{setGrabCursor:function(e){let t=this;if(!t.params.simulateTouch||t.params.watchOverflow&&t.isLocked||t.params.cssMode)return;let n="container"===t.params.touchEventsTarget?t.el:t.wrapperEl;t.isElement&&(t.__preventObserver__=!0),n.style.cursor="move",n.style.cursor=e?"grabbing":"grab",t.isElement&&requestAnimationFrame(()=>{t.__preventObserver__=!1})},unsetGrabCursor:function(){let e=this;e.params.watchOverflow&&e.isLocked||e.params.cssMode||(e.isElement&&(e.__preventObserver__=!0),e["container"===e.params.touchEventsTarget?"el":"wrapperEl"].style.cursor="",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1}))}},events:{attachEvents:function(){let e=hr(),{params:t}=this;this.onTouchStart=hb.bind(this),this.onTouchMove=h_.bind(this),this.onTouchEnd=hC.bind(this),t.cssMode&&(this.onScroll=hx.bind(this)),this.onClick=hI.bind(this),this.onLoad=hk.bind(this),hw||(e.addEventListener("touchstart",hN),hw=!0),hO(this,"on")},detachEvents:function(){hO(this,"off")}},breakpoints:{setBreakpoint:function(){let e=this,{realIndex:t,initialized:n,params:r,el:i}=e,a=r.breakpoints;if(!a||a&&0===Object.keys(a).length)return;let s=e.getBreakpoint(a,e.params.breakpointsBase,e.el);if(!s||e.currentBreakpoint===s)return;let o=(s in a?a[s]:void 0)||e.originalParams,l=hR(e,r),c=hR(e,o),u=r.enabled;l&&!c?(i.classList.remove(`${r.containerModifierClass}grid`,`${r.containerModifierClass}grid-column`),e.emitContainerClasses()):!l&&c&&(i.classList.add(`${r.containerModifierClass}grid`),(o.grid.fill&&"column"===o.grid.fill||!o.grid.fill&&"column"===r.grid.fill)&&i.classList.add(`${r.containerModifierClass}grid-column`),e.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach(t=>{if(void 0===o[t])return;let n=r[t]&&r[t].enabled,i=o[t]&&o[t].enabled;n&&!i&&e[t].disable(),!n&&i&&e[t].enable()});let d=o.direction&&o.direction!==r.direction,h=r.loop&&(o.slidesPerView!==r.slidesPerView||d);d&&n&&e.changeDirection(),hc(e.params,o);let p=e.params.enabled;Object.assign(e,{allowTouchMove:e.params.allowTouchMove,allowSlideNext:e.params.allowSlideNext,allowSlidePrev:e.params.allowSlidePrev}),u&&!p?e.disable():!u&&p&&e.enable(),e.currentBreakpoint=s,e.emit("_beforeBreakpoint",o),h&&n&&(e.loopDestroy(),e.loopCreate(t),e.updateSlides()),e.emit("breakpoint",o)},getBreakpoint:function(e,t="window",n){if(!e||"container"===t&&!n)return;let r=!1,i=ha(),a="window"===t?i.innerHeight:n.clientHeight,s=Object.keys(e).map(e=>"string"==typeof e&&0===e.indexOf("@")?{value:a*parseFloat(e.substr(1)),point:e}:{value:e,point:e});s.sort((e,t)=>parseInt(e.value,10)-parseInt(t.value,10));for(let e=0;e<s.length;e+=1){let{point:a,value:o}=s[e];"window"===t?i.matchMedia(`(min-width: ${o}px)`).matches&&(r=a):o<=n.clientWidth&&(r=a)}return r||"max"}},checkOverflow:{checkOverflow:function(){let{isLocked:e,params:t}=this,{slidesOffsetBefore:n}=t;if(n){let e=this.slides.length-1,t=this.slidesGrid[e]+this.slidesSizesGrid[e]+2*n;this.isLocked=this.size>t}else this.isLocked=1===this.snapGrid.length;!0===t.allowSlideNext&&(this.allowSlideNext=!this.isLocked),!0===t.allowSlidePrev&&(this.allowSlidePrev=!this.isLocked),e&&e!==this.isLocked&&(this.isEnd=!1),e!==this.isLocked&&this.emit(this.isLocked?"lock":"unlock")}},classes:{addClasses:function(){let{classNames:e,params:t,rtl:n,el:r,device:i}=this,a=function(e,t){let n=[];return e.forEach(e=>{"object"==typeof e?Object.keys(e).forEach(r=>{e[r]&&n.push(t+r)}):"string"==typeof e&&n.push(t+e)}),n}(["initialized",t.direction,{"free-mode":this.params.freeMode&&t.freeMode.enabled},{autoheight:t.autoHeight},{rtl:n},{grid:t.grid&&t.grid.rows>1},{"grid-column":t.grid&&t.grid.rows>1&&"column"===t.grid.fill},{android:i.android},{ios:i.ios},{"css-mode":t.cssMode},{centered:t.cssMode&&t.centeredSlides},{"watch-progress":t.watchSlidesProgress}],t.containerModifierClass);e.push(...a),r.classList.add(...e),this.emitContainerClasses()},removeClasses:function(){let{el:e,classNames:t}=this;e.classList.remove(...t),this.emitContainerClasses()}}},hM={};class hP{constructor(...e){let t,n;1===e.length&&e[0].constructor&&"Object"===Object.prototype.toString.call(e[0]).slice(8,-1)?n=e[0]:[t,n]=e,n||(n={}),n=hc({},n),t&&!n.el&&(n.el=t);let r=hr();if(n.el&&"string"==typeof n.el&&r.querySelectorAll(n.el).length>1){let e=[];return r.querySelectorAll(n.el).forEach(t=>{let r=hc({},n,{el:t});e.push(new hP(r))}),e}let i=this;i.__swiper__=!0,i.support=hE(),i.device=function(e={}){return s||(s=function({userAgent:e}={}){let t=hE(),n=ha(),r=n.navigator.platform,i=e||n.navigator.userAgent,a={ios:!1,android:!1},s=n.screen.width,o=n.screen.height,l=i.match(/(Android);?[\s\/]+([\d.]+)?/),c=i.match(/(iPad).*OS\s([\d_]+)/),u=i.match(/(iPod)(.*OS\s([\d_]+))?/),d=!c&&i.match(/(iPhone\sOS|iOS)\s([\d_]+)/),h="MacIntel"===r;return!c&&h&&t.touch&&["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"].indexOf(`${s}x${o}`)>=0&&((c=i.match(/(Version)\/([\d.]+)/))||(c=[0,1,"13_0_0"]),h=!1),l&&"Win32"!==r&&(a.os="android",a.android=!0),(c||d||u)&&(a.os="ios",a.ios=!0),a}(e)),s}({userAgent:n.userAgent}),i.browser=(o||(o=function(){let e=ha(),t=!1;function n(){let t=e.navigator.userAgent.toLowerCase();return t.indexOf("safari")>=0&&0>t.indexOf("chrome")&&0>t.indexOf("android")}if(n()){let n=String(e.navigator.userAgent);if(n.includes("Version/")){let[e,r]=n.split("Version/")[1].split(" ")[0].split(".").map(e=>Number(e));t=e<16||16===e&&r<2}}return{isSafari:t||n(),needPerspectiveFix:t,isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e.navigator.userAgent)}}()),o),i.eventsListeners={},i.eventsAnyListeners=[],i.modules=[...i.__modules__],n.modules&&Array.isArray(n.modules)&&i.modules.push(...n.modules);let a={};i.modules.forEach(e=>{var t;e({params:n,swiper:i,extendParams:(t=n,function(e={}){let n=Object.keys(e)[0],r=e[n];if("object"!=typeof r||null===r||(["navigation","pagination","scrollbar"].indexOf(n)>=0&&!0===t[n]&&(t[n]={auto:!0}),!(n in t&&"enabled"in r))){hc(a,e);return}!0===t[n]&&(t[n]={enabled:!0}),"object"!=typeof t[n]||"enabled"in t[n]||(t[n].enabled=!0),t[n]||(t[n]={enabled:!1}),hc(a,e)}),on:i.on.bind(i),once:i.once.bind(i),off:i.off.bind(i),emit:i.emit.bind(i)})});let l=hc({},hL,a);return i.params=hc({},l,hM,n),i.originalParams=hc({},i.params),i.passedParams=hc({},n),i.params&&i.params.on&&Object.keys(i.params.on).forEach(e=>{i.on(e,i.params.on[e])}),i.params&&i.params.onAny&&i.onAny(i.params.onAny),Object.assign(i,{enabled:i.params.enabled,el:t,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:()=>"horizontal"===i.params.direction,isVertical:()=>"vertical"===i.params.direction,activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return 8388608*Math.trunc(this.translate/8388608)},allowSlideNext:i.params.allowSlideNext,allowSlidePrev:i.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:i.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,evCache:[]},allowClick:!0,allowTouchMove:i.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),i.emit("_swiper"),i.params.init&&i.init(),i}getSlideIndex(e){let{slidesEl:t,params:n}=this,r=hm(hh(t,`.${n.slideClass}, swiper-slide`)[0]);return hm(e)-r}getSlideIndexByData(e){return this.getSlideIndex(this.slides.filter(t=>1*t.getAttribute("data-swiper-slide-index")===e)[0])}recalcSlides(){let{slidesEl:e,params:t}=this;this.slides=hh(e,`.${t.slideClass}, swiper-slide`)}enable(){this.enabled||(this.enabled=!0,this.params.grabCursor&&this.setGrabCursor(),this.emit("enable"))}disable(){this.enabled&&(this.enabled=!1,this.params.grabCursor&&this.unsetGrabCursor(),this.emit("disable"))}setProgress(e,t){e=Math.min(Math.max(e,0),1);let n=this.minTranslate(),r=(this.maxTranslate()-n)*e+n;this.translateTo(r,void 0===t?0:t),this.updateActiveIndex(),this.updateSlidesClasses()}emitContainerClasses(){let e=this;if(!e.params._emitClasses||!e.el)return;let t=e.el.className.split(" ").filter(t=>0===t.indexOf("swiper")||0===t.indexOf(e.params.containerModifierClass));e.emit("_containerClasses",t.join(" "))}getSlideClasses(e){let t=this;return t.destroyed?"":e.className.split(" ").filter(e=>0===e.indexOf("swiper-slide")||0===e.indexOf(t.params.slideClass)).join(" ")}emitSlidesClasses(){let e=this;if(!e.params._emitClasses||!e.el)return;let t=[];e.slides.forEach(n=>{let r=e.getSlideClasses(n);t.push({slideEl:n,classNames:r}),e.emit("_slideClass",n,r)}),e.emit("_slideClasses",t)}slidesPerViewDynamic(e="current",t=!1){let{params:n,slides:r,slidesGrid:i,slidesSizesGrid:a,size:s,activeIndex:o}=this,l=1;if(n.centeredSlides){let e,t=r[o]?r[o].swiperSlideSize:0;for(let n=o+1;n<r.length;n+=1)r[n]&&!e&&(t+=r[n].swiperSlideSize,l+=1,t>s&&(e=!0));for(let n=o-1;n>=0;n-=1)r[n]&&!e&&(t+=r[n].swiperSlideSize,l+=1,t>s&&(e=!0))}else if("current"===e)for(let e=o+1;e<r.length;e+=1)(t?i[e]+a[e]-i[o]<s:i[e]-i[o]<s)&&(l+=1);else for(let e=o-1;e>=0;e-=1)i[o]-i[e]<s&&(l+=1);return l}update(){let e;let t=this;if(!t||t.destroyed)return;let{snapGrid:n,params:r}=t;function i(){let e=Math.min(Math.max(t.rtlTranslate?-1*t.translate:t.translate,t.maxTranslate()),t.minTranslate());t.setTranslate(e),t.updateActiveIndex(),t.updateSlidesClasses()}if(r.breakpoints&&t.setBreakpoint(),[...t.el.querySelectorAll('[loading="lazy"]')].forEach(e=>{e.complete&&hT(t,e)}),t.updateSize(),t.updateSlides(),t.updateProgress(),t.updateSlidesClasses(),r.freeMode&&r.freeMode.enabled&&!r.cssMode)i(),r.autoHeight&&t.updateAutoHeight();else{if(("auto"===r.slidesPerView||r.slidesPerView>1)&&t.isEnd&&!r.centeredSlides){let n=t.virtual&&r.virtual.enabled?t.virtual.slides:t.slides;e=t.slideTo(n.length-1,0,!1,!0)}else e=t.slideTo(t.activeIndex,0,!1,!0);e||i()}r.watchOverflow&&n!==t.snapGrid&&t.checkOverflow(),t.emit("update")}changeDirection(e,t=!0){let n=this.params.direction;return e||(e="horizontal"===n?"vertical":"horizontal"),e===n||"horizontal"!==e&&"vertical"!==e||(this.el.classList.remove(`${this.params.containerModifierClass}${n}`),this.el.classList.add(`${this.params.containerModifierClass}${e}`),this.emitContainerClasses(),this.params.direction=e,this.slides.forEach(t=>{"vertical"===e?t.style.width="":t.style.height=""}),this.emit("changeDirection"),t&&this.update()),this}changeLanguageDirection(e){(!this.rtl||"rtl"!==e)&&(this.rtl||"ltr"!==e)&&(this.rtl="rtl"===e,this.rtlTranslate="horizontal"===this.params.direction&&this.rtl,this.rtl?(this.el.classList.add(`${this.params.containerModifierClass}rtl`),this.el.dir="rtl"):(this.el.classList.remove(`${this.params.containerModifierClass}rtl`),this.el.dir="ltr"),this.update())}mount(e){let t=this;if(t.mounted)return!0;let n=e||t.params.el;if("string"==typeof n&&(n=document.querySelector(n)),!n)return!1;n.swiper=t,n.shadowEl&&(t.isElement=!0);let r=()=>`.${(t.params.wrapperClass||"").trim().split(" ").join(".")}`,i=n&&n.shadowRoot&&n.shadowRoot.querySelector?n.shadowRoot.querySelector(r()):hh(n,r())[0];return!i&&t.params.createElements&&(i=hp("div",t.params.wrapperClass),n.append(i),hh(n,`.${t.params.slideClass}`).forEach(e=>{i.append(e)})),Object.assign(t,{el:n,wrapperEl:i,slidesEl:t.isElement?n:i,mounted:!0,rtl:"rtl"===n.dir.toLowerCase()||"rtl"===hf(n,"direction"),rtlTranslate:"horizontal"===t.params.direction&&("rtl"===n.dir.toLowerCase()||"rtl"===hf(n,"direction")),wrongRTL:"-webkit-box"===hf(i,"display")}),!0}init(e){let t=this;return t.initialized||!1===t.mount(e)||(t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.loop&&t.virtual&&t.params.virtual.enabled?t.slideTo(t.params.initialSlide+t.virtual.slidesBefore,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.params.loop&&t.loopCreate(),t.attachEvents(),[...t.el.querySelectorAll('[loading="lazy"]')].forEach(e=>{e.complete?hT(t,e):e.addEventListener("load",e=>{hT(t,e.target)})}),hy(t),t.initialized=!0,hy(t),t.emit("init"),t.emit("afterInit")),t}destroy(e=!0,t=!0){let n=this,{params:r,el:i,wrapperEl:a,slides:s}=n;return void 0===n.params||n.destroyed||(n.emit("beforeDestroy"),n.initialized=!1,n.detachEvents(),r.loop&&n.loopDestroy(),t&&(n.removeClasses(),i.removeAttribute("style"),a.removeAttribute("style"),s&&s.length&&s.forEach(e=>{e.classList.remove(r.slideVisibleClass,r.slideActiveClass,r.slideNextClass,r.slidePrevClass),e.removeAttribute("style"),e.removeAttribute("data-swiper-slide-index")})),n.emit("destroy"),Object.keys(n.eventsListeners).forEach(e=>{n.off(e)}),!1!==e&&(n.el.swiper=null,function(e){Object.keys(e).forEach(t=>{try{e[t]=null}catch(e){}try{delete e[t]}catch(e){}})}(n)),n.destroyed=!0),null}static extendDefaults(e){hc(hM,e)}static get extendedDefaults(){return hM}static get defaults(){return hL}static installModule(e){hP.prototype.__modules__||(hP.prototype.__modules__=[]);let t=hP.prototype.__modules__;"function"==typeof e&&0>t.indexOf(e)&&t.push(e)}static use(e){return Array.isArray(e)?e.forEach(e=>hP.installModule(e)):hP.installModule(e),hP}}function hF({swiper:e,extendParams:t,on:n,emit:r}){t({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),e.navigation={nextEl:null,prevEl:null};let i=e=>(Array.isArray(e)||(e=[e].filter(e=>!!e)),e);function a(t){let n;return t&&"string"==typeof t&&e.isElement&&(n=e.el.shadowRoot.querySelector(t))?n:(t&&("string"==typeof t&&(n=[...document.querySelectorAll(t)]),e.params.uniqueNavElements&&"string"==typeof t&&n.length>1&&1===e.el.querySelectorAll(t).length&&(n=e.el.querySelector(t))),t&&!n)?t:n}function s(t,n){let r=e.params.navigation;(t=i(t)).forEach(t=>{t&&(t.classList[n?"add":"remove"](...r.disabledClass.split(" ")),"BUTTON"===t.tagName&&(t.disabled=n),e.params.watchOverflow&&e.enabled&&t.classList[e.isLocked?"add":"remove"](r.lockClass))})}function o(){let{nextEl:t,prevEl:n}=e.navigation;if(e.params.loop){s(n,!1),s(t,!1);return}s(n,e.isBeginning&&!e.params.rewind),s(t,e.isEnd&&!e.params.rewind)}function l(t){t.preventDefault(),(!e.isBeginning||e.params.loop||e.params.rewind)&&(e.slidePrev(),r("navigationPrev"))}function c(t){t.preventDefault(),(!e.isEnd||e.params.loop||e.params.rewind)&&(e.slideNext(),r("navigationNext"))}function u(){var t,n,r;let s=e.params.navigation;if(e.params.navigation=(t=e.originalParams.navigation,n=e.params.navigation,r={nextEl:"swiper-button-next",prevEl:"swiper-button-prev"},e.params.createElements&&Object.keys(r).forEach(i=>{if(!n[i]&&!0===n.auto){let a=hh(e.el,`.${r[i]}`)[0];a||((a=hp("div",r[i])).className=r[i],e.el.append(a)),n[i]=a,t[i]=a}}),n),!(s.nextEl||s.prevEl))return;let o=a(s.nextEl),u=a(s.prevEl);Object.assign(e.navigation,{nextEl:o,prevEl:u}),o=i(o),u=i(u);let d=(t,n)=>{t&&t.addEventListener("click","next"===n?c:l),!e.enabled&&t&&t.classList.add(...s.lockClass.split(" "))};o.forEach(e=>d(e,"next")),u.forEach(e=>d(e,"prev"))}function d(){let{nextEl:t,prevEl:n}=e.navigation;t=i(t),n=i(n);let r=(t,n)=>{t.removeEventListener("click","next"===n?c:l),t.classList.remove(...e.params.navigation.disabledClass.split(" "))};t.forEach(e=>r(e,"next")),n.forEach(e=>r(e,"prev"))}n("init",()=>{!1===e.params.navigation.enabled?h():(u(),o())}),n("toEdge fromEdge lock unlock",()=>{o()}),n("destroy",()=>{d()}),n("enable disable",()=>{let{nextEl:t,prevEl:n}=e.navigation;[...t=i(t),...n=i(n)].filter(e=>!!e).forEach(t=>t.classList[e.enabled?"remove":"add"](e.params.navigation.lockClass))}),n("click",(t,n)=>{let{nextEl:a,prevEl:s}=e.navigation;a=i(a),s=i(s);let o=n.target;if(e.params.navigation.hideOnClick&&!s.includes(o)&&!a.includes(o)){let t;if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===o||e.pagination.el.contains(o)))return;a.length?t=a[0].classList.contains(e.params.navigation.hiddenClass):s.length&&(t=s[0].classList.contains(e.params.navigation.hiddenClass)),!0===t?r("navigationShow"):r("navigationHide"),[...a,...s].filter(e=>!!e).forEach(t=>t.classList.toggle(e.params.navigation.hiddenClass))}});let h=()=>{e.el.classList.add(...e.params.navigation.navigationDisabledClass.split(" ")),d()};Object.assign(e.navigation,{enable:()=>{e.el.classList.remove(...e.params.navigation.navigationDisabledClass.split(" ")),u(),o()},disable:h,update:o,init:u,destroy:d})}function hB(e=""){return`.${e.trim().replace(/([\.:!+\/])/g,"\\$1").replace(/ /g,".")}`}function hH({swiper:e,extendParams:t,on:n}){t({a11y:{enabled:!0,notificationClass:"swiper-notification",prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}",slideLabelMessage:"{{index}} / {{slidesLength}}",containerMessage:null,containerRoleDescriptionMessage:null,itemRoleDescriptionMessage:null,slideRole:"group",id:null}}),e.a11y={clicked:!1};let r=null;function i(e){let t=r;0!==t.length&&(t.innerHTML="",t.innerHTML=e)}let a=e=>(Array.isArray(e)||(e=[e].filter(e=>!!e)),e);function s(e){(e=a(e)).forEach(e=>{e.setAttribute("tabIndex","0")})}function o(e){(e=a(e)).forEach(e=>{e.setAttribute("tabIndex","-1")})}function l(e,t){(e=a(e)).forEach(e=>{e.setAttribute("role",t)})}function c(e,t){(e=a(e)).forEach(e=>{e.setAttribute("aria-roledescription",t)})}function u(e,t){(e=a(e)).forEach(e=>{e.setAttribute("aria-label",t)})}function d(e){(e=a(e)).forEach(e=>{e.setAttribute("aria-disabled",!0)})}function h(e){(e=a(e)).forEach(e=>{e.setAttribute("aria-disabled",!1)})}function p(t){if(13!==t.keyCode&&32!==t.keyCode)return;let n=e.params.a11y,r=t.target;(!(e.pagination&&e.pagination.el&&(r===e.pagination.el||e.pagination.el.contains(t.target)))||t.target.matches(hB(e.params.pagination.bulletClass)))&&(e.navigation&&e.navigation.nextEl&&r===e.navigation.nextEl&&(e.isEnd&&!e.params.loop||e.slideNext(),e.isEnd?i(n.lastSlideMessage):i(n.nextSlideMessage)),e.navigation&&e.navigation.prevEl&&r===e.navigation.prevEl&&(e.isBeginning&&!e.params.loop||e.slidePrev(),e.isBeginning?i(n.firstSlideMessage):i(n.prevSlideMessage)),e.pagination&&r.matches(hB(e.params.pagination.bulletClass))&&r.click())}function f(){return e.pagination&&e.pagination.bullets&&e.pagination.bullets.length}function m(){return f()&&e.params.pagination.clickable}let g=(e,t,n)=>{s(e),"BUTTON"!==e.tagName&&(l(e,"button"),e.addEventListener("keydown",p)),u(e,n),function(e,t){(e=a(e)).forEach(e=>{e.setAttribute("aria-controls",t)})}(e,t)},E=()=>{e.a11y.clicked=!0},T=()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{e.destroyed||(e.a11y.clicked=!1)})})},v=t=>{if(e.a11y.clicked)return;let n=t.target.closest(`.${e.params.slideClass}, swiper-slide`);if(!n||!e.slides.includes(n))return;let r=e.slides.indexOf(n)===e.activeIndex,i=e.params.watchSlidesProgress&&e.visibleSlides&&e.visibleSlides.includes(n);!r&&!i&&(t.sourceCapabilities&&t.sourceCapabilities.firesTouchEvents||(e.isHorizontal()?e.el.scrollLeft=0:e.el.scrollTop=0,e.slideTo(e.slides.indexOf(n),0)))},y=()=>{let t=e.params.a11y;t.itemRoleDescriptionMessage&&c(e.slides,t.itemRoleDescriptionMessage),t.slideRole&&l(e.slides,t.slideRole);let n=e.slides.length;t.slideLabelMessage&&e.slides.forEach((r,i)=>{let a=e.params.loop?parseInt(r.getAttribute("data-swiper-slide-index"),10):i;u(r,t.slideLabelMessage.replace(/\{\{index\}\}/,a+1).replace(/\{\{slidesLength\}\}/,n))})},A=()=>{let t=e.params.a11y;e.isElement?e.el.shadowEl.append(r):e.el.append(r);let n=e.el;t.containerRoleDescriptionMessage&&c(n,t.containerRoleDescriptionMessage),t.containerMessage&&u(n,t.containerMessage);let i=e.wrapperEl,s=t.id||i.getAttribute("id")||`swiper-wrapper-${function(e=16){return"x".repeat(e).replace(/x/g,()=>Math.round(16*Math.random()).toString(16))}(16)}`,o=e.params.autoplay&&e.params.autoplay.enabled?"off":"polite";!function(e,t){(e=a(e)).forEach(e=>{e.setAttribute("id",t)})}(i,s),function(e,t){(e=a(e)).forEach(e=>{e.setAttribute("aria-live",t)})}(i,o),y();let{nextEl:l,prevEl:d}=e.navigation?e.navigation:{};l=a(l),d=a(d),l&&l.forEach(e=>g(e,s,t.nextSlideMessage)),d&&d.forEach(e=>g(e,s,t.prevSlideMessage)),m()&&(Array.isArray(e.pagination.el)?e.pagination.el:[e.pagination.el]).forEach(e=>{e.addEventListener("keydown",p)}),e.el.addEventListener("focus",v,!0),e.el.addEventListener("pointerdown",E,!0),e.el.addEventListener("pointerup",T,!0)};n("beforeInit",()=>{(r=hp("span",e.params.a11y.notificationClass)).setAttribute("aria-live","assertive"),r.setAttribute("aria-atomic","true")}),n("afterInit",()=>{e.params.a11y.enabled&&A()}),n("slidesLengthChange snapGridLengthChange slidesGridLengthChange",()=>{e.params.a11y.enabled&&y()}),n("fromEdge toEdge afterInit lock unlock",()=>{e.params.a11y.enabled&&function(){if(e.params.loop||e.params.rewind||!e.navigation)return;let{nextEl:t,prevEl:n}=e.navigation;n&&(e.isBeginning?(d(n),o(n)):(h(n),s(n))),t&&(e.isEnd?(d(t),o(t)):(h(t),s(t)))}()}),n("paginationUpdate",()=>{e.params.a11y.enabled&&function(){let t=e.params.a11y;f()&&e.pagination.bullets.forEach(n=>{e.params.pagination.clickable&&(s(n),e.params.pagination.renderBullet||(l(n,"button"),u(n,t.paginationBulletMessage.replace(/\{\{index\}\}/,hm(n)+1)))),n.matches(hB(e.params.pagination.bulletActiveClass))?n.setAttribute("aria-current","true"):n.removeAttribute("aria-current")})}()}),n("destroy",()=>{e.params.a11y.enabled&&function(){r&&r.remove();let{nextEl:t,prevEl:n}=e.navigation?e.navigation:{};t=a(t),n=a(n),t&&t.forEach(e=>e.removeEventListener("keydown",p)),n&&n.forEach(e=>e.removeEventListener("keydown",p)),m()&&(Array.isArray(e.pagination.el)?e.pagination.el:[e.pagination.el]).forEach(e=>{e.removeEventListener("keydown",p)}),e.el.removeEventListener("focus",v,!0),e.el.removeEventListener("pointerdown",E,!0),e.el.removeEventListener("pointerup",T,!0)}()})}Object.keys(hD).forEach(e=>{Object.keys(hD[e]).forEach(t=>{hP.prototype[t]=hD[e][t]})}),hP.use([function({swiper:e,on:t,emit:n}){let r=ha(),i=null,a=null,s=()=>{e&&!e.destroyed&&e.initialized&&(n("beforeResize"),n("resize"))},o=()=>{e&&!e.destroyed&&e.initialized&&(i=new ResizeObserver(t=>{a=r.requestAnimationFrame(()=>{let{width:n,height:r}=e,i=n,a=r;t.forEach(({contentBoxSize:t,contentRect:n,target:r})=>{r&&r!==e.el||(i=n?n.width:(t[0]||t).inlineSize,a=n?n.height:(t[0]||t).blockSize)}),(i!==n||a!==r)&&s()})})).observe(e.el)},l=()=>{a&&r.cancelAnimationFrame(a),i&&i.unobserve&&e.el&&(i.unobserve(e.el),i=null)},c=()=>{e&&!e.destroyed&&e.initialized&&n("orientationchange")};t("init",()=>{if(e.params.resizeObserver&&void 0!==r.ResizeObserver){o();return}r.addEventListener("resize",s),r.addEventListener("orientationchange",c)}),t("destroy",()=>{l(),r.removeEventListener("resize",s),r.removeEventListener("orientationchange",c)})},function({swiper:e,extendParams:t,on:n,emit:r}){let i=[],a=ha(),s=(t,n={})=>{let s=new(a.MutationObserver||a.WebkitMutationObserver)(t=>{if(e.__preventObserver__)return;if(1===t.length){r("observerUpdate",t[0]);return}let n=function(){r("observerUpdate",t[0])};a.requestAnimationFrame?a.requestAnimationFrame(n):a.setTimeout(n,0)});s.observe(t,{attributes:void 0===n.attributes||n.attributes,childList:void 0===n.childList||n.childList,characterData:void 0===n.characterData||n.characterData}),i.push(s)};t({observer:!1,observeParents:!1,observeSlideChildren:!1}),n("init",()=>{if(e.params.observer){if(e.params.observeParents){let t=function(e,t){let n=[],r=e.parentElement;for(;r;)n.push(r),r=r.parentElement;return n}(e.el);for(let e=0;e<t.length;e+=1)s(t[e])}s(e.el,{childList:e.params.observeSlideChildren}),s(e.wrapperEl,{attributes:!1})}}),n("destroy",()=>{i.forEach(e=>{e.disconnect()}),i.splice(0,i.length)})}]);var hU=n(7462),hG=n(9602);let hz=(0,J.forwardRef)((e,t)=>{let{ratio:n=1,style:r,...i}=e;return(0,J.createElement)("div",{style:{position:"relative",width:"100%",paddingBottom:`${100/n}%`},"data-radix-aspect-ratio-wrapper":""},(0,J.createElement)(hG.WV.div,(0,hU.Z)({},i,{ref:t,style:{...r,position:"absolute",top:0,right:0,bottom:0,left:0}})))}),hj={isLoaded:!1,options:{credentials:"omit"}},h$=J.createContext(hj),hW=J.createContext(hj);function hV(e,t){if("updateIsLoaded"===t.type)return{...e,isLoaded:t.isLoaded};throw Error(`Unhandled action type: ${t.type}`)}let hY=({initialState:e=hj,children:t})=>{let[n,r]=J.useReducer(hV,e);return J.createElement(h$.Provider,{value:n},J.createElement(hW.Provider,{value:r},t))},{styled:hq,css:hQ,keyframes:hX,createTheme:hK}=(0,er.Th)({theme:{colors:{primary:"#1a1d1e",primaryMuted:"#26292b",primaryAlt:"#151718",accent:"hsl(209 100% 38.2%)",accentMuted:"hsl(209 80% 61.8%)",accentAlt:"hsl(209 80% 30%)",secondary:"#FFFFFF",secondaryMuted:"#e6e8eb",secondaryAlt:"#c1c8cd"},fontSizes:{1:"12px",2:"13px",3:"15px",4:"17px",5:"19px",6:"21px",7:"27px",8:"35px",9:"59px"},lineHeights:{1:"12px",2:"13px",3:"15px",4:"17px",5:"19px",6:"21px",7:"27px",8:"35px",9:"59px"},sizes:{1:"5px",2:"10px",3:"15px",4:"20px",5:"25px",6:"35px",7:"45px",8:"65px",9:"80px"},space:{1:"5px",2:"10px",3:"15px",4:"20px",5:"25px",6:"35px",7:"45px",8:"65px",9:"80px"},radii:{1:"4px",2:"6px",3:"8px",4:"12px",round:"50%",pill:"9999px"},transitions:{all:"all 300ms cubic-bezier(0.16, 1, 0.3, 1)"},zIndices:{1:"100",2:"200",3:"300",4:"400",max:"999"}},media:{xxs:"(max-width: 349px)",xs:"(max-width: 575px)",sm:"(max-width: 767px)",md:"(max-width: 991px)",lg:"(max-width: 90rem)",xl:"(min-width: calc(90rem + 1px))"}}),hZ=hq("div",{display:"flex",flexDirection:"column",alignItems:"center"}),hJ=hq("p",{fontWeight:"bold"}),h0=hq("span",{}),h1=({error:e})=>{let{message:t}=e;return J.createElement(hZ,{role:"alert"},J.createElement(hJ,{"data-testid":"headline"},"Something went wrong"),t&&J.createElement(h0,null,`Error message: ${t}`," "))},h2=hq("div",{display:"flex",background:"none",border:"none",width:"2rem !important",height:"2rem !important",padding:"0",margin:"0",borderRadius:"2rem",backgroundColor:"$accent",color:"$secondary",cursor:"pointer",boxSizing:"content-box !important",transition:"$all",justifyContent:"center",alignItems:"center",svg:{height:"60%",width:"60%",fill:"$secondary",stroke:"$secondary",opacity:"1",filter:"drop-shadow(5px 5px 5px #000D)",transition:"$all"}}),h3=hq("button",{zIndex:"1",border:"none",cursor:"pointer",background:"transparent",marginLeft:"$2",padding:"0","&:disabled":{[`> ${h2}`]:{backgroundColor:"#6663",boxShadow:"none",svg:{fill:"$secondary",stroke:"$secondary",filter:"unset"}}},"&:hover:enabled":{[`> ${h2}`]:{backgroundColor:"$accentAlt",boxShadow:"3px 3px 11px #0003","&:disabled":{boxShadow:"unset"}}}}),h4=hq("div",{display:"flex",flexDirection:"column"}),h5=hq("div",{display:"flex",flexDirection:"row",alignItems:"center",paddingLeft:"$5",paddingRight:"$4","@xs":{width:"100%",justifyContent:"center",padding:"$4 $1 0 0"}}),h6=hq("div",{display:"flex",flexDirection:"row",justifyContent:"space-between",paddingBottom:"$4",margin:"0",lineHeight:"1.4em",alignItems:"flex-end","@xs":{flexDirection:"column"},".clover-slider-header-homepage":{textDecoration:"none"},".clover-slider-header-label":{fontSize:"1.25rem",fontWeight:"400"},".clover-slider-header-summary":{fontSize:"$4",marginTop:"$2"}}),h8=(e,t="none")=>{if(!e)return null;if("string"==typeof e)return[e];if(!e[t]){let t=Object.getOwnPropertyNames(e);if(t.length>0)return e[t[0]]}return e[t]&&Array.isArray(e[t])?e[t]:null},h9=(e,t="none",n=", ")=>{let r=h8(e,t);return Array.isArray(r)?r.join(`${n}`):r};function h7(e,t){let n=Object.keys(e).filter(e=>t.includes(e)?null:e),r={};return n.forEach(t=>{r[t]=e[t]}),r}let pe=hq("span",{}),pt=e=>{let{as:t,label:n}=e,r=h7(e,["as","label"]);return J.createElement(pe,{as:t,...r},h9(n,r.lang))},pn=(e,t="200,",n="full")=>{let r;Array.isArray(e)&&(e=e[0]);let{id:i,service:a}=e;if(!a)return i;if(Array.isArray(e.service)&&e.service.length>0&&(r=a[0]),r){if(r["@id"])return`${r["@id"]}/${n}/${t}/0/default.jpg`;if(r.id)return`${r.id}/${n}/${t}/0/default.jpg`}},pr=hq("img",{objectFit:"cover"}),pi=e=>{let t;let n=(0,J.useRef)(null),{contentResource:r,altAsLabel:i,region:a="full"}=e;i&&(t=h9(i));let s=h7(e,["contentResource","altAsLabel"]),{type:o,id:l,width:c=200,height:u=200,duration:d}=r;(0,J.useEffect)(()=>{if(!l&&!n.current||["Image"].includes(o)||!l.includes("m3u8"))return;let e=new nU.ZP;return n.current&&(e.attachMedia(n.current),e.on(nU.ZP.Events.MEDIA_ATTACHED,function(){e.loadSource(l)})),e.on(nU.ZP.Events.ERROR,function(t,n){if(n.fatal)switch(n.type){case nU.ZP.ErrorTypes.NETWORK_ERROR:console.error(`fatal ${t} network error encountered, try to recover`),e.startLoad();break;case nU.ZP.ErrorTypes.MEDIA_ERROR:console.error(`fatal ${t} media error encountered, try to recover`),e.recoverMediaError();break;default:e.destroy()}}),()=>{e&&(e.detachMedia(),e.destroy())}},[l,o]);let h=(0,J.useCallback)(()=>{if(!n.current)return;let e=0,t=30;if(d&&(t=d),!l.split("#t=")&&d&&(e=.1*d),l.split("#t=").pop()){let t=l.split("#t=").pop();t&&(e=parseInt(t.split(",")[0]))}let r=n.current;r.autoplay=!0,r.currentTime=e,setTimeout(()=>h(),1e3*t)},[d,l]);(0,J.useEffect)(()=>h(),[h]);let p=pn(r,`${c},${u}`,a);switch(o){case"Image":return J.createElement(pr,{as:"img",alt:t,css:{width:c,height:u},key:l,src:p,...s});case"Video":return J.createElement(pr,{as:"video",css:{width:c,height:u},disablePictureInPicture:!0,key:l,loop:!0,muted:!0,onPause:h,ref:n,src:l});default:return console.warn(`Resource type: ${o} is not valid or not yet supported in Primitives.`),J.createElement(J.Fragment,null)}},pa=hq("a",{}),ps=e=>{let{children:t,homepage:n}=e,r=h7(e,["children","homepage"]);return J.createElement(J.Fragment,null,n&&n.map(e=>{let n=h9(e.label,r.lang);return J.createElement(pa,{"aria-label":t?n:void 0,href:e.id,key:e.id,...r},t||n)}))},po={delimiter:", "},pl=(0,J.createContext)(void 0),pc=()=>{let e=(0,J.useContext)(pl);if(void 0===e)throw Error("usePrimitivesContext must be used with a PrimitivesProvider");return e},pu=({children:e,initialState:t=po})=>{let n=pd(t,"delimiter");return J.createElement(pl.Provider,{value:{delimiter:n}},e)},pd=(e,t)=>Object.hasOwn(e,t)?e[t].toString():void 0,ph=hq("span",{}),pp=e=>{let{as:t,markup:n}=e,{delimiter:r}=pc();if(!n)return J.createElement(J.Fragment,null);let i=h7(e,["as","markup"]),a={__html:nH(h9(n,i.lang,r),{allowedAttributes:{a:["href"],img:["alt","src","height","width"]},allowedSchemes:["http","https","mailto"],allowedTags:["a","b","br","i","img","p","small","span","sub","sup"]})};return J.createElement(ph,{as:t,...i,dangerouslySetInnerHTML:a})},pf=e=>J.useContext(pl)?J.createElement(pp,{...e}):J.createElement(pu,null,J.createElement(pp,{...e}));hq("span",{}),hq("dl",{}),hq("li",{}),hq("ul",{}),hq("li",{}),hq("ul",{}),hq("dl",{}),hq("li",{}),hq("ul",{});let pm=e=>{let{as:t,summary:n}=e,r=h7(e,["as","customValueDelimiter","summary"]);return J.createElement(pf,{as:t,markup:n,...r})},pg=e=>{let{thumbnail:t,region:n}=e,r=h7(e,["thumbnail"]);return J.createElement(J.Fragment,null,t&&t.map(e=>J.createElement(pi,{contentResource:e,key:e.id,region:n,...r})))},pE=()=>J.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},J.createElement("title",null,"Next"),J.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M268 112l144 144-144 144M392 256H100"})),pT=()=>J.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},J.createElement("title",null,"Previous"),J.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M244 400L100 256l144-144M120 256h292"})),pv=hq(ps,{display:"flex",backgroundColor:"$accent",color:"$secondary",height:"2rem !important",padding:"0 $3",margin:"0 0 0 $3",borderRadius:"2rem",cursor:"pointer",boxSizing:"content-box !important",transition:"$all",justifyContent:"center",alignItems:"center",lineBreak:"none",whiteSpace:"nowrap",textDecoration:"none !important",fontSize:"0.8333rem","&:hover":{backgroundColor:"$accentAlt",boxShadow:"3px 3px 11px #0003","&:disabled":{boxShadow:"unset"}}}),py=e=>J.createElement(pv,{...e},"View All"),pA=({homepage:e,instance:t,label:n,summary:r})=>{let[i,a]=(0,J.useState)(!1);return(0,J.useEffect)(()=>{e&&(null==e?void 0:e.length)>0&&a(!0)},[e]),J.createElement(h6,{"data-testid":"slider-header"},J.createElement(h4,null,i?J.createElement(ps,{homepage:e,className:"clover-slider-header-homepage"},J.createElement(pt,{label:n,as:"span",className:"clover-slider-header-label"})):J.createElement(pt,{label:n,as:"span",className:"clover-slider-header-label"}),r&&J.createElement(pm,{summary:r,as:"span",className:"clover-slider-header-summary"})),J.createElement(h5,null,J.createElement(h3,{className:`clover-slider-previous-${t}`,"aria-label":"previous"},J.createElement(h2,null,J.createElement(pT,null))),J.createElement(h3,{className:`clover-slider-next-${t}`,"aria-label":"next"},J.createElement(h2,null,J.createElement(pE,null))),i&&J.createElement(py,{homepage:e,className:"clover-slider-header-view-all"})))};function pb(e){return"object"==typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)}function p_(e,t){let n=["__proto__","constructor","prototype"];Object.keys(t).filter(e=>0>n.indexOf(e)).forEach(n=>{typeof e[n]>"u"?e[n]=t[n]:pb(t[n])&&pb(e[n])&&Object.keys(t[n]).length>0?t[n].__swiper__?e[n]=t[n]:p_(e[n],t[n]):e[n]=t[n]})}function pC(e={}){return e.navigation&&typeof e.navigation.nextEl>"u"&&typeof e.navigation.prevEl>"u"}function pS(e={}){return e.pagination&&typeof e.pagination.el>"u"}function pI(e={}){return e.scrollbar&&typeof e.scrollbar.el>"u"}function px(e=""){let t=e.split(" ").map(e=>e.trim()).filter(e=>!!e),n=[];return t.forEach(e=>{0>n.indexOf(e)&&n.push(e)}),n.join(" ")}let pk=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopedSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideNextClass","slidePrevClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function pw(e){return e.type&&e.type.displayName&&e.type.displayName.includes("SwiperSlide")}let pN=e=>{!e||e.destroyed||!e.params.virtual||e.params.virtual&&!e.params.virtual.enabled||(e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.parallax&&e.params.parallax&&e.params.parallax.enabled&&e.parallax.setTranslate())};function pO(e,t){return typeof window>"u"?(0,J.useEffect)(e,t):(0,J.useLayoutEffect)(e,t)}let pR=(0,J.createContext)(null),pL=(0,J.createContext)(null);function pD(){return(pD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}let pM=(0,J.forwardRef)(function(e,t){let{className:n,tag:r="div",wrapperTag:i="div",children:a,onSwiper:s,...o}=void 0===e?{}:e,l=!1,[c,u]=(0,J.useState)("swiper"),[d,h]=(0,J.useState)(null),[p,f]=(0,J.useState)(!1),m=(0,J.useRef)(!1),g=(0,J.useRef)(null),E=(0,J.useRef)(null),T=(0,J.useRef)(null),v=(0,J.useRef)(null),y=(0,J.useRef)(null),A=(0,J.useRef)(null),b=(0,J.useRef)(null),_=(0,J.useRef)(null),{params:C,passedParams:S,rest:I,events:x}=function(e={},t=!0){let n={on:{}},r={},i={};p_(n,hP.defaults),p_(n,hP.extendedDefaults),n._emitClasses=!0,n.init=!1;let a={},s=pk.map(e=>e.replace(/_/,""));return Object.keys(Object.assign({},e)).forEach(o=>{typeof e[o]>"u"||(s.indexOf(o)>=0?pb(e[o])?(n[o]={},i[o]={},p_(n[o],e[o]),p_(i[o],e[o])):(n[o]=e[o],i[o]=e[o]):0===o.search(/on[A-Z]/)&&"function"==typeof e[o]?t?r[`${o[2].toLowerCase()}${o.substr(3)}`]=e[o]:n.on[`${o[2].toLowerCase()}${o.substr(3)}`]=e[o]:a[o]=e[o])}),["navigation","pagination","scrollbar"].forEach(e=>{!0===n[e]&&(n[e]={}),!1===n[e]&&delete n[e]}),{params:n,passedParams:i,rest:a,events:r}}(o),{slides:k,slots:w}=function(e){let t=[],n={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return J.Children.toArray(e).forEach(e=>{if(pw(e))t.push(e);else if(e.props&&e.props.slot&&n[e.props.slot])n[e.props.slot].push(e);else if(e.props&&e.props.children){let r=function e(t){let n=[];return J.Children.toArray(t).forEach(t=>{pw(t)?n.push(t):t.props&&t.props.children&&e(t.props.children).forEach(e=>n.push(e))}),n}(e.props.children);r.length>0?r.forEach(e=>t.push(e)):n["container-end"].push(e)}else n["container-end"].push(e)}),{slides:t,slots:n}}(a),N=()=>{f(!p)};Object.assign(C.on,{_containerClasses(e,t){u(t)}});let O=()=>{Object.assign(C.on,x),l=!0;let e={...C};if(delete e.wrapperClass,E.current=new hP(e),E.current.virtual&&E.current.params.virtual.enabled){E.current.virtual.slides=k;let e={cache:!1,slides:k,renderExternal:h,renderExternalUpdate:!1};p_(E.current.params.virtual,e),p_(E.current.originalParams.virtual,e)}};g.current||O(),E.current&&E.current.on("_beforeBreakpoint",N);let R=()=>{!l&&x&&E.current&&Object.keys(x).forEach(e=>{E.current.on(e,x[e])})},L=()=>{x&&E.current&&Object.keys(x).forEach(e=>{E.current.off(e,x[e])})};return(0,J.useEffect)(()=>()=>{E.current&&E.current.off("_beforeBreakpoint",N)}),(0,J.useEffect)(()=>{!m.current&&E.current&&(E.current.emitSlidesClasses(),m.current=!0)}),pO(()=>{if(t&&(t.current=g.current),g.current)return E.current.destroyed&&O(),function({el:e,nextEl:t,prevEl:n,paginationEl:r,scrollbarEl:i,swiper:a},s){pC(s)&&t&&n&&(a.params.navigation.nextEl=t,a.originalParams.navigation.nextEl=t,a.params.navigation.prevEl=n,a.originalParams.navigation.prevEl=n),pS(s)&&r&&(a.params.pagination.el=r,a.originalParams.pagination.el=r),pI(s)&&i&&(a.params.scrollbar.el=i,a.originalParams.scrollbar.el=i),a.init(e)}({el:g.current,nextEl:y.current,prevEl:A.current,paginationEl:b.current,scrollbarEl:_.current,swiper:E.current},C),s&&s(E.current),()=>{E.current&&!E.current.destroyed&&E.current.destroy(!0,!1)}},[]),pO(()=>{R();let e=function(e,t,n,r,i){let a=[];if(!t)return a;let s=e=>{0>a.indexOf(e)&&a.push(e)};if(n&&r){let e=r.map(i),t=n.map(i);e.join("")!==t.join("")&&s("children"),r.length!==n.length&&s("children")}return pk.filter(e=>"_"===e[0]).map(e=>e.replace(/_/,"")).forEach(n=>{if(n in e&&n in t){if(pb(e[n])&&pb(t[n])){let r=Object.keys(e[n]),i=Object.keys(t[n]);r.length!==i.length?s(n):(r.forEach(r=>{e[n][r]!==t[n][r]&&s(n)}),i.forEach(r=>{e[n][r]!==t[n][r]&&s(n)}))}else e[n]!==t[n]&&s(n)}}),a}(S,T.current,k,v.current,e=>e.key);return T.current=S,v.current=k,e.length&&E.current&&!E.current.destroyed&&function({swiper:e,slides:t,passedParams:n,changedParams:r,nextEl:i,prevEl:a,scrollbarEl:s,paginationEl:o}){let l,c,u,d,h,p,f,m;let g=r.filter(e=>"children"!==e&&"direction"!==e&&"wrapperClass"!==e),{params:E,pagination:T,navigation:v,scrollbar:y,virtual:A,thumbs:b}=e;r.includes("thumbs")&&n.thumbs&&n.thumbs.swiper&&E.thumbs&&!E.thumbs.swiper&&(l=!0),r.includes("controller")&&n.controller&&n.controller.control&&E.controller&&!E.controller.control&&(c=!0),r.includes("pagination")&&n.pagination&&(n.pagination.el||o)&&(E.pagination||!1===E.pagination)&&T&&!T.el&&(u=!0),r.includes("scrollbar")&&n.scrollbar&&(n.scrollbar.el||s)&&(E.scrollbar||!1===E.scrollbar)&&y&&!y.el&&(d=!0),r.includes("navigation")&&n.navigation&&(n.navigation.prevEl||a)&&(n.navigation.nextEl||i)&&(E.navigation||!1===E.navigation)&&v&&!v.prevEl&&!v.nextEl&&(h=!0);let _=t=>{e[t]&&(e[t].destroy(),"navigation"===t?(e.isElement&&(e[t].prevEl.remove(),e[t].nextEl.remove()),E[t].prevEl=void 0,E[t].nextEl=void 0,e[t].prevEl=void 0,e[t].nextEl=void 0):(e.isElement&&e[t].el.remove(),E[t].el=void 0,e[t].el=void 0))};r.includes("loop")&&e.isElement&&(E.loop&&!n.loop?p=!0:!E.loop&&n.loop?f=!0:m=!0),g.forEach(e=>{if(pb(E[e])&&pb(n[e]))p_(E[e],n[e]),("navigation"===e||"pagination"===e||"scrollbar"===e)&&"enabled"in n[e]&&!n[e].enabled&&_(e);else{let t=n[e];(!0===t||!1===t)&&("navigation"===e||"pagination"===e||"scrollbar"===e)?!1===t&&_(e):E[e]=n[e]}}),g.includes("controller")&&!c&&e.controller&&e.controller.control&&E.controller&&E.controller.control&&(e.controller.control=E.controller.control),r.includes("children")&&t&&A&&E.virtual.enabled&&(A.slides=t,A.update(!0)),r.includes("children")&&t&&E.loop&&(m=!0),l&&b.init()&&b.update(!0),c&&(e.controller.control=E.controller.control),u&&(e.isElement&&(!o||"string"==typeof o)&&((o=document.createElement("div")).classList.add("swiper-pagination"),e.el.shadowEl.appendChild(o)),o&&(E.pagination.el=o),T.init(),T.render(),T.update()),d&&(e.isElement&&(!s||"string"==typeof s)&&((s=document.createElement("div")).classList.add("swiper-scrollbar"),e.el.shadowEl.appendChild(s)),s&&(E.scrollbar.el=s),y.init(),y.updateSize(),y.setTranslate()),h&&(e.isElement&&(i&&"string"!=typeof i||((i=document.createElement("div")).classList.add("swiper-button-next"),e.el.shadowEl.appendChild(i)),a&&"string"!=typeof a||((a=document.createElement("div")).classList.add("swiper-button-prev"),e.el.shadowEl.appendChild(a))),i&&(E.navigation.nextEl=i),a&&(E.navigation.prevEl=a),v.init(),v.update()),r.includes("allowSlideNext")&&(e.allowSlideNext=n.allowSlideNext),r.includes("allowSlidePrev")&&(e.allowSlidePrev=n.allowSlidePrev),r.includes("direction")&&e.changeDirection(n.direction,!1),(p||m)&&e.loopDestroy(),(f||m)&&e.loopCreate(),e.update()}({swiper:E.current,slides:k,passedParams:S,changedParams:e,nextEl:y.current,prevEl:A.current,scrollbarEl:_.current,paginationEl:b.current}),()=>{L()}}),pO(()=>{pN(E.current)},[d]),J.createElement(r,pD({ref:g,className:px(`${c}${n?` ${n}`:""}`)},I),J.createElement(pL.Provider,{value:E.current},w["container-start"],J.createElement(i,{className:function(e=""){return e?e.includes("swiper-wrapper")?e:`swiper-wrapper ${e}`:"swiper-wrapper"}(C.wrapperClass)},w["wrapper-start"],C.virtual?function(e,t,n){if(!n)return null;let r=e=>{let n=e;return e<0?n=t.length+e:n>=t.length&&(n-=t.length),n},i=e.isHorizontal()?{[e.rtlTranslate?"right":"left"]:`${n.offset}px`}:{top:`${n.offset}px`},{from:a,to:s}=n,o=e.params.loop?-t.length:0,l=e.params.loop?2*t.length:t.length,c=[];for(let e=o;e<l;e+=1)e>=a&&e<=s&&c.push(t[r(e)]);return c.map((t,n)=>J.cloneElement(t,{swiper:e,style:i,key:`slide-${n}`}))}(E.current,k,d):k.map((e,t)=>J.cloneElement(e,{swiper:E.current,swiperSlideIndex:t})),w["wrapper-end"]),pC(C)&&J.createElement(J.Fragment,null,J.createElement("div",{ref:A,className:"swiper-button-prev"}),J.createElement("div",{ref:y,className:"swiper-button-next"})),pI(C)&&J.createElement("div",{ref:_,className:"swiper-scrollbar"}),pS(C)&&J.createElement("div",{ref:b,className:"swiper-pagination"}),w["container-end"]))});function pP(){return(pP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}pM.displayName="Swiper";let pF=(0,J.forwardRef)(function(e,t){let{tag:n="div",children:r,className:i="",swiper:a,zoom:s,lazy:o,virtualIndex:l,swiperSlideIndex:c,...u}=void 0===e?{}:e,d=(0,J.useRef)(null),[h,p]=(0,J.useState)("swiper-slide"),[f,m]=(0,J.useState)(!1);function g(e,t,n){t===d.current&&p(n)}pO(()=>{if("u">typeof c&&(d.current.swiperSlideIndex=c),t&&(t.current=d.current),!(!d.current||!a)){if(a.destroyed){"swiper-slide"!==h&&p("swiper-slide");return}return a.on("_slideClass",g),()=>{a&&a.off("_slideClass",g)}}}),pO(()=>{a&&d.current&&!a.destroyed&&p(a.getSlideClasses(d.current))},[a]);let E={isActive:h.indexOf("swiper-slide-active")>=0,isVisible:h.indexOf("swiper-slide-visible")>=0,isPrev:h.indexOf("swiper-slide-prev")>=0,isNext:h.indexOf("swiper-slide-next")>=0},T=()=>"function"==typeof r?r(E):r;return J.createElement(n,pP({ref:d,className:px(`${h}${i?` ${i}`:""}`),"data-swiper-slide-index":l,onLoad:()=>{m(!0)}},u),s&&J.createElement(pR.Provider,{value:E},J.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":"number"==typeof s?s:void 0},T(),o&&!f&&J.createElement("div",{className:"swiper-lazy-preloader"}))),!s&&J.createElement(pR.Provider,{value:E},T(),o&&!f&&J.createElement("div",{className:"swiper-lazy-preloader"})))});pF.displayName="SwiperSlide";let pB=hq("a",{textDecoration:"none"}),pH=hq("div",{position:"relative",zIndex:"0",borderRadius:"3px"}),pU=hq("div",{position:"absolute",width:"100%",backgroundColor:"green"}),pG=hq("figure",{display:"flex",flexDirection:"column",margin:"0 0 $2",flexGrow:"0",flexShrink:"0",borderRadius:"3px",transition:"$all",img:{position:"absolute",display:"flex",flexDirection:"column",objectFit:"cover",zIndex:"0",width:"100%",height:"100%",color:"transparent"},video:{position:"absolute",display:"flex",flexDirection:"column",objectFit:"cover",zIndex:"1",width:"100%",height:"100%",color:"transparent",opacity:"0",transition:"$load",borderRadius:"3px"},figcaption:{display:"flex",flexDirection:"column",padding:"$2 0",transition:"$all"},variants:{isFocused:{true:{video:{opacity:"1"},figcaption:{color:"$accent"}}}}}),pz=hq("span",{display:"flex",position:"relative",width:"100%",height:"100%",overflow:"hidden",borderRadius:"3px",boxShadow:"none",transition:"$all"}),pj=hq(pt,{fontSize:"$3",fontWeight:"700"}),p$=hq(pm,{fontSize:"$2",marginTop:"$1"}),pW=({isFocused:e,label:t,summary:n,thumbnail:r})=>{let i=(0,J.useRef)(null);return J.createElement(pG,{isFocused:e},J.createElement(hz,{ratio:1},J.createElement(pU,{ref:i}),J.createElement(pz,null,J.createElement(pg,{altAsLabel:t,thumbnail:r,"data-testid":"figure-thumbnail"}))),J.createElement("figcaption",null,J.createElement(pj,{label:t}),n&&J.createElement(p$,{summary:n})))},pV=({backgroundImage:e})=>J.createElement(pq,{"data-testid":"slider-item-placeholder"},J.createElement(pY,{ratio:1,css:{backgroundImage:`url(${e})`}})),pY=hq(hz,{backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"50% 50%",filter:"blur(3em)",opacity:"0.7"}),pq=hq("div",{position:"absolute",width:"100%",overflow:"hidden",backgroundColor:"#716C6B"}),pQ=({handleItemInteraction:e,index:t,item:n})=>{var r,i;let[a,s]=(0,J.useState)(!1),o=[],l="#";null!=n&&n.thumbnail&&(null==(r=null==n?void 0:n.thumbnail)?void 0:r.length)>0&&(o=n.thumbnail),null!=n&&n.homepage&&(null==(i=n.homepage)?void 0:i.length)>0&&(l=n.homepage[0].id);let c=()=>s(!0),u=()=>s(!1);return J.createElement(pH,{"data-testid":"slider-item"},J.createElement(pB,{"data-testid":"slider-item-anchor",href:l,onClick:t=>{e&&(t.preventDefault(),e(n))},tabIndex:0,onFocus:c,onBlur:u,onMouseEnter:c,onMouseLeave:u},J.createElement(pV,{backgroundImage:""}),J.createElement(pW,{"data-testid":"slider-item-figure",index:t,isFocused:a,key:n.id,label:n.label,summary:n.summary,thumbnail:o})))},pX=hq("div",{"& .swiper-slide":{}}),pK={640:{slidesPerView:2,slidesPerGroup:2,spaceBetween:20},768:{slidesPerView:3,slidesPerGroup:3,spaceBetween:30},1024:{slidesPerView:4,slidesPerGroup:4,spaceBetween:40},1366:{slidesPerView:5,slidesPerGroup:5,spaceBetween:50},1920:{slidesPerView:6,slidesPerGroup:6,spaceBetween:60}},pZ=({breakpoints:e=pK,handleItemInteraction:t,instance:n,items:r})=>{let i=(0,J.useRef)(null);return J.createElement(pX,{ref:i},J.createElement(pM,{a11y:{prevSlideMessage:"previous item",nextSlideMessage:"next item"},spaceBetween:31,modules:[hF,hH],navigation:{nextEl:`.clover-slider-next-${n}`,prevEl:`.clover-slider-previous-${n}`},slidesPerView:2,slidesPerGroup:2,breakpoints:e},r.map((e,n)=>J.createElement(pF,{key:`${e.id}-${n}`,"data-index":n,"data-type":null==e?void 0:e.type.toLowerCase()},J.createElement(pQ,{handleItemInteraction:t,index:n,item:e})))))},pJ=e=>{let t=0,n=null==e?void 0:e.length,r=0;if(n>0)for(;r<n;)t=(t<<5)-t+e.charCodeAt(r++)|0;return t};"u">typeof globalThis?globalThis:"u">typeof window?window:"u">typeof global?global:"u">typeof self&&self;var p0={};I=Object.defineProperty,x=(e,t,n)=>t in e?I(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,k=(e,t,n)=>(x(e,"symbol"!=typeof t?t+"":t,n),n),function(e){let t="http://library.stanford.edu/iiif/image-api/compliance.html#level1",n="http://library.stanford.edu/iiif/image-api/compliance.html#level2",r="http://library.stanford.edu/iiif/image-api/conformance.html#level1",i="http://library.stanford.edu/iiif/image-api/conformance.html#level2",a="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level1",s="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2",o="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level1",l="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level2",c="http://iiif.io/api/image/1/level1.json",u="http://iiif.io/api/image/1/profiles/level1.json",d="http://iiif.io/api/image/1/level2.json",h="http://iiif.io/api/image/1/profiles/level2.json",p="http://iiif.io/api/image/2/level1.json",f="http://iiif.io/api/image/2/profiles/level1.json",m="http://iiif.io/api/image/2/level2.json",g="http://iiif.io/api/image/2/profiles/level2.json",E="level1",T="level2",v="http://iiif.io/api/image/2/level1",y="http://iiif.io/api/image/2/level2",A=[v,y,t,n,r,i,a,s,o,l,c,u,d,h,p,f,m,g,E,T],b=["http://iiif.io/api/image/2/level0",v,y,"http://library.stanford.edu/iiif/image-api/compliance.html#level0",t,n,"http://library.stanford.edu/iiif/image-api/conformance.html#level0",r,i,"http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0",a,s,"http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level0",o,l,"http://iiif.io/api/image/1/level0.json","http://iiif.io/api/image/1/profiles/level0.json",c,u,d,h,"http://iiif.io/api/image/2/level0.json","http://iiif.io/api/image/2/profiles/level0.json",p,f,m,g,"level0",E,T],_=["sc:Collection","sc:Manifest","sc:Canvas","sc:AnnotationList","oa:Annotation","sc:Range","sc:Layer","sc:Sequence","oa:Choice","Service","ContentResource"];class C{constructor(e,t={}){k(this,"traversals"),k(this,"options"),this.traversals={collection:[],manifest:[],canvas:[],annotationList:[],sequence:[],annotation:[],contentResource:[],choice:[],range:[],service:[],layer:[],...e},this.options={convertPropsToArray:!0,mergeMemberProperties:!0,allowUndefinedReturn:!1,...t}}static all(e){return new C({collection:[e],manifest:[e],canvas:[e],annotationList:[e],sequence:[e],annotation:[e],contentResource:[e],choice:[e],range:[e],service:[e],layer:[e]})}traverseCollection(e){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseCollectionItems(e))),this.traversals.collection)}traverseCollectionItems(e){if(this.options.mergeMemberProperties){let t=[...(e.manifests||[]).map(e=>"string"==typeof e?{"@id":e,"@type":"sc:Manifest"}:e),...(e.collections||[]).map(e=>"string"==typeof e?{"@id":e,"@type":"sc:Collection"}:e),...e.members||[]];delete e.collections,delete e.manifests,e.members=t}return e.manifests&&(e.manifests=e.manifests.map(e=>this.traverseManifest("string"==typeof e?{"@id":e,"@type":"sc:Manifest"}:e))),e.collections&&(e.collections=e.collections.map(e=>this.traverseCollection("string"==typeof e?{"@id":e,"@type":"sc:Collection"}:e))),e.members&&(e.members=e.members.map(e=>"string"==typeof e?e:this.traverseUnknown(e))),e}traverseManifest(e){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseManifestItems(e))),this.traversals.manifest)}traverseManifestItems(e){return e.sequences&&(e.sequences=e.sequences.map(e=>this.traverseSequence(e))),e.structures&&(e.structures=e.structures.map(e=>this.traverseRange(e))),e}traverseSequence(e){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseSequenceItems(e))),this.traversals.sequence)}traverseSequenceItems(e){return e.canvases&&(e.canvases=e.canvases.map(e=>this.traverseCanvas(e))),e}traverseCanvas(e){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseCanvasItems(e))),this.traversals.canvas)}traverseCanvasItems(e){return e.images&&(e.images=e.images.map(e=>this.traverseAnnotation(e))),e.otherContent&&(e.otherContent=e.otherContent.map(e=>this.traverseAnnotationList(e))),e}traverseRange(e){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseRangeItems(e))),this.traversals.range)}traverseRangeItems(e){if(this.options.mergeMemberProperties){let t=[...(e.ranges||[]).map(e=>"string"==typeof e?{"@id":e,"@type":"sc:Range"}:e),...(e.canvases||[]).map(e=>"string"==typeof e?{"@id":e,"@type":"sc:Canvas"}:e),...e.members||[]];delete e.ranges,delete e.canvases,e.members=t.length?t.map(e=>this.traverseUnknown(e)):void 0}return e}traverseAnnotationList(e){return this.traverseType(this.traverseDescriptive(this.traverseAnnotationListItems("string"==typeof e?{"@id":e,"@type":"sc:AnnotationList"}:e)),this.traversals.annotationList)}traverseAnnotationListItems(e){return e.resources&&(e.resources=e.resources.map(e=>this.traverseAnnotation(e))),e}traverseAnnotation(e){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseAnnotationItems(e))),this.traversals.annotation)}traverseAnnotationItems(e){return e.resource&&(Array.isArray(e.resource)?e.resource=e.resource.map(e=>this.traverseContentResource(e)):e.resource=this.traverseContentResource(e.resource)),e.on,e}traverseLayer(e){return this.traverseType(this.traverseLinking(this.traverseLayerItems(e)),this.traversals.layer)}traverseLayerItems(e){return e.otherContent&&(e.otherContent=e.otherContent.map(e=>this.traverseAnnotationList(e))),e}traverseChoice(e){return this.traverseType(this.traverseChoiceItems(e),this.traversals.choice)}traverseChoiceItems(e){return e.default&&"rdf:nil"!==e.default&&(e.default=this.traverseContentResource(e.default)),e.item&&"rdf:nil"!==e.item&&(e.item=e.item.map(e=>this.traverseContentResource(e))),e}traverseService(e){return this.traverseType(this.traverseLinking(e),this.traversals.service)}traverseContentResource(e){return"oa:Choice"===e["@type"]?this.traverseChoice(e):this.traverseType(this.traverseDescriptive(this.traverseLinking(e)),this.traversals.contentResource)}traverseUnknown(e){if(!e["@type"]||"string"==typeof e)return e;switch(function(e){if(null==e)throw Error("Null or undefined is not a valid entity.");if(Array.isArray(e))throw Error("Array is not a valid entity");if("object"!=typeof e)throw Error(typeof e+" is not a valid entity");if("string"==typeof e["@type"]){let t=_.indexOf(e["@type"]);if(-1!==t)return _[t]}if(e.profile)return"Service";if(e.format||e["@type"])return"ContentResource";throw Error("Resource type is not known")}(e)){case"sc:Collection":return this.traverseCollection(e);case"sc:Manifest":return this.traverseManifest(e);case"sc:Canvas":return this.traverseCanvas(e);case"sc:Sequence":return this.traverseSequence(e);case"sc:Range":return this.traverseRange(e);case"oa:Annotation":return this.traverseAnnotation(e);case"sc:AnnotationList":return this.traverseAnnotationList(e);case"sc:Layer":return this.traverseLayer(e);case"Service":return this.traverseService(e);case"oa:Choice":return this.traverseChoice(e);case"ContentResource":return this.traverseContentResource(e)}return e.profile?this.traverseService(e):e}traverseImageResource(e){let t=Array.isArray(e),n=Array.isArray(e)?e:[e],r=[];for(let e of n)"string"==typeof e?r.push(this.traverseContentResource({"@id":e,"@type":"dctypes:Image"})):r.push(this.traverseContentResource(e));return t||this.options.convertPropsToArray?r:r[0]}traverseDescriptive(e){return e.thumbnail&&(e.thumbnail=this.traverseImageResource(e.thumbnail)),e.logo&&(e.logo=this.traverseImageResource(e.logo)),e}traverseOneOrMoreServices(e){let t=Array.isArray(e),n=Array.isArray(e)?e:[e],r=[];for(let e of n)r.push(this.traverseService(e));return t||this.options.convertPropsToArray?r:r[0]}traverseLinking(e){return e.related&&(e.related=this.traverseOneOrManyType(e.related,this.traversals.contentResource)),e.rendering&&(e.rendering=this.traverseOneOrManyType(e.rendering,this.traversals.contentResource)),e.service&&(e.service=this.traverseOneOrMoreServices(e.service)),e.seeAlso&&(e.seeAlso=this.traverseOneOrManyType(e.seeAlso,this.traversals.contentResource)),e.within&&("string"==typeof e.within||(e.within=this.traverseOneOrManyType(e.within,this.traversals.contentResource))),e.startCanvas&&("string"==typeof e.startCanvas?e.startCanvas=this.traverseType({"@id":e.startCanvas,"@type":"sc:Canvas"},this.traversals.canvas):e.startCanvas&&this.traverseType(e.startCanvas,this.traversals.canvas)),e.contentLayer&&("string"==typeof e.contentLayer?e.contentLayer=this.traverseLayer({"@id":e.contentLayer,"@type":"sc:Layer"}):e.contentLayer=this.traverseLayer(e.contentLayer)),e}traverseOneOrManyType(e,t){if(!Array.isArray(e)){if(!this.options.convertPropsToArray)return this.traverseType(e,t);e=[e]}return e.map(e=>this.traverseType(e,t))}traverseType(e,t){return t.reduce((e,t)=>{let n=t(e);return void 0!==n||this.options.allowUndefinedReturn?n:e},e)}}function S(e,t="none"){if(!e)return{};let n=Array.isArray(e)?e:[e],r={};for(let e of n){if("string"==typeof e){r[t]=r[t]?r[t]:[],r[t].push(e||"");continue}if(!e["@language"]){r[t]=r[t]?r[t]:[],r[t].push(e["@value"]||"");continue}let n=e["@language"];r[n]=r[n]?r[n]:[],r[n].push(e["@value"]||"")}return r}function I(e){for(let t of["sc","oa","dcterms","dctypes","iiif"])if(e.startsWith(`${t}:`))return e.slice(t.length+1);return e}let x=["Collection","Manifest","Annotation","AnnotationPage","Range","Service"];function w(e){let t=e["@id"]||e.id,n=e["@type"]||e.type,r=e.profile||void 0,i=e["@context"]||void 0;if(r){let e=function(e){switch(e){case"http://iiif.io/api/image/2/level0.json":case"http://iiif.io/api/image/2/level1.json":case"http://iiif.io/api/image/2/level2.json":return"ImageService2";case"http://iiif.io/api/auth/1/kiosk":case"http://iiif.io/api/auth/1/login":case"http://iiif.io/api/auth/1/clickthrough":case"http://iiif.io/api/auth/1/external":case"http://iiif.io/api/auth/0/kiosk":case"http://iiif.io/api/auth/0/login":case"http://iiif.io/api/auth/0/clickthrough":case"http://iiif.io/api/auth/0/external":return"AuthCookieService1";case"http://iiif.io/api/auth/1/token":case"http://iiif.io/api/auth/0/token":return"AuthTokenService1";case"http://iiif.io/api/auth/1/logout":case"http://iiif.io/api/auth/0/logout":return"AuthLogoutService1";case"http://iiif.io/api/search/1/search":case"http://iiif.io/api/search/0/search":return"SearchService1";case"http://iiif.io/api/search/1/autocomplete":case"http://iiif.io/api/search/0/autocomplete":return"AutoCompleteService1"}}(r);if(e)return e}if(i){let e=function(e){for(let t of Array.isArray(e)?e:[e])switch(t){case"http://iiif.io/api/image/2/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2":return"ImageService2";case"http://iiif.io/api/image/1/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/context.json":return"ImageService1";case"http://iiif.io/api/annex/openannotation/context.json":return"ImageApiSelector"}}(i);if(e)return e}if(n){if(Array.isArray(n)){if(-1!==n.indexOf("oa:CssStylesheet"))return"CssStylesheet";if(-1!==n.indexOf("cnt:ContentAsText"))return"TextualBody";n=n[0]}for(let e of["sc","oa","dcterms","dctypes","iiif"])if(n.startsWith(`${e}:`)){n=n.slice(e.length+1);break}switch(n){case"Layer":return"AnnotationCollection";case"AnnotationList":return"AnnotationPage";case"cnt:ContentAsText":return"TextualBody"}}if(n&&-1!==x.indexOf(n))return n;if(e.format){if(e.format.startsWith("image/"))return"Image";if(e.format.startsWith("text/")||"application/pdf"===e.format)return"Text";if(e.format.startsWith("application/"))return"Dataset"}return t&&(t.endsWith(".jpg")||t.endsWith(".png")||t.endsWith(".jpeg"))?"Image":n||"unknown"}let N=/http(s)?:\/\/(creativecommons.org|rightsstatements.org)[^"'\\<\n]+/gm,O=["http://iiif.io/api/presentation/2/context.json","http://iiif.io/api/image/2/context.json","http://iiif.io/api/image/1/context.json","http://library.stanford.edu/iiif/image-api/1.1/context.json","http://iiif.io/api/search/1/context.json","http://iiif.io/api/search/0/context.json","http://iiif.io/api/auth/1/context.json","http://iiif.io/api/auth/0/context.json","http://iiif.io/api/annex/openannotation/context.json"];function R(e){for(let t in e)void 0!==e[t]&&null!==e[t]||delete e[t];return e}let L=0;function D(e,t){let n=encodeURI(e.id||e["@id"]||"").trim();return n&&t?`${n}/${t}`:n||(L++,`http://example.org/${e["@type"]}${t?`/${t}`:""}/${L}`)}function M(e){let t;let n=[...e.behavior||[]];return e.viewingHint&&n.push(e.viewingHint),Array.isArray(e.motivation)?t=e.motivation.map(I):e.motivation&&(t=I(e.motivation)),{"@context":e["@context"]?function(e){if(e){let t=Array.isArray(e)?e:[e],n=[];for(let e of t)"http://iiif.io/api/presentation/2/context.json"===e&&n.push("http://iiif.io/api/presentation/3/context.json"),-1===O.indexOf(e)&&n.push(e);if(t.length)return 1===n.length?n[0]:n}}(e["@context"]):void 0,id:(e["@id"]||D(e)).trim(),type:w(e),behavior:n.length?n:void 0,height:e.height?e.height:void 0,width:e.width?e.width:void 0,motivation:t,viewingDirection:e.viewingDirection,profile:e.profile,format:e.format?e.format:void 0,duration:void 0,timeMode:void 0}}function P(e){var t;let[n,r]=function(e,t="Rights/License",n="none"){let r=null,i=[];for(let a of Array.isArray(e)?e:[e]){let e=a?function(e){let t=e.match(N);return t?t[0]:e}(a):void 0;e&&(-1!==e.indexOf("creativecommons.org")||-1!==e.indexOf("rightsstatements.org"))?r=e.startsWith("https://")?`http://${e.slice(8)}`:e:e&&i.push({label:{[n]:[t]},value:{[n]:[e]}})}return[r,i]}(e.license),i=[...e.metadata&&(t=e.metadata)?t.map(e=>({label:S(e.label),value:S(e.value)})):[],...r];return{rights:n,metadata:i.length?i:void 0,label:e.label?S(e.label):void 0,requiredStatement:e.attribution?{label:S("Attribution"),value:S(e.attribution)}:void 0,navDate:e.navDate,summary:e.description?S(e.description):void 0,thumbnail:e.thumbnail}}function F(e){var t;let n=e.related?Array.isArray(e.related)?e.related:[e.related]:[],r=e.contentLayer;return{provider:e.logo||n.length?[{id:"http://example.org/provider",type:"Agent",homepage:n.length?[n[0]]:void 0,logo:e.logo?Array.isArray(e.logo)?e.logo:[e.logo]:void 0,label:S("Unknown")}]:void 0,partOf:function(e){if(!e.within)return;let t=Array.isArray(e.within)?e.within:[e.within],n=[];for(let r of t)"string"==typeof r?r&&"sc:Manifest"===e["@type"]&&n.push({id:r,type:"Collection"}):r["@id"]&&n.push({id:r["@id"],type:w(r)});return n.length?n:void 0}(e),rendering:e.rendering,seeAlso:e.seeAlso,start:e.startCanvas,service:e.service?Array.isArray(t=e.service)?t:[t]:void 0,supplementary:r?[r]:void 0}}function B(e){return R({...M(e),...P(e),...F(e),chars:e.chars,format:e.format?e.format:void 0,language:e.language})}let H=new C({collection:[function(e){return R({...M(e),...P(e),...F(e),items:e.members})}],manifest:[function(e){let t=[],n=[];for(let r of e.sequences||[])r.canvases.length&&t.push(...r.canvases),r.behavior&&n.push(...r.behavior);let r=M(e);return n.length&&(r.behavior?r.behavior.push(...n):r.behavior=n),R({...r,...P(e),...F(e),items:t,structures:e.structures})}],canvas:[function(e){return R({...M(e),...P(e),...F(e),annotations:e.otherContent&&e.otherContent.length?e.otherContent:void 0,items:e.images&&e.images.length?[{id:D(e,"annotation-page"),type:"AnnotationPage",items:e.images}]:void 0})}],annotationList:[function(e){return R({...M(e),...P(e),...F(e),items:e.resources&&e.resources.length?e.resources:void 0})}],sequence:[function(e){return e.canvases&&0!==e.canvases.length?{canvases:e.canvases,behavior:e.viewingHint?[e.viewingHint]:[]}:{canvases:[],behavior:[]}}],annotation:[function(e){return R({...M(e),...P(e),...F(e),target:function e(t){if(Array.isArray(t)){if(t.length>1)return{type:"List",items:t.map(e)};t=t[0]}if("string"==typeof t)return encodeURI(t).trim();if("@type"in t){let e;if("string"==typeof t.full)e=t.full;else if("dctypes:Image"===t.full["@type"])e={id:t.full["@id"],type:"Image"};else{if("sc:Canvas"!==t.full["@type"])throw Error(`Unsupported source type on annotation: ${t.full["@type"]}`);e={id:t.full["@id"],type:"Canvas"}}return{type:"SpecificResource",source:e,selector:function e(t){if((Array.isArray(t["@type"])&&t["@type"].includes("oa:SvgSelector")||"oa:SvgSelector"==t["@type"])&&("chars"in t||"value"in t))return{type:"SvgSelector",value:"chars"in t?t.chars:t.value};if("oa:FragmentSelector"===t["@type"])return{type:"FragmentSelector",value:t.value};if("oa:Choice"===t["@type"])return[e(t.default),...(Array.isArray(t.item)?t.item:[t.item]).map(e)];if("iiif:ImageApiSelector"==t["@type"])return{type:"ImageApiSelector",region:"region"in t?t.region:void 0,rotation:"rotation"in t?t.rotation:void 0};throw Error(`Unsupported selector type: ${t["@type"]}`)}(t.selector)}}return encodeURI(t["@id"]).trim()}(e.on),body:Array.isArray(e.resource)?e.resource.map(B):B(e.resource)})}],contentResource:[B],choice:[function(e){let t=[];return e.default&&"rdf:nil"!==e.default&&t.push(e.default),e.item&&"rdf:nil"!==e.item&&t.push(...e.item),{...M(e),...P(e),items:t}}],range:[function(e){return R({...M(e),...P(e),...F(e),items:e.members})}],service:[function(e){let{"@id":t,"@type":n,"@context":r,profile:i,...a}=e,s={};return t&&(s["@id"]=t),s["@type"]=w(e),"unknown"===s["@type"]&&(r&&r.length&&(s["@context"]=r),s["@type"]="Service"),i&&(s.profile=function e(t){return Array.isArray(t)?e(t.find(e=>"string"==typeof e)):-1!==b.indexOf(t)?"level2":-1!==A.indexOf(t)?"level1":"string"==typeof t?t:void 0}(i)),R({...s,...a})}],layer:[function(e){return R({...M(e),...P(e),...F(e)})}]});e.upgrade=function(e){return e&&e["@context"]&&("http://iiif.io/api/presentation/2/context.json"===e["@context"]||-1!==e["@context"].indexOf("http://iiif.io/api/presentation/2/context.json")||"http://www.shared-canvas.org/ns/context.json"===e["@context"])||"http://iiif.io/api/image/2/context.json"===e["@context"]?H.traverseUnknown(e):e},Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}(p0);let p1=e=>J.createElement(hY,{initialState:{...hj,options:{...e.options}}},J.createElement(p2,{...e})),p2=({collectionId:e,iiifContent:t,onItemInteraction:n})=>{let{options:r}=function(){let e=J.useContext(h$);if(void 0===e)throw Error("useCollectionState must be used within a CollectionProvider");return e}(),[i,a]=(0,J.useState)(),s=t;if(e&&(s=e),(0,J.useEffect)(()=>{s&&fetch(s).then(e=>e.json()).then(p0.upgrade).then(e=>a(e)).catch(e=>{console.error(`The IIIF Collection ${s} failed to load: ${e}`)})},[s]),(null==i?void 0:i.items.length)===0)return console.log(`The IIIF Collection ${s} does not contain items.`),J.createElement(J.Fragment,null);let o=pJ(s);return i?J.createElement("div",null,J.createElement(en,{FallbackComponent:h1},J.createElement(pA,{label:i.label,summary:i&&i.summary?i.summary:{none:[""]},homepage:i.homepage,instance:o}),J.createElement(pZ,{items:i.items,handleItemInteraction:n,instance:o,breakpoints:r.breakpoints}))):J.createElement(J.Fragment,null)};var p3=n(6206),p4=n(5360),p5=n(7342),p6=n(9981),p8=n(8771),p9=n(9115),p7=n(1276);let fe="Collapsible",[ft,fn]=(0,p4.b)(fe),[fr,fi]=ft(fe),fa=(0,J.forwardRef)((e,t)=>{let{__scopeCollapsible:n,open:r,defaultOpen:i,disabled:a,onOpenChange:s,...o}=e,[l=!1,c]=(0,p5.T)({prop:r,defaultProp:i,onChange:s});return(0,J.createElement)(fr,{scope:n,disabled:a,contentId:(0,p7.M)(),open:l,onOpenToggle:(0,J.useCallback)(()=>c(e=>!e),[c])},(0,J.createElement)(hG.WV.div,(0,hU.Z)({"data-state":fu(l),"data-disabled":a?"":void 0},o,{ref:t})))}),fs=(0,J.forwardRef)((e,t)=>{let{__scopeCollapsible:n,...r}=e,i=fi("CollapsibleTrigger",n);return(0,J.createElement)(hG.WV.button,(0,hU.Z)({type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":fu(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled},r,{ref:t,onClick:(0,p3.M)(e.onClick,i.onOpenToggle)}))}),fo="CollapsibleContent",fl=(0,J.forwardRef)((e,t)=>{let{forceMount:n,...r}=e,i=fi(fo,e.__scopeCollapsible);return(0,J.createElement)(p9.z,{present:n||i.open},({present:e})=>(0,J.createElement)(fc,(0,hU.Z)({},r,{ref:t,present:e})))}),fc=(0,J.forwardRef)((e,t)=>{let{__scopeCollapsible:n,present:r,children:i,...a}=e,s=fi(fo,n),[o,l]=(0,J.useState)(r),c=(0,J.useRef)(null),u=(0,p8.e)(t,c),d=(0,J.useRef)(0),h=d.current,p=(0,J.useRef)(0),f=p.current,m=s.open||o,g=(0,J.useRef)(m),E=(0,J.useRef)();return(0,J.useEffect)(()=>{let e=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,p6.b)(()=>{let e=c.current;if(e){E.current=E.current||{transitionDuration:e.style.transitionDuration,animationName:e.style.animationName},e.style.transitionDuration="0s",e.style.animationName="none";let t=e.getBoundingClientRect();d.current=t.height,p.current=t.width,g.current||(e.style.transitionDuration=E.current.transitionDuration,e.style.animationName=E.current.animationName),l(r)}},[s.open,r]),(0,J.createElement)(hG.WV.div,(0,hU.Z)({"data-state":fu(s.open),"data-disabled":s.disabled?"":void 0,id:s.contentId,hidden:!m},a,{ref:u,style:{"--radix-collapsible-content-height":h?`${h}px`:void 0,"--radix-collapsible-content-width":f?`${f}px`:void 0,...e.style}}),m&&i)});function fu(e){return e?"open":"closed"}var fd=n(434),fh=n(150),fp=n(9821),ff=n(1876).Buffer;function fm(e){return e.endsWith("info.json")?e:e.endsWith("/")?`${e}info.json`:`${e}/info.json`}let fg="http://library.stanford.edu/iiif/image-api/compliance.html#level1",fE="http://library.stanford.edu/iiif/image-api/compliance.html#level2",fT="http://library.stanford.edu/iiif/image-api/conformance.html#level1",fv="http://library.stanford.edu/iiif/image-api/conformance.html#level2",fy="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level1",fA="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2",fb="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level1",f_="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level2",fC="http://iiif.io/api/image/1/level1.json",fS="http://iiif.io/api/image/1/profiles/level1.json",fI="http://iiif.io/api/image/1/level2.json",fx="http://iiif.io/api/image/1/profiles/level2.json",fk="http://iiif.io/api/image/2/level1.json",fw="http://iiif.io/api/image/2/profiles/level1.json",fN="http://iiif.io/api/image/2/level2.json",fO="http://iiif.io/api/image/2/profiles/level2.json",fR="level1",fL="level2",fD="http://iiif.io/api/image/2/level1",fM="http://iiif.io/api/image/2/level2",fP=[fM,fE,fv,fA,f_,fI,fx,fN,fO,fL],fF=[...fP,fD,fg,fT,fy,fb,fC,fS,fk,fw,fR],fB=["http://iiif.io/api/image/2/level0",fD,fM,"http://library.stanford.edu/iiif/image-api/compliance.html#level0",fg,fE,"http://library.stanford.edu/iiif/image-api/conformance.html#level0",fT,fv,"http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0",fy,fA,"http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level0",fb,f_,"http://iiif.io/api/image/1/level0.json","http://iiif.io/api/image/1/profiles/level0.json",fC,fS,fI,fx,"http://iiif.io/api/image/2/level0.json","http://iiif.io/api/image/2/profiles/level0.json",fk,fw,fN,fO,"level0",fR,fL],fH={extraFormats:["jpg"],extraQualities:["default"],extraFeatures:["sizeByWhListed"]},fU={extraFormats:["jpg"],extraQualities:["default"],extraFeatures:["baseUriRedirect","cors","jsonldMediaType","regionByPx","regionSquare","sizeByWhListed","sizeByH","sizeByW","sizeByWh"]},fG={extraFormats:["jpg","png"],extraQualities:["default"],extraFeatures:["baseUriRedirect","cors","jsonldMediaType","regionByPct","regionByPx","regionSquare","rotationBy90s","sizeByWhListed","sizeByConfinedWh","sizeByH","sizeByPct","sizeByW","sizeByWh"]};function fz(e){return e["@id"]?e["@id"]:e.id?e.id:void 0}function fj(e){if(!e||!e.profile||!fz(e))return!1;for(let t of Array.isArray(e.profile)?e.profile:[e.profile])if("string"==typeof t&&-1!==fB.indexOf(t))return!0;return!1}function f$(e,t){if(t&&t.profile){let n=t.profile;if(n){let t=Array.isArray(n)?n:[n];return t.includes(`level${e}`)||t.includes(`http://iiif.io/api/image/2/level${e}.json`)||t.includes(`http://iiif.io/api/image/1/level${e}.json`)||t.includes(`http://iiif.io/api/image/1/profiles/level${e}.json`)}}return!1}function fW(e){return fj(e)?f$(0,e)?0:f$(1,e)?1:f$(2,e)?2:null:null}function fV(e){return -1!==(e["@context"]?Array.isArray(e["@context"])?e["@context"]:[e["@context"]]:[]).indexOf("http://iiif.io/api/image/3/context.json")}function fY(e){let t=e.match(/^.*\/(full)\/(((\d+),(\d+)?)|max)\/(\d+)\/default\.(jpg|png|jpeg)$/);if(t){let n=t[1],r=parseInt(t[4],10),i=parseInt(t[5],10),a=t[7];if(("max"===n||"full"===n)&&r&&i&&a)return{type:"fixed",id:e,height:i,width:r}}return{type:"unknown",id:e}}function fq(e){let t=[],n=e.length;for(let r=0;r<n;r++){let n=function(e){return fj(e)?(e&&e.sizes?e.sizes:[]).map(t=>({id:fz(e),type:"fixed-service",height:t.height,width:t.width,level:fW(e),version:fV(e)?3:2})):[]}(e[r]);n.length&&t.push(...n);let i=function(e){if(!function(e){if(!fj(e))return!1;for(let t of Array.isArray(e.profile)?e.profile:[e.profile])if("string"==typeof t){if(-1!==fF.indexOf(t))return!0}else{let e=[...t.supports||[],...t.extraFeatures||[]];if(-1!==e.indexOf("regionByPx")&&(-1!==e.indexOf("sizeByW")||-1!==e.indexOf("sizeByWh")))return!0}return!1}(e))return[];let t=[],n=Array.isArray(e.profile)?e.profile:[e.profile],r=n.length;for(let t=0;t<r;t++){let r=n[t];if("string"!=typeof r&&(r.maxHeight||r.maxWidth))return[{id:fz(e),type:"variable",minWidth:0,minHeight:0,maxHeight:r.maxHeight||r.maxWidth,maxWidth:r.maxWidth||r.maxHeight,level:fW(e),version:"http://iiif.io/api/image/3/context.json"===e["@context"]?3:2}]}if(e.tiles){let n=e.tiles.length;for(let r=0;r<n;r++){let n=e.tiles[r];(n.height||n.width)&&t.push({id:fz(e),type:"variable",minHeight:0,minWidth:0,maxHeight:n.height||n.width,maxWidth:n.width,level:fW(e),version:fV(e)?3:2})}}return t}(e[r]);i.length&&t.push(...i)}return t}function fQ(e){let t=e.service?Array.isArray(e.service)?e.service:[e.service]:[],n=t.length,r=[];for(let e=0;e<n;e++)fj(t[e])&&r.push(t[e]);return r}var fX=Object.defineProperty;function fK(e,t,n){let r=function(e){let t=function(e,t=""){let{path:n,scheme:r,server:i,prefix:a}=function(e,t=""){let n=e.match(/^(([a-zA-Z]+):\/\/([^/]+))?((.*)+)/);if(!n)throw Error(`Invalid or unknown input ${e}`);let r=n[2],i=n[3],a=n[4];if("/"===a[0]&&(a=a.substr(1)),t.length>0){if("/"===t[0]&&(t=t.substr(1)),t!==a.substr(0,t.length))throw Error(`Path does not start with prefix (path: ${a}, prefix: ${t})`);a=a.substr(t.length)}return{scheme:r,server:i,path:a,prefix:t}}(e,t),s=n.split("/").reverse(),[o,l,c,u,...d]=s,h=d.reverse().filter(Boolean).join("/");if(1===s.length||""===o)return{type:"base",scheme:r,server:i,prefix:a,identifier:h};if("info.json"===o){let[,...e]=s;return{type:"info",scheme:r,server:i,prefix:a,identifier:e.reverse().filter(Boolean).join("/")}}let p=o.split(".");return{type:"image",scheme:r,server:i,prefix:a,identifier:h,originalPath:n,region:function(e){try{if("full"===e)return{full:!0};if("square"===e)return{square:!0};let t=e.startsWith("pct:"),n=e.substr(t?4:0).split(",").map(e=>parseFloat(e));return{x:n[0],y:n[1],w:n[2],h:n[3],percent:t}}catch{throw Error("Expected 'full', 'square' or 'x,y,w,h'. Found "+e)}}(u),size:function(e){let t={upscaled:!1,max:!1,confined:!1};if("^"===e[0]&&(t.upscaled=!0,e=e.slice(1)),"max"===e||"full"===e)return t.max=!0,t.serialiseAsFull="full"===e,t;if("!"===e[0]&&(t.confined=!0,e=e.slice(1)),"p"===e[0])return t.percentScale=parseFloat(e.slice(4)),t;let n=e.split(",").map(e=>e.trim());return n.length&&(""!==n[0]&&(t.width=parseInt(n[0],10)),""!==n[1]?(t.height=parseInt(n[1],10),t.version=2):t.version=3),t}(c),rotation:function(e){let t={angle:0};if("!"===e[0]&&(t.mirror=!0,e=e.substr(1)),t.angle=parseFloat(e)%360,Number.isNaN(t.angle))throw Error(`Invalid rotation ${e}`);return t}(l),quality:p[0],format:p[1]}}(fm(e.id));if("info"!==t.type)throw Error("Invalid service URL");let n=function(e){let t=e?Array.isArray(e.profile)?e.profile:[e.profile]:[],n={extraQualities:[],extraFormats:[],extraFeatures:[]};for(let e of t){var r;if("string"==typeof e&&(r=e,e=-1!==fP.indexOf(r)?fG:-1!==fF.indexOf(r)?fU:fH),e){if(e.formats)for(let t of e.formats)-1===n.extraFormats.indexOf(t)&&n.extraFormats.push(t);if(e.qualities)for(let t of e.qualities)-1===n.extraQualities.indexOf(t)&&n.extraQualities.push(t);if(e.supports)for(let t of e.supports)-1===n.extraFeatures.indexOf(t)&&n.extraFeatures.push(t);if(e.maxHeight&&(n.maxHeight=e.maxHeight),e.maxWidth&&(n.maxWidth=e.maxWidth),e.maxArea&&(n.maxArea=e.maxArea),e.extraFormats)for(let t of e.extraFormats)-1===n.extraFormats.indexOf(t)&&n.extraFormats.push(t);if(e.extraQualities)for(let t of e.extraQualities)-1===n.extraQualities.indexOf(t)&&n.extraQualities.push(t);if(e.extraFeatures)for(let t of e.extraFeatures)-1===n.extraFeatures.indexOf(t)&&n.extraFeatures.push(t);e.maxHeight&&(n.maxHeight=e.maxHeight),e.maxWidth&&(n.maxWidth=e.maxWidth),e.maxArea&&(n.maxArea=e.maxArea)}}if(e.extraFormats)for(let t of e.extraFormats)-1===n.extraFormats.indexOf(t)&&n.extraFormats.push(t);if(e.extraFeatures)for(let t of e.extraFeatures)-1===n.extraFeatures.indexOf(t)&&n.extraFeatures.push(t);if(e.extraQualities)for(let t of e.extraQualities)-1===n.extraQualities.indexOf(t)&&n.extraQualities.push(t);return n}(e);return{identifier:t.identifier,originalPath:"",server:t.server,prefix:t.prefix,scheme:t.scheme,type:"image",quality:-1===n.extraQualities.indexOf("default")?n.extraQualities[0]:"default",region:{full:!0},size:{max:!0,upscaled:!1,confined:!1},format:"jpg",rotation:{angle:0}}}({"@context":3===e.version?"http://iiif.io/api/image/3/context.json":"http://iiif.io/api/image/2/context.json",id:fm(fz(e)),profile:null===e.level||typeof e.level>"u"?"level0":`level${e.level}}`,type:3===e.version?"ImageService3":"ImageService2"});if("image"!==r.type)throw Error("Invalid service");return r.size.max=!1,r.size.width=t,r.size.height=n,{id:function(e,t){let n=e.prefix.startsWith("/")?e.prefix.substr(1):e.prefix,r=`${e.scheme}://${e.server}/${n?`${n}/`:""}${e.identifier}`;if("base"===e.type)return r;if("info"===e.type)return`${r}/info.json`;let{size:i}=e,{region:a,rotation:s,format:o,quality:l}=e;return[r,function({x:e=0,y:t=0,w:n,h:r,full:i,square:a,percent:s}){if(i)return"full";if(a)return"square";if(typeof n>"u"||typeof r>"u")throw Error("RegionParameter: invalid region");let o=`${e},${t},${n},${r}`;return s?`pct:${o}`:o}(a),function({max:e,percentScale:t,upscaled:n,confined:r,width:i,height:a,serialiseAsFull:s,version:o}){let l=[];return n&&l.push("^"),e?l.push(s?"full":"max"):(r&&l.push("!"),t&&l.push(`pct:${t}`),i&&l.push(`${i}`),l.push(","),a&&3===o&&l.push(`${a}`)),l.join("")}(i),`${s.mirror?"!":""}${(s.angle||0)%360}`,`${l}.${o}`].filter(Boolean).join("/")}(r),type:"fixed",width:t,height:n||e.height/(e.width||1)*t,unsafe:e.width>t}}function fZ(e){let t=e.replace(/(https?:\/\/)?(www.)?/i,"");return -1!==t.indexOf("/")?t.split("/")[0]:t}Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;var fJ=Object.defineProperty,f0=Object.defineProperties,f1=Object.getOwnPropertyDescriptors,f2=Object.getOwnPropertySymbols,f3=Object.prototype.hasOwnProperty,f4=Object.prototype.propertyIsEnumerable,f5=(e,t,n)=>t in e?fJ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,f6=(e,t)=>{for(var n in t||(t={}))f3.call(t,n)&&f5(e,n,t[n]);if(f2)for(var n of f2(t))f4.call(t,n)&&f5(e,n,t[n]);return e},f8=(e,t)=>f0(e,f1(t)),f9=(e,t,n)=>new Promise((r,i)=>{var a=e=>{try{o(n.next(e))}catch(e){i(e)}},s=e=>{try{o(n.throw(e))}catch(e){i(e)}},o=e=>e.done?r(e.value):Promise.resolve(e.value).then(a,s);o((n=n.apply(e,t)).next())});class f7{constructor(){this.config={verificationsRequired:1,approximateServices:!0,enableFetching:!0,disableThrottling:!1},this.fetchingCount=0,this.imageServices={},this.knownImageServers={}}setConfig(e){Object.assign(this.config,e)}sample(e,t,n=!0){let r=fZ(fz(e)),i=fm(fz(e)),a=this.knownImageServers[r];return this.imageServices[i]=Object.assign(e,{real:!0}),a||!e.tiles||f$(0,e)?this.verify(e):(this.knownImageServers[r]={verifications:0,malformed:!1,root:r,preLoaded:n,sampledId:fz(e),verified:!1,server:null,result:{context:e["@context"]||[],sampledProfile:e.profile,resourceServiceRatio:t&&e.height?t.height/e.height:1,sampledSizes:e.sizes||[],sizeRatios:function(e,t,n){let r=n.length,i=[];for(let t=0;t<r;t++){let r=n[t].width;i.push(e/r)}return i}(e.width,e.height,e.sizes||[]),sampledTiles:e.tiles||[]}},!0)}preLoad(e,t=!0){this.knownImageServers[e.root]=e,t&&(this.knownImageServers[e.root].malformed=!1,this.knownImageServers[e.root].verifications=this.config.verificationsRequired)}predict(e,t=!1,n=!1){let r=null==e?void 0:e.source,i=fZ(fz(e)),a=this.knownImageServers[i];if(!a||!a.result||!((null==r?void 0:r.height)||e.height)||!((null==r?void 0:r.width)||e.width)||!n&&(a.malformed||a.verifications<this.config.verificationsRequired)||f$(0,e.source))return null;let s=fm(fz(e));return this.imageServices[s]||(this.imageServices[s]={"@context":a.result.context,"@id":fz(e),id:fz(e),protocol:"http://iiif.io/api/image",tiles:(null==r?void 0:r.tiles)||function(e,t,n){let r=e>t?e:t,i=n.length,a=[];for(let e=0;e<i;e++){let t=n[e],i=t.scaleFactors[0],s=r/i,o=[i];for(;s>=t.width;)i*=2,o.push(i),s/=2;a.push(f8(f6({},t),{scaleFactors:o}))}return a}(e.width,e.height,a.result.sampledTiles),sizes:(null==r?void 0:r.sizes)||function(e,t,n){let r=n.length,i=[];for(let a=0;a<r;a++){let r=n[a];i.push({width:Math.floor(e/r),height:Math.floor(t/r)})}return i}(Math.round(e.width/a.result.resourceServiceRatio),Math.round(e.height/a.result.resourceServiceRatio),a.result.sizeRatios),profile:(null==r?void 0:r.profile)||a.result.sampledProfile,height:(null==r?void 0:r.height)||e.height,width:(null==r?void 0:r.width)||e.width,real:!1}),this.imageServices[s]}getThumbnailFromResource(e,t){return f9(this,arguments,function*(e,t,n=!0,r=[]){let i=e?yield this.getImageCandidates(e,n):[];return function(e,t){let n=[],r=Object.assign({unsafeImageService:!1,atAnyCost:!0,fallback:!0,minHeight:64,minWidth:64,maxHeight:1/0,maxWidth:1/0,returnAllOptions:!1,preferFixedSize:!1,allowUnsafe:!1,explain:!1,height:0,width:0},e),i=(e,t=0)=>r.explain?n.push(Array(t).fill(0).map(e=>"    ").join("")+e().trim()):void 0,a=[],s=[],o=null;i(()=>`Using configuration: ${JSON.stringify(r,null,2)}`);let l=(e,t)=>{if(i(()=>"Swapping choice",3),function(e,t,n){let r=e.width?e.width:e.maxWidth;return n.height<=e.maxHeight&&n.width<=e.maxWidth&&n.height>=e.minHeight&&n.width>=e.minWidth&&(!t||Math.abs(n.width-r)<Math.abs(t.width-r))}(r,t,e)){if(r.preferFixedSize&&e.unsafe){i(()=>`We found an image that was marked as unsafe, but it was the best size. (${e.id})`,4),s.push(e);return}r.returnAllOptions&&t&&s.push(t),i(()=>`We found a new image that was the best size. (${e.id})`,4),o=e}else r.returnAllOptions&&s.push(e)};i(()=>`The input shows we have ${t.length} list(s) of candidates to choose from.`);let c=t.length;for(let e=0;e<c;e++){let n=t[e]();i(()=>`Candidate group ${e}: ${JSON.stringify(n,null,2)}`,1);let s=n.length;i(()=>`Checking candidate list number ${e} and found ${s} potential ways of creating image(s)`,1);for(let e=0;e<s;e++){let t=n[e];i(()=>`-> Checking candidate ${e}`,1),"unknown"===t.type&&r.atAnyCost&&(i(()=>'We\'ve found an unknown image type, adding this to the "last resort" list',2),a.push(t)),"fixed"===t.type&&(t.unsafe?(i(()=>'We\'ve found an unsafe fixed image type, adding this to the "last resort" list',2),a.push(t)):(i(()=>"We've found a fixed size image, checking if it matches the request",2),l(t,o))),"fixed-service"===t.type&&(r.unsafeImageService?(i(()=>"Checking for an image from the tile source, without calculating the right height and width (unsafeImageService)",2),l(fK(t,r.width,r.height),o)):(i(()=>"Checking for an image from the tile source 3",2),l(fK(t,t.width,t.height),o))),"variable"===t.type&&t.maxWidth&&l(fK({id:t.id,type:"fixed-service",width:t.maxWidth,height:t.maxWidth,level:t.level,version:t.version},t.maxWidth),o)}if(o&&!r.returnAllOptions){if(o.unsafe||r.allowUnsafe)continue;i(()=>`We found a match in choice list number ${e}, no searching any more`);break}}return r.atAnyCost&&0===s.length?(i(()=>o?`We found an image! ${o.id} of type ${o.type}`:'We found no images, but "atAnyCost" is set, so returning that'),{best:o||a[0],fallback:a.slice(1),log:n}):r.returnAllOptions?(i(()=>"Returning all options that we have found"),{best:r.atAnyCost?o||s[0]||a[0]:o||s[0],fallback:[...s,...a],log:n}):(i(()=>"Returning the best image that we found, and a fallback"),{best:o||s[0]||null,fallback:o?s:s.slice(1),log:n})}(t,[()=>r,()=>i])})}getImageCandidates(e,t=!0){return f9(this,null,function*(){if(t&&e.height&&e.width)for(let t of fQ(e)){let n={id:fz(t),width:t.width?t.width:e.width,height:t.height?t.height:e.height,source:t};yield this.loadService(n)}return function(e,t=!0,n){let r=[],i=function(e){if("string"==typeof e)return fY(e);let t=e["@type"]?e["@type"]:e.type?e.type:void 0;if("Image"!==t&&"sc:Image"!==t)return null;let n=fz(e);return n?n&&e.width&&e.height?{id:n,type:"fixed",width:e.width,height:e.height,unsafe:!0}:fY(n):null}(e);if(null===i)return r;if(r.push(i),t&&e.width&&e.height){let t=[];for(let r of fQ(e)){let i={id:fz(r),width:e.width,height:e.height};if(n.canLoadSync(i)){let r=n.loadServiceSync(i);r&&(r.height||(r.height=e.height),r.width||(r.width=e.width),t.push(...fq([r])))}}if(t.length)return r.push(...t),r}return e.service&&r.push(...fq(e.service)),r}(e,t,this)})}verify(e){return f9(this,null,function*(){let t=this.predict(e,!1,!0),n=yield this.fetchService(fz(e));if(!t)return!1;let r=t.height===n.height&&t.width===n.width&&t["@context"]===n["@context"]&&function(e,t){if(e.length!==t.length)return!1;if(0===e.length&&0===t.length)return!0;let n=e.length,r=!0;for(let i=0;i<n;i++){let n=e[i],a=t[i];if(n.width!==a.width||n.height!==a.height){r=!1;break}}if(r)return!0;let i=0;for(let r=0;r<n;r++)for(let a=0;a<n;a++)if(e[r].width===t[a].width&&e[r].height===t[a].height){i++;break}return i===n}(t.sizes||[],n.sizes||[]);if(r){let t=fZ(fz(e));this.knownImageServers[t].verifications+=1,this.knownImageServers[t].verifications>=this.config.verificationsRequired&&(this.knownImageServers[t].verified=!0)}return r})}canLoadSync(e){let t="string"==typeof e?e:fz(e),n=fm(t);if(this.imageServices[n])return!0;let r=this.knownImageServers[fZ(t)];return r&&!r.malformed&&r.verifications>=this.config.verificationsRequired}markAsMalformed(e){return f9(this,null,function*(){return this.knownImageServers[fZ(fz(e))].malformed=!0,this.loadService(e,!0)})}fetchService(e,t=!1){return f9(this,null,function*(){let n=fm(e);if(this.imageServices[n]&&(!t||this.imageServices[n].real))return this.imageServices[n];if(!this.config.enableFetching)throw Error("Fetching is not enabled");let r=yield this.fetch(n).then(e=>e.json());return!r.id&&r["@id"]&&(r.id=r["@id"]),r.id!==e&&(r.id=e,r["@id"]&&(r["@id"]=e)),this.imageServices[n]=Object.assign(r,{real:!0}),this.imageServices[n]})}fetch(e,t){return f9(this,null,function*(){return fetch(e,t)})}loadService(e,t=!1){return f9(this,null,function*(){if(!this.config.disableThrottling){let e=!0;for(;e;)if(this.fetchingCount>=this.config.verificationsRequired)yield new Promise(e=>setTimeout(e,500));else{e=!1;break}}let n=this.knownImageServers[fZ(fz(e))];if(n&&!n.malformed&&!t){yield n.result;let t=this.loadServiceSync(e);if(t)return t}this.fetchingCount++;let r=yield this.fetchService(fz(e),t);return this.fetchingCount--,r.real&&this.sample(r,e),r})}loadServiceSync(e){let t=fm(fz(e));return this.imageServices[t]?this.imageServices[t]:this.predict(e)}}new f7,Symbol.for("_refs_"),Symbol.for("_reactive_"),Symbol.for("_defined_");var me=n(6419),mt=n(5059),mn=n(761);let mr=e=>{let t=e.toString().split(":"),n=Math.ceil(parseInt(t[0])),r=Math.ceil(parseInt(t[1])),i=ml(Math.ceil(parseInt(t[2])),2),a=`${0!==n&&r<10?(r+"").padStart(2,"0"):r}:${i}`;return 0!==n&&(a=`${n}:${a}`),a},mi=e=>mr(new Date(1e3*e).toISOString().substr(11,8)),ma=(e,t)=>{if("object"!=typeof e||null===e)return t;for(let n in t)"object"!=typeof t[n]||null===t[n]||Array.isArray(t[n])?e[n]=t[n]:(e[n]||(e[n]={}),e[n]=ma(e[n],t[n]));return e},ms=e=>e.split("").reduce(function(e,t){return(e=(e<<5)-e+t.charCodeAt(0))&e},0),mo=(e,t)=>Object.hasOwn(e,t)?e[t].toString():void 0,ml=(e,t)=>String(e).padStart(t,"0"),mc={annotationOverlays:{backgroundColor:"#ff6666",borderColor:"#990000",borderType:"solid",borderWidth:"1px",opacity:"0.5",renderOverlays:!0,zoomLevel:2},background:"transparent",canvasBackgroundColor:"#6662",canvasHeight:"500px",ignoreCaptionLabels:[],informationPanel:{vtt:{autoScroll:{enabled:!0,settings:{behavior:"smooth",block:"center"}}},open:!0,renderAbout:!0,renderSupplementing:!0,renderToggle:!0,renderAnnotation:!0},openSeadragon:{},requestHeaders:{"Content-Type":"application/json"},showDownload:!0,showIIIFBadge:!0,showTitle:!0,withCredentials:!1};function mu(e){let t={...mc.informationPanel.vtt.autoScroll};return"object"==typeof e&&(t="enabled"in e?e:{enabled:!0,settings:e}),!1===e&&(t.enabled=!1),function({behavior:e,block:t}){let n=["auto","instant","smooth"],r=["center","end","nearest","start"];if(!n.includes(e))throw TypeError(`'${e}' not in ${n.join(" | ")}`);if(!r.includes(t))throw TypeError(`'${t}' not in ${r.join(" | ")}`)}(t.settings),t}let md=mu(null==(q=null==(Y=null==mc?void 0:mc.informationPanel)?void 0:Y.vtt)?void 0:q.autoScroll),mh={activeCanvas:"",activeManifest:"",collection:{},configOptions:mc,customDisplays:[],isAutoScrollEnabled:md.enabled,isAutoScrolling:!1,isInformationOpen:null==(Q=null==mc?void 0:mc.informationPanel)?void 0:Q.open,isLoaded:!1,isUserScrolling:void 0,vault:new nB,openSeadragonViewer:null,viewerId:eo()},mp=J.createContext(mh),mf=J.createContext(mh);function mm(e,t){switch(t.type){case"updateActiveCanvas":return t.canvasId||(t.canvasId=""),{...e,activeCanvas:t.canvasId};case"updateActiveManifest":return{...e,activeManifest:t.manifestId};case"updateAutoScrollAnnotationEnabled":return{...e,isAutoScrollEnabled:t.isAutoScrollEnabled};case"updateAutoScrolling":return{...e,isAutoScrolling:t.isAutoScrolling};case"updateCollection":return{...e,collection:t.collection};case"updateConfigOptions":return{...e,configOptions:ma(e.configOptions,t.configOptions)};case"updateInformationOpen":return{...e,isInformationOpen:t.isInformationOpen};case"updateIsLoaded":return{...e,isLoaded:t.isLoaded};case"updateUserScrolling":return{...e,isUserScrolling:t.isUserScrolling};case"updateOpenSeadragonViewer":return{...e,openSeadragonViewer:t.openSeadragonViewer};case"updateViewerId":return{...e,viewerId:t.viewerId};default:throw Error(`Unhandled action type: ${t.type}`)}}let mg=({initialState:e=mh,children:t})=>{let[n,r]=(0,J.useReducer)(mm,e);return J.createElement(mp.Provider,{value:n},J.createElement(mf.Provider,{value:r},t))};function mE(){let e=J.useContext(mp);if(void 0===e)throw Error("useViewerState must be used within a ViewerProvider");return e}function mT(){let e=J.useContext(mf);if(void 0===e)throw Error("useViewerDispatch must be used within a ViewerProvider");return e}let mv=(e,t)=>{let n=e.get({id:t,type:"Canvas"});return null!=n&&n.annotations&&n.annotations[0]?e.get(n.annotations).filter(e=>!!e.items&&!!e.items.length&&e).map(e=>{let t=e.label||{none:["Annotations"]};return{...e,label:t}}):[]},my=(e,t,n,r)=>{var i,a;let s={canvas:void 0,accompanyingCanvas:void 0,annotationPage:void 0,annotations:[]};if(s.canvas=e.get(t),s.canvas&&(s.annotationPage=e.get(s.canvas.items[0]),s.accompanyingCanvas=null!=(i=s.canvas)&&i.accompanyingCanvas?e.get(null==(a=s.canvas)?void 0:a.accompanyingCanvas):void 0),s.annotationPage){let i=e.get(s.annotationPage.items).map(t=>({body:e.get(t.body[0].id),motivation:t.motivation,type:"Annotation"})),a=[];i.forEach(t=>{"Choice"===t.body.type?t.body.items.forEach(n=>a.push({...t,id:n.id,body:e.get(n.id)})):a.push(t)}),s.annotations=a.filter(i=>{if(i){if(!i.body||!i.motivation){console.error("Invalid annotation after Hyperion parsing: missing either 'body' or 'motivation'",i);return}let a=i.body;Array.isArray(a)&&(a=a[0]);let s=e.get(a.id);if(s)switch(n){case"painting":return i.target===t.id&&i.motivation&&"painting"===i.motivation[0]&&r.includes(s.type)&&(i.body=s),!!i;case"supplementing":return;default:throw Error("Invalid annotation motivation.")}}})}return s},mA=(e,t="en")=>{if(!e)return"";if(!e[t]){let t=Object.getOwnPropertyNames(e);if(t.length>0)return e[t[0]]}return e[t]},mb=(e,t)=>{let n=my(e,{id:t,type:"Canvas"},"painting",["Image","Sound","Video"]);if(0!==n.annotations.length&&n.annotations&&n.annotations)return n.annotations.map(e=>null==e?void 0:e.body)},m_=(e,t,n,r)=>{let i=[];if(t.canvas&&t.canvas.thumbnail.length>0){let n=e.get(t.canvas.thumbnail[0]);i.push(n)}if(t.annotations[0]){if(t.annotations[0].thumbnail&&t.annotations[0].thumbnail.length>0){let n=e.get(t.annotations[0].thumbnail[0]);i.push(n)}if(!t.annotations[0].body)return;let n=t.annotations[0].body;"Image"===n.type&&i.push(n)}return 0===i.length?void 0:{id:i[0].id,format:i[0].format,type:i[0].type,width:n,height:r}},mC={xxs:"(max-width: 349px)",xs:"(max-width: 575px)",sm:"(max-width: 767px)",md:"(max-width: 991px)",lg:"(max-width: 90rem)",xl:"(min-width: calc(90rem + 1px))"},{styled:mS,css:mI,keyframes:mx,createTheme:mk}=(0,er.Th)({theme:{colors:{primary:"#1a1d1e",primaryMuted:"#26292b",primaryAlt:"#151718",accent:"hsl(209 100% 38.2%)",accentMuted:"hsl(209 80% 61.8%)",accentAlt:"hsl(209 80% 30%)",secondary:"#FFFFFF",secondaryMuted:"#e6e8eb",secondaryAlt:"#c1c8cd"},fontSizes:{1:"12px",2:"13px",3:"15px",4:"17px",5:"19px",6:"21px",7:"27px",8:"35px",9:"59px"},lineHeights:{1:"12px",2:"13px",3:"15px",4:"17px",5:"19px",6:"21px",7:"27px",8:"35px",9:"59px"},sizes:{1:"5px",2:"10px",3:"15px",4:"20px",5:"25px",6:"35px",7:"45px",8:"65px",9:"80px"},space:{1:"5px",2:"10px",3:"15px",4:"20px",5:"25px",6:"35px",7:"45px",8:"65px",9:"80px"},radii:{1:"4px",2:"6px",3:"8px",4:"12px",round:"50%",pill:"9999px"},transitions:{all:"all 300ms cubic-bezier(0.16, 1, 0.3, 1)"},zIndices:{1:"100",2:"200",3:"300",4:"400",max:"999"}},media:mC}),mw=mS("div",{display:"flex",flexDirection:"column",alignItems:"center"}),mN=mS("p",{fontWeight:"bold",fontSize:"x-large"}),mO=mS("span",{fontSize:"medium"}),mR=({error:e})=>{let{message:t}=e;return J.createElement(mw,{role:"alert"},J.createElement(mN,{"data-testid":"headline"},"Something went wrong"),t&&J.createElement(mO,null,`Error message: ${t}`," "))},mL=mS("div",{position:"relative",zIndex:"0"}),mD=mS("div",{display:"flex",flexDirection:"row",flexGrow:"1",overflow:"hidden","@sm":{flexDirection:"column"}}),mM=mS("div",{display:"flex",flexDirection:"column",flexGrow:"1",flexShrink:"1",width:"61.8%","@sm":{width:"100%"}}),mP=mS(fs,{display:"none",border:"none",padding:"0",transition:"$all",opacity:"1",background:"#6663",margin:"1rem 0",borderRadius:"6px","&[data-information-panel='false']":{opacity:"0",marginTop:"-59px"},"@sm":{display:"flex","> span":{display:"flex",flexGrow:"1",fontSize:"0.8333em",justifyContent:"center",padding:"0.5rem",fontFamily:"inherit"}}}),mF=mS(fl,{width:"100%",display:"flex"}),mB=mS("aside",{display:"flex",flexGrow:"1",flexShrink:"0",width:"38.2%",maxHeight:"100%","@sm":{width:"100%"}}),mH=mS("div",{display:"flex",flexDirection:"column",fontSmooth:"auto",webkitFontSmoothing:"antialiased",'&[data-absolute-position="true"]':{position:"absolute",width:"100%",height:"100%",zIndex:"0"},"> div":{display:"flex",flexDirection:"column",flexGrow:"1",justifyContent:"flex-start",height:"100%",maxHeight:"100%","@sm":{[`& ${mD}`]:{flexGrow:"1"},[`& ${mM}`]:{flexGrow:"0"}}},"@sm":{padding:"0"},"&[data-information-panel-open='true']":{"@sm":{position:"fixed",height:"100%",width:"100%",top:"0",left:"0",zIndex:"2500000000",[`& ${mL}`]:{display:"none"},[`& ${mP}`]:{margin:"1rem"},[`& ${mF}`]:{height:"100%"}}}}),mU=mS(fd.fC,{display:"flex",flexDirection:"column",width:"100%",height:"100%",flexGrow:"1",flexShrink:"0",position:"relative",zIndex:"1",maskImage:"linear-gradient(180deg, rgba(0, 0, 0, 1) calc(100% - 2rem), transparent 100%)","@sm":{marginTop:"0.5rem",boxShadow:"none"}}),mG=mS(fd.aV,{display:"flex",flexGrow:"0",margin:"0 1.618rem",borderBottom:"4px solid #6663","@sm":{margin:"0 1rem"}}),mz=mS(fd.xz,{display:"flex",position:"relative",padding:"0.5rem 1rem",background:"none",backgroundColor:"transparent",fontFamily:"inherit",border:"none",opacity:"0.7",fontSize:"1rem",marginRight:"1rem",lineHeight:"1rem",whiteSpace:"nowrap",cursor:"pointer",fontWeight:400,transition:"$all","&::after":{width:"0",height:"4px",content:"",position:"absolute",bottom:"-4px",left:"0",transition:"$all"},"&[data-state='active']":{opacity:"1",fontWeight:700,"&::after":{width:"100%",backgroundColor:"$accent"}}}),mj=mS(fd.VY,{display:"flex",flexGrow:"1",flexShrink:"0",position:"absolute",top:"0",left:"0","&[data-state='active']":{width:"100%",height:"calc(100% - 2rem)",padding:"1.618rem 0"}}),m$=mS(({handleScroll:e,children:t,className:n})=>J.createElement("div",{className:n,onScroll:e},t),{position:"relative",height:"100%",width:"100%",overflowY:"scroll"}),mW={position:"relative",cursor:"pointer",display:"flex",width:"100%",justifyContent:"space-between",textAlign:"left",margin:"0",padding:"0.5rem 1.618rem",fontFamily:"inherit",lineHeight:"1.25em",fontSize:"1rem",color:"inherit",border:"none",background:"none"},mV=mS("button",{textAlign:"left","&:hover":{color:"$accent"}}),mY=mS("div",{display:"flex",flexDirection:"column",width:"100%"}),mq=mS("div",{...mW}),mQ=mS("div",{"&:hover":{color:"$accent"}}),mX=({value:e,handleClick:t})=>J.createElement(mV,{onClick:t},e),mK=({value:e,handleClick:t})=>J.createElement(mQ,{dangerouslySetInnerHTML:{__html:e},onClick:t}),mZ=()=>{function e(e){return e.map(e=>{let t=e.identifier||eo();return{...e,identifier:t}})}return{addIdentifiersToParsedCues:e,createNestedCues:function(t){var n;let r=[],i=[];for(let a of e(t)){for(;i.length>0&&i[i.length-1].end<=a.start;)i.pop();i.length>0?(i[i.length-1].children||(i[i.length-1].children=[]),null==(n=i[i.length-1].children)||n.push(a)):r.push(a),i.push(a)}return r},isChild:function(e,t=[]){return t.some(t=>e.start>=t.start&&e.end<=t.end)},orderCuesByTime:function(e=[]){return e.sort((e,t)=>e.start-t.start)}}},mJ=mx({from:{transform:"rotate(360deg)"},to:{transform:"rotate(0deg)"}}),m0=mS(fh.fC,{display:"flex",flexDirection:"column",width:"100%"}),m1=mS(fh.ck,{...mW,"@sm":{padding:"0.5rem 1rem",fontSize:"0.8333rem"},"&::before":{content:"",width:"12px",height:"12px",borderRadius:"12px",position:"absolute",backgroundColor:"$primaryMuted",opacity:"0",left:"8px",marginTop:"3px",boxSizing:"content-box","@sm":{content:"unset"}},"&::after":{content:"",width:"4px",height:"6px",position:"absolute",backgroundColor:"$secondary",opacity:"0",clipPath:"polygon(100% 50%, 0 100%, 0 0)",left:"13px",marginTop:"6px",boxSizing:"content-box","@sm":{content:"unset"}},strong:{marginLeft:"1rem"},"&:hover":{color:"$accent","&::before":{backgroundColor:"$accent",opacity:"1"},"&::after":{content:"",width:"4px",height:"6px",position:"absolute",backgroundColor:"$secondary",clipPath:"polygon(100% 50%, 0 100%, 0 0)",opacity:"1"}},"&[aria-checked='true']":{backgroundColor:"#6663","&::before":{content:"",width:"6px",height:"6px",position:"absolute",backgroundColor:"transparent",border:"3px solid $accentMuted",borderRadius:"12px",left:"8px",marginTop:"4px",opacity:"1",animation:"1s linear infinite",animationName:mJ,boxSizing:"content-box","@sm":{content:"unset"}},"&::after":{content:"",width:"6px",height:"6px",position:"absolute",backgroundColor:"transparent",border:"3px solid $accent",clipPath:"polygon(100% 0, 100% 100%, 0 0)",borderRadius:"12px",left:"8px",marginTop:"4px",opacity:"1",animation:"1.5s linear infinite",animationName:mJ,boxSizing:"content-box","@sm":{content:"unset"}}}}),m2=e=>{for(;e&&e!==document.body;){let t=window.getComputedStyle(e).overflowY;if("visible"!==t&&"hidden"!==t&&e.scrollHeight>e.clientHeight)return e;e=e.parentNode}return null},m3=({label:e,start:t,end:n})=>{var r,i;let a=mT(),{configOptions:s,isAutoScrollEnabled:o,isUserScrolling:l}=mE(),c=null==(i=null==(r=null==s?void 0:s.informationPanel)?void 0:r.vtt)?void 0:i.autoScroll,[u,d]=(0,J.useState)(!1),h=(0,J.useRef)(null),p=document.getElementById("clover-iiif-video");return(0,J.useEffect)(()=>(null==p||p.addEventListener("timeupdate",()=>{let{currentTime:e}=p;d(t<=e&&e<n)}),()=>document.removeEventListener("timeupdate",()=>{})),[n,t,p]),(0,J.useEffect)(()=>{var e,t;if(o&&u&&h.current&&!l){let n=h.current;if(n&&n instanceof HTMLElement){let r=m2(n);if(r&&r instanceof HTMLElement){let i;switch(null==(e=null==c?void 0:c.settings)?void 0:e.block){case"center":let s=r.getBoundingClientRect();i=n.offsetTop+n.offsetHeight-Math.floor((s.bottom-s.top)/2);break;case"end":i=n.offsetTop+n.offsetHeight-(r.clientHeight-n.clientHeight)+2;break;default:i=n.offsetTop-2}t=()=>{var e;return r.scrollTo({top:i,left:0,behavior:null==(e=null==c?void 0:c.settings)?void 0:e.behavior})},a({type:"updateAutoScrolling",isAutoScrolling:!0}),t(),setTimeout(()=>a({type:"updateAutoScrolling",isAutoScrolling:!1}),750)}}}},[c,u,l,o,a]),J.createElement(m1,{ref:h,"aria-checked":u,"data-testid":"information-panel-cue",onClick:()=>{p&&(p.pause(),p.currentTime=t,p.play())},value:e},e,J.createElement("strong",null,mi(t)))},m4=mS("ul",{listStyle:"none",paddingLeft:"1rem",position:"relative","&&:first-child":{paddingLeft:"0"},"& li ul":{[`& ${m1}`]:{backgroundColor:"unset","&::before":{content:"none"},"&::after":{content:"none"}}},"&:first-child":{margin:"0 0 1.618rem"}}),m5=({items:e})=>J.createElement(m4,null,e.map(e=>{let{text:t,start:n,end:r,children:i,identifier:a}=e;return J.createElement("li",{key:a},J.createElement(m3,{label:t,start:n,end:r}),i&&J.createElement(m5,{items:i}))})),m6=({label:e,vttUri:t})=>{let[n,r]=J.useState([]),{createNestedCues:i,orderCuesByTime:a}=mZ(),[s,o]=J.useState();return(0,J.useEffect)(()=>{t&&fetch(t,{headers:{"Content-Type":"text/plain",Accept:"application/json"}}).then(e=>e.text()).then(e=>{r(i(a((0,fp.parse)(e).cues)))}).catch(e=>{console.error(t,e.toString()),o(e)})},[t]),J.createElement(m0,{"data-testid":"annotation-item-vtt","aria-label":`navigate ${mA(e,"en")}`},s&&J.createElement("div",{"data-testid":"error-message"},"Network Error: ",s.toString()),J.createElement(m5,{items:n}))},m8=e=>{var t,n;let r={id:"string"==typeof e?e:e.source};if("string"==typeof e){if(e.includes("#xywh=")){let t=e.split("#xywh=");if(t&&t[1]){let[e,n,i,a]=t[1].split(",").map(e=>Number(e));r={id:t[0],rect:{x:e,y:n,w:i,h:a}}}}else if(e.includes("#t=")){let t=e.split("#t=");t&&t[1]&&(r={id:t[0],t:t[1]})}}else"object"==typeof e&&((null==(t=e.selector)?void 0:t.type)==="PointSelector"?r={id:e.source,point:{x:e.selector.x,y:e.selector.y}}:(null==(n=e.selector)?void 0:n.type)==="SvgSelector"&&(r={id:e.source,svg:e.selector.value}));return r},m9=window.OpenSeadragon;if(!m9&&!(m9=Z))throw Error("OpenSeadragon is missing.");let m7="http://www.w3.org/2000/svg";m9.Viewer&&(m9.Viewer.prototype.svgOverlay=function(){return this._svgOverlayInfo||(this._svgOverlayInfo=new ge(this)),this._svgOverlayInfo});let ge=function(e){let t=this;this._viewer=e,this._containerWidth=0,this._containerHeight=0,this._svg=document.createElementNS(m7,"svg"),this._svg.style.position="absolute",this._svg.style.left=0,this._svg.style.top=0,this._svg.style.width="100%",this._svg.style.height="100%",this._viewer.canvas.appendChild(this._svg),this._node=document.createElementNS(m7,"g"),this._svg.appendChild(this._node),this._viewer.addHandler("animation",function(){t.resize()}),this._viewer.addHandler("open",function(){t.resize()}),this._viewer.addHandler("rotate",function(){t.resize()}),this._viewer.addHandler("flip",function(){t.resize()}),this._viewer.addHandler("resize",function(){t.resize()}),this.resize()};ge.prototype={node:function(){return this._node},resize:function(){this._containerWidth!==this._viewer.container.clientWidth&&(this._containerWidth=this._viewer.container.clientWidth,this._svg.setAttribute("width",this._containerWidth)),this._containerHeight!==this._viewer.container.clientHeight&&(this._containerHeight=this._viewer.container.clientHeight,this._svg.setAttribute("height",this._containerHeight));let e=this._viewer.viewport.pixelFromPoint(new m9.Point(0,0),!0),t=this._viewer.viewport.getZoom(!0),n=this._viewer.viewport.getRotation(),r=this._viewer.viewport.getFlip(),i=this._viewer.viewport._containerInnerSize.x,a=i*t,s=a;r&&(a=-a,e.x=-e.x+i),this._node.setAttribute("transform","translate("+e.x+","+e.y+") scale("+a+","+s+") rotate("+n+")")},onClick:function(e,t){new m9.MouseTracker({element:e,clickHandler:t}).setTracking(!0)}};let gt=e=>new ge(e),gn=e=>fetch(`${e.replace(/\/$/,"")}/info.json`).then(e=>e.json()).then(e=>e).catch(t=>{console.error(`The IIIF tilesource ${e.replace(/\/$/,"")}/info.json failed to load: ${t}`)}),gr=e=>{let t,n;return Array.isArray(e)&&(t=e[0])&&(n="@id"in t?t["@id"]:t.id),n},gi=e=>{var t;let n,r;if(gl(e))n=e,r={};else{let i=JSON.parse(function(e){let t=(function(e){let t=e.length%4;if(1===t)throw Error("InvalidLengthError: Input base64url string is the wrong length to determine padding");return e+(t?"====".slice(0,4-t):"")})(e).replace(/-/g,"+").replace(/_/g,"/");return decodeURIComponent("undefined"==typeof atob?ff.from(t,"base64").toString("utf-8"):atob(t)).trim()}(e));switch(null==i?void 0:i.type){case"SpecificResource":case"Range":case"Annotation":r={manifest:n=null==i?void 0:i.target.partOf[0].id,canvas:null==i?void 0:i.target.id};break;case"Canvas":r={manifest:n=null==i?void 0:i.partOf[0].id,canvas:null==i?void 0:i.id};break;case"Manifest":n=null==i?void 0:i.id,r={collection:null==(t=null==i?void 0:i.partOf[0])?void 0:t.id,manifest:null==i?void 0:i.id};break;case"Collection":r={collection:n=null==i?void 0:i.id}}}return{resourceId:n,active:r}},ga=e=>{let{resourceId:t,active:n}=gi(e);return n.collection||n.manifest||t},gs=(e,t)=>{let n=t.items.map(e=>e.id),{active:r}=gi(e),i=r.canvas;return n.includes(i)?i:n[0]},go=(e,t)=>{let{active:n}=gi(e),r=n.manifest,i=t.items.filter(e=>"Manifest"===e.type).map(e=>e.id);return 0==i.length?null:i.includes(r)?r:i[0]},gl=e=>{try{new URL(e)}catch{return!1}return!0};var gc=((u=gc||{}).TiledImage="tiledImage",u.SimpleImage="simpleImage",u);function gu(e,t,n,r){let i=function(e){if(!e)return null;let t=document.createElement("template");return t.innerHTML=e.trim(),t.content.children[0]}(t);if(i)for(let t of i.children)!function e(t,n,r,i){var a;if("#text"===n.nodeName)n.textContent&&(n.textContent.includes(`
`)||console.log("nodeName:",n.nodeName,", textContent:",n.textContent,", childNodes.length",n.childNodes.length));else{let s=function(e,t,n){var r,i,a,s;let o=!1,l=!1,c=!1,u=!1,d=document.createElementNS("http://www.w3.org/2000/svg",e.nodeName);if(e.attributes.length>0)for(let t=0;t<e.attributes.length;t++){let n=e.attributes[t];switch(n.name){case"fill":c=!0;break;case"stroke":o=!0;break;case"stroke-width":l=!0;break;case"fill-opacity":u=!0}d.setAttribute(n.name,n.textContent)}return o||(d.style.stroke=null==(r=t.annotationOverlays)?void 0:r.borderColor),l||(d.style.strokeWidth=null==(i=t.annotationOverlays)?void 0:i.borderWidth),c||(d.style.fill=null==(a=t.annotationOverlays)?void 0:a.backgroundColor),u||(d.style.fillOpacity=null==(s=t.annotationOverlays)?void 0:s.opacity),d.setAttribute("transform",`scale(${n})`),d}(n,r,i),o=gt(t);o.node().append(s),null==(a=o._svg)||a.setAttribute("class","annotation-overlay"),n.childNodes.forEach(n=>{e(t,n,r,i)})}}(e,t,n,r)}let gd=e=>{let t=Array.isArray(null==e?void 0:e.service)&&(null==e?void 0:e.service.length)>0;return{uri:t?gr(null==e?void 0:e.service):null==e?void 0:e.id,imageType:t?gc.TiledImage:gc.SimpleImage}},gh=(e,t)=>({uri:e,imageType:t?gc.TiledImage:gc.SimpleImage}),gp=({caption:e,handleClick:t,imageUri:n})=>J.createElement(mV,{onClick:t},J.createElement("img",{src:n,alt:`A visual annotation for ${e}`}),J.createElement("span",null,e)),gf=({annotation:e})=>{var t,n;let{target:r}=e,{openSeadragonViewer:i,vault:a,activeCanvas:s,configOptions:o}=mE(),l=e.body.map(e=>a.get(e.id)),c=(null==(t=l.find(e=>e.format))?void 0:t.format)||"",u=(null==(n=l.find(e=>e.value))?void 0:n.value)||"",d=a.get({id:s,type:"Canvas"});function h(){var e;if(!r)return;let t=(null==(e=o.annotationOverlays)?void 0:e.zoomLevel)||1,n=m8(r),{point:a,rect:s,svg:l}=n;if(a||s||l){let e=function(e,t,n){let r,i,a=40,s=40;t.rect&&(r=t.rect.x,i=t.rect.y,a=t.rect.w,s=t.rect.h),t.point&&(r=t.point.x,i=t.point.y);let o=1/e.width;return new Z.Rect(r*o-a*o/2*(n-1),i*o-s*o/2*(n-1),a*o*n,s*o*n)}(d,n,t);null==i||i.viewport.fitBounds(e)}}return J.createElement(mq,null,function(){var e,t;switch(c){case"text/plain":return J.createElement(mX,{value:u,handleClick:h});case"text/html":return J.createElement(mK,{value:u,handleClick:h});case"text/vtt":return J.createElement(m6,{label:l[0].label,vttUri:l[0].id||""});case null==(e=c.match(/^image\//))?void 0:e.input:let n=(null==(t=l.find(e=>{var t;return!(null!=(t=e.id)&&t.includes("vault://"))}))?void 0:t.id)||"";return J.createElement(gp,{caption:u,handleClick:h,imageUri:n});default:return J.createElement(mX,{value:u,handleClick:h})}}())},gm=({annotationPage:e})=>{var t;let{vault:n}=mE();if(!e||!e.items||(null==(t=e.items)?void 0:t.length)===0)return J.createElement(J.Fragment,null);let r=e.items.map(e=>n.get(e.id));return r?J.createElement(mY,{"data-testid":"annotation-page"},null==r?void 0:r.map(e=>J.createElement(gf,{key:e.id,annotation:e}))):J.createElement(J.Fragment,null)},gg=mS("div",{padding:" 0 1.618rem 2rem",display:"flex",flexDirection:"column",overflow:"scroll",position:"absolute",fontWeight:"400",fontSize:"1rem",zIndex:"0",img:{maxWidth:"100px",maxHeight:"100px",objectFit:"contain",color:"transparent",margin:"0 0 1rem",borderRadius:"3px",backgroundColor:"$secondaryMuted"},video:{display:"none"},"a, a:visited":{color:"$accent"},p:{fontSize:"1rem",lineHeight:"1.45em",margin:"0"},dl:{margin:"0",dt:{fontWeight:"700",margin:"1rem 0 0.25rem"},dd:{margin:"0"}},".manifest-property-title":{fontWeight:"700",margin:"1rem 0 0.25rem"},"ul, ol":{padding:"0",margin:"0",li:{fontSize:"1rem",lineHeight:"1.45em",listStyle:"none",margin:"0.25rem 0 0.25rem"}}}),gE=mS("div",{position:"relative",width:"100%",height:"100%",zIndex:"0"}),gT=(e,t="none")=>{if(!e)return null;if("string"==typeof e)return[e];if(!e[t]){let t=Object.getOwnPropertyNames(e);if(t.length>0)return e[t[0]]}return e[t]&&Array.isArray(e[t])?e[t]:null},gv=(e,t="none",n=", ")=>{let r=gT(e,t);return Array.isArray(r)?r.join(`${n}`):r};function gy(e,t){let n=Object.keys(e).filter(e=>t.includes(e)?null:e),r={};return n.forEach(t=>{r[t]=e[t]}),r}let gA=mS("span",{}),gb=e=>{let{as:t,label:n}=e,r=gy(e,["as","label"]);return J.createElement(gA,{as:t,...r},gv(n,r.lang))},g_=(e,t="200,",n="full")=>{let r;Array.isArray(e)&&(e=e[0]);let{id:i,service:a}=e;if(!a)return i;if(Array.isArray(e.service)&&e.service.length>0&&(r=a[0]),r){if(r["@id"])return`${r["@id"]}/${n}/${t}/0/default.jpg`;if(r.id)return`${r.id}/${n}/${t}/0/default.jpg`}},gC=mS("img",{objectFit:"cover"}),gS=e=>{let t;let n=(0,J.useRef)(null),{contentResource:r,altAsLabel:i,region:a="full"}=e;i&&(t=gv(i));let s=gy(e,["contentResource","altAsLabel"]),{type:o,id:l,width:c=200,height:u=200,duration:d}=r;(0,J.useEffect)(()=>{if(!l&&!n.current||["Image"].includes(o)||!l.includes("m3u8"))return;let e=new nU.ZP;return n.current&&(e.attachMedia(n.current),e.on(nU.ZP.Events.MEDIA_ATTACHED,function(){e.loadSource(l)})),e.on(nU.ZP.Events.ERROR,function(t,n){if(n.fatal)switch(n.type){case nU.ZP.ErrorTypes.NETWORK_ERROR:console.error(`fatal ${t} network error encountered, try to recover`),e.startLoad();break;case nU.ZP.ErrorTypes.MEDIA_ERROR:console.error(`fatal ${t} media error encountered, try to recover`),e.recoverMediaError();break;default:e.destroy()}}),()=>{e&&(e.detachMedia(),e.destroy())}},[l,o]);let h=(0,J.useCallback)(()=>{if(!n.current)return;let e=0,t=30;if(d&&(t=d),!l.split("#t=")&&d&&(e=.1*d),l.split("#t=").pop()){let t=l.split("#t=").pop();t&&(e=parseInt(t.split(",")[0]))}let r=n.current;r.autoplay=!0,r.currentTime=e,setTimeout(()=>h(),1e3*t)},[d,l]);(0,J.useEffect)(()=>h(),[h]);let p=g_(r,`${c},${u}`,a);switch(o){case"Image":return J.createElement(gC,{as:"img",alt:t,css:{width:c,height:u},key:l,src:p,...s});case"Video":return J.createElement(gC,{as:"video",css:{width:c,height:u},disablePictureInPicture:!0,key:l,loop:!0,muted:!0,onPause:h,ref:n,src:l});default:return console.warn(`Resource type: ${o} is not valid or not yet supported in Primitives.`),J.createElement(J.Fragment,null)}},gI=mS("a",{}),gx=e=>{let{children:t,homepage:n}=e,r=gy(e,["children","homepage"]);return J.createElement(J.Fragment,null,n&&n.map(e=>{let n=gv(e.label,r.lang);return J.createElement(gI,{"aria-label":t?n:void 0,href:e.id,key:e.id,...r},t||n)}))},gk={delimiter:", "},gw=(0,J.createContext)(void 0),gN=()=>{let e=(0,J.useContext)(gw);if(void 0===e)throw Error("usePrimitivesContext must be used with a PrimitivesProvider");return e},gO=({children:e,initialState:t=gk})=>{let n=gR(t,"delimiter");return J.createElement(gw.Provider,{value:{delimiter:n}},e)},gR=(e,t)=>Object.hasOwn(e,t)?e[t].toString():void 0,gL=mS("span",{}),gD=e=>{let{as:t,markup:n}=e,{delimiter:r}=gN();if(!n)return J.createElement(J.Fragment,null);let i=gy(e,["as","markup"]),a={__html:nH(gv(n,i.lang,r),{allowedAttributes:{a:["href"],img:["alt","src","height","width"]},allowedSchemes:["http","https","mailto"],allowedTags:["a","b","br","i","img","p","small","span","sub","sup"]})};return J.createElement(gL,{as:t,...i,dangerouslySetInnerHTML:a})},gM=e=>J.useContext(gw)?J.createElement(gD,{...e}):J.createElement(gO,null,J.createElement(gD,{...e})),gP=({as:e="dd",lang:t,value:n})=>J.createElement(gM,{markup:n,as:e,lang:t}),gF=mS("span",{}),gB=({as:e="dd",customValueContent:t,lang:n,value:r})=>{var i;let{delimiter:a}=gN(),s=null==(i=gT(r,n))?void 0:i.map(e=>(0,J.cloneElement)(t,{value:e}));return J.createElement(gF,{as:e,lang:n},null==s?void 0:s.map((e,t)=>[t>0&&`${a}`,J.createElement(J.Fragment,{key:t},e)]))},gH=e=>{var t;let{item:n,lang:r,customValueContent:i}=e,{label:a,value:s}=n,o=null==(t=gv(a))?void 0:t.replace(" ","-").toLowerCase();return J.createElement("div",{role:"group","data-label":o},J.createElement(gb,{as:"dt",label:a,lang:r}),i?J.createElement(gB,{as:"dd",customValueContent:i,value:s,lang:r}):J.createElement(gP,{as:"dd",value:s,lang:r}))},gU=mS("dl",{}),gG=e=>{let{as:t,customValueContent:n,metadata:r}=e;if(!Array.isArray(r))return J.createElement(J.Fragment,null);let i=mo(e,"customValueDelimiter"),a=gy(e,["as","customValueContent","customValueDelimiter","metadata"]);return J.createElement(gO,{..."string"==typeof i?{initialState:{delimiter:i}}:void 0},r.length>0&&J.createElement(gU,{as:t,...a},r.map((e,t)=>{let r=n?function(e,t){let n=t.filter(t=>{let{matchingLabel:n}=t,r=Object.keys(t.matchingLabel)[0],i=gv(n,r);if(gv(e,r)===i)return!0}).map(e=>e.Content);if(Array.isArray(n))return n[0]}(e.label,n):void 0;return J.createElement(gH,{customValueContent:r,item:e,key:t,lang:null==a?void 0:a.lang})})))};mS("li",{}),mS("ul",{});let gz=mS("li",{}),gj=mS("ul",{}),g$=e=>{let{as:t,rendering:n}=e,r=gy(e,["as","rendering"]);return J.createElement(gj,{as:t},n&&n.map(e=>{let t=gv(e.label,r.lang);return J.createElement(gz,{key:e.id},J.createElement("a",{href:e.id,...r,target:"_blank"},t||e.id))}))},gW=mS("dl",{}),gV=e=>{let{as:t,requiredStatement:n}=e;if(!n)return J.createElement(J.Fragment,null);let r=mo(e,"customValueDelimiter"),i=gy(e,["as","customValueDelimiter","requiredStatement"]);return J.createElement(gO,{..."string"==typeof r?{initialState:{delimiter:r}}:void 0},J.createElement(gW,{as:t,...i},J.createElement(gH,{item:n,lang:i.lang})))},gY=mS("li",{}),gq=mS("ul",{}),gQ=e=>{let{as:t,seeAlso:n}=e,r=gy(e,["as","seeAlso"]);return J.createElement(gq,{as:t},n&&n.map(e=>{let t=gv(e.label,r.lang);return J.createElement(gY,{key:e.id},J.createElement("a",{href:e.id,...r},t||e.id))}))},gX=e=>{let{as:t,summary:n}=e,r=gy(e,["as","customValueDelimiter","summary"]);return J.createElement(gM,{as:t,markup:n,...r})},gK=e=>{let{thumbnail:t,region:n}=e,r=gy(e,["thumbnail"]);return J.createElement(J.Fragment,null,t&&t.map(e=>J.createElement(gS,{contentResource:e,key:e.id,region:n,...r})))},gZ=({homepage:e})=>(null==e?void 0:e.length)===0?J.createElement(J.Fragment,null):J.createElement(J.Fragment,null,J.createElement("span",{className:"manifest-property-title"},"Homepage"),J.createElement(gx,{homepage:e})),gJ=({id:e,htmlLabel:t,parent:n="manifest"})=>J.createElement(J.Fragment,null,J.createElement("span",{className:"manifest-property-title"},t),J.createElement("a",{href:e,target:"_blank",id:`iiif-${n}-id`},e)),g0=({metadata:e,parent:t="manifest"})=>e?J.createElement(J.Fragment,null,J.createElement(gG,{metadata:e,id:`iiif-${t}-metadata`})):J.createElement(J.Fragment,null),g1=({rendering:e})=>(null==e?void 0:e.length)===0?J.createElement(J.Fragment,null):J.createElement(J.Fragment,null,J.createElement("span",{className:"manifest-property-title"},"Alternate formats"),J.createElement(g$,{rendering:e})),g2=({requiredStatement:e,parent:t="manifest"})=>e?J.createElement(J.Fragment,null,J.createElement(gV,{requiredStatement:e,id:`iiif-${t}-required-statement`})):J.createElement(J.Fragment,null),g3=({rights:e})=>e?J.createElement(J.Fragment,null,J.createElement("span",{className:"manifest-property-title"},"Rights"),J.createElement("a",{href:e,target:"_blank"},e)):J.createElement(J.Fragment,null),g4=({seeAlso:e})=>(null==e?void 0:e.length)===0?J.createElement(J.Fragment,null):J.createElement(J.Fragment,null,J.createElement("span",{className:"manifest-property-title"},"See Also"),J.createElement(gQ,{seeAlso:e})),g5=({summary:e,parent:t="manifest"})=>e?J.createElement(J.Fragment,null,J.createElement(gX,{summary:e,as:"p",id:`iiif-${t}-summary`})):J.createElement(J.Fragment,null),g6=({label:e,thumbnail:t})=>(null==t?void 0:t.length)===0?J.createElement(J.Fragment,null):J.createElement(J.Fragment,null,J.createElement(gK,{altAsLabel:e||{none:["resource"]},thumbnail:t,style:{backgroundColor:"#6663",objectFit:"cover"}})),g8=()=>{let{activeManifest:e,vault:t}=mE(),[n,r]=(0,J.useState)(),[i,a]=(0,J.useState)([]),[s,o]=(0,J.useState)([]),[l,c]=(0,J.useState)([]),[u,d]=(0,J.useState)([]);return(0,J.useEffect)(()=>{var n,i,s,l;let u=t.get(e);r(u),(null==(n=u.homepage)?void 0:n.length)>0&&a(t.get(u.homepage)),(null==(i=u.seeAlso)?void 0:i.length)>0&&o(t.get(u.seeAlso)),(null==(s=u.rendering)?void 0:s.length)>0&&c(t.get(u.rendering)),(null==(l=u.thumbnail)?void 0:l.length)>0&&d(t.get(u.thumbnail))},[e,t]),n?J.createElement(gE,null,J.createElement(gg,null,J.createElement(g6,{thumbnail:u,label:n.label}),J.createElement(g5,{summary:n.summary}),J.createElement(g0,{metadata:n.metadata}),J.createElement(g2,{requiredStatement:n.requiredStatement}),J.createElement(g3,{rights:n.rights}),J.createElement(gZ,{homepage:i}),J.createElement(g4,{seeAlso:s}),J.createElement(g1,{rendering:l}),J.createElement(gJ,{id:n.id,htmlLabel:"IIIF Manifest"}))):J.createElement(J.Fragment,null)},g9=({activeCanvas:e,annotationResources:t})=>{let n=mT(),{isAutoScrolling:r,configOptions:{informationPanel:i},isUserScrolling:a}=mE(),[s,o]=(0,J.useState)(),l=null==i?void 0:i.renderAbout,c=null==i?void 0:i.renderAnnotation;return(0,J.useEffect)(()=>{l?o("manifest-about"):t&&(null==t?void 0:t.length)>0&&!l&&o(t[0].id)},[e,l,t]),J.createElement(mU,{"data-testid":"information-panel",defaultValue:s,onValueChange:e=>{o(e)},orientation:"horizontal",value:s,className:"clover-viewer-information-panel"},J.createElement(mG,{"aria-label":"select chapter","data-testid":"information-panel-list"},l&&J.createElement(mz,{value:"manifest-about"},"About"),c&&t&&t.map((e,t)=>J.createElement(mz,{key:t,value:e.id},J.createElement(gb,{label:e.label})))),J.createElement(m$,{handleScroll:function(){if(!r){clearTimeout(a);let e=setTimeout(()=>{n({type:"updateUserScrolling",isUserScrolling:void 0})},1500);n({type:"updateUserScrolling",isUserScrolling:e})}}},l&&J.createElement(mj,{value:"manifest-about"},J.createElement(g8,null)),c&&t&&t.map(e=>J.createElement(mj,{key:e.id,value:e.id},J.createElement(gm,{annotationPage:e})))))},g7=mS("div",{position:"absolute",right:"1rem",top:"1rem",display:"flex",justifyContent:"flex-end",zIndex:"1"}),Ee=mS("input",{flexGrow:"1",border:"none",backgroundColor:"$secondaryMuted",color:"$primary",marginRight:"1rem",height:"2rem",padding:"0 1rem",borderRadius:"2rem",fontFamily:"inherit",fontSize:"1rem",lineHeight:"1rem",boxShadow:"inset 1px 1px 2px #0003","&::placeholder":{color:"$primaryMuted"}}),Et=mS("button",{display:"flex",background:"none",border:"none",width:"2rem !important",height:"2rem !important",padding:"0",margin:"0",fontWeight:"700",borderRadius:"2rem",backgroundColor:"$accent",color:"$secondary",cursor:"pointer",boxSizing:"content-box !important",transition:"$all",svg:{height:"60%",width:"60%",padding:"20%",fill:"$secondary",stroke:"$secondary",opacity:"1",filter:"drop-shadow(5px 5px 5px #000D)",boxSizing:"inherit",transition:"$all"},"&:disabled":{backgroundColor:"transparent",boxShadow:"none",svg:{opacity:"0.25"}}}),En=mS("div",{display:"flex",marginRight:"0.618rem",backgroundColor:"$accentAlt",borderRadius:"2rem",boxShadow:"5px 5px 5px #0003",color:"$secondary",alignItems:"center","> span":{display:"flex",margin:"0 0.5rem",fontSize:"0.7222rem"}}),Er=mS("div",{display:"flex",position:"relative",zIndex:"1",width:"100%",padding:"0",transition:"$all",variants:{isToggle:{true:{paddingTop:"2.618rem",[`& ${g7}`]:{width:"calc(100% - 2rem)","@sm":{width:"calc(100% - 2rem)"}}}}}}),Ei=(e,t)=>{(0,J.useEffect)(()=>{function n(n){n.key===e&&t()}return window.addEventListener("keyup",n),()=>window.removeEventListener("keyup",n)},[])},Ea=()=>J.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},J.createElement("title",null,"Arrow Back"),J.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M244 400L100 256l144-144M120 256h292"})),Es=()=>J.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},J.createElement("title",null,"Arrow Forward"),J.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M268 112l144 144-144 144M392 256H100"})),Eo=()=>J.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},J.createElement("title",null,"Close"),J.createElement("path",{d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"})),El=()=>J.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},J.createElement("title",null,"Search"),J.createElement("path",{d:"M456.69 421.39L362.6 327.3a173.81 173.81 0 0034.84-104.58C397.44 126.38 319.06 48 222.72 48S48 126.38 48 222.72s78.38 174.72 174.72 174.72A173.81 173.81 0 00327.3 362.6l94.09 94.09a25 25 0 0035.3-35.3zM97.92 222.72a124.8 124.8 0 11124.8 124.8 124.95 124.95 0 01-124.8-124.8z"})),Ec=({handleCanvasToggle:e,handleFilter:t,activeIndex:n,canvasLength:r})=>{let[i,a]=(0,J.useState)(!1),[s,o]=(0,J.useState)(!1),[l,c]=(0,J.useState)(!1);return(0,J.useEffect)(()=>{c(0===n),n===r-1?o(!0):o(!1)},[n,r]),Ei("Escape",()=>{a(!1),t("")}),J.createElement(Er,{isToggle:i},J.createElement(g7,null,i&&J.createElement(Ee,{autoFocus:!0,onChange:e=>t(e.target.value),placeholder:"Search"}),!i&&J.createElement(En,null,J.createElement(Et,{onClick:()=>e(-1),disabled:l,type:"button"},J.createElement(Ea,null)),J.createElement("span",null,n+1," of ",r),J.createElement(Et,{onClick:()=>e(1),disabled:s,type:"button"},J.createElement(Es,null))),J.createElement(Et,{onClick:()=>{a(e=>!e),t("")},type:"button"},i?J.createElement(Eo,null):J.createElement(El,null))))},Eu=mS(fh.fC,{display:"flex",flexDirection:"row",flexGrow:"1",padding:"1.618rem",overflowX:"scroll",position:"relative",zIndex:"0"}),Ed=mS("svg",{display:"inline-flex",variants:{isLarge:{true:{height:"4rem",width:"4rem"}},isMedium:{true:{height:"2rem",width:"2rem"}},isSmall:{true:{height:"1rem",width:"1rem"}}}}),Eh=e=>J.createElement(Ed,{...e,"data-testid":"icon-svg",role:"img",viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg"},e.children);Eh.Title=({children:e})=>J.createElement("title",null,e),Eh.Add=()=>J.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M256 112v288M400 256H112"}),Eh.Audio=()=>J.createElement(J.Fragment,null,J.createElement("path",{d:"M232 416a23.88 23.88 0 01-14.2-4.68 8.27 8.27 0 01-.66-.51L125.76 336H56a24 24 0 01-24-24V200a24 24 0 0124-24h69.75l91.37-74.81a8.27 8.27 0 01.66-.51A24 24 0 01256 120v272a24 24 0 01-24 24zm-106.18-80zm-.27-159.86zM320 336a16 16 0 01-14.29-23.19c9.49-18.87 14.3-38 14.3-56.81 0-19.38-4.66-37.94-14.25-56.73a16 16 0 0128.5-14.54C346.19 208.12 352 231.44 352 256c0 23.86-6 47.81-17.7 71.19A16 16 0 01320 336z"}),J.createElement("path",{d:"M368 384a16 16 0 01-13.86-24C373.05 327.09 384 299.51 384 256c0-44.17-10.93-71.56-29.82-103.94a16 16 0 0127.64-16.12C402.92 172.11 416 204.81 416 256c0 50.43-13.06 83.29-34.13 120a16 16 0 01-13.87 8z"}),J.createElement("path",{d:"M416 432a16 16 0 01-13.39-24.74C429.85 365.47 448 323.76 448 256c0-66.5-18.18-108.62-45.49-151.39a16 16 0 1127-17.22C459.81 134.89 480 181.74 480 256c0 64.75-14.66 113.63-50.6 168.74A16 16 0 01416 432z"})),Eh.Close=()=>J.createElement("path",{d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"}),Eh.Download=()=>J.createElement(J.Fragment,null,J.createElement("path",{d:"M336 176h40a40 40 0 0140 40v208a40 40 0 01-40 40H136a40 40 0 01-40-40V216a40 40 0 0140-40h40",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"}),J.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M176 272l80 80 80-80M256 48v288"})),Eh.Image=()=>J.createElement("path",{d:"M416 64H96a64.07 64.07 0 00-64 64v256a64.07 64.07 0 0064 64h320a64.07 64.07 0 0064-64V128a64.07 64.07 0 00-64-64zm-80 64a48 48 0 11-48 48 48.05 48.05 0 0148-48zM96 416a32 32 0 01-32-32v-67.63l94.84-84.3a48.06 48.06 0 0165.8 1.9l64.95 64.81L172.37 416zm352-32a32 32 0 01-32 32H217.63l121.42-121.42a47.72 47.72 0 0161.64-.16L448 333.84z"}),Eh.Video=()=>J.createElement("path",{d:"M464 384.39a32 32 0 01-13-2.77 15.77 15.77 0 01-2.71-1.54l-82.71-58.22A32 32 0 01352 295.7v-79.4a32 32 0 0113.58-26.16l82.71-58.22a15.77 15.77 0 012.71-1.54 32 32 0 0145 29.24v192.76a32 32 0 01-32 32zM268 400H84a68.07 68.07 0 01-68-68V180a68.07 68.07 0 0168-68h184.48A67.6 67.6 0 01336 179.52V332a68.07 68.07 0 01-68 68z"});let Ep=mx({"0%":{opacity:0,transform:"translateY(1rem)"},"100%":{opacity:1,transform:"translateY(0)"}}),Ef=mx({"0%":{opacity:0,transform:"translateY(1rem)"},"100%":{opacity:1,transform:"translateY(0)"}}),Em=mS(me.Eh,{fill:"$secondaryAlt"}),Eg=mS(me.x8,{position:"absolute",right:"0",top:"0",padding:"0.5rem",margin:"0",cursor:"pointer",border:"none",background:"none",fill:"inherit","&:hover":{opacity:"0.75"}}),EE=mS(me.VY,{border:"none",backgroundColor:"white",fill:"inhrerit",padding:"1rem 2rem 1rem 1rem",width:"auto",minWidth:"200px",maxWidth:"350px",borderRadius:"3px",boxShadow:"5px 5px 13px #0002",animationDuration:"0.3s",animationTimingFunction:"cubic-bezier(0.16, 1, 0.3, 1)",'&[data-side="top"]':{animationName:Ef},'&[data-side="bottom"]':{animationName:Ep},'&[data-align="end"]':{[`& ${Em}`]:{margin:"0 0.7rem"}}}),ET=mS(me.xz,{display:"inline-flex",padding:"0.5rem 0",margin:"0 0.5rem 0 0",cursor:"pointer",border:"none",background:"none","> button, > span":{margin:"0"}}),Ev=mS(me.fC,{boxSizing:"content-box"}),Ey=({children:e})=>J.createElement(Ev,null,e);Ey.Trigger=e=>J.createElement(ET,{...e},e.children),Ey.Content=e=>J.createElement(EE,{...e},J.createElement(Em,null),J.createElement(Eg,null,J.createElement(Eh,{isSmall:!0},J.createElement(Eh.Close,null))),e.children);let EA=mS("div",{boxSizing:"border-box",display:"inline-flex",alignItems:"center",borderRadius:"5px",padding:"$1",marginBottom:"$2",marginRight:"$2",backgroundColor:"$lightGrey",color:"$richBlack50",textTransform:"uppercase",fontSize:"$2",objectFit:"contain",lineHeight:"1em !important","&:last-child":{marginRight:"0"},[`${Ed}`]:{position:"absolute",left:"$1",height:"$3",width:"$3"},variants:{isIcon:{true:{position:"relative",paddingLeft:"$5"}}}}),Eb=mS("span",{display:"flex"}),E_=mS("span",{display:"flex",width:"1.2111rem",height:"0.7222rem"}),EC=mS("span",{display:"inline-flex",marginLeft:"5px",marginBottom:"-1px"}),ES=mS(fh.ck,{display:"flex",flexShrink:"0",margin:"0 1.618rem 0 0",padding:"0",cursor:"pointer",background:"none",border:"none",fontFamily:"inherit",lineHeight:"1.25em",fontSize:"1rem",textAlign:"left","&:last-child":{marginRight:"1rem"},figure:{margin:"0",width:"161.8px","> div":{position:"relative",display:"flex",backgroundColor:"$secondaryAlt",width:"inherit",height:"100px",overflow:"hidden",borderRadius:"3px",transition:"$all",img:{width:"100%",height:"100%",objectFit:"cover",filter:"blur(0)",transform:"scale3d(1, 1, 1)",transition:"$all",color:"transparent"},[`& ${Eb}`]:{position:"absolute",right:"0",bottom:"0",[`& ${EA}`]:{margin:"0",paddingLeft:"0",fontSize:"0.7222rem",backgroundColor:"#000d",color:"$secondary",fill:"$secondary",borderBottomLeftRadius:"0",borderTopRightRadius:"0"}}},figcaption:{marginTop:"0.5rem",fontWeight:"400",fontSize:"0.8333rem",display:"-webkit-box",overflow:"hidden",MozBoxOrient:"vertical",WebkitBoxOrient:"vertical",WebkitLineClamp:"5","@sm":{fontSize:"0.8333rem"}}},"&[aria-checked='true']":{figure:{"> div":{backgroundColor:"$primaryAlt","&::before":{position:"absolute",zIndex:"1",color:"$secondaryMuted",content:"Active Item",textTransform:"uppercase",fontWeight:"700",fontSize:"0.6111rem",letterSpacing:"0.03rem",display:"flex",width:"100%",height:"100%",flexDirection:"column",justifyContent:"center",textAlign:"center",textShadow:"5px 5px 5px #0003"},img:{opacity:"0.3",transform:"scale3d(1.1, 1.1, 1.1)",filter:"blur(2px)"},[`& ${Eb}`]:{[`& ${EA}`]:{backgroundColor:"$accent"}}}},figcaption:{fontWeight:"700"}}}),EI=({type:e})=>{switch(e){case"Sound":return J.createElement(Eh.Audio,null);case"Image":default:return J.createElement(Eh.Image,null);case"Video":return J.createElement(Eh.Video,null)}},Ex=({canvas:e,canvasIndex:t,isActive:n,thumbnail:r,type:i,handleChange:a})=>J.createElement(ES,{"aria-checked":n,"data-testid":"media-thumbnail","data-canvas":t,onClick:()=>a(e.id),value:e.id},J.createElement("figure",null,J.createElement("div",null,(null==r?void 0:r.id)&&J.createElement("img",{src:r.id,alt:null!=e&&e.label?mA(e.label):""}),J.createElement(Eb,null,J.createElement(EA,{isIcon:!0,"data-testid":"thumbnail-tag"},J.createElement(E_,null),J.createElement(Eh,{"aria-label":i},J.createElement(EI,{type:i})),["Video","Sound"].includes(i)&&J.createElement(EC,null,mi(e.duration))))),(null==e?void 0:e.label)&&J.createElement("figcaption",{"data-testid":"fig-caption"},J.createElement(gb,{label:e.label})))),Ek=e=>e.body?e.body.type:"Image",Ew=({items:e})=>{let t=mT(),{activeCanvas:n,vault:r}=mE(),[i,a]=(0,J.useState)(""),[s,o]=(0,J.useState)([]),[l,c]=(0,J.useState)(0),u=J.useRef(null),d=e=>{n!==e&&t({type:"updateActiveCanvas",canvasId:e})};return(0,J.useEffect)(()=>{if(!s.length){let t=["Image","Sound","Video"];o(e.map(e=>my(r,e,"painting",t)).filter(e=>e.annotations.length>0))}},[e,s.length,r]),(0,J.useEffect)(()=>{s.forEach((e,t)=>{null!=e&&e.canvas&&e.canvas.id===n&&c(t)})},[n,s]),(0,J.useEffect)(()=>{let e=document.querySelector(`[data-canvas="${l}"]`);if(e instanceof HTMLElement&&u.current){let t=e.offsetLeft-u.current.offsetWidth/2+e.offsetWidth/2;u.current.scrollTo({left:t,behavior:"smooth"})}},[l]),J.createElement(J.Fragment,null,J.createElement(Ec,{handleFilter:e=>a(e),handleCanvasToggle:e=>{let t=s[l+e];null!=t&&t.canvas&&d(t.canvas.id)},activeIndex:l,canvasLength:s.length}),J.createElement(Eu,{"aria-label":"select item","data-testid":"media",ref:u},s.filter(e=>{var t;if(null!=(t=e.canvas)&&t.label){let t=mA(e.canvas.label);if(Array.isArray(t))return t[0].toLowerCase().includes(i.toLowerCase())}}).map((e,t)=>{var i,a;return J.createElement(Ex,{canvas:e.canvas,canvasIndex:t,handleChange:d,isActive:n===(null==(i=null==e?void 0:e.canvas)?void 0:i.id),key:null==(a=null==e?void 0:e.canvas)?void 0:a.id,thumbnail:m_(r,e,200,200),type:Ek(e.annotations[0])})})))},EN=mS("button",{position:"absolute",background:"none",border:"none",cursor:"zoom-in",margin:"0",padding:"0",width:"100%",height:"100%",transition:"$all","& img":{width:"100%",height:"100%",objectFit:"contain",color:"transparent",transition:"$all"},variants:{isMedia:{true:{cursor:"pointer"}}}}),EO=mS("button",{display:"flex",height:"2rem",width:"2rem",borderRadius:"2rem",padding:"0",margin:"0",fontFamily:"inherit",background:"none",backgroundColor:"$primary",border:"none",color:"white",cursor:"pointer",marginLeft:"0.618rem",filter:"drop-shadow(2px 2px 5px #0003)",transition:"$all",boxSizing:"content-box !important","&:first-child":{marginLeft:"0"},"@xs":{marginBottom:"0.618rem",marginLeft:"0","&:last-child":{marginBottom:"0"}},svg:{height:"60%",width:"60%",padding:"20%",fill:"$secondary",stroke:"$secondary",filter:"drop-shadow(2px 2px 5px #0003)",transition:"$all",boxSizing:"inherit"},"&:hover, &:focus":{backgroundColor:"$accent"},"&[data-button=rotate-right]":{"&:hover, &:focus":{svg:{rotate:"45deg"}}},"&[data-button=rotate-left]":{transform:"scaleX(-1)","&:hover, &:focus":{svg:{rotate:"45deg"}}},"&[data-button=reset]":{"&:hover, &:focus":{svg:{rotate:"-15deg"}}}}),ER=mS(EO,{position:"absolute",width:"2rem",top:"1rem",right:"1rem",zIndex:100,display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",transition:"$all",borderRadius:"50%",backgroundColor:"$accent",cursor:"pointer","&:hover, &:focus":{backgroundColor:"$accent !important"},variants:{isInteractive:{true:{"&:hover":{opacity:"1"}},false:{}},isMedia:{true:{cursor:"pointer !important"}}},compoundVariants:[{isInteractive:!1,isMedia:!0,css:{top:"50%",right:"50%",width:"4rem",height:"4rem",transform:"translate(50%,-50%)"}}]}),EL=mS("div",{position:"relative",display:"flex",flexDirection:"column",flexGrow:"1",flexShrink:"1",gap:"1rem",zIndex:"0",overflow:"hidden","&:hover":{[`${ER}`]:{backgroundColor:"$accent"},[`${EN}`]:{backgroundColor:"#6662"}}}),ED=mS("div",{width:"100%",height:"100%"}),EM=mS("svg",{height:"19px",color:"$accent",fill:"$accent",stroke:"$accent",display:"flex",margin:"0.25rem 0.85rem"}),EP=mS(mt.xz,{fontSize:"1.25rem",fontWeight:"400",fontFamily:"inherit",alignSelf:"flex-start",flexGrow:"1",cursor:"pointer",transition:"$all",border:"1px solid #6663",boxShadow:"2px 2px 5px #0001",borderRadius:"3px",display:"flex",alignItems:"center",paddingLeft:"0.5rem",width:"100%","@sm":{fontSize:"1rem"}}),EF=mS(mt.VY,{borderRadius:"3px",boxShadow:"3px 3px 8px #0003",backgroundColor:"$secondary",marginTop:"2.25rem",marginLeft:"6px",paddingBottom:"0.25rem",maxHeight:"calc(61.8vh - 2.5rem) !important",borderTopLeftRadius:"0",border:"1px solid $secondaryMuted",maxWidth:"90vw"}),EB=mS(mt.ck,{display:"flex",alignItems:"center",fontFamily:"inherit",padding:"0.25rem 0.5rem",color:"$primary",fontWeight:"400",fontSize:"0.8333rem",cursor:"pointer",backgroundColor:"$secondary",width:"calc(100% - 1rem)","> span":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},'&[data-state="checked"]':{fontWeight:"700",color:"$primary !important"},"&:hover":{color:"$accent"},img:{width:"31px",height:"31px",marginRight:"0.5rem",borderRadius:"3px"}}),EH=mS(mt.__,{color:"$primaryMuted",fontFamily:"inherit",fontSize:"0.85rem",padding:"0.5rem 1rem 0.5rem 0.5rem",display:"flex",alignItems:"center",marginBottom:"0.25rem",borderRadius:"3px",borderTopLeftRadius:"0",borderBottomLeftRadius:"0",borderBottomRightRadius:"0",backgroundColor:"$secondaryMuted"}),EU=mS(mt.fC,{position:"relative",zIndex:"5",width:"100%"}),EG=({direction:e,title:t})=>J.createElement(EM,{xmlns:"http://www.w3.org/2000/svg",focusable:"false",viewBox:"0 0 512 512",role:"img"},J.createElement("title",null,t),"up"===e&&J.createElement(()=>J.createElement("path",{d:"M414 321.94L274.22 158.82a24 24 0 00-36.44 0L98 321.94c-13.34 15.57-2.28 39.62 18.22 39.62h279.6c20.5 0 31.56-24.05 18.18-39.62z"}),null),"down"===e&&J.createElement(()=>J.createElement("path",{d:"M98 190.06l139.78 163.12a24 24 0 0036.44 0L414 190.06c13.34-15.57 2.28-39.62-18.22-39.62h-279.6c-20.5 0-31.56 24.05-18.18 39.62z"}),null)),Ez=({children:e,label:t,maxHeight:n,onValueChange:r,value:i})=>J.createElement(EU,{onValueChange:r,value:i},J.createElement(EP,{"data-testid":"select-button"},J.createElement(mt.ki,{"data-testid":"select-button-value"}),J.createElement(mt.GV,null,J.createElement(EG,{direction:"down",title:"select"}))),J.createElement(mt.ue,null,J.createElement(EF,{css:{maxHeight:`${n} !important`},"data-testid":"select-content"},J.createElement(mt.Pn,null,J.createElement(EG,{direction:"up",title:"scroll up for more"})),J.createElement(mt.Q_,null,J.createElement(mt.DI,null,t&&J.createElement(EH,null,J.createElement(gb,{"data-testid":"select-label",label:t})),e)),J.createElement(mt.Jk,null,J.createElement(EG,{direction:"down",title:"scroll down for more"}))))),Ej=e=>J.createElement(EB,{...e},e.thumbnail&&J.createElement(gK,{thumbnail:e.thumbnail}),J.createElement(mt.S_,null,J.createElement(gb,{label:e.label})),J.createElement(mt.o6,null)),E$=mS("div",{position:"absolute !important",zIndex:"1",top:"1rem",left:"1rem",width:"161.8px",height:"100px",backgroundColor:"#000D",boxShadow:"5px 5px 5px #0002",borderRadius:"3px",".displayregion":{border:" 3px solid $accent !important",boxShadow:"0 0 3px #0006"},"@sm":{width:"123px",height:"76px"},"@xs":{width:"100px",height:"61.8px"}}),EW=mS("div",{position:"relative",width:"100%",height:"100%",zIndex:"0"}),EV=mS("div",{width:"100%",height:"100%",maxHeight:"100vh",background:"transparent",backgroundSize:"contain",color:"white",position:"relative",zIndex:"0",overflow:"hidden",variants:{hasNavigator:{true:{[`${E$}`]:{display:"block"}},false:{[`${E$}`]:{display:"none"}}}}}),EY=({className:e,id:t,label:n,children:r})=>{let i=n.toLowerCase().replace(/\s/g,"-");return J.createElement(EO,{id:t,className:e,"data-testid":"openseadragon-button","data-button":i},J.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-labelledby":`${t}-svg-title`,"data-testid":"openseadragon-button-svg",focusable:"false",viewBox:"0 0 512 512",role:"img"},J.createElement("title",{id:`${t}-svg-title`},n),r))},Eq=mS("div",{position:"absolute",zIndex:"1",top:"1rem",right:"1rem",display:"flex","@xs":{flexDirection:"column",zIndex:"2"},variants:{hasPlaceholder:{true:{right:"3.618rem","@xs":{top:"3.618rem",right:"1rem"}},false:{right:"1rem","@xs":{top:"1rem",right:"1rem"}}}}}),EQ=()=>J.createElement("path",{strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M256 112v288M400 256H112"}),EX=()=>J.createElement("path",{strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M400 256H112"}),EK=()=>J.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M432 320v112H320M421.8 421.77L304 304M80 192V80h112M90.2 90.23L208 208M320 80h112v112M421.77 90.2L304 208M192 432H80V320M90.23 421.8L208 304"}),EZ=()=>J.createElement("path",{d:"M448 440a16 16 0 01-12.61-6.15c-22.86-29.27-44.07-51.86-73.32-67C335 352.88 301 345.59 256 344.23V424a16 16 0 01-27 11.57l-176-168a16 16 0 010-23.14l176-168A16 16 0 01256 88v80.36c74.14 3.41 129.38 30.91 164.35 81.87C449.32 292.44 464 350.9 464 424a16 16 0 01-16 16z"}),EJ=()=>J.createElement(J.Fragment,null,J.createElement("path",{fill:"none",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M400 148l-21.12-24.57A191.43 191.43 0 00240 64C134 64 48 150 48 256s86 192 192 192a192.09 192.09 0 00181.07-128"}),J.createElement("path",{d:"M464 97.42V208a16 16 0 01-16 16H337.42c-14.26 0-21.4-17.23-11.32-27.31L436.69 86.1C446.77 76 464 83.16 464 97.42z"})),E0=({_cloverViewerHasPlaceholder:e,config:t})=>J.createElement(Eq,{"data-testid":"clover-iiif-image-openseadragon-controls",hasPlaceholder:e},t.showZoomControl&&J.createElement(J.Fragment,null,J.createElement(EY,{id:t.zoomInButton,label:"zoom in"},J.createElement(EQ,null)),J.createElement(EY,{id:t.zoomOutButton,label:"zoom out"},J.createElement(EX,null))),t.showFullPageControl&&J.createElement(EY,{id:t.fullPageButton,label:"full page"},J.createElement(EK,null)),t.showRotationControl&&J.createElement(J.Fragment,null,J.createElement(EY,{id:t.rotateRightButton,label:"rotate right"},J.createElement(EJ,null)),J.createElement(EY,{id:t.rotateLeftButton,label:"rotate left"},J.createElement(EJ,null))),t.showHomeControl&&J.createElement(EY,{id:t.homeButton,label:"reset"},J.createElement(EZ,null))),E1=({ariaLabel:e,config:t,uri:n,_cloverViewerHasPlaceholder:r,imageType:i,openSeadragonCallback:a})=>{let[s,o]=(0,J.useState)(),[l,c]=(0,J.useState)(),u=(0,J.useRef)(!1);return(0,J.useEffect)(()=>(u.current||(u.current=!0,l||c(Z(t))),()=>null==l?void 0:l.destroy()),[]),(0,J.useEffect)(()=>{l&&a&&a(l)},[l,a]),(0,J.useEffect)(()=>{l&&n!==s&&(null==l||l.forceRedraw(),o(n))},[l,s,n]),(0,J.useEffect)(()=>{if(s&&l)switch(i){case"simpleImage":null==l||l.addSimpleImage({url:s});break;case"tiledImage":gn(s).then(e=>{try{if(!e)throw Error(`No tile source found for ${s}`);null==l||l.addTiledImage({tileSource:e})}catch(e){console.error(e)}});break;default:null==l||l.close(),console.warn(`Unable to render ${s} in OpenSeadragon as type: "${i}"`)}},[i,s]),J.createElement(EV,{className:"clover-iiif-image-openseadragon","data-testid":"clover-iiif-image-openseadragon","data-openseadragon-instance":t.id,hasNavigator:t.showNavigator},J.createElement(E0,{_cloverViewerHasPlaceholder:r,config:t}),t.showNavigator&&J.createElement(E$,{id:t.navigatorId,"data-testid":"clover-iiif-image-openseadragon-navigator"}),J.createElement(EW,{id:t.id,"data-testid":"clover-iiif-image-openseadragon-viewport",role:"img",...e&&{"aria-label":e}}))},E2=({_cloverViewerHasPlaceholder:e=!1,body:t,instanceId:n,isTiledImage:r=!1,label:i,src:a="",openSeadragonCallback:s,openSeadragonConfig:o={}})=>{let l=n||eo(),c="string"==typeof i?i:gv(i),u={id:`openseadragon-${l}`,navigatorId:`openseadragon-navigator-${l}`,loadTilesWithAjax:!0,fullPageButton:`fullPage-${l}`,homeButton:`reset-${l}`,rotateLeftButton:`rotateLeft-${l}`,rotateRightButton:`rotateRight-${l}`,zoomInButton:`zoomIn-${l}`,zoomOutButton:`zoomOut-${l}`,showNavigator:!0,showFullPageControl:!0,showHomeControl:!0,showRotationControl:!0,showZoomControl:!0,navigatorBorderColor:"transparent",gestureSettingsMouse:{clickToZoom:!0,dblClickToZoom:!0,pinchToZoom:!0,scrollToZoom:!1},...o},{imageType:d,uri:h}=t?gd(t):gh(a,r);return h?J.createElement(en,{FallbackComponent:mR},J.createElement(E1,{_cloverViewerHasPlaceholder:e,ariaLabel:c,config:u,imageType:d,key:l,uri:h,openSeadragonCallback:s})):null},E3=({isMedia:e,label:t,placeholderCanvas:n,setIsInteractive:r})=>{let{vault:i}=mE(),a=mb(i,n),s=a?a[0]:void 0,o=t?mA(t):["placeholder image"];return J.createElement(EN,{onClick:()=>r(!0),isMedia:e,className:"clover-viewer-placeholder"},J.createElement("img",{src:(null==s?void 0:s.id)||"",alt:o.join(),height:null==s?void 0:s.height,width:null==s?void 0:s.width}))},E4=mS("canvas",{position:"absolute",width:"100%",height:"100%",zIndex:"0"}),E5=J.forwardRef((e,t)=>{let n=J.useRef(null),r=(0,J.useCallback)(()=>{var e,r;if(null!=(e=t.current)&&e.currentTime&&(null==(r=t.current)?void 0:r.currentTime)>0)return;let i=t.current;if(!i)return;let a=new AudioContext,s=a.createMediaElementSource(i),o=a.createAnalyser(),l=n.current;if(!l)return;l.width=i.offsetWidth,l.height=i.offsetHeight;let c=l.getContext("2d");s.connect(o),o.connect(a.destination),o.fftSize=256;let u=o.frequencyBinCount,d=new Uint8Array(u);setInterval(function(){!function(e,t,n,r,i,a){let s=i/n*2.6,o,l=0;e.getByteFrequencyData(r),t.fillStyle="#000000",t.fillRect(0,0,i,a);for(let e=0;e<n;e++)o=2*r[e],t.fillStyle="rgba(78, 42, 132, 1)",t.fillRect(l,a-o,s,o),l+=s+6}(o,c,u,d,l.width,l.height)},20)},[t]);return J.useEffect(()=>{t&&t.current&&(t.current.onplay=r)},[r,t]),J.createElement(E4,{ref:n,role:"presentation"})}),E6=mS("div",{position:"relative",backgroundColor:"$primaryAlt",display:"flex",flexGrow:"0",flexShrink:"1",height:"100%",zIndex:"1",video:{backgroundColor:"transparent",objectFit:"contain",width:"100%",height:"100%",position:"relative",zIndex:"1"}}),E8=({resource:e,ignoreCaptionLabels:t})=>{let n=mA(e.label,"en");return Array.isArray(n)&&n.some(e=>t.includes(e))?null:J.createElement("track",{key:e.id,src:e.id,label:Array.isArray(n)?n[0]:n,srcLang:"en","data-testid":"player-track"})},E9=["application/vnd.apple.mpegurl","vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"],E7=({allSources:e,annotationResources:t,painting:n})=>{let[r,i]=J.useState(0),[a,s]=J.useState(),o=J.useRef(null),l=(null==n?void 0:n.type)==="Sound",{activeCanvas:c,configOptions:u,vault:d}=mE();return(0,J.useEffect)(()=>{if(!n.id||!o.current)return;if(null!=o&&o.current){let e=o.current;e.src=n.id,e.load()}if("m3u8"!==n.id.split(".").pop()&&n.format&&!E9.includes(n.format))return;let e=new nU.ZP({xhrSetup:function(e,t){e.withCredentials=!!u.withCredentials}});return e.attachMedia(o.current),e.on(nU.ZP.Events.MEDIA_ATTACHED,function(){e.loadSource(n.id)}),e.on(nU.ZP.Events.ERROR,function(t,n){if(n.fatal)switch(n.type){case nU.ZP.ErrorTypes.NETWORK_ERROR:console.error(`fatal ${t} network error encountered, try to recover`),e.startLoad();break;case nU.ZP.ErrorTypes.MEDIA_ERROR:console.error(`fatal ${t} media error encountered, try to recover`),e.recoverMediaError();break;default:e.destroy()}}),()=>{if(e&&o.current){let t=o.current;e.detachMedia(),e.destroy(),t.currentTime=0}}},[u.withCredentials,n.id]),(0,J.useEffect)(()=>{var e,t,n,i;let a=d.get(c),o=null!=(e=a.accompanyingCanvas)&&e.id?mb(d,null==(t=a.accompanyingCanvas)?void 0:t.id):null,l=null!=(n=a.placeholderCanvas)&&n.id?mb(d,null==(i=a.placeholderCanvas)?void 0:i.id):null;o&&l?s(0===r?l[0].id:o[0].id):(o&&s(o[0].id),l&&s(l[0].id))},[c,r,d]),(0,J.useEffect)(()=>{if(null!=o&&o.current){let e=o.current;return null==e||e.addEventListener("timeupdate",()=>i(e.currentTime)),()=>document.removeEventListener("timeupdate",()=>{})}},[]),J.createElement(E6,{css:{backgroundColor:u.canvasBackgroundColor,maxHeight:u.canvasHeight,position:"relative"},"data-testid":"player-wrapper",className:"clover-viewer-player-wrapper"},J.createElement("video",{id:"clover-iiif-video",key:n.id,ref:o,controls:!0,height:n.height,width:n.width,crossOrigin:"anonymous",poster:a,style:{maxHeight:u.canvasHeight,position:"relative",zIndex:"1"}},e.map(e=>J.createElement("source",{src:e.id,type:e.format,key:e.id})),(null==t?void 0:t.length)>0&&t.map(e=>{let t=[];return e.items.forEach(e=>{d.get(e.id).body.forEach(e=>{let n=d.get(e.id);t.push(n)})}),t.map(e=>J.createElement(E8,{resource:e,ignoreCaptionLabels:u.ignoreCaptionLabels||[],key:e.id}))}),"Sorry, your browser doesn't support embedded videos."),l&&J.createElement(E5,{ref:o}))},Te=()=>J.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-labelledby":"close-svg-title",focusable:"false",viewBox:"0 0 512 512",role:"img"},J.createElement("title",{id:"close-svg-title"},"close"),J.createElement("path",{d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"})),Tt=({isMedia:e})=>J.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-labelledby":"open-svg-title",focusable:"false",viewBox:"0 0 512 512",role:"img"},J.createElement("title",{id:"open-svg-title"},"open"),e?J.createElement("path",{d:"M133 440a35.37 35.37 0 01-17.5-4.67c-12-6.8-19.46-20-19.46-34.33V111c0-14.37 7.46-27.53 19.46-34.33a35.13 35.13 0 0135.77.45l247.85 148.36a36 36 0 010 61l-247.89 148.4A35.5 35.5 0 01133 440z"}):J.createElement(J.Fragment,null,J.createElement("path",{d:"m456.69,421.39l-94.09-94.09c22.65-30.16,34.88-66.86,34.84-104.58,0-96.34-78.38-174.72-174.72-174.72S48,126.38,48,222.72s78.38,174.72,174.72,174.72c37.72.04,74.42-12.19,104.58-34.84l94.09,94.09c10.29,9.2,26.1,8.32,35.3-1.98,8.48-9.49,8.48-23.83,0-33.32Zm-233.97-73.87c-68.89-.08-124.72-55.91-124.8-124.8h0c0-68.93,55.87-124.8,124.8-124.8s124.8,55.87,124.8,124.8-55.87,124.8-124.8,124.8Z"}),J.createElement("path",{d:"m279.5,197.76h-3.35s-28.47,0-28.47,0v-31.82c-.77-13.79-12.57-24.33-26.36-23.56-12.71.71-22.85,10.86-23.56,23.56v3.35h0v28.47h-31.82c-13.79.77-24.33,12.57-23.56,26.36.71,12.71,10.86,22.85,23.56,23.56h3.35s28.47,0,28.47,0v31.82c.77,13.79,12.57,24.33,26.36,23.56,12.71-.71,22.85-10.86,23.56-23.56v-3.35h0v-28.47h31.82c13.79-.77,24.33-12.57,23.56-26.36-.71-12.71-10.86-22.85-23.56-23.56Z"}))),Tn=({handleToggle:e,isInteractive:t,isMedia:n})=>J.createElement(ER,{onClick:e,isInteractive:t,isMedia:n,"data-testid":"placeholder-toggle"},t?J.createElement(Te,null):J.createElement(Tt,{isMedia:n})),Tr=({activeCanvas:e,annotationResources:t,isMedia:n,painting:r})=>{var i,a,s,o,l,c;let[u,d]=J.useState(0),[h,p]=J.useState(!1),{configOptions:f,customDisplays:m,openSeadragonViewer:g,vault:E,viewerId:T}=mE(),v=mT(),y=E.get(e),A=null==(i=null==y?void 0:y.placeholderCanvas)?void 0:i.id,b=!!A,_=(null==r?void 0:r.length)>1,C=A&&!h&&!n,S=`${T}-${ms(e+u)}`,I=m.find(t=>{var n;let i=!1,{canvasId:a,paintingFormat:s}=t.target;if(Array.isArray(a)&&a.length>0&&(i=a.includes(e)),Array.isArray(s)&&s.length>0){let e=(null==(n=r[u])?void 0:n.format)||"";i=!!(e&&s.includes(e))}return i}),x=[];null==(s=null==(a=t[0])?void 0:a.items)||s.forEach(e=>{let t=E.get(e.id);x.push(t)}),(0,J.useEffect)(()=>{var e;x&&g&&null!=(e=f.annotationOverlays)&&e.renderOverlays&&function(e,t,n,r){if(!e)return;let i=1/t.width;r.forEach(t=>{if(!t.target)return;let{point:r,rect:a,svg:s}=m8(t.target);if(a){let{x:t,y:r,w:s,h:o}=a;(function(e,t,n,r,i,a){let s=new Z.Rect(t,n,r,i),o=document.createElement("div");if(a.annotationOverlays){let{backgroundColor:e,opacity:t,borderType:n,borderColor:r,borderWidth:i}=a.annotationOverlays;o.style.backgroundColor=e,o.style.opacity=t,o.style.border=`${n} ${i} ${r}`,o.className="annotation-overlay"}e.addOverlay(o,s)})(e,t*i,r*i,s*i,o*i,n)}if(r){let{x:t,y:a}=r;gu(e,`
        <svg version="1.1" xmlns="http://www.w3.org/2000/svg">
          <circle cx="${t}" cy="${a}" r="20" />
        </svg>
      `,n,i)}s&&gu(e,s,n,i)})}(g,y,f,x)},[null==y?void 0:y.id,x,g,null==(o=f.annotationOverlays)?void 0:o.renderOverlays]);let k=null==(l=null==I?void 0:I.display)?void 0:l.component;return J.createElement(EL,{className:"clover-viewer-painting"},J.createElement(ED,{style:{backgroundColor:f.canvasBackgroundColor,height:"auto"===f.canvasHeight?"100%":f.canvasHeight}},A&&!n&&J.createElement(Tn,{handleToggle:()=>p(!h),isInteractive:h,isMedia:n}),C&&!n&&J.createElement(E3,{isMedia:n,label:null==y?void 0:y.label,placeholderCanvas:A,setIsInteractive:p}),!C&&!I&&(n?J.createElement(E7,{allSources:r,painting:r[u],annotationResources:t}):r&&J.createElement(E2,{_cloverViewerHasPlaceholder:b,body:r[u],instanceId:S,key:S,openSeadragonCallback:e=>{e&&(null==g?void 0:g.id)!==`openseadragon-${S}`&&v({type:"updateOpenSeadragonViewer",openSeadragonViewer:e})},openSeadragonConfig:f.openSeadragon})),!C&&k&&J.createElement(k,{id:e,annotationBody:r[u],...null==I?void 0:I.display.componentProps})),_&&J.createElement(Ez,{value:null==(c=r[u])?void 0:c.id,onValueChange:e=>{d(r.findIndex(t=>t.id===e))},maxHeight:"200px"},null==r?void 0:r.map(e=>J.createElement(Ej,{value:null==e?void 0:e.id,key:null==e?void 0:e.id,label:null==e?void 0:e.label}))))},Ti=({activeCanvas:e,annotationResources:t,isAudioVideo:n,items:r,painting:i})=>{let{isInformationOpen:a,configOptions:s}=mE(),{informationPanel:o}=s,l=(null==o?void 0:o.renderAbout)&&a,c=(null==o?void 0:o.renderAnnotation)&&t.length>0&&!o.open;return J.createElement(mD,{className:"clover-viewer-content","data-testid":"clover-viewer-content"},J.createElement(mM,null,J.createElement(Tr,{activeCanvas:e,annotationResources:t,isMedia:n,painting:i}),l&&J.createElement(mP,null,J.createElement("span",null,a?"View Items":"More Information")),r.length>1&&J.createElement(mL,{className:"clover-viewer-media-wrapper"},J.createElement(Ew,{items:r,activeItem:0}))),(l||c)&&J.createElement(mB,null,J.createElement(mF,null,J.createElement(g9,{activeCanvas:e,annotationResources:t}))))},Ta=mS(Ey.Trigger,{width:"30px",padding:"5px"}),Ts=mS(Ey.Content,{display:"flex",flexDirection:"column",fontSize:"0.8333rem",border:"none",boxShadow:"2px 2px 5px #0003",zIndex:"2",button:{display:"flex",textDecoration:"none",marginBottom:"0.5em",color:"$accentAlt",cursor:"pointer",background:"$secondary",border:"none","&:last-child":{marginBottom:"0"}}}),To=mS("span",{fontSize:"1.33rem",alignSelf:"flex-start",flexGrow:"0",flexShrink:"1",padding:"1rem","@sm":{fontSize:"1rem"},"&.visually-hidden":{position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",border:"0"}}),Tl=mS("header",{display:"flex",backgroundColor:"transparent !important",justifyContent:"space-between",alignItems:"flex-start",width:"100%",[`> ${EU}`]:{flexGrow:"1",flexShrink:"0"},form:{flexGrow:"0",flexShrink:"1"}}),Tc=mS("div",{display:"flex",alignItems:"flex-end",justifyContent:"flex-end",padding:"1rem",flexShrink:"0",flexGrow:"1"}),Tu=()=>{var e;let t=mT(),{activeManifest:n,collection:r,configOptions:i,vault:a}=mE(),s=null==i?void 0:i.canvasHeight;return J.createElement("div",{style:{margin:"0.75rem"}},J.createElement(Ez,{label:r.label,maxHeight:s,value:n,onValueChange:e=>{t({type:"updateActiveManifest",manifestId:e}),t({type:"updateViewerId",viewerId:eo()})}},null==(e=null==r?void 0:r.items)?void 0:e.map(e=>J.createElement(Ej,{value:e.id,key:e.id,thumbnail:null!=e&&e.thumbnail?a.get(null==e?void 0:e.thumbnail):void 0,label:e.label}))))},Td=(e,t=2500)=>{let[n,r]=(0,J.useState)(),i=(0,J.useCallback)(()=>{navigator.clipboard.writeText(e).then(()=>r("copied"),()=>r("failed"))},[e]);return(0,J.useEffect)(()=>{if(!n)return;let e=setTimeout(()=>r(void 0),t);return()=>clearTimeout(e)},[n]),[n,i]},Th=mS("span",{display:"flex",alignContent:"center",alignItems:"center",padding:"0.125rem 0.25rem 0",marginTop:"-0.125rem",marginLeft:"0.5rem",backgroundColor:"$accent",color:"$secondary",borderRadius:"3px",fontSize:"0.6111rem",textTransform:"uppercase",lineHeight:"1em"}),Tp=({status:e})=>e?J.createElement(Th,{"data-copy-status":e},e):null,Tf=({textPrompt:e,textToCopy:t})=>{let[n,r]=Td(t);return J.createElement("button",{onClick:r},e," ",J.createElement(Tp,{status:n}))},Tm=()=>{let e="#ed1d33",t="#2873ab";return J.createElement("svg",{viewBox:"0 0 493.35999 441.33334",id:"iiif-logo",version:"1.1"},J.createElement("title",null,"IIIF Manifest Options"),J.createElement("g",{transform:"matrix(1.3333333,0,0,-1.3333333,0,441.33333)"},J.createElement("g",{transform:"scale(0.1)"},J.createElement("path",{style:{fill:t},d:"M 65.2422,2178.75 775.242,1915 773.992,15 65.2422,276.25 v 1902.5"}),J.createElement("path",{style:{fill:t},d:"m 804.145,2640.09 c 81.441,-240.91 -26.473,-436.2 -241.04,-436.2 -214.558,0 -454.511,195.29 -535.9527,436.2 -81.4335,240.89 26.4805,436.18 241.0387,436.18 214.567,0 454.512,-195.29 535.954,-436.18"}),J.createElement("path",{style:{fill:e},d:"M 1678.58,2178.75 968.578,1915 969.828,15 1678.58,276.25 v 1902.5"}),J.createElement("path",{style:{fill:e},d:"m 935.082,2640.09 c -81.437,-240.91 26.477,-436.2 241.038,-436.2 214.56,0 454.51,195.29 535.96,436.2 81.43,240.89 -26.48,436.18 -241.04,436.18 -214.57,0 -454.52,-195.29 -535.958,-436.18"}),J.createElement("path",{style:{fill:t},d:"m 1860.24,2178.75 710,-263.75 -1.25,-1900 -708.75,261.25 v 1902.5"}),J.createElement("path",{style:{fill:t},d:"m 2603.74,2640.09 c 81.45,-240.91 -26.47,-436.2 -241.03,-436.2 -214.58,0 -454.52,195.29 -535.96,436.2 -81.44,240.89 26.48,436.18 241.03,436.18 214.57,0 454.51,-195.29 535.96,-436.18"}),J.createElement("path",{style:{fill:e},d:"m 3700.24,3310 v -652.5 c 0,0 -230,90 -257.5,-142.5 -2.5,-247.5 0,-336.25 0,-336.25 l 257.5,83.75 V 1690 l -258.61,-92.5 V 262.5 L 2735.24,0 v 2360 c 0,0 -15,850 965,950"}))))},Tg=mS(mn.fC,{all:"unset",height:"2rem",width:"3.236rem",backgroundColor:"#6663",borderRadius:"9999px",position:"relative",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:focus":{boxShadow:"0 0 0 2px $secondaryAlt"},'&[data-state="checked"]':{backgroundColor:"$accent",boxShadow:"inset 2px 2px 5px #0003"}}),TE=mS(mn.bU,{display:"block",height:"calc(2rem - 12px)",width:"calc(2rem - 12px)",backgroundColor:"$secondary",borderRadius:"100%",boxShadow:"2px 2px 5px #0001",transition:"$all",transform:"translateX(6px)",willChange:"transform",'&[data-state="checked"]':{transform:"translateX(calc(1.236rem + 6px))"}}),TT=mS("label",{fontSize:"0.8333rem",fontWeight:"400",lineHeight:"1em",userSelect:"none",cursor:"pointer",paddingRight:"0.618rem"}),Tv=mS("form",{display:"flex",flexShrink:"0",flexGrow:"1",alignItems:"center",marginLeft:"1.618rem"}),Ty=()=>{var e;let{configOptions:t}=mE(),n=mT(),[r,i]=(0,J.useState)(null==(e=null==t?void 0:t.informationPanel)?void 0:e.open);return(0,J.useEffect)(()=>{n({type:"updateInformationOpen",isInformationOpen:r})},[r,n]),J.createElement(Tv,null,J.createElement(TT,{htmlFor:"information-toggle",css:r?{opacity:"1"}:{}},"More Information"),J.createElement(Tg,{checked:r,onCheckedChange:()=>i(!r),id:"information-toggle","aria-label":"information panel toggle",name:"toggled?"},J.createElement(TE,null)))},TA=mS(Ey.Trigger,{width:"30px",padding:"5px"}),Tb=mS(Ts,{h3:{color:"$primaryAlt",fontSize:"$2",fontWeight:"700",margin:"$2 0"},button:{},"& ul li":{marginBottom:"$1"}});function T_(e,t){let n=[];if(!e)return n;for(let r of e)if(r.id){let e=t.get(r.id);e&&n.push(e)}return n}function TC(e,t){return e.map(({format:e,id:n,label:r})=>({format:e,id:function(e){let{vault:t}=mE();try{let n=e&&t.get(e);if(!n)throw Error(`Vault entity ${e} not found.`);return(null==n?void 0:n["@id"])||(null==n?void 0:n.id)}catch(t){return console.error(t),e}}(n),label:gv(r)||t}))}let TS=()=>{let{allPages:e,individualPages:t}=function(){let e=function(){let{activeCanvas:e,activeManifest:t,vault:n}=mE(),[r,i]=(0,J.useState)({root:[],canvas:[]});return(0,J.useEffect)(()=>{let r=n.get(t),a=n.get(e),s=null==r?void 0:r.rendering,o=null==a?void 0:a.rendering;i({root:T_(s,n),canvas:T_(o,n)})},[e,t,n]),{...r}}();return{allPages:TC((null==e?void 0:e.root)||[],"Root Rendering Label"),individualPages:TC((null==e?void 0:e.canvas)||[],"Canvas Rendering Label")}}(),n=e.length>0||t.length>0,r=e=>{window.open(e,"_blank")};return n?J.createElement(Ey,null,J.createElement(TA,{"data-testid":"download-button"},J.createElement(Eh,null,J.createElement(Eh.Download,null))),J.createElement(Tb,{"data-testid":"download-content"},t.length>0&&J.createElement(J.Fragment,null,J.createElement("h3",null,"Individual Pages"),J.createElement("ul",null,t.map(({format:e,id:t,label:n})=>J.createElement("li",{key:n},J.createElement("button",{onClick:()=>r(t)},n," (",e,")"))))),e.length>0&&J.createElement(J.Fragment,null,J.createElement("h3",null,"All Pages"),J.createElement("ul",null,e.map(({format:e,id:t,label:n})=>J.createElement("li",{key:n},J.createElement("button",{onClick:()=>r(t)},n," (",e,")"))))))):null},TI=e=>{let t=()=>!!window.matchMedia&&window.matchMedia(e).matches,[n,r]=(0,J.useState)(t);return(0,J.useEffect)(()=>{let e=()=>r(t);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),n},Tx=({manifestId:e,manifestLabel:t})=>{let{collection:n,configOptions:r}=mE(),{informationPanel:i,showDownload:a,showIIIFBadge:s,showTitle:o}=r,l=a||s||(null==i?void 0:i.renderToggle),c=TI(mC.sm);return J.createElement(Tl,{className:"clover-viewer-header"},null!=n&&n.items?J.createElement(Tu,null):J.createElement(To,{className:o?"":"visually-hidden"},o&&J.createElement(gb,{label:t,className:"label"})),l&&J.createElement(Tc,null,a&&J.createElement(TS,null),s&&J.createElement(Ey,null,J.createElement(Ta,null,J.createElement(Tm,null)),J.createElement(Ts,null,(null==n?void 0:n.items)&&J.createElement("button",{onClick:e=>{e.preventDefault(),window.open(n.id,"_blank")}},"View Collection"),J.createElement("button",{onClick:t=>{t.preventDefault(),window.open(e,"_blank")}},"View Manifest")," ",(null==n?void 0:n.items)&&J.createElement(Tf,{textPrompt:"Copy Collection URL",textToCopy:n.id}),J.createElement(Tf,{textPrompt:"Copy Manifest URL",textToCopy:e}))),(null==i?void 0:i.renderToggle)&&!c&&J.createElement(Ty,null)))},Tk=(e=!1)=>{let[t,n]=(0,J.useState)(e);return(0,J.useLayoutEffect)(()=>{if(!t)return;let e=document.documentElement.style.overflow;return document.documentElement.style.overflow="hidden",()=>{document.documentElement.style.overflow=e}},[t]),(0,J.useEffect)(()=>{t!==e&&n(e)},[e]),[t,n]},Tw=({manifest:e,theme:t})=>{var n;let r=mE(),i=mT(),{activeCanvas:a,isInformationOpen:s,vault:o,configOptions:l}=r,c=(null==l?void 0:l.canvasHeight)&&["100%","auto"].includes(null==l?void 0:l.canvasHeight),[u,d]=(0,J.useState)(!1),[h,p]=(0,J.useState)(!1),[f,m]=(0,J.useState)([]),[g,E]=(0,J.useState)([]),[T,v]=Tk(!1),y=TI(mC.sm),A=(0,J.useCallback)(e=>{i({type:"updateInformationOpen",isInformationOpen:e})},[i]);return(0,J.useEffect)(()=>{var e;null!=(e=null==l?void 0:l.informationPanel)&&e.open&&A(!y)},[y,null==(n=null==l?void 0:l.informationPanel)?void 0:n.open,A]),(0,J.useEffect)(()=>{if(!y){v(!1);return}v(s)},[s,y,v]),(0,J.useEffect)(()=>{let e=mb(o,a);e&&(p(["Sound","Video"].indexOf(e[0].type)>-1),m(e));let t=mv(o,a);t.length>0&&i({type:"updateInformationOpen",isInformationOpen:!0}),E(t),d(0!==t.length)},[a,o,i]),J.createElement(en,{FallbackComponent:mR},J.createElement(mH,{className:`${t} clover-viewer`,css:{background:null==l?void 0:l.background},"data-body-locked":T,"data-absolute-position":c,"data-information-panel":u,"data-information-panel-open":s},J.createElement(fa,{open:s,onOpenChange:A},J.createElement(Tx,{manifestLabel:e.label,manifestId:e.id}),J.createElement(Ti,{activeCanvas:a,painting:f,annotationResources:g,items:e.items,isAudioVideo:h}))))},TN={ignoreCache:!1,headers:{Accept:"application/json, text/javascript, text/plain"},timeout:5e3,withCredentials:!1};function TO(e,t=null){return{ok:!1,status:e.status,statusText:e.statusText,headers:e.getAllResponseHeaders(),data:t||e.statusText,json:()=>JSON.parse(t||e.statusText)}}let TR=({canvasIdCallback:e=()=>{},customDisplays:t=[],customTheme:n,iiifContent:r,id:i,manifestId:a,options:s})=>{var o,l,c;let u=r;i&&(u=i),a&&(u=a);let d=mu(null==(l=null==(o=null==s?void 0:s.informationPanel)?void 0:o.vtt)?void 0:l.autoScroll);return J.createElement(mg,{initialState:{...mh,customDisplays:t,isAutoScrollEnabled:d.enabled,isInformationOpen:!!(null!=(c=null==s?void 0:s.informationPanel)&&c.open),vault:new nB({customFetcher:e=>(function(e,t=TN){let n=t.headers||TN.headers;return new Promise((r,i)=>{let a=new XMLHttpRequest;a.open("get",e),a.withCredentials=t.withCredentials,n&&Object.keys(n).forEach(e=>a.setRequestHeader(e,n[e])),a.onload=()=>{r({ok:a.status>=200&&a.status<300,status:a.status,statusText:a.statusText,headers:a.getAllResponseHeaders(),data:a.responseText,json:()=>JSON.parse(a.responseText)})},a.onerror=()=>{i(TO(a,"Failed to make request."))},a.ontimeout=()=>{i(TO(a,"Request took longer than expected."))},a.send()})})(e,{withCredentials:null==s?void 0:s.withCredentials,headers:null==s?void 0:s.requestHeaders}).then(e=>JSON.parse(e.data))})}},J.createElement(TL,{iiifContent:u,canvasIdCallback:e,customTheme:n,options:s}))},TL=({canvasIdCallback:e,customTheme:t,iiifContent:n,options:r})=>{let i=mT(),{activeCanvas:a,activeManifest:s,isLoaded:o,vault:l}=mE(),[c,u]=(0,J.useState)(),[d,h]=(0,J.useState)(),p={};return t&&(p=(0,er.jG)("custom",t)),(0,J.useEffect)(()=>{e&&e(a)},[a,e]),(0,J.useEffect)(()=>{s&&l.loadManifest(s).then(e=>{h(e),i({type:"updateActiveCanvas",canvasId:gs(n,e)})}).catch(e=>{console.error(`Manifest failed to load: ${e}`)}).finally(()=>{i({type:"updateIsLoaded",isLoaded:!0})})},[n,s,i,l]),(0,J.useEffect)(()=>{i({type:"updateConfigOptions",configOptions:r});let e=ga(n);l.load(e).then(e=>{u(e)}).catch(e=>{console.error(`The IIIF resource ${n} failed to load: ${e}`)})},[i,n,r,l]),(0,J.useEffect)(()=>{if((null==c?void 0:c.type)==="Collection"){i({type:"updateCollection",collection:c});let e=go(n,c);e&&i({type:"updateActiveManifest",manifestId:e})}else(null==c?void 0:c.type)==="Manifest"&&i({type:"updateActiveManifest",manifestId:c.id})},[i,n,c]),o?d&&d.items?0===d.items.length?(console.log(`The IIIF manifest ${n} does not contain canvases.`),J.createElement(J.Fragment,null)):J.createElement(Tw,{manifest:d,theme:p,key:d.id}):(console.log(`The IIIF manifest ${n} failed to load.`),J.createElement(J.Fragment,null)):J.createElement(J.Fragment,null,"Loading")};var TD=TR}}]);